!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.websdk=t():e.websdk=t()}(this,(function(){return(()=>{var __webpack_modules__={4537:e=>{"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),o=0,n=2,s=!0;n<arguments.length;)r[o++]=arguments[n++];return new Promise((function(n,i){r[o]=function(e){if(s)if(s=!1,e)i(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,i(e))}}))}},7419:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var o=new Array(64),n=new Array(123),s=0;s<64;)n[o[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var n,s=null,i=[],a=0,c=0;t<r;){var u=e[t++];switch(c){case 0:i[a++]=o[u>>2],n=(3&u)<<4,c=1;break;case 1:i[a++]=o[n|u>>4],n=(15&u)<<2,c=2;break;case 2:i[a++]=o[n|u>>6],i[a++]=o[63&u],c=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0)}return c&&(i[a++]=o[n],i[a++]=61,1===c&&(i[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};var i="invalid encoding";r.decode=function(e,t,r){for(var o,s=r,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=n[u]))throw Error(i);switch(a){case 0:o=u,a=1;break;case 1:t[r++]=o<<2|(48&u)>>4,o=u,a=2;break;case 2:t[r++]=(15&o)<<4|(60&u)>>2,o=u,a=3;break;case 3:t[r++]=(3&o)<<6|u,a=0}}if(1===a)throw Error(i);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},5124:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var o=[];function n(e){if("string"!=typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var i=Object.keys(e),a=new Array(i.length+1),c=new Array(i.length),u=0;u<i.length;)a[u]=i[u],c[u]=e[i[u++]];return a[u]=r,Function.apply(null,a).apply(null,c)}return Function(r)()}for(var l=new Array(arguments.length-1),p=0;p<l.length;)l[p]=arguments[++p];if(p=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=l[p++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),p!==l.length)throw Error("parameter count mismatch");return o.push(e),n}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+o.join("\n  ")+"\n}"}return n.toString=s,n}e.exports=t,t.verbose=!1},9211:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}},9054:(e,t,r)=>{"use strict";e.exports=s;var o=r(4537),n=r(7199)("fs");function s(e,t,r){return"function"==typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&n&&n.readFile?n.readFile(e,(function(o,n){return o&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):o?r(o):r(null,t.binary?n:n.toString("utf8"))})):s.xhr(e,t,r):o(s,this,e,t)}s.xhr=function(e,t,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(0!==o.status&&200!==o.status)return r(Error("status "+o.status));if(t.binary){var e=o.response;if(!e){e=[];for(var n=0;n<o.responseText.length;++n)e.push(255&o.responseText.charCodeAt(n))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,o.responseText)}},t.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}},945:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),o=128===r[3];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3]}function s(e,o,n){t[0]=e,o[n]=r[3],o[n+1]=r[2],o[n+2]=r[1],o[n+3]=r[0]}function i(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],t[0]}function a(e,o){return r[3]=e[o],r[2]=e[o+1],r[1]=e[o+2],r[0]=e[o+3],t[0]}e.writeFloatLE=o?n:s,e.writeFloatBE=o?s:n,e.readFloatLE=o?i:a,e.readFloatBE=o?a:i}():function(){function t(e,t,r,o){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,o);else if(isNaN(t))e(2143289344,r,o);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,o);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,o);else{var s=Math.floor(Math.log(t)/Math.LN2);e((n<<31|s+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,r,o)}}function i(e,t,r){var o=e(t,r),n=2*(o>>31)+1,s=o>>>23&255,i=8388607&o;return 255===s?i?NaN:n*(1/0):0===s?1401298464324817e-60*n*i:n*Math.pow(2,s-150)*(i+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,o),e.readFloatLE=i.bind(null,n),e.readFloatBE=i.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),o=128===r[7];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3],o[n+4]=r[4],o[n+5]=r[5],o[n+6]=r[6],o[n+7]=r[7]}function s(e,o,n){t[0]=e,o[n]=r[7],o[n+1]=r[6],o[n+2]=r[5],o[n+3]=r[4],o[n+4]=r[3],o[n+5]=r[2],o[n+6]=r[1],o[n+7]=r[0]}function i(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],r[4]=e[o+4],r[5]=e[o+5],r[6]=e[o+6],r[7]=e[o+7],t[0]}function a(e,o){return r[7]=e[o],r[6]=e[o+1],r[5]=e[o+2],r[4]=e[o+3],r[3]=e[o+4],r[2]=e[o+5],r[1]=e[o+6],r[0]=e[o+7],t[0]}e.writeDoubleLE=o?n:s,e.writeDoubleBE=o?s:n,e.readDoubleLE=o?i:a,e.readDoubleBE=o?a:i}():function(){function t(e,t,r,o,n,s){var i=o<0?1:0;if(i&&(o=-o),0===o)e(0,n,s+t),e(1/o>0?0:2147483648,n,s+r);else if(isNaN(o))e(0,n,s+t),e(2146959360,n,s+r);else if(o>17976931348623157e292)e(0,n,s+t),e((i<<31|2146435072)>>>0,n,s+r);else{var a;if(o<22250738585072014e-324)e((a=o/5e-324)>>>0,n,s+t),e((i<<31|a/4294967296)>>>0,n,s+r);else{var c=Math.floor(Math.log(o)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=o*Math.pow(2,-c))>>>0,n,s+t),e((i<<31|c+1023<<20|1048576*a&1048575)>>>0,n,s+r)}}}function i(e,t,r,o,n){var s=e(o,n+t),i=e(o,n+r),a=2*(i>>31)+1,c=i>>>20&2047,u=4294967296*(1048575&i)+s;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=i.bind(null,n,0,4),e.readDoubleBE=i.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function o(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},8626:(e,t)=>{"use strict";var r=t,o=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},n=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=o(e),n="";r&&(n=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return n+t.join("/")};r.resolve=function(e,t,r){return r||(t=n(t)),o(t)?t:(r||(e=n(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?n(e+"/"+t):t)}},6662:e=>{"use strict";e.exports=function(e,t,r){var o=r||8192,n=o>>>1,s=null,i=o;return function(r){if(r<1||r>n)return e(r);i+r>o&&(s=e(o),i=0);var a=t.call(s,i,i+=r);return 7&i&&(i=1+(7|i)),a}}},4997:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var o,n=null,s=[],i=0;t<r;)(o=e[t++])<128?s[i++]=o:o>191&&o<224?s[i++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[i++]=55296+(o>>10),s[i++]=56320+(1023&o)):s[i++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],i>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),i=0);return n?(i&&n.push(String.fromCharCode.apply(String,s.slice(0,i))),n.join("")):String.fromCharCode.apply(String,s.slice(0,i))},r.write=function(e,t,r){for(var o,n,s=r,i=0;i<e.length;++i)(o=e.charCodeAt(i))<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&56320==(64512&(n=e.charCodeAt(i+1)))?(o=65536+((1023&o)<<10)+(1023&n),++i,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128);return r-s}},4188:(e,t,r)=>{var o,n,s;!function(i){"use strict";if(null!=t&&"number"!=typeof t.nodeType)e.exports=i();else if(null!=r.amdO)n=[],void 0===(s="function"==typeof(o=i)?o.apply(t,n):o)||(e.exports=s);else{var a=i(),c="undefined"!=typeof self?self:$.global;"function"!=typeof c.btoa&&(c.btoa=a.btoa),"function"!=typeof c.atob&&(c.atob=a.atob)}}((function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:function(r){for(var o,n,s=String(r),i=0,a=e,c="";s.charAt(0|i)||(a="=",i%1);c+=a.charAt(63&o>>8-i%1*8)){if((n=s.charCodeAt(i+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");o=o<<8|n}return c},atob:function(r){var o=String(r).replace(/[=]+$/,"");if(o.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,s,i=0,a=0,c="";s=o.charAt(a++);~s&&(n=i%4?64*n+s:s,i++%4)?c+=String.fromCharCode(255&n>>(-2*i&6)):0)s=e.indexOf(s);return c}}}))},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},3720:e=>{e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function o(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=o;var n={},s={};function i(e,t){var r,o,i;return t?(i=0<=(e>>>=0)&&e<256)&&(o=s[e])?o:(r=c(e,(0|e)<0?-1:0,!0),i&&(s[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(o=n[e])?o:(r=c(e,e<0?-1:0,!1),i&&(n[e]=r),r)}function a(e,t){if(isNaN(e))return t?E:y;if(t){if(e<0)return E;if(e>=h)return O}else{if(e<=-f)return R;if(e+1>=f)return v}return e<0?a(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,o){return new r(e,t,o)}r.fromInt=i,r.fromNumber=a,r.fromBits=c;var u=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return l(e.substring(1),t,r).neg();for(var n=a(u(r,8)),s=y,i=0;i<e.length;i+=8){var c=Math.min(8,e.length-i),p=parseInt(e.substring(i,i+c),r);if(c<8){var d=a(u(r,c));s=s.mul(d).add(a(p))}else s=(s=s.mul(n)).add(a(p))}return s.unsigned=t,s}function p(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=l,r.fromValue=p;var d=4294967296,h=d*d,f=h/2,m=i(1<<24),y=i(0);r.ZERO=y;var E=i(0,!0);r.UZERO=E;var g=i(1);r.ONE=g;var _=i(1,!0);r.UONE=_;var T=i(-1);r.NEG_ONE=T;var v=c(-1,2147483647,!1);r.MAX_VALUE=v;var O=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=O;var R=c(0,-2147483648,!1);r.MIN_VALUE=R;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(R)){var t=a(e),r=this.div(t),o=r.mul(t).sub(this);return r.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=a(u(e,6),this.unsigned),s=this,i="";;){var c=s.div(n),l=(s.sub(c.mul(n)).toInt()>>>0).toString(e);if((s=c).isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return o(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(o(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(g)},I.neg=I.negate,I.add=function(e){o(e)||(e=p(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,s=65535&this.low,i=e.high>>>16,a=65535&e.high,u=e.low>>>16,l=0,d=0,h=0,f=0;return h+=(f+=s+(65535&e.low))>>>16,d+=(h+=n+u)>>>16,l+=(d+=r+a)>>>16,l+=t+i,c((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return o(e)||(e=p(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return y;if(o(e)||(e=p(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(R))return e.isOdd()?R:y;if(e.eq(R))return this.isOdd()?R:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return a(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,s=this.low>>>16,i=65535&this.low,u=e.high>>>16,l=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,E=0,g=0,_=0;return g+=(_+=i*h)>>>16,E+=(g+=s*h)>>>16,g&=65535,E+=(g+=i*d)>>>16,f+=(E+=n*h)>>>16,E&=65535,f+=(E+=s*d)>>>16,E&=65535,f+=(E+=i*l)>>>16,f+=r*h+n*d+s*l+i*u,c((g&=65535)<<16|(_&=65535),(f&=65535)<<16|(E&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(o(e)||(e=p(e)),e.isZero())throw Error("division by zero");var r,n,s;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?E:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return E;if(e.gt(this.shru(1)))return _;s=E}else{if(this.eq(R))return e.eq(g)||e.eq(T)?R:e.eq(R)?g:(r=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?g:T:(n=this.sub(e.mul(r)),s=r.add(n.div(e)));if(e.eq(R))return this.unsigned?E:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(r)/Math.LN2),l=i<=48?1:u(2,i-48),d=a(r),h=d.mul(e);h.isNegative()||h.gt(n);)h=(d=a(r-=l,this.unsigned)).mul(e);d.isZero()&&(d=g),s=s.add(d),n=n.sub(h)}return s},I.div=I.divide,I.modulo=function(e){return o(e)||(e=p(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return o(e)||(e=p(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return o(e)||(e=p(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return o(e)||(e=p(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,o){return o?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},3281:(e,t,r)=>{"use strict";e.exports=r(9050)},2967:e=>{"use strict";e.exports=o;var t,r=/\/|\./;function o(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),o[e]=t}o("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),o("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),o("timestamp",{Timestamp:t}),o("empty",{Empty:{fields:{}}}),o("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),o("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),o("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),o.get=function(e){return o[e]||null}},3996:(e,t,r)=>{"use strict";var o=t,n=r(7025),s=r(9935);function i(e,t,r,o){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(d%s){",o);for(var s=t.resolvedType.values,i=Object.keys(s),a=0;a<i.length;++a)t.repeated&&s[i[a]]===t.typeDefault&&e("default:"),e("case%j:",i[a])("case %i:",s[i[a]])("m%s=%j",o,s[i[a]])("break");e("}")}else e('if(typeof d%s!=="object")',o)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",o,r,o);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",o,o);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",o,o);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",o,o);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",o,o,c)('else if(typeof d%s==="string")',o)("m%s=parseInt(d%s,10)",o,o)('else if(typeof d%s==="number")',o)("m%s=d%s",o,o)('else if(typeof d%s==="object")',o)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",o,o,o,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',o)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",o,o,o)("else if(d%s.length)",o)("m%s=d%s",o,o);break;case"string":e("m%s=String(d%s)",o,o);break;case"bool":e("m%s=Boolean(d%s)",o,o)}}return e}function a(e,t,r,o){if(t.resolvedType)t.resolvedType instanceof n?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",o,r,o,o):e("d%s=types[%i].toObject(m%s,o)",o,r,o);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",o,o,o,o);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',o)("d%s=o.longs===String?String(m%s):m%s",o,o,o)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",o,o,o,o,s?"true":"",o);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",o,o,o,o,o);break;default:e("d%s=m%s",o,o)}}return e}o.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var o=0;o<t.length;++o){var a=t[o].resolve(),c=s.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),i(r,a,o,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),i(r,a,o,c+"[i]")("}")("}")):(a.resolvedType instanceof n||r("if(d%s!=null){",c),i(r,a,o,c),a.resolvedType instanceof n||r("}"))}return r("return m")},o.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),o=[],i=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?o:t[u].map?i:c).push(t[u]);if(o.length){for(r("if(o.arrays||o.defaults){"),u=0;u<o.length;++u)r("d%s=[]",s.safeProp(o[u].name));r("}")}if(i.length){for(r("if(o.objects||o.defaults){"),u=0;u<i.length;++u)r("d%s={}",s.safeProp(i[u].name));r("}")}if(c.length){for(r("if(o.defaults){"),u=0;u<c.length;++u){var l=c[u],p=s.safeProp(l.name);if(l.resolvedType instanceof n)r("d%s=o.enums===String?%j:%j",p,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",p)("}else")("d%s=o.longs===String?%j:%i",p,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var d="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",p,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",p,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",p,p)("}")}else r("d%s=%j",p,l.typeDefault)}r("}")}var h=!1;for(u=0;u<t.length;++u){l=t[u];var f=e._fieldsArray.indexOf(l);p=s.safeProp(l.name),l.map?(h||(h=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",p,p)("d%s={}",p)("for(var j=0;j<ks2.length;++j){"),a(r,l,f,p+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",p,p)("d%s=[]",p)("for(var j=0;j<m%s.length;++j){",p),a(r,l,f,p+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",p,l.name),a(r,l,f,p),l.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}},5305:(e,t,r)=>{"use strict";e.exports=function(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof o?"int32":a.type,u="m"+s.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[a.keyType]?t("k=%j",n.defaults[a.keyType]):t("k=null"),void 0!==n.defaults[c]?t("value=%j",n.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===n.basic[c]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==n.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===n.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,c)):void 0===n.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var l=e._fieldsArray[r];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",i(l))}return t("return m")};var o=r(7025),n=r(7063),s=r(9935);function i(e){return"missing required '"+e.name+"'"}},4928:(e,t,r)=>{"use strict";e.exports=function(e){for(var t,r=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(s.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),l=e._fieldsArray.indexOf(u),p=u.resolvedType instanceof o?"int32":u.type,d=n.basic[p];t="m"+s.safeProp(u.name),u.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|n.mapKey[u.keyType],u.keyType),void 0===d?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,p,t),r("}")("}")):u.repeated?(r("if(%s!=null&&%s.length){",t,t),u.packed&&void 0!==n.packed[p]?r("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",p,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===d?i(r,u,l,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(u.id<<3|d)>>>0,p,t)),r("}")):(u.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,u.name),void 0===d?i(r,u,l,t):r("w.uint32(%i).%s(%s)",(u.id<<3|d)>>>0,p,t))}return r("return w")};var o=r(7025),n=r(7063),s=r(9935);function i(e,t,r,o){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,o,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,o,(t.id<<3|2)>>>0)}},7025:(e,t,r)=>{"use strict";e.exports=i;var o=r(3243);((i.prototype=Object.create(o.prototype)).constructor=i).className="Enum";var n=r(9313),s=r(9935);function i(e,t,r,n,s){if(o.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=s||{},this.reserved=void 0,t)for(var i=Object.keys(t),a=0;a<i.length;++a)"number"==typeof t[i[a]]&&(this.valuesById[this.values[i[a]]=t[i[a]]]=i[a])}i.fromJSON=function(e,t){var r=new i(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},i.prototype.add=function(e,t,r){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},i.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},i.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},i.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)}},3548:(e,t,r)=>{"use strict";e.exports=u;var o=r(3243);((u.prototype=Object.create(o.prototype)).constructor=u).className="Field";var n,s=r(7025),i=r(7063),a=r(9935),c=/^required|optional|repeated$/;function u(e,t,r,n,s,u,l){if(a.isObject(n)?(l=s,u=n,n=s=void 0):a.isObject(s)&&(l=u,u=s,s=void 0),o.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!c.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!a.isString(s))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==i.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),o.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=i.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),o.prototype.resolve.call(this)},u.d=function(e,t,r,o){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(n,s){a.decorateType(n.constructor).add(new u(s,e,t,r,{default:o}))}},u._configure=function(e){n=e}},8836:(e,t,r)=>{"use strict";var o=e.exports=r(9482);o.build="light",o.load=function(e,t,r){return"function"==typeof t?(r=t,t=new o.Root):t||(t=new o.Root),t.load(e,r)},o.loadSync=function(e,t){return t||(t=new o.Root),t.loadSync(e)},o.encoder=r(4928),o.decoder=r(5305),o.verifier=r(4497),o.converter=r(3996),o.ReflectionObject=r(3243),o.Namespace=r(9313),o.Root=r(9424),o.Enum=r(7025),o.Type=r(7645),o.Field=r(3548),o.OneOf=r(7598),o.MapField=r(6039),o.Service=r(7513),o.Method=r(4429),o.Message=r(8368),o.wrappers=r(1667),o.types=r(7063),o.util=r(9935),o.ReflectionObject._configure(o.Root),o.Namespace._configure(o.Type,o.Service,o.Enum),o.Root._configure(o.Type),o.Field._configure(o.Type)},9482:(e,t,r)=>{"use strict";var o=t;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}o.build="minimal",o.Writer=r(1173),o.BufferWriter=r(3155),o.Reader=r(1408),o.BufferReader=r(593),o.util=r(9693),o.rpc=r(5994),o.roots=r(5054),o.configure=n,n()},9050:(e,t,r)=>{"use strict";var o=e.exports=r(8836);o.build="full",o.tokenize=r(626),o.parse=r(2228),o.common=r(2967),o.Root._configure(o.Type,o.parse,o.common)},6039:(e,t,r)=>{"use strict";e.exports=i;var o=r(3548);((i.prototype=Object.create(o.prototype)).constructor=i).className="MapField";var n=r(7063),s=r(9935);function i(e,t,r,n,i,a){if(o.call(this,e,t,n,void 0,void 0,i,a),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}i.fromJSON=function(e,t){return new i(e,t.id,t.keyType,t.type,t.options,t.comment)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},i.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},i.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(o,n){s.decorateType(o.constructor).add(new i(n,e,t,r))}}},8368:(e,t,r)=>{"use strict";e.exports=n;var o=r(9693);function n(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}n.create=function(e){return this.$type.create(e)},n.encode=function(e,t){return this.$type.encode(e,t)},n.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},n.decode=function(e){return this.$type.decode(e)},n.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},n.verify=function(e){return this.$type.verify(e)},n.fromObject=function(e){return this.$type.fromObject(e)},n.toObject=function(e,t){return this.$type.toObject(e,t)},n.prototype.toJSON=function(){return this.$type.toObject(this,o.toJSONOptions)}},4429:(e,t,r)=>{"use strict";e.exports=s;var o=r(3243);((s.prototype=Object.create(o.prototype)).constructor=s).className="Method";var n=r(9935);function s(e,t,r,s,i,a,c,u,l){if(n.isObject(i)?(c=i,i=a=void 0):n.isObject(a)&&(c=a,a=void 0),void 0!==t&&!n.isString(t))throw TypeError("type must be a string");if(!n.isString(r))throw TypeError("requestType must be a string");if(!n.isString(s))throw TypeError("responseType must be a string");o.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!i||void 0,this.responseType=s,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=l}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),o.prototype.resolve.call(this))}},9313:(e,t,r)=>{"use strict";e.exports=p;var o=r(3243);((p.prototype=Object.create(o.prototype)).constructor=p).className="Namespace";var n,s,i,a=r(3548),c=r(7598),u=r(9935);function l(e,t){if(e&&e.length){for(var r={},o=0;o<e.length;++o)r[e[o].name]=e[o].toJSON(t);return r}}function p(e,t){o.call(this,e,t),this.nested=void 0,this._nestedArray=null}function d(e){return e._nestedArray=null,e}p.fromJSON=function(e,t){return new p(e,t.options).addJSON(t.nested)},p.arrayToJSON=l,p.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},p.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(p.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),p.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},p.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),o=0;o<r.length;++o)t=e[r[o]],this.add((void 0!==t.fields?n.fromJSON:void 0!==t.values?i.fromJSON:void 0!==t.methods?s.fromJSON:void 0!==t.id?a.fromJSON:p.fromJSON)(r[o],t));return this},p.prototype.get=function(e){return this.nested&&this.nested[e]||null},p.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof i)return this.nested[e].values;throw Error("no such enum: "+e)},p.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof n||e instanceof i||e instanceof s||e instanceof p||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof p&&e instanceof p)||t instanceof n||t instanceof s)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,o=0;o<r.length;++o)e.add(r[o]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},p.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),d(this)},p.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var o=e.shift();if(r.nested&&r.nested[o]){if(!((r=r.nested[o])instanceof p))throw Error("path conflicts with non-namespace objects")}else r.add(r=new p(o))}return t&&r.addJSON(t),r},p.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof p?e[t++].resolveAll():e[t++].resolve();return this.resolve()},p.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var o=this.get(e[0]);if(o){if(1===e.length){if(!t||t.indexOf(o.constructor)>-1)return o}else if(o instanceof p&&(o=o.lookup(e.slice(1),t,!0)))return o}else for(var n=0;n<this.nestedArray.length;++n)if(this._nestedArray[n]instanceof p&&(o=this._nestedArray[n].lookup(e,t,!0)))return o;return null===this.parent||r?null:this.parent.lookup(e,t)},p.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},p.prototype.lookupEnum=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},p.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,i]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},p.prototype.lookupService=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},p._configure=function(e,t,r){n=e,s=t,i=r}},3243:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var o,n=r(9935);function s(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof o&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof o&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof o&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var o=this.parsedOptions;if(r){var s=o.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var i=s[e];n.setProperty(i,r,t)}else(s={})[e]=n.setProperty({},r,t),o.push(s)}else{var a={};a[e]=t,o.push(a)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),o=0;o<r.length;++o)this.setOption(r[o],e[r[o]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){o=e}},7598:(e,t,r)=>{"use strict";e.exports=i;var o=r(3243);((i.prototype=Object.create(o.prototype)).constructor=i).className="OneOf";var n=r(3548),s=r(9935);function i(e,t,r,n){if(Array.isArray(t)||(r=t,t=void 0),o.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}i.fromJSON=function(e,t){return new i(e,t.oneof,t.options,t.comment)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},i.prototype.add=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},i.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},i.prototype.onAdd=function(e){o.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}a(this)},i.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);o.prototype.onRemove.call(this,e)},i.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new i(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},2228:(e,t,r)=>{"use strict";e.exports=I,I.filename=null,I.defaults={keepCase:!1};var o=r(626),n=r(9424),s=r(7645),i=r(3548),a=r(6039),c=r(7598),u=r(7025),l=r(7513),p=r(4429),d=r(7063),h=r(9935),f=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,E=/^-?0[x][0-9a-fA-F]+$/,g=/^0[0-7]+$/,_=/^-?0[0-7]+$/,T=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,v=/^[a-zA-Z_][a-zA-Z_0-9]*$/,O=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,R=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function I(e,t,r){t instanceof n||(r=t,t=new n),r||(r=I.defaults);var S,C,N,A,b,M=r.preferTrailingComment||!1,U=o(e,r.alternateCommentMode||!1),w=U.next,k=U.push,P=U.peek,x=U.skip,L=U.cmnt,G=!0,D=!1,B=t,j=r.keepCase?function(e){return e}:h.camelCase;function H(e,t,r){var o=I.filename;return r||(I.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(o?o+", ":"")+"line "+U.line+")")}function F(){var e,t=[];do{if('"'!==(e=w())&&"'"!==e)throw H(e);t.push(w()),x(e),e=P()}while('"'===e||"'"===e);return t.join("")}function W(e){var t=w();switch(t){case"'":case'"':return k(t),F();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return r*parseInt(e,10);if(y.test(e))return r*parseInt(e,16);if(g.test(e))return r*parseInt(e,8);if(T.test(e))return r*parseFloat(e);throw H(e,"number",!0)}(t)}catch(r){if(e&&O.test(t))return t;throw H(t,"value")}}function q(e,t){var r,o;do{!t||'"'!==(r=P())&&"'"!==r?e.push([o=K(w()),x("to",!0)?K(w()):o]):e.push(F())}while(x(",",!0));x(";")}function K(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw H(e,"id");if(m.test(e))return parseInt(e,10);if(E.test(e))return parseInt(e,16);if(_.test(e))return parseInt(e,8);throw H(e,"id")}function V(){if(void 0!==S)throw H("package");if(S=w(),!O.test(S))throw H(S,"name");B=B.define(S),x(";")}function J(){var e,t=P();switch(t){case"weak":e=N||(N=[]),w();break;case"public":w();default:e=C||(C=[])}t=F(),x(";"),e.push(t)}function z(){if(x("="),A=F(),!(D="proto3"===A)&&"proto2"!==A)throw H(A,"syntax");x(";")}function Y(e,t){switch(t){case"option":return Q(e,t),x(";"),!0;case"message":return function(e,t){if(!v.test(t=w()))throw H(t,"type name");var r=new s(t);X(r,(function(e){if(!Y(r,e))switch(e){case"map":!function(e){x("<");var t=w();if(void 0===d.mapKey[t])throw H(t,"type");x(",");var r=w();if(!O.test(r))throw H(r,"type");x(">");var o=w();if(!v.test(o))throw H(o,"name");x("=");var n=new a(j(o),K(w()),t,r);X(n,(function(e){if("option"!==e)throw H(e);Q(n,e),x(";")}),(function(){te(n)})),e.add(n)}(r);break;case"required":case"repeated":$(r,e);break;case"optional":$(r,D?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!v.test(t=w()))throw H(t,"name");var r=new c(j(t));X(r,(function(e){"option"===e?(Q(r,e),x(";")):(k(e),$(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":q(r.extensions||(r.extensions=[]));break;case"reserved":q(r.reserved||(r.reserved=[]),!0);break;default:if(!D||!O.test(e))throw H(e);k(e),$(r,"optional")}})),e.add(r)}(e,t),!0;case"enum":return function(e,t){if(!v.test(t=w()))throw H(t,"name");var r=new u(t);X(r,(function(e){switch(e){case"option":Q(r,e),x(";");break;case"reserved":q(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!v.test(t))throw H(t,"name");x("=");var r=K(w(),!0),o={};X(o,(function(e){if("option"!==e)throw H(e);Q(o,e),x(";")}),(function(){te(o)})),e.add(t,r,o.comment)}(r,e)}})),e.add(r)}(e,t),!0;case"service":return function(e,t){if(!v.test(t=w()))throw H(t,"service name");var r=new l(t);X(r,(function(e){if(!Y(r,e)){if("rpc"!==e)throw H(e);!function(e,t){var r=L(),o=t;if(!v.test(t=w()))throw H(t,"name");var n,s,i,a,c=t;if(x("("),x("stream",!0)&&(s=!0),!O.test(t=w()))throw H(t);if(n=t,x(")"),x("returns"),x("("),x("stream",!0)&&(a=!0),!O.test(t=w()))throw H(t);i=t,x(")");var u=new p(c,o,n,i,s,a);u.comment=r,X(u,(function(e){if("option"!==e)throw H(e);Q(u,e),x(";")})),e.add(u)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!O.test(t=w()))throw H(t,"reference");var r=t;X(null,(function(t){switch(t){case"required":case"repeated":$(e,t,r);break;case"optional":$(e,D?"proto3_optional":"optional",r);break;default:if(!D||!O.test(t))throw H(t);k(t),$(e,"optional",r)}}))}(e,t),!0}return!1}function X(e,t,r){var o=U.line;if(e&&("string"!=typeof e.comment&&(e.comment=L()),e.filename=I.filename),x("{",!0)){for(var n;"}"!==(n=w());)t(n);x(";",!0)}else r&&r(),x(";"),e&&("string"!=typeof e.comment||M)&&(e.comment=L(o)||e.comment)}function $(e,t,r){var o=w();if("group"!==o){if(!O.test(o))throw H(o,"type");var n=w();if(!v.test(n))throw H(n,"name");n=j(n),x("=");var a=new i(n,K(w()),o,t,r);if(X(a,(function(e){if("option"!==e)throw H(e);Q(a,e),x(";")}),(function(){te(a)})),"proto3_optional"===t){var u=new c("_"+n);a.setOption("proto3_optional",!0),u.add(a),e.add(u)}else e.add(a);D||!a.repeated||void 0===d.packed[o]&&void 0!==d.basic[o]||a.setOption("packed",!1,!0)}else!function(e,t){var r=w();if(!v.test(r))throw H(r,"name");var o=h.lcFirst(r);r===o&&(r=h.ucFirst(r)),x("=");var n=K(w()),a=new s(r);a.group=!0;var c=new i(o,n,r,t);c.filename=I.filename,X(a,(function(e){switch(e){case"option":Q(a,e),x(";");break;case"required":case"repeated":$(a,e);break;case"optional":$(a,D?"proto3_optional":"optional");break;default:throw H(e)}})),e.add(a).add(c)}(e,t)}function Q(e,t){var r=x("(",!0);if(!O.test(t=w()))throw H(t,"name");var o,n=t,s=n;r&&(x(")"),s=n="("+n+")",t=P(),R.test(t)&&(o=t.substr(1),n+=t,w())),x("="),function(e,t,r,o){e.setParsedOption&&e.setParsedOption(t,r,o)}(e,s,Z(e,n),o)}function Z(e,t){if(x("{",!0)){for(var r={};!x("}",!0);){if(!v.test(b=w()))throw H(b,"name");var o,n=b;"{"===P()?o=Z(e,t+"."+b):(x(":"),"{"===P()?o=Z(e,t+"."+b):(o=W(!0),ee(e,t+"."+b,o)));var s=r[n];s&&(o=[].concat(s).concat(o)),r[n]=o,x(",",!0)}return r}var i=W(!0);return ee(e,t,i),i}function ee(e,t,r){e.setOption&&e.setOption(t,r)}function te(e){if(x("[",!0)){do{Q(e,"option")}while(x(",",!0));x("]")}return e}for(;null!==(b=w());)switch(b){case"package":if(!G)throw H(b);V();break;case"import":if(!G)throw H(b);J();break;case"syntax":if(!G)throw H(b);z();break;case"option":Q(B,b),x(";");break;default:if(Y(B,b)){G=!1;continue}throw H(b)}return I.filename=null,{package:S,imports:C,weakImports:N,syntax:A,root:t}}},1408:(e,t,r)=>{"use strict";e.exports=c;var o,n=r(9693),s=n.LongBits,i=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},p=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new o(e):l(e)})(e)}:l};function d(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=p(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){o=e,c.create=p(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:(e,t,r)=>{"use strict";e.exports=s;var o=r(1408);(s.prototype=Object.create(o.prototype)).constructor=s;var n=r(9693);function s(e){o.call(this,e)}s._configure=function(){n.Buffer&&(s.prototype._slice=n.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},9424:(e,t,r)=>{"use strict";e.exports=p;var o=r(9313);((p.prototype=Object.create(o.prototype)).constructor=p).className="Root";var n,s,i,a=r(3548),c=r(7025),u=r(7598),l=r(9935);function p(e){o.call(this,"",e),this.deferred=[],this.files=[]}function d(){}p.fromJSON=function(e,t){return t||(t=new p),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},p.prototype.resolvePath=l.path.resolve,p.prototype.fetch=l.fetch,p.prototype.load=function e(t,r,o){"function"==typeof r&&(o=r,r=void 0);var n=this;if(!o)return l.asPromise(e,n,t,r);var a=o===d;function c(e,t){if(o){var r=o;if(o=null,a)throw e;r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in i)return r}return null}function p(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){s.filename=e;var o,i=s(t,n,r),p=0;if(i.imports)for(;p<i.imports.length;++p)(o=u(i.imports[p])||n.resolvePath(e,i.imports[p]))&&h(o);if(i.weakImports)for(p=0;p<i.weakImports.length;++p)(o=u(i.weakImports[p])||n.resolvePath(e,i.weakImports[p]))&&h(o,!0)}else n.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,n)}function h(e,t){if(!(n.files.indexOf(e)>-1))if(n.files.push(e),e in i)a?p(e,i[e]):(++f,setTimeout((function(){--f,p(e,i[e])})));else if(a){var r;try{r=l.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}p(e,r)}else++f,n.fetch(e,(function(r,s){--f,o&&(r?t?f||c(null,n):c(r):p(e,s))}))}var f=0;l.isString(t)&&(t=[t]);for(var m,y=0;y<t.length;++y)(m=n.resolvePath("",t[y]))&&h(m);if(a)return n;f||c(null,n)},p.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,d)},p.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return o.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var o=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return o.declaringField=t,t.extensionField=o,r.add(o),!0}return!1}p.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)h.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);h.test(e.name)&&(e.parent[e.name]=e)}},p.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)h.test(e.name)&&delete e.parent[e.name];else if(e instanceof o){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);h.test(e.name)&&delete e.parent[e.name]}},p._configure=function(e,t,r){n=e,s=t,i=r}},5054:e=>{"use strict";e.exports={}},5994:(e,t,r)=>{"use strict";t.Service=r(7948)},7948:(e,t,r)=>{"use strict";e.exports=n;var o=r(9693);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,s,i){if(!s)throw TypeError("request must be specified");var a=this;if(!i)return o.asPromise(e,a,t,r,n,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",r,t),i(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){i(e)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:(e,t,r)=>{"use strict";e.exports=a;var o=r(9313);((a.prototype=Object.create(o.prototype)).constructor=a).className="Service";var n=r(4429),s=r(9935),i=r(5994);function a(e,t){o.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var o=Object.keys(t.methods),s=0;s<o.length;++s)r.add(n.fromJSON(o[s],t.methods[o[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return s.toObject(["options",t&&t.options||void 0,"methods",o.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||o.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return o.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof n?(this.methods[e.name]=e,e.parent=this,c(this)):o.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof n){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return o.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var o,n=new i.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=s.lcFirst((o=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");n[c]=s.codegen(["r","c"],s.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return n}},626:e=>{"use strict";e.exports=p;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,o=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,n=/^ *[*/]+ */,s=/^\s*\*?\/*/,i=/\n/g,a=/\s/,c=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"\t"};function l(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}}))}function p(e,c){e=e.toString();var u=0,p=e.length,d=1,h=null,f=null,m=0,y=!1,E=!1,g=[],_=null;function T(e){return Error("illegal "+e+" (line "+d+")")}function v(t){return e.charAt(t)}function O(t,r,o){h=e.charAt(t++),m=d,y=!1,E=o;var a,u=t-(c?2:3);do{if(--u<0||"\n"===(a=e.charAt(u))){y=!0;break}}while(" "===a||"\t"===a);for(var l=e.substring(t,r).split(i),p=0;p<l.length;++p)l[p]=l[p].replace(c?s:n,"").trim();f=l.join("\n").trim()}function R(t){var r=I(t),o=e.substring(t,r);return/^\s*\/{1,2}/.test(o)}function I(e){for(var t=e;t<p&&"\n"!==v(t);)t++;return t}function S(){if(g.length>0)return g.shift();if(_)return function(){var t="'"===_?o:r;t.lastIndex=u-1;var n=t.exec(e);if(!n)throw T("string");return u=t.lastIndex,C(_),_=null,l(n[1])}();var n,s,i,h,f,m=0===u;do{if(u===p)return null;for(n=!1;a.test(i=v(u));)if("\n"===i&&(m=!0,++d),++u===p)return null;if("/"===v(u)){if(++u===p)throw T("comment");if("/"===v(u))if(c){if(h=u,f=!1,R(u)){f=!0;do{if((u=I(u))===p)break;u++}while(R(u))}else u=Math.min(p,I(u)+1);f&&O(h,u,m),d++,n=!0}else{for(f="/"===v(h=u+1);"\n"!==v(++u);)if(u===p)return null;++u,f&&O(h,u-1,m),++d,n=!0}else{if("*"!==(i=v(u)))return"/";h=u+1,f=c||"*"===v(h);do{if("\n"===i&&++d,++u===p)throw T("comment");s=i,i=v(u)}while("*"!==s||"/"!==i);++u,f&&O(h,u-2,m),n=!0}}}while(n);var y=u;if(t.lastIndex=0,!t.test(v(y++)))for(;y<p&&!t.test(v(y));)++y;var E=e.substring(u,u=y);return'"'!==E&&"'"!==E||(_=E),E}function C(e){g.push(e)}function N(){if(!g.length){var e=S();if(null===e)return null;C(e)}return g[0]}return Object.defineProperty({next:S,peek:N,push:C,skip:function(e,t){var r=N();if(r===e)return S(),!0;if(!t)throw T("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t=null;return void 0===e?m===d-1&&(c||"*"===h||y)&&(t=E?f:null):(m<e&&N(),m!==e||y||!c&&"/"!==h||(t=E?null:f)),t}},"line",{get:function(){return d}})}p.unescape=l},7645:(e,t,r)=>{"use strict";e.exports=g;var o=r(9313);((g.prototype=Object.create(o.prototype)).constructor=g).className="Type";var n=r(7025),s=r(7598),i=r(3548),a=r(6039),c=r(7513),u=r(8368),l=r(1408),p=r(1173),d=r(9935),h=r(4928),f=r(5305),m=r(4497),y=r(3996),E=r(1667);function g(e,t){o.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],o=r.id;if(this._fieldsById[o])throw Error("duplicate id "+o+" in "+this);this._fieldsById[o]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=g.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var o={};for(r=0;r<this.oneofsArray.length;++r)o[this._oneofsArray[r].resolve().name]={get:d.oneOfGetter(this._oneofsArray[r].oneof),set:d.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,o)}}}),g.generateConstructor=function(e){for(var t,r=d.codegen(["p"],e.name),o=0;o<e.fieldsArray.length;++o)(t=e._fieldsArray[o]).map?r("this%s={}",d.safeProp(t.name)):t.repeated&&r("this%s=[]",d.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},g.fromJSON=function(e,t){var r=new g(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),l=0;l<u.length;++l)r.add((void 0!==t.fields[u[l]].keyType?a.fromJSON:i.fromJSON)(u[l],t.fields[u[l]]));if(t.oneofs)for(u=Object.keys(t.oneofs),l=0;l<u.length;++l)r.add(s.fromJSON(u[l],t.oneofs[u[l]]));if(t.nested)for(u=Object.keys(t.nested),l=0;l<u.length;++l){var p=t.nested[u[l]];r.add((void 0!==p.id?i.fromJSON:void 0!==p.fields?g.fromJSON:void 0!==p.values?n.fromJSON:void 0!==p.methods?c.fromJSON:o.fromJSON)(u[l],p))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},g.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||void 0,"oneofs",o.arrayToJSON(this.oneofsArray,e),"fields",o.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},g.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return o.prototype.resolveAll.call(this)},g.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},g.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof i&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),_(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),_(this)):o.prototype.add.call(this,e)},g.prototype.remove=function(e){if(e instanceof i&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return o.prototype.remove.call(this,e)},g.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},g.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)},g.prototype.create=function(e){return new this.ctor(e)},g.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=h(this)({Writer:p,types:t,util:d}),this.decode=f(this)({Reader:l,types:t,util:d}),this.verify=m(this)({types:t,util:d}),this.fromObject=y.fromObject(this)({types:t,util:d}),this.toObject=y.toObject(this)({types:t,util:d});var o=E[e];if(o){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=o.fromObject.bind(n),n.toObject=this.toObject,this.toObject=o.toObject.bind(n)}return this},g.prototype.encode=function(e,t){return this.setup().encode(e,t)},g.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},g.prototype.decode=function(e,t){return this.setup().decode(e,t)},g.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},g.prototype.verify=function(e){return this.setup().verify(e)},g.prototype.fromObject=function(e){return this.setup().fromObject(e)},g.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},g.d=function(e){return function(t){d.decorateType(t,e)}}},7063:(e,t,r)=>{"use strict";var o=t,n=r(9935),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function i(e,t){var r=0,o={};for(t|=0;r<e.length;)o[s[r+t]]=e[r++];return o}o.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),o.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),o.long=i([0,0,0,1,1],7),o.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),o.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:(e,t,r)=>{"use strict";var o,n,s=e.exports=r(9693),i=r(5054);s.codegen=r(5124),s.fetch=r(9054),s.path=r(8626),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),o=0;o<t.length;)r[o]=e[t[o++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var o=e[r++],n=e[r++];void 0!==n&&(t[o]=n)}return t};var a=/\\/g,c=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;o||(o=r(7645));var n=new o(t||e.name);return s.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var l=0;s.decorateEnum=function(e){if(e.$type)return e.$type;n||(n=r(7025));var t=new n("Enum"+l++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,o){var n=r.shift();if(r.length>0)t[n]=e(t[n]||{},r,o);else{var s=t[n];s&&(o=[].concat(s).concat(o)),t[n]=o}return t}(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return i.decorated||(i.decorated=new(r(9424)))}})},1945:(e,t,r)=>{"use strict";e.exports=n;var o=r(9693);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=n.zero=new n(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var i=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):s},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===i?s:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},9693:function(e,t,r){"use strict";var o=t;function n(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)void 0!==e[o[n]]&&r||(e[o[n]]=t[o[n]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(4537),o.base64=r(7419),o.EventEmitter=r(9211),o.float=r(945),o.inquire=r(7199),o.utf8=r(4997),o.pool=r(6662),o.LongBits=r(1945),o.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),o.global=o.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=n,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=s,o.ProtocolError=s("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}},4497:(e,t,r)=>{"use strict";e.exports=function(e){var t=n.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r={};e.oneofsArray.length&&t("var p={}");for(var o=0;o<e.fieldsArray.length;++o){var c=e._fieldsArray[o].resolve(),u="m"+n.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,c.name),c.map)t("if(!util.isObject(%s))",u)("return%j",s(c,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),i(t,c,o,u+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",u)("return%j",s(c,"array"))("for(var i=0;i<%s.length;++i){",u),i(t,c,o,u+"[i]")("}");else{if(c.partOf){var l=n.safeProp(c.partOf.name);1===r[c.partOf.name]&&t("if(p%s===1)",l)("return%j",c.partOf.name+": multiple values"),r[c.partOf.name]=1,t("p%s=1",l)}i(t,c,o,u)}c.optional&&t("}")}return t("return null")};var o=r(7025),n=r(9935);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function i(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof o){e("switch(%s){",n)("default:")("return%j",s(t,"enum value"));for(var i=Object.keys(t.resolvedType.values),a=0;a<i.length;++a)e("case %i:",t.resolvedType.values[i[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",n)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',n)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',n)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",n)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",s(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}},1667:(e,t,r)=>{"use strict";var o=t,n=r(8368);o[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var o="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===o.indexOf("/")&&(o="/"+o),this.create({type_url:o,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",o="";if(t&&t.json&&e.type_url&&e.value){o=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var s=this.lookup(o);s&&(e=s.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof n){var i=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),o=r+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),i["@type"]=o,i}return this.toObject(e,t)}}},1173:(e,t,r)=>{"use strict";e.exports=p;var o,n=r(9693),s=n.LongBits,i=n.base64,a=n.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(p.create=function(){return new o})()}:function(){return new p}};function h(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}p.create=d(),p.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(p.alloc=n.pool(p.alloc,n.Array.prototype.subarray)),p.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(m,10,s.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.uint64=function(e){var t=s.from(e);return this._push(m,t.length(),t)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(m,t.length(),t)},p.prototype.bool=function(e){return this._push(h,1,e?1:0)},p.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var E=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(n.isString(e)){var r=p.alloc(t=i.length(e));i.decode(e,r,0),e=r}return this.uint32(t)._push(E,t,e)},p.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(h,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},p._configure=function(e){o=e,p.create=d(),o._configure()}},3155:(e,t,r)=>{"use strict";e.exports=s;var o=r(1173);(s.prototype=Object.create(o.prototype)).constructor=s;var n=r(9693);function s(){o.call(this)}function i(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=n._Buffer_allocUnsafe,s.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},s.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},s._configure()},7129:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function n(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var o,s,i=[];for(s in"string"!=typeof t&&(t="?"),e)if(r.call(e,s)){if((o=e[s])||null!=o&&!isNaN(o)||(o=""),s=n(s),o=n(o),null===s||null===o)continue;i.push(s+"="+o)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,n={};t=r.exec(e);){var s=o(t[1]),i=o(t[2]);null===s||null===i||s in n||(n[s]=i)}return n}},7418:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},8e3:(e,t,r)=>{"use strict";var o=r(7581);e.exports=r(3626)(o),"_sockjs_onload"in r.g&&setTimeout(r.g._sockjs_onload,1)},2530:(e,t,r)=>{"use strict";var o=r(5717),n=r(685);function s(){n.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}o(s,n),e.exports=s},3212:(e,t,r)=>{"use strict";var o=r(5717),n=r(3184);function s(){n.call(this)}o(s,n),s.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},s.prototype.once=function(e,t){var r=this,o=!1;this.on(e,(function n(){r.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}))},s.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var r=arguments.length,o=new Array(r-1),n=1;n<r;n++)o[n-1]=arguments[n];for(var s=0;s<t.length;s++)t[s].apply(this,o)}},s.prototype.on=s.prototype.addListener=n.prototype.addEventListener,s.prototype.removeListener=n.prototype.removeEventListener,e.exports.v=s},685:e=>{"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,r){return this.type=e,this.bubbles=t,this.cancelable=r,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},3184:e=>{"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===r.indexOf(t)&&(r=r.concat([t])),this._listeners[e]=r},t.prototype.removeEventListener=function(e,t){var r=this._listeners[e];if(r){var o=r.indexOf(t);-1===o||(r.length>1?this._listeners[e]=r.slice(0,o).concat(r.slice(o+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,r=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,r),t in this._listeners)for(var o=this._listeners[t],n=0;n<o.length;n++)o[n].apply(this,r)},e.exports=t},3326:(e,t,r)=>{"use strict";var o=r(5717),n=r(685);function s(e){n.call(this),this.initEvent("message",!1,!1),this.data=e}o(s,n),e.exports=s},691:(e,t,r)=>{"use strict";var o=r(3683);function n(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}n.prototype._transportClose=function(e,t){o.postMessage("c",JSON.stringify([e,t]))},n.prototype._transportMessage=function(e){o.postMessage("t",e)},n.prototype._send=function(e){this._transport.send(e)},n.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=n},551:(e,t,r)=>{"use strict";var o=r(273),n=r(7705),s=r(691),i=r(6311),a=r(3683),c=r(7486);e.exports=function(e,t){var r,u={};t.forEach((function(e){e.facadeTransport&&(u[e.facadeTransport.transportName]=e.facadeTransport)})),u[i.transportName]=i,e.bootstrap_iframe=function(){var t;a.currentWindowId=c.hash.slice(1),n.attachEvent("message",(function(n){if(n.source===parent&&(void 0===r&&(r=n.origin),n.origin===r)){var i;try{i=JSON.parse(n.data)}catch(e){return void n.data}if(i.windowId===a.currentWindowId)switch(i.type){case"s":var l;try{l=JSON.parse(i.data)}catch(e){i.data;break}var p=l[0],d=l[1],h=l[2],f=l[3];if(p!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+p+'", the iframe: "'+e.version+'".');if(!o.isOriginEqual(h,c.href)||!o.isOriginEqual(f,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+h+", "+f+")");t=new s(new u[d](h,f));break;case"m":t._send(i.data);break;case"c":t&&t._close(),t=null}}})),a.postMessage("s")}}},2550:(e,t,r)=>{"use strict";var o=r(3212).v,n=r(5717),s=r(2217);function i(e,t){o.call(this);var r=this,n=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var o,i;if(200===e){if(i=+new Date-n,t)try{o=JSON.parse(t)}catch(e){}s.isObject(o)||(o={})}r.emit("finish",o,i),r.removeAllListeners()}))}n(i,o),i.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=i},6311:(e,t,r)=>{"use strict";var o=r(5717),n=r(3212).v,s=r(3515),i=r(2550);function a(e){var t=this;n.call(this),this.ir=new i(e,s),this.ir.once("finish",(function(e,r){t.ir=null,t.emit("message",JSON.stringify([e,r]))}))}o(a,n),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=a},3616:(e,t,r)=>{"use strict";var o=r(3212).v,n=r(5717),s=r(7705),i=r(5088),a=r(6311);function c(e,t){var n=this;o.call(this);var c=function(){var r=n.ifr=new i(a.transportName,t,e);r.once("message",(function(e){if(e){var t;try{t=JSON.parse(e)}catch(e){return n.emit("finish"),void n.close()}var r=t[0],o=t[1];n.emit("finish",r,o)}n.close()})),r.once("close",(function(){n.emit("finish"),n.close()}))};r.g.document.body?c():s.attachEvent("load",c)}n(c,o),c.enabled=function(){return i.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=c},5172:(e,t,r)=>{"use strict";var o=r(3212).v,n=r(5717),s=r(273),i=r(6073),a=r(9033),c=r(3515),u=r(7103),l=r(3616),p=r(2550);function d(e,t){var r=this;o.call(this),setTimeout((function(){r.doXhr(e,t)}),0)}n(d,o),d._getReceiver=function(e,t,r){return r.sameOrigin?new p(t,c):a.enabled?new p(t,a):i.enabled&&r.sameScheme?new p(t,i):l.enabled()?new l(e,t):new p(t,u)},d.prototype.doXhr=function(e,t){var r=this,o=s.addPath(e,"/info");this.xo=d._getReceiver(e,o,t),this.timeoutRef=setTimeout((function(){r._cleanup(!1),r.emit("finish")}),d.timeout),this.xo.once("finish",(function(e,t){r._cleanup(!0),r.emit("finish",e,t)}))},d.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},d.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},d.timeout=8e3,e.exports=d},7486:(e,t,r)=>{"use strict";e.exports=r.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},3626:(e,t,r)=>{"use strict";r(1247);var o,n=r(4564),s=r(5717),i=r(8915),a=r(8028),c=r(273),u=r(7705),l=r(5581),p=r(2217),d=r(8510),h=r(4886),f=r(685),m=r(3184),y=r(7486),E=r(2530),g=r(3326),_=r(5172);function T(e,t,r){if(!(this instanceof T))return new T(e,t,r);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=T.CONNECTING,this.extensions="",this.protocol="",(r=r||{}).protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=r.transports,this._transportOptions=r.transportOptions||{},this._timeout=r.timeout||0;var o=r.sessionId||8;if("function"==typeof o)this._generateSessionId=o;else{if("number"!=typeof o)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return i.string(o)}}this._server=r.server||i.numberString(1e3);var s=new n(e);if(!s.host||!s.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(s.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==s.protocol&&"https:"!==s.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+s.protocol+"' is not allowed.");var a="https:"===s.protocol;if("https:"===y.protocol&&!a&&!c.isLoopbackAddr(s.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var u=t.sort();u.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<u.length-1&&e===u[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var l=c.getOrigin(y.href);this._origin=l?l.toLowerCase():null,s.set("pathname",s.pathname.replace(/\/+$/,"")),this.url=s.href,this.url,this._urlInfo={nullOrigin:!d.hasDomain(),sameOrigin:c.isOriginEqual(this.url,y.href),sameScheme:c.isSchemeEqual(this.url,y.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function v(e){return 1e3===e||e>=3e3&&e<=4999}s(T,m),T.prototype.close=function(e,t){if(e&&!v(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==T.CLOSING&&this.readyState!==T.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},T.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===T.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===T.OPEN&&this._transport.send(a.quote(e))},T.version=r(2828),T.CONNECTING=0,T.OPEN=1,T.CLOSING=2,T.CLOSED=3,T.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=p.extend(e,this._urlInfo);var r=o.filterToEnabled(this._transportsWhitelist,e);this._transports=r.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},T.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!r.g.document.body||void 0!==r.g.document.readyState&&"complete"!==r.g.document.readyState&&"interactive"!==r.g.document.readyState))return this._transports.unshift(e),void u.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var o=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),n=this._transportOptions[e.transportName],s=new e(o,this._transUrl,n);return s.on("message",this._transportMessage.bind(this)),s.once("close",this._transportClose.bind(this)),s.transportName=e.transportName,void(this._transport=s)}this._close(2e3,"All transports failed",!1)},T.prototype._transportTimeout=function(){this.readyState===T.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},T.prototype._transportMessage=function(e){var t,r=this,o=e.slice(0,1),n=e.slice(1);switch(o){case"o":return void this._open();case"h":return this.dispatchEvent(new f("heartbeat")),void this.transport}if(n)try{t=JSON.parse(n)}catch(e){}if(void 0!==t)switch(o){case"a":Array.isArray(t)&&t.forEach((function(e){r.transport,r.dispatchEvent(new g(e))}));break;case"m":this.transport,this.dispatchEvent(new g(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},T.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),v(e)||2e3===e||this.readyState!==T.CONNECTING?this._close(e,t):this._connect()},T.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===T.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=T.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),this.transport):this._close(1006,"Server lost session")},T.prototype._close=function(e,t,r){this.transport,this.readyState;var o=!1;if(this._ir&&(o=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===T.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=T.CLOSING,setTimeout(function(){this.readyState=T.CLOSED,o&&this.dispatchEvent(new f("error"));var n=new E("close");n.wasClean=r||!1,n.code=e||1e3,n.reason=t,this.dispatchEvent(n),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},T.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return o=l(e),r(551)(T,e),T}},1247:()=>{"use strict";var e,t=Array.prototype,r=Object.prototype,o=Function.prototype,n=String.prototype,s=t.slice,i=r.toString,a=function(e){return"[object Function]"===r.toString.call(e)},c=function(e){return"[object String]"===i.call(e)},u=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=u?function(e,t,r,o){!o&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}:function(e,t,r,o){!o&&t in e||(e[t]=r)};var l=function(t,o,n){for(var s in o)r.hasOwnProperty.call(o,s)&&e(t,s,o[s],n)},p=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function d(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function h(){}l(o,{bind:function(e){var t=this;if(!a(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r=s.call(arguments,1),o=function(){if(this instanceof u){var o=t.apply(this,r.concat(s.call(arguments)));return Object(o)===o?o:this}return t.apply(e,r.concat(s.call(arguments)))},n=Math.max(0,t.length-r.length),i=[],c=0;c<n;c++)i.push("$"+c);var u=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")(o);return t.prototype&&(h.prototype=t.prototype,u.prototype=new h,h.prototype=null),u}}),l(Array,{isArray:function(e){return"[object Array]"===i.call(e)}});var f,m,y,E=Object("a"),g="a"!==E[0]||!(0 in E);l(t,{forEach:function(e){var t=p(this),r=g&&c(this)?this.split(""):t,o=arguments[1],n=-1,s=r.length>>>0;if(!a(e))throw new TypeError;for(;++n<s;)n in r&&e.call(o,r[n],n,t)}},(f=t.forEach,m=!0,y=!0,f&&(f.call("foo",(function(e,t,r){"object"!=typeof r&&(m=!1)})),f.call([1],(function(){y="string"==typeof this}),"x")),!(f&&m&&y)));var _=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);l(t,{indexOf:function(e){var t=g&&c(this)?this.split(""):p(this),r=t.length>>>0;if(!r)return-1;var o=0;for(arguments.length>1&&(o=d(arguments[1])),o=o>=0?o:Math.max(0,r+o);o<r;o++)if(o in t&&t[o]===e)return o;return-1}},_);var T,v=n.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(T=void 0===/()??/.exec("")[1],n.split=function(e,r){var o=this;if(void 0===e&&0===r)return[];if("[object RegExp]"!==i.call(e))return v.call(this,e,r);var n,s,a,c,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),p=0;for(e=new RegExp(e.source,l+"g"),o+="",T||(n=new RegExp("^"+e.source+"$(?!\\s)",l)),r=void 0===r?-1>>>0:r>>>0;(s=e.exec(o))&&!((a=s.index+s[0].length)>p&&(u.push(o.slice(p,s.index)),!T&&s.length>1&&s[0].replace(n,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)})),s.length>1&&s.index<o.length&&t.push.apply(u,s.slice(1)),c=s[0].length,p=a,u.length>=r));)e.lastIndex===s.index&&e.lastIndex++;return p===o.length?!c&&e.test("")||u.push(""):u.push(o.slice(p)),u.length>r?u.slice(0,r):u}):"0".split(void 0,0).length&&(n.split=function(e,t){return void 0===e&&0===t?[]:v.call(this,e,t)});var O=n.substr;l(n,{substr:function(e,t){return O.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},"".substr&&"b"!=="0b".substr(-1))},7581:(e,t,r)=>{"use strict";e.exports=[r(2412),r(9842),r(4620),r(3004),r(882)(r(3004)),r(5616),r(882)(r(5616)),r(2387),r(9998),r(882)(r(2387)),r(5375)]},2940:(e,t,r)=>{"use strict";var o=r(3212).v,n=r(5717),s=r(7705),i=r(273),a=r.g.XMLHttpRequest;function c(e,t,r,n){var s=this;o.call(this),setTimeout((function(){s._start(e,t,r,n)}),0)}n(c,o),c.prototype._start=function(e,t,r,o){var n=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=i.addQuery(t,"t="+ +new Date),this.unloadRef=s.unloadAdd((function(){n._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){n.emit("finish",0,""),n._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(o&&o.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),o&&o.headers)for(var u in o.headers)this.xhr.setRequestHeader(u,o.headers[u]);this.xhr.onreadystatechange=function(){if(n.xhr){var e,t,r=n.xhr;switch(r.readyState,r.readyState){case 3:try{t=r.status,e=r.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&n.emit("chunk",t,e);break;case 4:1223===(t=r.status)&&(t=204),12005!==t&&12029!==t||(t=0),r.responseText,n.emit("finish",t,r.responseText),n._cleanup(!1)}}};try{n.xhr.send(r)}catch(e){n.emit("finish",0,""),n._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var u=["Active"].concat("Object").join("X");!c.enabled&&u in r.g&&(a=function(){try{return new r.g[u]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new a);var l=!1;try{l="withCredentials"in new a}catch(e){}c.supportsCORS=l,e.exports=c},3759:(e,t,r)=>{e.exports=r.g.EventSource},9334:(e,t,r)=>{"use strict";var o=r.g.WebSocket||r.g.MozWebSocket;e.exports=o?function(e){return new o(e)}:void 0},3004:(e,t,r)=>{"use strict";var o=r(5717),n=r(9395),s=r(6709),i=r(9033),a=r(3759);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");n.call(this,e,"/eventsource",s,i)}o(c,n),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},5616:(e,t,r)=>{"use strict";var o=r(5717),n=r(3608),s=r(3515),i=r(9395);function a(e){if(!n.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/htmlfile",n,s)}o(a,i),a.enabled=function(e){return n.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},5088:(e,t,r)=>{"use strict";var o=r(5717),n=r(3212).v,s=r(2828),i=r(273),a=r(3683),c=r(7705),u=r(8915);function l(e,t,r){if(!l.enabled())throw new Error("Transport created when disabled");n.call(this);var o=this;this.origin=i.getOrigin(r),this.baseUrl=r,this.transUrl=t,this.transport=e,this.windowId=u.string(8);var s=i.addPath(r,"/iframe.html")+"#"+this.windowId;this.iframeObj=a.createIframe(s,(function(e){o.emit("close",1006,"Unable to load an iframe ("+e+")"),o.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}o(l,n),l.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},l.prototype._message=function(e){if(e.data,!i.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=JSON.parse(e.data)}catch(t){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var r;try{r=JSON.parse(t.data)}catch(e){return void t.data}this.emit("close",r[0],r[1]),this.close()}},l.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},l.prototype.send=function(e){this.postMessage("m",e)},l.enabled=function(){return a.iframeEnabled},l.transportName="iframe",l.roundTrips=2,e.exports=l},5375:(e,t,r)=>{"use strict";var o=r(5717),n=r(8347),s=r(514),i=r(771);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");n.call(this,e,"/jsonp",i,s)}o(a,n),a.enabled=function(){return!!r.g.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a},9395:(e,t,r)=>{"use strict";var o=r(5717),n=r(273),s=r(8347);function i(e,t,r,o){s.call(this,e,t,function(e){return function(t,r,o){var s={};"string"==typeof r&&(s.headers={"Content-type":"text/plain"});var i=n.addPath(t,"/xhr_send"),a=new e("POST",i,r,s);return a.once("finish",(function(e){if(a=null,200!==e&&204!==e)return o(new Error("http status "+e));o()})),function(){a.close(),a=null;var e=new Error("Aborted");e.code=1e3,o(e)}}}(o),r,o)}o(i,s),e.exports=i},1851:(e,t,r)=>{"use strict";var o=r(5717),n=r(3212).v;function s(e,t){n.call(this),this.sendBuffer=[],this.sender=t,this.url=e}o(s,n),s.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},s.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},s.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},s.prototype._cleanup=function(){this.removeAllListeners()},s.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=s},882:(e,t,r)=>{"use strict";var o=r(5717),n=r(5088),s=r(2217);e.exports=function(e){function t(t,r){n.call(this,e.transportName,t,r)}return o(t,n),t.enabled=function(t,o){if(!r.g.document)return!1;var i=s.extend({},o);return i.sameOrigin=!0,e.enabled(i)&&n.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=n.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},1265:(e,t,r)=>{"use strict";var o=r(5717),n=r(3212).v;function s(e,t,r){n.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=r,this._scheduleReceiver()}o(s,n),s.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(r,o){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===o?e._scheduleReceiver():(e.emit("close",r||1006,o),e.removeAllListeners()))}))},s.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=s},8347:(e,t,r)=>{"use strict";var o=r(5717),n=r(273),s=r(1851),i=r(1265);function a(e,t,r,o,a){var c=n.addPath(e,t),u=this;s.call(this,e,r),this.poll=new i(o,c,a),this.poll.on("message",(function(e){u.emit("message",e)})),this.poll.once("close",(function(e,t){u.poll=null,u.emit("close",e,t),u.close()}))}o(a,s),a.prototype.close=function(){s.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=a},6709:(e,t,r)=>{"use strict";var o=r(5717),n=r(3212).v,s=r(3759);function i(e){n.call(this);var t=this,r=this.es=new s(e);r.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},r.onerror=function(e){r.readyState;var o=2!==r.readyState?"network":"permanent";t._cleanup(),t._close(o)}}o(i,n),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},i.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=i},3608:(e,t,r)=>{"use strict";var o=r(5717),n=r(3683),s=r(273),i=r(3212).v,a=r(8915);function c(e){i.call(this);var t=this;n.polluteGlobalNamespace(),this.id="a"+a.string(6),e=s.addQuery(e,"c="+decodeURIComponent(n.WPrefix+"."+this.id)),c.htmlfileEnabled;var o=c.htmlfileEnabled?n.createHtmlfile:n.createIframe;r.g[n.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=o(e,(function(){t._cleanup(),t._close("permanent")}))}o(c,i),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete r.g[n.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in r.g)try{c.htmlfileEnabled=!!new r.g[u]("htmlfile")}catch(e){}c.enabled=c.htmlfileEnabled||n.iframeEnabled,e.exports=c},514:(e,t,r)=>{"use strict";var o=r(3683),n=r(8915),s=r(8510),i=r(273),a=r(5717),c=r(3212).v;function u(e){var t=this;c.call(this),o.polluteGlobalNamespace(),this.id="a"+n.string(6);var s=i.addQuery(e,"c="+encodeURIComponent(o.WPrefix+"."+this.id));r.g[o.WPrefix][this.id]=this._callback.bind(this),this._createScript(s),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),u.timeout)}a(u,c),u.prototype.abort=function(){if(r.g[o.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete r.g[o.WPrefix][this.id]},u.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),u.scriptErrorTimeout))},u.prototype._createScript=function(e){var t,o=this,i=this.script=r.g.document.createElement("script");if(i.id="a"+n.string(8),i.src=e,i.type="text/javascript",i.charset="UTF-8",i.onerror=this._scriptError.bind(this),i.onload=function(){o._abort(new Error("JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(){if(i.readyState,/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){o.loadedOkay=!0;try{i.onclick()}catch(e){}}i&&o._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===i.async&&r.g.document.attachEvent)if(s.isOpera())(t=this.script2=r.g.document.createElement("script")).text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=t.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch(e){}i.async=!0}void 0!==i.async&&(i.async=!0);var a=r.g.document.getElementsByTagName("head")[0];a.insertBefore(i,a.firstChild),t&&a.insertBefore(t,a.firstChild)},e.exports=u},1044:(e,t,r)=>{"use strict";var o=r(5717),n=r(3212).v;function s(e,t){n.call(this);var r=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){r._chunkHandler(e,t),r.xo=null;var o=200===e?"network":"permanent";r.emit("close",null,o),r._cleanup()}))}o(s,n),s.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var r=-1;;this.bufferPosition+=r+1){var o=t.slice(this.bufferPosition);if(-1===(r=o.indexOf("\n")))break;var n=o.slice(0,r);n&&this.emit("message",n)}},s.prototype._cleanup=function(){this.removeAllListeners()},s.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=s},771:(e,t,r)=>{"use strict";var o,n,s=r(8915),i=r(273);e.exports=function(e,t,a){o||((o=r.g.document.createElement("form")).style.display="none",o.style.position="absolute",o.method="POST",o.enctype="application/x-www-form-urlencoded",o.acceptCharset="UTF-8",(n=r.g.document.createElement("textarea")).name="d",o.appendChild(n),r.g.document.body.appendChild(o));var c="a"+s.string(8);o.target=c,o.action=i.addQuery(i.addPath(e,"/jsonp_send"),"i="+c);var u=function(e){try{return r.g.document.createElement('<iframe name="'+e+'">')}catch(o){var t=r.g.document.createElement("iframe");return t.name=e,t}}(c);u.id=c,u.style.display="none",o.appendChild(u);try{n.value=t}catch(e){}o.submit();var l=function(e){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,setTimeout((function(){u.parentNode.removeChild(u),u=null}),500),n.value="",a(e))};return u.onerror=function(){l()},u.onload=function(){l()},u.onreadystatechange=function(e){u.readyState,"complete"===u.readyState&&l()},function(){l(new Error("Aborted"))}}},6073:(e,t,r)=>{"use strict";var o=r(3212).v,n=r(5717),s=r(7705),i=r(8510),a=r(273);function c(e,t,r){var n=this;o.call(this),setTimeout((function(){n._start(e,t,r)}),0)}n(c,o),c.prototype._start=function(e,t,o){var n=this,i=new r.g.XDomainRequest;t=a.addQuery(t,"t="+ +new Date),i.onerror=function(){n._error()},i.ontimeout=function(){n._error()},i.onprogress=function(){i.responseText,n.emit("chunk",200,i.responseText)},i.onload=function(){n.emit("finish",200,i.responseText),n._cleanup(!1)},this.xdr=i,this.unloadRef=s.unloadAdd((function(){n._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(o)}catch(e){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!r.g.XDomainRequest||!i.hasDomain()),e.exports=c},9033:(e,t,r)=>{"use strict";var o=r(5717),n=r(2940);function s(e,t,r,o){n.call(this,e,t,r,o)}o(s,n),s.enabled=n.enabled&&n.supportsCORS,e.exports=s},7103:(e,t,r)=>{"use strict";var o=r(3212).v;function n(){var e=this;o.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),n.timeout)}r(5717)(n,o),n.prototype.close=function(){clearTimeout(this.to)},n.timeout=2e3,e.exports=n},3515:(e,t,r)=>{"use strict";var o=r(5717),n=r(2940);function s(e,t,r){n.call(this,e,t,r,{noCredentials:!0})}o(s,n),s.enabled=n.enabled,e.exports=s},2412:(e,t,r)=>{"use strict";var o=r(7705),n=r(273),s=r(5717),i=r(3212).v,a=r(9334);function c(e,t,r){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this);var s=this,u=n.addPath(e,"/websocket");u="https"===u.slice(0,5)?"wss"+u.slice(5):"ws"+u.slice(4),this.url=u,this.ws=new a(this.url,[],r),this.ws.onmessage=function(e){e.data,s.emit("message",e.data)},this.unloadRef=o.unloadAdd((function(){s.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,s.emit("close",e.code,e.reason),s._cleanup()},this.ws.onerror=function(e){s.emit("close",1006,"WebSocket connection broken"),s._cleanup()}}s(c,i),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),o.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName="websocket",c.roundTrips=2,e.exports=c},9998:(e,t,r)=>{"use strict";var o=r(5717),n=r(9395),s=r(4620),i=r(1044),a=r(6073);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr",i,a)}o(c,n),c.enabled=s.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},4620:(e,t,r)=>{"use strict";var o=r(5717),n=r(9395),s=r(1044),i=r(6073);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr_streaming",s,i)}o(a,n),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&i.enabled&&e.sameScheme},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},2387:(e,t,r)=>{"use strict";var o=r(5717),n=r(9395),s=r(1044),i=r(9033),a=r(3515);function c(e){if(!a.enabled&&!i.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr",s,i)}o(c,n),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||i.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},9842:(e,t,r)=>{"use strict";var o=r(5717),n=r(9395),s=r(1044),i=r(9033),a=r(3515),c=r(8510);function u(e){if(!a.enabled&&!i.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr_streaming",s,i)}o(u,n),u.enabled=function(e){return!e.nullOrigin&&!c.isOpera()&&i.enabled},u.transportName="xhr-streaming",u.roundTrips=2,u.needBody=!!r.g.document,e.exports=u},2017:(e,t,r)=>{"use strict";r.g.crypto&&r.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return r.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(256*Math.random());return t}},8510:(e,t,r)=>{"use strict";e.exports={isOpera:function(){return r.g.navigator&&/opera/i.test(r.g.navigator.userAgent)},isKonqueror:function(){return r.g.navigator&&/konqueror/i.test(r.g.navigator.userAgent)},hasDomain:function(){if(!r.g.document)return!0;try{return!!r.g.document.domain}catch(e){return!1}}}},8028:e=>{"use strict";var t,r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var o=JSON.stringify(e);return r.lastIndex=0,r.test(o)?(t||(t=function(e){var t,r={},o=[];for(t=0;t<65536;t++)o.push(String.fromCharCode(t));return e.lastIndex=0,o.join("").replace(e,(function(e){return r[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,r}(r)),o.replace(r,(function(e){return t[e]}))):o}}},7705:(e,t,r)=>{"use strict";var o=r(8915),n={},s=!1,i=r.g.chrome&&r.g.chrome.app&&r.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==r.g.addEventListener?r.g.addEventListener(e,t,!1):r.g.document&&r.g.attachEvent&&(r.g.document.attachEvent("on"+e,t),r.g.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==r.g.addEventListener?r.g.removeEventListener(e,t,!1):r.g.document&&r.g.detachEvent&&(r.g.document.detachEvent("on"+e,t),r.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(i)return null;var t=o.string(8);return n[t]=e,s&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in n&&delete n[e]},triggerUnloadCallbacks:function(){for(var e in n)n[e](),delete n[e]}},i||e.exports.attachEvent("unload",(function(){s||(s=!0,e.exports.triggerUnloadCallbacks())}))},3683:(e,t,r)=>{"use strict";var o=r(7705),n=r(8510);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in r.g||(r.g[e.exports.WPrefix]={})},postMessage:function(t,o){r.g.parent!==r.g&&r.g.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:o||""}),"*")},createIframe:function(e,t){var n,s,i=r.g.document.createElement("iframe"),a=function(){clearTimeout(n);try{i.onload=null}catch(e){}i.onerror=null},c=function(){i&&(a(),setTimeout((function(){i&&i.parentNode.removeChild(i),i=null}),0),o.unloadDel(s))},u=function(e){i&&(c(),t(e))};return i.src=e,i.style.display="none",i.style.position="absolute",i.onerror=function(){u("onerror")},i.onload=function(){clearTimeout(n),n=setTimeout((function(){u("onload timeout")}),2e3)},r.g.document.body.appendChild(i),n=setTimeout((function(){u("timeout")}),15e3),s=o.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(t,n){var s,i,a,c=["Active"].concat("Object").join("X"),u=new r.g[c]("htmlfile"),l=function(){clearTimeout(s),a.onerror=null},p=function(){u&&(l(),o.unloadDel(i),a.parentNode.removeChild(a),a=u=null,CollectGarbage())},d=function(e){u&&(p(),n(e))};u.open(),u.write('<html><script>document.domain="'+r.g.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=r.g[e.exports.WPrefix];var h=u.createElement("div");return u.body.appendChild(h),a=u.createElement("iframe"),h.appendChild(a),a.src=t,a.onerror=function(){d("onerror")},s=setTimeout((function(){d("timeout")}),15e3),i=o.unloadAdd(p),{post:function(e,t){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:p,loaded:l}}},e.exports.iframeEnabled=!1,r.g.document&&(e.exports.iframeEnabled=("function"==typeof r.g.postMessage||"object"==typeof r.g.postMessage)&&!n.isKonqueror())},4886:(e,t,r)=>{"use strict";var o={};["log","debug","warn"].forEach((function(e){var t;try{t=r.g.console&&r.g.console[e]&&r.g.console[e].apply}catch(e){}o[e]=t?function(){return r.g.console[e].apply(r.g.console,arguments)}:"log"===e?function(){}:o.log})),e.exports=o},2217:e=>{"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,o=1,n=arguments.length;o<n;o++)for(r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}}},8915:(e,t,r)=>{"use strict";var o=r(2017),n="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){for(var t=n.length,r=o.randomBytes(e),s=[],i=0;i<e;i++)s.push(n.substr(r[i]%t,1));return s.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},5581:e=>{"use strict";e.exports=function(e){return{filterToEnabled:function(t,r){var o={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===r.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(r)?(e.transportName,o.main.push(e),e.facadeTransport&&o.facade.push(e.facadeTransport)):e.transportName))})),o}}}},273:(e,t,r)=>{"use strict";var o=r(4564);e.exports={getOrigin:function(e){if(!e)return null;var t=new o(e);if("file:"===t.protocol)return null;var r=t.port;return r||(r="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+r},isOriginEqual:function(e,t){return this.getOrigin(e)===this.getOrigin(t)},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var r=e.split("?");return r[0]+t+(r[1]?"?"+r[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},2828:e=>{e.exports="1.6.0"},4564:(e,t,r)=>{"use strict";var o=r(7418),n=r(7129),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(s,"")}var d=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function f(e){var t,o=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},n={},s=typeof(e=e||o);if("blob:"===e.protocol)n=new E(unescape(e.pathname),{});else if("string"===s)for(t in n=new E(e,{}),h)delete n[t];else if("object"===s){for(t in e)t in h||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=a.test(e.href))}return n}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function y(e,t){e=(e=p(e)).replace(i,""),t=t||{};var r,o=u.exec(e),n=o[1]?o[1].toLowerCase():"",s=!!o[2],a=!!o[3],c=0;return s?a?(r=o[2]+o[3]+o[4],c=o[2].length+o[3].length):(r=o[2]+o[4],c=o[2].length):a?(r=o[3]+o[4],c=o[3].length):r=o[4],"file:"===n?c>=2&&(r=r.slice(2)):m(n)?r=o[4]:n?s&&(r=r.slice(2)):c>=2&&m(t.protocol)&&(r=o[4]),{protocol:n,slashes:s||m(n),slashesCount:c,rest:r}}function E(e,t,r){if(e=(e=p(e)).replace(i,""),!(this instanceof E))return new E(e,t,r);var s,a,c,u,h,g,_=d.slice(),T=typeof t,v=this,O=0;for("object"!==T&&"string"!==T&&(r=t,t=null),r&&"function"!=typeof r&&(r=n.parse),s=!(a=y(e||"",t=f(t))).protocol&&!a.slashes,v.slashes=a.slashes||s&&t.slashes,v.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||l.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(v.protocol)))&&(_[3]=[/(.*)/,"pathname"]);O<_.length;O++)"function"!=typeof(u=_[O])?(c=u[0],g=u[1],c!=c?v[g]=e:"string"==typeof c?~(h="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof u[2]?(v[g]=e.slice(0,h),e=e.slice(h+u[2])):(v[g]=e.slice(h),e=e.slice(0,h))):(h=c.exec(e))&&(v[g]=h[1],e=e.slice(0,h.index)),v[g]=v[g]||s&&u[3]&&t[g]||"",u[4]&&(v[g]=v[g].toLowerCase())):e=u(e,v);r&&(v.query=r(v.query)),s&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=r.length,n=r[o-1],s=!1,i=0;o--;)"."===r[o]?r.splice(o,1):".."===r[o]?(r.splice(o,1),i++):i&&(0===o&&(s=!0),r.splice(o,1),i--);return s&&r.unshift(""),"."!==n&&".."!==n||r.push(""),r.join("/")}(v.pathname,t.pathname)),"/"!==v.pathname.charAt(0)&&m(v.protocol)&&(v.pathname="/"+v.pathname),o(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(~(h=v.auth.indexOf(":"))?(v.username=v.auth.slice(0,h),v.username=encodeURIComponent(decodeURIComponent(v.username)),v.password=v.auth.slice(h+1),v.password=encodeURIComponent(decodeURIComponent(v.password))):v.username=encodeURIComponent(decodeURIComponent(v.auth)),v.auth=v.password?v.username+":"+v.password:v.username),v.origin="file:"!==v.protocol&&m(v.protocol)&&v.host?v.protocol+"//"+v.host:"null",v.href=v.toString()}E.prototype={set:function(e,t,r){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||n.parse)(t)),s[e]=t;break;case"port":s[e]=t,o(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,c.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";s[e]=t.charAt(0)!==i?i+t:t}else s[e]=t;break;case"username":case"password":s[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(s.username=t.slice(0,a),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=t.slice(a+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<d.length;u++){var l=d[u];l[4]&&(s[l[1]]=s[l[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&m(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=n.stringify);var t,r=this,o=r.host,s=r.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var i=s+(r.protocol&&r.slashes||m(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&m(r.protocol)&&!o&&"/"!==r.pathname&&(i+="@"),(":"===o[o.length-1]||c.test(r.hostname)&&!r.port)&&(o+=":"),i+=o+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}},E.extractProtocol=y,E.location=f,E.trimLeft=p,E.qs=n,e.exports=E}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>En});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{acceptContactInvite:()=>Mt,acceptInvitation:()=>bt,addContact:()=>Nt,addReaction:()=>Ft,addToBlackList:()=>kt,addUsersToBlacklist:()=>Pt,declineContactInvite:()=>wt,declineInvitation:()=>Ut,deleteContact:()=>At,deleteReaction:()=>Wt,deleteSession:()=>Tt,fetchHistoryMessages:()=>St,fetchUserInfoById:()=>Ot,getBlacklist:()=>ft,getChatToken:()=>It,getContacts:()=>yt,getReactionDetail:()=>Kt,getReactionList:()=>qt,getRoster:()=>mt,getSessionList:()=>_t,recallMessage:()=>Ht,removeFromBlackList:()=>xt,removeRoster:()=>jt,removeUserFromBlackList:()=>Lt,subscribe:()=>Gt,subscribed:()=>Dt,unsubscribed:()=>Bt,updateCurrentUserNick:()=>Rt,updateOwnUserInfo:()=>vt,uploadPushToken:()=>gt,uploadToken:()=>Et});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{acceptGroupInvite:()=>_r,acceptGroupJoinRequest:()=>mr,addUsersToGroupWhitelist:()=>qr,agreeInviteIntoGroup:()=>gr,agreeJoinGroup:()=>fr,blockGroup:()=>zt,blockGroupMember:()=>kr,blockGroupMembers:()=>xr,blockGroupMessages:()=>Yt,changeGroupOwner:()=>Zt,changeOwner:()=>Qt,createGroup:()=>Jt,createGroupNew:()=>Vt,deleteGroupSharedFile:()=>eo,destroyGroup:()=>ur,disableSendGroupMsg:()=>Fr,dissolveGroup:()=>cr,downloadGroupSharedFile:()=>ro,enableSendGroupMsg:()=>Wr,fetchGroupAnnouncement:()=>$r,fetchGroupSharedFileList:()=>to,getGroup:()=>$t,getGroupAdmin:()=>nr,getGroupBlacklist:()=>Hr,getGroupBlacklistNew:()=>jr,getGroupInfo:()=>er,getGroupMsgReadUser:()=>Xr,getGroupMuteList:()=>Ur,getGroupWhitelist:()=>Jr,getMuted:()=>Mr,groupBlockMulti:()=>Pr,groupBlockSingle:()=>wr,inviteToGroup:()=>pr,inviteUsersToGroup:()=>dr,isGroupWhiteUser:()=>zr,isInGroupWhiteList:()=>Yr,joinGroup:()=>hr,listGroupMember:()=>rr,listGroupMembers:()=>or,listGroups:()=>Xt,modifyGroup:()=>tr,mute:()=>Cr,muteGroupMember:()=>Nr,quitGroup:()=>lr,rejectGroupInvite:()=>vr,rejectGroupJoinRequest:()=>Er,rejectInviteIntoGroup:()=>Tr,rejectJoinGroup:()=>yr,removeAdmin:()=>ar,removeGroupBlockMulti:()=>Dr,removeGroupBlockSingle:()=>Lr,removeGroupMember:()=>Rr,removeGroupMembers:()=>Sr,removeGroupWhitelistMember:()=>Vr,removeMultiGroupMember:()=>Ir,removeMute:()=>Ar,removeSingleGroupMember:()=>Or,rmUsersFromGroupWhitelist:()=>Kr,setAdmin:()=>sr,setGroupAdmin:()=>ir,unblockGroupMember:()=>Gr,unblockGroupMembers:()=>Br,unmuteGroupMember:()=>br,updateGroupAnnouncement:()=>Qr,uploadGroupSharedFile:()=>Zr});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{addUsersToChatRoom:()=>ho,addUsersToChatRoomWhitelist:()=>Do,blockChatRoomMember:()=>No,blockChatRoomMembers:()=>bo,chatRoomBlockMulti:()=>Ao,chatRoomBlockSingle:()=>Co,createChatRoom:()=>no,deleteChatRoomSharedFile:()=>Vo,destroyChatRoom:()=>so,disableSendChatRoomMsg:()=>Lo,enableSendChatRoomMsg:()=>Go,fetchChatRoomAnnouncement:()=>Wo,fetchChatRoomSharedFileList:()=>Jo,getChatRoomAdmin:()=>go,getChatRoomBlacklist:()=>xo,getChatRoomBlacklistNew:()=>Po,getChatRoomDetails:()=>io,getChatRoomMuteList:()=>So,getChatRoomMuted:()=>Io,getChatRoomWhitelist:()=>Ho,getChatRooms:()=>oo,isChatRoomWhiteUser:()=>Fo,joinChatRoom:()=>fo,listChatRoomMember:()=>yo,listChatRoomMembers:()=>Eo,modifyChatRoom:()=>ao,muteChatRoomMember:()=>vo,quitChatRoom:()=>mo,removeChatRoomAdmin:()=>To,removeChatRoomBlockMulti:()=>wo,removeChatRoomBlockSingle:()=>Mo,removeChatRoomMember:()=>uo,removeChatRoomMembers:()=>po,removeChatRoomWhitelistMember:()=>jo,removeMultiChatRoomMember:()=>lo,removeMuteChatRoomMember:()=>Oo,removeSingleChatRoomMember:()=>co,rmUsersFromChatRoomWhitelist:()=>Bo,setChatRoomAdmin:()=>_o,unblockChatRoomMember:()=>Uo,unblockChatRoomMembers:()=>ko,unmuteChatRoomMember:()=>Ro,updateChatRoomAnnouncement:()=>qo,uploadChatRoomSharedFile:()=>Ko});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{getPresenceStatus:()=>Qo,getSubscribedPresenceList:()=>$o,publishPresence:()=>zo,subscribePresence:()=>Yo,unsubscribePresence:()=>Xo});var n=__webpack_require__(8e3),s=__webpack_require__.n(n),i=__webpack_require__(3281),a=__webpack_require__.n(i),c=__webpack_require__(3720),u=__webpack_require__.n(c);const l=function(){function e(e){this.type=e.type,this.message=e.message,this.data=e.data}return e.create=function(t){return new e(t)},e}();var p;!function(e){e[e.REQUEST_SUCCESS=0]="REQUEST_SUCCESS",e[e.REQUEST_TIMEOUT=-1]="REQUEST_TIMEOUT",e[e.REQUEST_UNKNOWN=-2]="REQUEST_UNKNOWN",e[e.REQUEST_PARAMETER_ERROR=-3]="REQUEST_PARAMETER_ERROR",e[e.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR=0]="WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_OPEN_ERROR=1]="WEBIM_CONNCTION_OPEN_ERROR",e[e.WEBIM_CONNCTION_AUTH_ERROR=2]="WEBIM_CONNCTION_AUTH_ERROR",e[e.WEBIM_CONNCTION_OPEN_USERGRID_ERROR=3]="WEBIM_CONNCTION_OPEN_USERGRID_ERROR",e[e.WEBIM_CONNCTION_ATTACH_ERROR=4]="WEBIM_CONNCTION_ATTACH_ERROR",e[e.WEBIM_CONNCTION_ATTACH_USERGRID_ERROR=5]="WEBIM_CONNCTION_ATTACH_USERGRID_ERROR",e[e.WEBIM_CONNCTION_REOPEN_ERROR=6]="WEBIM_CONNCTION_REOPEN_ERROR",e[e.WEBIM_CONNCTION_SERVER_CLOSE_ERROR=7]="WEBIM_CONNCTION_SERVER_CLOSE_ERROR",e[e.WEBIM_CONNCTION_SERVER_ERROR=8]="WEBIM_CONNCTION_SERVER_ERROR",e[e.WEBIM_CONNCTION_IQ_ERROR=9]="WEBIM_CONNCTION_IQ_ERROR",e[e.WEBIM_CONNCTION_USER_REMOVED=207]="WEBIM_CONNCTION_USER_REMOVED",e[e.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE=206]="WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE",e[e.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD=216]="WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD",e[e.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE=217]="WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE",e[e.WEBIM_CONNCTION_PING_ERROR=10]="WEBIM_CONNCTION_PING_ERROR",e[e.WEBIM_CONNCTION_NOTIFYVERSION_ERROR=11]="WEBIM_CONNCTION_NOTIFYVERSION_ERROR",e[e.WEBIM_CONNCTION_GETROSTER_ERROR=12]="WEBIM_CONNCTION_GETROSTER_ERROR",e[e.WEBIM_CONNCTION_CROSSDOMAIN_ERROR=13]="WEBIM_CONNCTION_CROSSDOMAIN_ERROR",e[e.WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES=14]="WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES",e[e.WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR=15]="WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR",e[e.WEBIM_CONNCTION_DISCONNECTED=16]="WEBIM_CONNCTION_DISCONNECTED",e[e.WEBIM_CONNCTION_AJAX_ERROR=17]="WEBIM_CONNCTION_AJAX_ERROR",e[e.WEBIM_CONNCTION_JOINROOM_ERROR=18]="WEBIM_CONNCTION_JOINROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOM_ERROR=19]="WEBIM_CONNCTION_GETROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOMINFO_ERROR=20]="WEBIM_CONNCTION_GETROOMINFO_ERROR",e[e.WEBIM_CONNCTION_GETROOMMEMBER_ERROR=21]="WEBIM_CONNCTION_GETROOMMEMBER_ERROR",e[e.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR=22]="WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR",e[e.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR=23]="WEBIM_CONNCTION_LOAD_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR=24]="WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_JOINCHATROOM_ERROR=25]="WEBIM_CONNCTION_JOINCHATROOM_ERROR",e[e.WEBIM_CONNCTION_QUITCHATROOM_ERROR=26]="WEBIM_CONNCTION_QUITCHATROOM_ERROR",e[e.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR=27]="WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR=28]="WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR=29]="WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR=30]="WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_CALLBACK_INNER_ERROR=31]="WEBIM_CONNCTION_CALLBACK_INNER_ERROR",e[e.WEBIM_CONNCTION_CLIENT_OFFLINE=32]="WEBIM_CONNCTION_CLIENT_OFFLINE",e[e.WEBIM_CONNCTION_CLIENT_LOGOUT=33]="WEBIM_CONNCTION_CLIENT_LOGOUT",e[e.WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR=34]="WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR",e[e.WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP=35]="WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP=36]="WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_ACCEPT_JOIN_GROUP=37]="WEBIM_CONNECTION_ACCEPT_JOIN_GROUP",e[e.WEBIM_CONNECTION_DECLINE_JOIN_GROUP=38]="WEBIM_CONNECTION_DECLINE_JOIN_GROUP",e[e.WEBIM_CONNECTION_CLOSED=39]="WEBIM_CONNECTION_CLOSED",e[e.WEBIM_CONNECTION_ERROR=40]="WEBIM_CONNECTION_ERROR",e[e.WEBIM_UPLOADFILE_BROWSER_ERROR=100]="WEBIM_UPLOADFILE_BROWSER_ERROR",e[e.WEBIM_UPLOADFILE_ERROR=101]="WEBIM_UPLOADFILE_ERROR",e[e.WEBIM_UPLOADFILE_NO_LOGIN=102]="WEBIM_UPLOADFILE_NO_LOGIN",e[e.WEBIM_UPLOADFILE_NO_FILE=103]="WEBIM_UPLOADFILE_NO_FILE",e[e.WEBIM_DOWNLOADFILE_ERROR=200]="WEBIM_DOWNLOADFILE_ERROR",e[e.WEBIM_DOWNLOADFILE_NO_LOGIN=201]="WEBIM_DOWNLOADFILE_NO_LOGIN",e[e.WEBIM_DOWNLOADFILE_BROWSER_ERROR=202]="WEBIM_DOWNLOADFILE_BROWSER_ERROR",e[e.USER_NOT_FOUND=204]="USER_NOT_FOUND",e[e.USER_MUTED_BY_ADMIN=219]="USER_MUTED_BY_ADMIN",e[e.USER_NOT_FRIEND=221]="USER_NOT_FRIEND",e[e.WEBIM_MESSAGE_REC_TEXT=300]="WEBIM_MESSAGE_REC_TEXT",e[e.WEBIM_MESSAGE_REC_TEXT_ERROR=301]="WEBIM_MESSAGE_REC_TEXT_ERROR",e[e.WEBIM_MESSAGE_REC_EMOTION=302]="WEBIM_MESSAGE_REC_EMOTION",e[e.WEBIM_MESSAGE_REC_PHOTO=303]="WEBIM_MESSAGE_REC_PHOTO",e[e.WEBIM_MESSAGE_REC_AUDIO=304]="WEBIM_MESSAGE_REC_AUDIO",e[e.WEBIM_MESSAGE_REC_AUDIO_FILE=305]="WEBIM_MESSAGE_REC_AUDIO_FILE",e[e.WEBIM_MESSAGE_REC_VEDIO=306]="WEBIM_MESSAGE_REC_VEDIO",e[e.WEBIM_MESSAGE_REC_VEDIO_FILE=307]="WEBIM_MESSAGE_REC_VEDIO_FILE",e[e.WEBIM_MESSAGE_REC_FILE=308]="WEBIM_MESSAGE_REC_FILE",e[e.WEBIM_MESSAGE_SED_TEXT=309]="WEBIM_MESSAGE_SED_TEXT",e[e.WEBIM_MESSAGE_SED_EMOTION=310]="WEBIM_MESSAGE_SED_EMOTION",e[e.WEBIM_MESSAGE_SED_PHOTO=311]="WEBIM_MESSAGE_SED_PHOTO",e[e.WEBIM_MESSAGE_SED_AUDIO=312]="WEBIM_MESSAGE_SED_AUDIO",e[e.WEBIM_MESSAGE_SED_AUDIO_FILE=313]="WEBIM_MESSAGE_SED_AUDIO_FILE",e[e.WEBIM_MESSAGE_SED_VEDIO=314]="WEBIM_MESSAGE_SED_VEDIO",e[e.WEBIM_MESSAGE_SED_VEDIO_FILE=315]="WEBIM_MESSAGE_SED_VEDIO_FILE",e[e.WEBIM_MESSAGE_SED_FILE=316]="WEBIM_MESSAGE_SED_FILE",e[e.WEBIM_MESSAGE_SED_ERROR=317]="WEBIM_MESSAGE_SED_ERROR",e[e.STATUS_INIT=400]="STATUS_INIT",e[e.STATUS_DOLOGIN_USERGRID=401]="STATUS_DOLOGIN_USERGRID",e[e.STATUS_DOLOGIN_IM=402]="STATUS_DOLOGIN_IM",e[e.STATUS_OPENED=403]="STATUS_OPENED",e[e.STATUS_CLOSING=404]="STATUS_CLOSING",e[e.STATUS_CLOSED=405]="STATUS_CLOSED",e[e.STATUS_ERROR=406]="STATUS_ERROR",e[e.SERVER_BUSY=500]="SERVER_BUSY",e[e.GROUP_NOT_EXIST=605]="GROUP_NOT_EXIST",e[e.GROUP_NOT_JOINED=602]="GROUP_NOT_JOINED",e[e.GROUP_MEMBERS_FULL=606]="GROUP_MEMBERS_FULL",e[e.MESSAGE_RECALL_TIME_LIMIT=504]="MESSAGE_RECALL_TIME_LIMIT",e[e.SERVICE_NOT_ENABLED=505]="SERVICE_NOT_ENABLED",e[e.SERVICE_NOT_ALLOW_MESSAGING=506]="SERVICE_NOT_ALLOW_MESSAGING",e[e.SERVICE_NOT_ALLOW_MESSAGING_MUTE=507]="SERVICE_NOT_ALLOW_MESSAGING_MUTE",e[e.SERVER_UNKNOWN_ERROR=503]="SERVER_UNKNOWN_ERROR",e[e.MESSAGE_INCLUDE_ILLEGAL_CONTENT=501]="MESSAGE_INCLUDE_ILLEGAL_CONTENT",e[e.MESSAGE_EXTERNAL_LOGIC_BLOCKED=502]="MESSAGE_EXTERNAL_LOGIC_BLOCKED",e[e.PERMISSION_DENIED=603]="PERMISSION_DENIED",e[e.WEBIM_LOAD_MSG_ERROR=604]="WEBIM_LOAD_MSG_ERROR",e[e.GROUP_ALREADY_JOINED=601]="GROUP_ALREADY_JOINED",e[e.REST_PARAMS_STATUS=700]="REST_PARAMS_STATUS",e[e.CHATROOM_MEMBERS_FULL=704]="CHATROOM_MEMBERS_FULL",e[e.CHATROOM_NOT_EXIST=705]="CHATROOM_NOT_EXIST",e[e.SDK_RUNTIME_ERROR=999]="SDK_RUNTIME_ERROR",e[e.REACTION_REACH_LIMIT=1100]="REACTION_REACH_LIMIT",e[e.REACTION_ALREADY_ADDED=1101]="REACTION_ALREADY_ADDED",e[e.REACTION_NOT_IN_GROUP=1102]="REACTION_NOT_IN_GROUP",e[e.REACTION_OPERATION_IS_ILLEGAL=1103]="REACTION_OPERATION_IS_ILLEGAL",e[e.REACTION_APPKEY_NOT_OPEN_SERVICE=1104]="REACTION_APPKEY_NOT_OPEN_SERVICE",e[e.REACTION_GROUP_ID_CAN_NOT_BE_NULL=1105]="REACTION_GROUP_ID_CAN_NOT_BE_NULL"}(p||(p={}));const d=p;var h=function(){return h=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},h.apply(this,arguments)};var f,m,y,E,g,_,T={biz:"",debug:!1,token:""},v="https://data-reporting.agora.io/report",O="https://data-reporting.sh.agoralab.co/report",R=new Map,I=new Map;!function(e){e[e.UNKNOWOPERATION=-1]="UNKNOWOPERATION",e[e.REST_GET_SESSION_LIST=1]="REST_GET_SESSION_LIST",e[e.REST_DEL_SESSION=2]="REST_DEL_SESSION",e[e.REST_GET_HISTORY_MESSAGE=3]="REST_GET_HISTORY_MESSAGE",e[e.REST_OPERATE=10]="REST_OPERATE",e[e.MSYNC_SENDMESSAGE=11]="MSYNC_SENDMESSAGE",e[e.MSYNC_RECALLMESSAGE=12]="MSYNC_RECALLMESSAGE",e[e.MSYNC_OPERATE=20]="MSYNC_OPERATE",e[e.ROSTER_ADD=21]="ROSTER_ADD",e[e.ROSTER_REMOVE=22]="ROSTER_REMOVE",e[e.ROSTER_ACCEPT=23]="ROSTER_ACCEPT",e[e.ROSTER_DECLINE=24]="ROSTER_DECLINE",e[e.ROSTER_BAN=25]="ROSTER_BAN",e[e.ROSTER_ALLOW=26]="ROSTER_ALLOW",e[e.ROSTER_BLACKLIST=27]="ROSTER_BLACKLIST",e[e.ROSTER_CONTACTS=28]="ROSTER_CONTACTS",e[e.ROSTER_OPERATE=30]="ROSTER_OPERATE",e[e.USER_LOGIN=31]="USER_LOGIN",e[e.USER_CREATE=32]="USER_CREATE",e[e.USER_UPDATE_USERINFO=33]="USER_UPDATE_USERINFO",e[e.USER_FETCH_USERINFO=34]="USER_FETCH_USERINFO",e[e.USER_UPDATE_NICK=35]="USER_UPDATE_NICK",e[e.USER_UPLOAD_PUSH_TOKEN=36]="USER_UPLOAD_PUSH_TOKEN",e[e.USER_OPERATE=40]="USER_OPERATE",e[e.GROUP_CREATEGROUP=41]="GROUP_CREATEGROUP",e[e.GROUP_BLOCK_MESSAGE=42]="GROUP_BLOCK_MESSAGE",e[e.GROUP_FETCH_PUBLICGROUPS_WITHCURSOR=43]="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e[e.GROUP_FETCH_USERS_GROUP=44]="GROUP_FETCH_USERS_GROUP",e[e.GROUP_CHANGE_OWNER=45]="GROUP_CHANGE_OWNER",e[e.GROUP_FETCH_SPECIFICATION=46]="GROUP_FETCH_SPECIFICATION",e[e.GROUP_CHANGE_GROUPATTRIBUTE=47]="GROUP_CHANGE_GROUPATTRIBUTE",e[e.GROUP_FETCH_MEMEBERS=48]="GROUP_FETCH_MEMEBERS",e[e.GROUP_GET_ADMIN=49]="GROUP_GET_ADMIN",e[e.GROUP_SET_ADMIN=50]="GROUP_SET_ADMIN",e[e.GROUP_REMOVE_ADMIN=51]="GROUP_REMOVE_ADMIN",e[e.GROUP_DESTOTYGROUP=52]="GROUP_DESTOTYGROUP",e[e.GROUP_LEAVEGROUP=53]="GROUP_LEAVEGROUP",e[e.GROUP_INVITE_TO_GROUP=54]="GROUP_INVITE_TO_GROUP",e[e.GROUP_JOIN_PUBLICGROUP=55]="GROUP_JOIN_PUBLICGROUP",e[e.GROUP_ACCEPT_JOINPUBLICGROUPAPPL=56]="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e[e.GROUP_DECLINE_JOINPUBLICGROUPAPPL=57]="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e[e.GROUP_ACCEPT_INVITATION=58]="GROUP_ACCEPT_INVITATION",e[e.GROUP_DECLINE_INVITATION=59]="GROUP_DECLINE_INVITATION",e[e.GROUP_REMOVE_MEMBER=60]="GROUP_REMOVE_MEMBER",e[e.GROUP_REMOVE_MEMBERS=61]="GROUP_REMOVE_MEMBERS",e[e.GROUP_MUTE_MEMBERS=62]="GROUP_MUTE_MEMBERS",e[e.GROUP_UNMUTE_MEMBERS=63]="GROUP_UNMUTE_MEMBERS",e[e.GROUP_FETCH_MUTES=64]="GROUP_FETCH_MUTES",e[e.GROUP_BLOCK_MEMBER=65]="GROUP_BLOCK_MEMBER",e[e.GROUP_BLOCK_MEMBERS=66]="GROUP_BLOCK_MEMBERS",e[e.GROUP_UNBLOCK_MEMBER=67]="GROUP_UNBLOCK_MEMBER",e[e.GROUP_UNBLOCK_MEMBERS=68]="GROUP_UNBLOCK_MEMBERS",e[e.GROUP_GET_BLOCK_LIST=69]="GROUP_GET_BLOCK_LIST",e[e.GROUP_MUTE_ALLMEMBERS=70]="GROUP_MUTE_ALLMEMBERS",e[e.GROUP_UNMUTE_ALLMEMBERS=71]="GROUP_UNMUTE_ALLMEMBERS",e[e.GROUP_ADD_WHITELIST=72]="GROUP_ADD_WHITELIST",e[e.GROUP_REMOVE_WHITELIST=73]="GROUP_REMOVE_WHITELIST",e[e.GROUP_FETCH_WHITELIST=74]="GROUP_FETCH_WHITELIST",e[e.GROUP_IS_IN_WHITELIST=75]="GROUP_IS_IN_WHITELIST",e[e.GROUP_GET_READ_USERS=76]="GROUP_GET_READ_USERS",e[e.GROUP_FETCH_ANNOUNCEMENT=77]="GROUP_FETCH_ANNOUNCEMENT",e[e.GROUP_UPDATE_ANNOUNCEMENT=78]="GROUP_UPDATE_ANNOUNCEMENT",e[e.GROUP_UPLOAD_SHAREDFILE=79]="GROUP_UPLOAD_SHAREDFILE",e[e.GROUP_DELETE_SHAREDFILE=80]="GROUP_DELETE_SHAREDFILE",e[e.GROUP_FETCH_SHAREDFILE=81]="GROUP_FETCH_SHAREDFILE",e[e.GROUP_DOWNLOAD_SHAREDFILE=82]="GROUP_DOWNLOAD_SHAREDFILE",e[e.GROUP_OPERATE=100]="GROUP_OPERATE",e[e.CHATROOM_FETCH_CHATROOMSWITHPAGE=101]="CHATROOM_FETCH_CHATROOMSWITHPAGE",e[e.CHATROOM_CREATECHATROOM=102]="CHATROOM_CREATECHATROOM",e[e.CHATROOM_DESTORYCHATROOM=103]="CHATROOM_DESTORYCHATROOM",e[e.CHATROOM_FETCH_SPECIFICATION=104]="CHATROOM_FETCH_SPECIFICATION",e[e.CHATROOM_CHANGE_ATTRIBUTE=105]="CHATROOM_CHANGE_ATTRIBUTE",e[e.CHATROOM_REMOVE_MEMBER=106]="CHATROOM_REMOVE_MEMBER",e[e.CHATROOM_REMOVE_MEMBERS=107]="CHATROOM_REMOVE_MEMBERS",e[e.CHATROOM_ADD_MEMBERS=108]="CHATROOM_ADD_MEMBERS",e[e.CHATROOM_JOINCAHTROOM=109]="CHATROOM_JOINCAHTROOM",e[e.CHATROOM_LEAVECAHTROOM=110]="CHATROOM_LEAVECAHTROOM",e[e.CHATROOM_FETCH_MEMBERS=111]="CHATROOM_FETCH_MEMBERS",e[e.CHATROOM_GET_ADMIN=112]="CHATROOM_GET_ADMIN",e[e.CHATROOM_SET_ADMIN=113]="CHATROOM_SET_ADMIN",e[e.CHATROOM_REMOVE_ADMIN=114]="CHATROOM_REMOVE_ADMIN",e[e.CHATROOM_MUTE_USER=115]="CHATROOM_MUTE_USER",e[e.CHATROOM_UNMUTE_USER=116]="CHATROOM_UNMUTE_USER",e[e.CHATROOM_FETCH_MUTES=117]="CHATROOM_FETCH_MUTES",e[e.CHATROOM_BLOCK_USER=118]="CHATROOM_BLOCK_USER",e[e.CHATROOM_BLOCK_USERS=119]="CHATROOM_BLOCK_USERS",e[e.CHATROOM_UNBLOCK_USER=120]="CHATROOM_UNBLOCK_USER",e[e.CHATROOM_UNBLOCK_USERS=121]="CHATROOM_UNBLOCK_USERS",e[e.CHATROOM_FETCH_BANS=122]="CHATROOM_FETCH_BANS",e[e.CHATROOM_MUTE_ALLMEMEBERS=123]="CHATROOM_MUTE_ALLMEMEBERS",e[e.CHATROOM_UNMUTE_ALLMEMEBERS=124]="CHATROOM_UNMUTE_ALLMEMEBERS",e[e.CHATROOM_ADD_WHITELIST=125]="CHATROOM_ADD_WHITELIST",e[e.CHATROOM_REMOVE_WHITELIST=126]="CHATROOM_REMOVE_WHITELIST",e[e.CHATROOM_FETCH_WHITELIST=127]="CHATROOM_FETCH_WHITELIST",e[e.CHATROOM_FETCH_MEMBERIN_WHITELIST=128]="CHATROOM_FETCH_MEMBERIN_WHITELIST",e[e.CHATROOM_FETCH_ANNOUNCEMENT=129]="CHATROOM_FETCH_ANNOUNCEMENT",e[e.CHATROOM_UPDATE_ANNOUNCEMENT=130]="CHATROOM_UPDATE_ANNOUNCEMENT",e[e.CHATROOM_REMOVE_SHARE_FILE=131]="CHATROOM_REMOVE_SHARE_FILE",e[e.CHATROOM_GET_SHARE_FILE_LIST=132]="CHATROOM_GET_SHARE_FILE_LIST",e[e.CHATROOM_UPLOAD_FILE=133]="CHATROOM_UPLOAD_FILE",e[e.CHATROOM_OPERATE=150]="CHATROOM_OPERATE"}(f||(f={})),function(e){e.LOGIN="USER_LOGIN",e.REGISTER="USER_CREATE",e.GET_CHATROOM_LIST="CHATROOM_FETCH_CHATROOMSWITHPAGE",e.CREATE_CHATROOM="CHATROOM_CREATECHATROOM",e.DESTROY_CHATROOM="CHATROOM_DESTORYCHATROOM",e.GET_CHATROOM_DETAIL="CHATROOM_FETCH_SPECIFICATION",e.MODIFY_CHATROOM="CHATROOM_CHANGE_ATTRIBUTE",e.REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBER",e.MULTI_REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBERS",e.ADD_USERS_TO_CHATROOM="CHATROOM_ADD_MEMBERS",e.JOIN_CHATROOM="CHATROOM_JOINCAHTROOM",e.QUIT_CHATROOM="CHATROOM_LEAVECAHTROOM",e.LIST_CHATROOM_MEMBERS="CHATROOM_FETCH_MEMBERS",e.GET_CHATROOM_ADMIN="CHATROOM_GET_ADMIN",e.SET_CHATROOM_ADMIN="CHATROOM_SET_ADMIN",e.REMOVE_CHATROOM_ADMIN="CHATROOM_REMOVE_ADMIN",e.MUTE_CHATROOM_MEMBER="CHATROOM_MUTE_USER",e.REMOVE_MUTE_CHATROOM_MEMBER="CHATROOM_UNMUTE_USER",e.GET_MUTE_CHATROOM_MEMBERS="CHATROOM_FETCH_MUTES",e.SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USER",e.MULTI_SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USERS",e.REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USER",e.MULTI_REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USERS",e.GET_CHATROOM_BLOCK_MEMBERS="CHATROOM_FETCH_BANS",e.DISABLED_CHATROOM_SEND_MSG="CHATROOM_MUTE_ALLMEMEBERS",e.ENABLE_CHATROOM_SEND_MSG="CHATROOM_UNMUTE_ALLMEMEBERS",e.ADD_CHATROOM_WHITE_USERS="CHATROOM_ADD_WHITELIST",e.REMOVE_CHATROOM_WHITE_USERS="CHATROOM_REMOVE_WHITELIST",e.GET_CHATROOM_WHITE_USERS="CHATROOM_FETCH_WHITELIST",e.CHECK_CHATROOM_WHITE_USER="CHATROOM_FETCH_MEMBERIN_WHITELIST",e.GET_CHATROOM_ANN="CHATROOM_FETCH_ANNOUNCEMENT",e.UPDATE_CHATROOM_ANN="CHATROOM_UPDATE_ANNOUNCEMENT",e.DELETE_CHATROOM_FILE="CHATROOM_REMOVE_SHARE_FILE",e.GET_CHATROOM_FILES="CHATROOM_GET_SHARE_FILE_LIST",e.UPLOAD_CHATROOM_FILE="CHATROOM_UPLOAD_FILE",e.CREATE_GROUP="GROUP_CREATEGROUP",e.BLOCK_GROUP="GROUP_BLOCK_MESSAGE",e.LIST_GROUP="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e.GET_USER_GROUP="GROUP_FETCH_USERS_GROUP",e.CHANGE_OWNER="GROUP_CHANGE_OWNER",e.GET_GROUP_INFO="GROUP_FETCH_SPECIFICATION",e.MODIFY_GROUP="GROUP_CHANGE_GROUPATTRIBUTE",e.LIST_GROUP_MEMBER="GROUP_FETCH_MEMEBERS",e.GET_GROUP_ADMIN="GROUP_GET_ADMIN",e.SET_GROUP_ADMIN="GROUP_SET_ADMIN",e.REMOVE_GROUP_ADMIN="GROUP_REMOVE_ADMIN",e.DISSOLVE_GROUP="GROUP_DESTOTYGROUP",e.QUIT_GROUP="GROUP_LEAVEGROUP",e.INVITE_TO_GROUP="GROUP_INVITE_TO_GROUP",e.JOIN_GROUP="GROUP_JOIN_PUBLICGROUP",e.AGREE_JOIN_GROUP="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e.REJECT_JOIN_GROUP="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e.AGREE_INVITE_GROUP="GROUP_ACCEPT_INVITATION",e.REJECT_INVITE_GROUP="GROUP_DECLINE_INVITATION",e.REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBER",e.MULTI_REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBERS",e.MUTE_GROUP_MEMBER="GROUP_MUTE_MEMBERS",e.UNMUTE_GROUP_MEMBER="GROUP_UNMUTE_MEMBERS",e.GET_GROUP_MUTE_LIST="GROUP_FETCH_MUTES",e.BLOCK_GROUP_MEMBER="GROUP_BLOCK_MEMBER",e.BLOCK_GROUP_MEMBERS="GROUP_BLOCK_MEMBERS",e.UNBLOCK_GROUP_MEMBER="GROUP_UNBLOCK_MEMBER",e.UNBLOCK_GROUP_MEMBERS="GROUP_UNBLOCK_MEMBERS",e.GET_GROUP_BLACK_LIST="GROUP_GET_BLOCK_LIST",e.DISABLED_SEND_GROUP_MSG="GROUP_MUTE_ALLMEMBERS",e.ENABLE_SEND_GROUP_MSG="GROUP_UNMUTE_ALLMEMBERS",e.ADD_USERS_TO_GROUP_WHITE="GROUP_ADD_WHITELIST",e.REMOVE_GROUP_WHITE_MEMBER="GROUP_REMOVE_WHITELIST",e.GET_GROUP_WHITE_LIST="GROUP_FETCH_WHITELIST",e.IS_IN_GROUP_WHITE_LIST="GROUP_IS_IN_WHITELIST",e.GET_GROUP_MSG_READ_USER="GROUP_GET_READ_USERS",e.GET_GROUP_ANN="GROUP_FETCH_ANNOUNCEMENT",e.UPDATE_GROUP_ANN="GROUP_UPDATE_ANNOUNCEMENT",e.UPLOAD_GROUP_FILE="GROUP_UPLOAD_SHAREDFILE",e.DELETE_GROUP_FILE="GROUP_DELETE_SHAREDFILE",e.GET_GROUP_FILE_LIST="GROUP_FETCH_SHAREDFILE",e.DOWN_GROUP_FILE="GROUP_DOWNLOAD_SHAREDFILE",e.GET_SESSION_LIST="REST_GET_SESSION_LIST",e.DELETE_SESSION="REST_DEL_SESSION",e.GET_HISTORY_MSG="REST_GET_HISTORY_MESSAGE",e.UPDATE_USER_INFO="USER_UPDATE_USERINFO",e.GET_USER_INFO="USER_FETCH_USERINFO",e.UPDATE_USER_NICK="USER_UPDATE_NICK",e.UPLOAD_PUSH_TOKEN="USER_UPLOAD_PUSH_TOKEN",e.GET_BLACK_LIST="ROSTER_BLACKLIST",e.GET_CONTACTS="ROSTER_CONTACTS",e.add="ROSTER_ADD",e.remove="ROSTER_REMOVE",e.accept="ROSTER_ACCEPT",e.decline="ROSTER_DECLINE",e.ban="ROSTER_BAN",e.allow="ROSTER_ALLOW",e.SEND_MSG="MSYNC_SENDMESSAGE",e.UPLOAD_MSG_ATTACH="UPLOAD_MSG_ATTACH",e.SEND_RECALL_MSG="MSYNC_RECALLMESSAGE"}(m||(m={})),function(e){e.GET_DNS="REST_DNSLIST",e.LOGIN_BY_AGORA_TOKEN="LOGIN_BY_AGORA_TOKEN",e.LOGIN_BY_PWD="LOGIN_BY_PWD",e.RESISTER="REGISTER"}(y||(y={})),function(e){e[e["5G"]=7]="5G",e[e["4G"]=7]="4G",e[e["3G"]=7]="3G",e[e["2G"]=7]="2G",e[e["SLOW-2G"]=7]="SLOW-2G",e[e.WIFI=2]="WIFI",e[e.LAN=1]="LAN",e[e.DISCONNECTED=0]="DISCONNECTED",e[e.NONE=0]="NONE",e[e.UNKNOWN=-1]="UNKNOWN",e[e["WEBIM UNABLE TO GET"]=-2]="WEBIM UNABLE TO GET"}(E||(E={})),function(e){e[e.success=200]="success",e[e.failed=400]="failed"}(g||(g={})),function(e){e[e.web=0]="web",e[e.native=1]="native"}(_||(_={}));var S=function(e){var t=Number(f[e]);return t===f.USER_LOGIN?"MANUALLOGIN":t===f.MSYNC_SENDMESSAGE?"SENDMESSAGE":t>f.UNKNOWOPERATION&&t<f.REST_OPERATE?"REST":t>f.REST_OPERATE&&t<f.MSYNC_OPERATE?"MESSAGE":t>f.MSYNC_OPERATE&&t<f.ROSTER_OPERATE?"ROSTER":t>f.ROSTER_OPERATE&&t<f.USER_OPERATE?"USER":t>f.USER_OPERATE&&t<f.GROUP_OPERATE?"GROUP":t>f.GROUP_OPERATE&&t<f.CHATROOM_OPERATE?"CHATROOM":"OPERATION"},C=function(){return(new Date).getTime()},N=function(e){return[G.BAIDU,G.WX,G.DD,G.ZFB,G.TT,G.QUICK_APP,G.UNI].includes(e.platform)},A={},b=1e3,M=function(){function e(e){this.eventQueue=[],this.stock=b,this.config=e,this.governor()}return e.prototype.add=function(e){this.stock<=0?console.warn("Event Report limit ".concat(b," per minute")):(this.eventQueue.push(e),this.consume(),this.stock-=1)},e.prototype.consume=function(){var e=this;0!==this.eventQueue.length&&(this.timer&&this.eventQueue.length<=10&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t,r=e.eventQueue.splice(0,10),o=r.filter((function(e){return e.appId===r[0].appId})),n=r.filter((function(e){return e.appId!==r[0].appId}));(t=e.eventQueue).unshift.apply(t,n),e.batchSend(o)}),1e3))},e.prototype.governor=function(){var e=this,t=setInterval((function(){e.stock=b}),6e4);addEventListener("beforeunload",(function(){clearInterval(t)}))},e.prototype.batchSend=function(e){var t,r;if(void 0===e&&(e=[]),0!==e.length)try{var o=e.map((function(e){e.biz,e.appId;var t=e.eventId,r=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(e,["biz","appId","eventId"]);return{eventId:Number(t),body:r}}));!function(e,t){try{var r=t.biz,o=t.appId,n=t.data,s=t.debug,i=t.onSuccess;if(!r)throw new Error("biz is not defined");A.global||(A=K.getEnvInfo());var a=A;if(N(a)){var c={url:s?O:v,data:n,method:"POST",success:function(){null==i||i()},fail:function(){console.log("fail")},complete:function(){console.log("complete")}},u={token:e,appid:null!=o?o:"",sendts:"".concat(Math.floor((new Date).getTime()/1e3)),biz:r,debug:"".concat(s)};if("zfb"===a.platform||"dd"===a.platform?c.headers=u:c.header=u,"dd"===a.platform)return a.global.httpRequest(c);a.global.request(c)}else{var l=new XMLHttpRequest;l.onreadystatechange=function(){2===l.readyState&&(null==i||i())},l.open("POST",s?O:v),l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("token",e),l.setRequestHeader("appid",null!=o?o:""),l.setRequestHeader("sendts","".concat(Math.floor((new Date).getTime()/1e3))),l.setRequestHeader("biz",r),l.setRequestHeader("debug","".concat(s)),l.send(JSON.stringify(n))}}catch(e){console.error(e)}}(this.config.token,{biz:null===(t=e[0])||void 0===t?void 0:t.biz,appId:null===(r=e[0])||void 0===r?void 0:r.appId,data:o,debug:this.config.debug,onSuccess:this.consume.bind(this)})}catch(e){console.error(e)}},e}(),U=function(){return U=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},U.apply(this,arguments)},w=new(function(){function e(e){this.inited=!1,this.appId="",this.biz="",this.eventQueue={},this.config=T,e&&this.init(e)}return e.prototype.init=function(e){var t;if(void 0===e&&(e={}),!e.biz||!e.token)throw new Error("Event Report: biz or token is not defined");try{this.appId=null!==(t=e.appId)&&void 0!==t?t:"",this.biz=e.biz,this.config=U(U({},T),e),this.eventQueue=new M(this.config),this.log(e),this.inited=!0}catch(e){console.error(e)}},e.prototype.send=function(e,t,r){var o;if(void 0===t&&(t={}),this.inited){var n=U(U({},t),{eventId:Number(e),biz:this.biz,appId:null!==(o=null==r?void 0:r.appId)&&void 0!==o?o:this.appId});this.eventQueue.add(n),this.log(n)}else console.error("Event Report: init is not called")},e.prototype.log=function(e){try{if(this.config.debug){var t=e.payload,r=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(e,["payload"]);console.log("%c Event Report: ".concat(this.config.biz," "),"background: #8A97FC; color: #fff"),console.table(r),t&&(console.info("payload:"),console.table(t))}}catch(e){console.error(e)}},e}()),k=function(){return k=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},k.apply(this,arguments)},P={requestName:"",subRequestId:1,requestMethod:"GET",requestUrl:"",requestElapse:0,code:0,codeDesc:"",isLastAPI:0,isSuccess:!0},x=function(){function e(e){this.platform=K.getEnvInfo(),this.isReportDt=e.isReport||!1,this.isCollectDt=!0,N(this.platform)&&!this.isReportDt&&(this.isCollectDt=!1),this.eventQueue=[],this.accessChannel="direct",this.options=function(e,t){t.platform||(t=K.getEnvInfo());var r=e.org,o=e.appkey,n=e.deviceId,s=e.sdkVersion,i=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||"".concat(t.platform,"_mini_program");return{org:r,appkey:o,deviceId:n,sdkServiceId:"sid_".concat(K.getUniqueId()),did:i,sdkVersion:s,os:7,sdkProduct:_.web}}(e,this.platform),this.sid=this.options.sdkServiceId,this.init(e)}return e.getInstance=function(){return e.instance},e.prototype.setIsReportDt=function(e){this.isReportDt=e,e&&this.rptEventQueue()},e.prototype.setIsCollectDt=function(e){this.isCollectDt=e,e||(this.eventQueue=[])},e.prototype.rptEventQueue=function(){var e=this;this.eventQueue.length&&this.eventQueue.forEach((function(t,r){w.send(t.eventId,t.dt),r>=e.eventQueue.length&&(e.eventQueue=[])}))},e.prototype.init=function(t){e.instance||(e.instance=this,w.init({biz:"im",token:"32f24ab2ddb74f508aa9286c356cec84",appId:t.appkey,debug:!0}),this.reportInit())},e.prototype.reportInit=function(){if(this.isCollectDt){var e=this.options,t=e.did,r=e.os,o=e.sdkVersion,n=e.deviceId;this.reportData(9674,{did:t,os:r,sdkVersion:o,deviceId:n})}},e.prototype.geOperateFun=function(e){var t=this;if(!this.isCollectDt)return function(){};var r=1,o=C(),n=e.uid,s=e.operationName;n&&(this.uid=n);var i={uid:this.uid,operationId:"opr_".concat(K.getUniqueId()),requestId:"req_".concat(K.getUniqueId()),operationName:s};return function(e){var n,a;if((null===(n=e.data)||void 0===n?void 0:n.accessChannel)&&(t.accessChannel=null===(a=e.data)||void 0===a?void 0:a.accessChannel),e.isRetry?(r++,e.data.subRequestId=r):(i.requestId="req_".concat(K.getUniqueId()),r=1),e.data.isLastAPI){var c=C();e.data.requestElapse=c-o,e.data.requestMethod="",e.data.subRequestId=0}else e.data.requestName||(e.data.requestName=s);e.data.requestElapse||(e.data.requestElapse=C()-o),t.reportData.call(t,9675,k(k(k(k({},P),i),e.data),{accessChannel:t.accessChannel,operationType:S(s)})),e.isEndApi&&t.reportData.call(t,9675,k(k(k({},i),P),{isSuccess:e.data.isSuccess,isLastAPI:1,subRequestId:0,requestMethod:"",requestElapse:e.data.requestElapse,accessChannel:t.accessChannel,operationType:S(s)}))}},e.prototype.reportData=function(e,t){return r=this,o=void 0,s=function(){var r,o,n,s,i,a,c,u;return function(e,t){var r,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((n=(n=i.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),r=C(),[4,(p=this.platform,new Promise((function(e){var t;p.platform||(p=K.getEnvInfo());var r="";if(p.platform===G.WEB){var o=navigator.connection;(null==o?void 0:o.type)?(null==o||o.type,r=E.WIFI):(null==o?void 0:o.effectiveType)&&(r=E[o.effectiveType.toLocaleUpperCase()]),e(r)}else p.platform===G.NODE?(r=E.UNKNOWN,e(r)):null===(t=p.global)||void 0===t||t.getNetworkType({success:function(t){r=E[t.networkType.toLocaleUpperCase()],e(r)}})})))];case 1:return o=l.sent(),n=this.options,s=n.appkey,i=n.sdkServiceId,a=n.sdkProduct,c=k({lts:r,net:o,appkey:s,sdkServiceId:i,sdkProduct:a},t),this.isReportDt?w.send(e,c):this.isCollectDt&&this.eventQueue.push({eventId:e,dt:c}),[3,3];case 2:return u=l.sent(),console.warn(u),[3,3];case 3:return[2]}var p}))},new((n=void 0)||(n=Promise))((function(e,t){function i(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}c((s=s.apply(r,o||[])).next())}));var r,o,n,s},e}();const L=x;var G,D=function(){return D=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},D.apply(this,arguments)},B=function(){};function j(e){return Object.prototype.toString.call(e).slice(8,-1)}function H(){return"undefined"!=typeof window&&window.WebSocket?{platform:G.WEB,global:window}:"undefined"!=typeof swan&&F(swan)?{platform:G.BAIDU,global:swan}:"undefined"!=typeof tt&&F(tt)?{platform:G.TT,global:tt}:"undefined"!=typeof dd&&F(dd)?{platform:G.DD,global:dd}:"undefined"!=typeof my&&F(my)?{platform:G.ZFB,global:my}:"undefined"!=typeof wx&&F(wx)?{platform:G.WX,global:wx}:"undefined"!=typeof uni&&F(uni)?{platform:G.UNI,global:uni}:{platform:G.NODE,global:__webpack_require__.g||{}}}function F(e){for(var t=["canIUse","getSystemInfo"],r=0,o=t.length;r<o;r++)if(!e[t[r]])return!1;return!0}function W(e){void 0===e&&(e={});var t=e.elapse,r=void 0===t?0:t,o=e.httpCode,n=void 0===o?0:o,s=e.errDesc;return{requestElapse:r,code:n,codeDesc:void 0===s?"":s}}!function(e){e.WEB="web",e.WX="wx",e.ZFB="zfb",e.DD="dd",e.TT="tt",e.BAIDU="baidu",e.QUICK_APP="quick_app",e.UNI="uni",e.NODE="node"}(G||(G={}));var q={autoIncrement:0,ajax:function(e,t){var r;return new Promise((function(t,o){var n=e.dataType||"text",s=e.success||B,i=e.error||B,a=new XMLHttpRequest;a.ontimeout=function(){o({errorType:"timeout_error",xhr:a})},a.onerror=function(){o({errorType:"onerror",xhr:a})},a.onabort=function(){o({errorType:"onabort",xhr:a})},a.onreadystatechange=function(){if(4===a.readyState){var e=(new Date).getTime()-r,c=a.status||0,u={elapse:e,httpCode:c};if(200===c){try{switch(n){case"text":return s(a.responseText),void t(a.responseText);case"json":var l=D(D({},JSON.parse(a.responseText)),{extraInfo:u});return s(l),void t(l);case"xml":return a.responseXML&&a.responseXML.documentElement?(s(a.responseXML.documentElement),void t(a.responseXML.documentElement)):(i({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:a.responseText}),void o({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:a.responseText}));default:i({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:a.responseText}),o({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:a.responseText})}return t(a.response||a.responseText),void s(a.response||a.responseText,a)}catch(e){o(e)}return}!function(e,t,r,o){var n,s,i,a,c,u,l,p,f,m=e.response;m&&"string"==typeof m&&(m=JSON.parse(m));var y=e.status,E={elapse:o,httpCode:y,errDesc:null==m?void 0:m.error_description};if(400===y)switch(null==m?void 0:m.error_description){case"the user is already operation this message":t({type:d.REACTION_ALREADY_ADDED,message:null==m?void 0:m.error_description,extraInfo:E});break;case"The quantity has exceeded the limit!":t({type:d.REACTION_REACH_LIMIT,message:null==m?void 0:m.error_description,extraInfo:E});break;case"The user not in this group!":t({type:d.REACTION_NOT_IN_GROUP,message:null==m?void 0:m.error_description,extraInfo:E});break;case"the user operation is illegal!":t({type:d.REACTION_OPERATION_IS_ILLEGAL,message:null==m?void 0:m.error_description,extraInfo:E});break;case"this appKey is not open reaction service!":t({type:d.REACTION_APPKEY_NOT_OPEN_SERVICE,message:null==m?void 0:m.error_description,extraInfo:E});break;case"groupId can not be null!":t({type:d.REACTION_GROUP_ID_CAN_NOT_BE_NULL,message:null==m?void 0:m.error_description,extraInfo:E});break;default:t({type:d.WEBIM_CONNCTION_AJAX_ERROR,message:e.responseText,extraInfo:E}),r({type:d.WEBIM_CONNCTION_AJAX_ERROR,message:e.responseText,extraInfo:E})}else 403===y?("group member list is full!"===m.error_description?(null===(n=e.responseURL)||void 0===n?void 0:n.includes("chatgroups"))?t({type:d.GROUP_MEMBERS_FULL,data:e.response||e.responseText,message:m.error_description,extraInfo:E}):t({type:d.CHATROOM_MEMBERS_FULL,data:e.response||e.responseText,message:m.error_description,extraInfo:E}):m.error_description.includes(m.error_description.includes("already in group"))?(null===(s=e.responseURL)||void 0===s?void 0:s.includes("chatgroups"))&&t({type:d.GROUP_ALREADY_JOINED,data:e.response||e.responseText,message:m.error_description,extraInfo:E}):m.error_description.includes("are not members of this group")?(null===(i=e.responseURL)||void 0===i?void 0:i.includes("chatgroups"))&&t({type:d.GROUP_NOT_JOINED,data:e.response||e.responseText,message:m.error_description,extraInfo:E}):t({type:d.PERMISSION_DENIED,data:e.response||e.responseText,message:"permission denied",extraInfo:h(h({},E),{errDesc:"permission denied"})}),r({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:E})):404===y?((null===(a=m.error_description)||void 0===a?void 0:a.includes("do not find this group"))||(null===(c=m.error_description)||void 0===c?void 0:c.includes("does not exist"))?(null===(u=e.responseURL)||void 0===u?void 0:u.includes("chatgroups"))?t({type:d.GROUP_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:h(h({},E),{errDesc:"The chat room dose not exist."})}):t({type:d.CHATROOM_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:h(h({},E),{errDesc:"The chat room dose not exist."})}):(null===(l=m.error_description)||void 0===l?void 0:l.includes("username"))&&(null===(p=m.error_description)||void 0===p?void 0:p.includes("doesn't exist!'"))||(null===(f=m.error_description)||void 0===f?void 0:f.includes("user not found"))?t({type:d.USER_NOT_FOUND,data:e.response||e.responseText,message:m.error_description,extraInfo:E}):t({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:E}),r({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:E})):429===y||503===y?(t({type:d.SERVER_BUSY,data:e.response||e.responseText,message:"Server is busy.",extraInfo:h(h({},E),{errDesc:"Server is busy."})}),r({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"Server is busy.",extraInfo:h(h({},E),{errDesc:"Server is busy."})})):(t({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:h(h({},E),{errDesc:"ajax error"})}),r({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:h(h({},E),{errDesc:"ajax error"})}))}(a,o,i,e)}0===a.readyState&&(i({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:a.responseText}),o({type:d.WEBIM_CONNCTION_AJAX_ERROR,data:a.responseText}))},e.responseType&&a.responseType&&(a.responseType=e.responseType),e.mimeType&&a.overrideMimeType(e.mimeType);var c=e.type||"POST",u=e.data||null,l="";if("get"===c.toLowerCase()&&u){for(var p in u)u.hasOwnProperty(p)&&(l+=p+"="+u[p]+"&");l=l?l.slice(0,-1):l,e.url+=(e.url.indexOf("?")>0?"&":"?")+(l?l+"&":l)+"_v="+(new Date).getTime(),u=null,l=""}r=(new Date).getTime(),a.open(c,e.url);var f=e.headers||{};for(var m in f["Content-Type"]||(f["Content-Type"]="application/json"),f)f.hasOwnProperty(m)&&a.setRequestHeader(m,f[m]);a.send(u)})).then((function(r){return"Object"===j(r)?(t&&(null==L?void 0:L.getInstance().geOperateFun({operationName:t}))({isEndApi:!0,data:D({isSuccess:!0,requestUrl:e.url,requestName:t,requestMethod:e.type},W(r.extraInfo))}),D(D({},r),{type:d.REQUEST_SUCCESS})):{data:r,type:d.REQUEST_SUCCESS}})).catch((function(r){throw t&&(null==L?void 0:L.getInstance().geOperateFun({operationName:t}))({isEndApi:!0,data:D({isSuccess:!1,requestUrl:e.url,requestName:t,requestMethod:e.type},W(r.extraInfo))}),r}))},getUniqueId:function(){this.autoIncrement?this.autoIncrement++:this.autoIncrement=1;var e=new Date,t=new Date(2010,1,1);return(e.getTime()-t.getTime()+this.autoIncrement).toString()},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:null},r="string"==typeof e?document.getElementById(e):e;if(window.URL.createObjectURL){if(!r.files)throw Error("this is not HTMLInputElement");var o=r.files;if(o.length>0){var n=o.item(0);t.data=n,t.url=window.URL.createObjectURL(n),t.filename=(null==n?void 0:n.name)||""}}else{if("string"!=typeof e)throw Error("in IE fileInputId must be string");n=document.getElementById(e).value,t.url=n;var s=n.lastIndexOf("/"),i=n.lastIndexOf("\\"),a=Math.max(s,i);t.filename=a<0?n:n.substring(a+1)}var c=t.filename.lastIndexOf(".");return-1!==c&&(t.filetype=t.filename.substring(c+1).toLowerCase()),t},uploadFile:function(e,t){var r,o,n=(new Date).getTime(),s=e.accessToken;if(s){var i=e.appKey,a=[],c="",u="";if(i&&(c=(a=i.split("#"))[0],u=a[1]),c||u){var l=e.apiUrl,p=e.uploadUrl||l+"/"+c+"/"+u+"/chatfiles";if((null===(o=null===(r=null==e?void 0:e.file)||void 0===r?void 0:r.data)||void 0===o?void 0:o.size)<=0)e.onFileUploadError&&e.onFileUploadError({type:d.WEBIM_UPLOADFILE_ERROR,message:"fileSize must be greater than 0"});else{var h=new XMLHttpRequest;h.upload&&h.upload.addEventListener("progress",e.onFileUploadProgress||B,!1),h.addEventListener("abort",e.onFileUploadCanceled||B,!1),h.addEventListener("error",(function(e){m({type:d.WEBIM_UPLOADFILE_ERROR,data:h})}),!1),h.addEventListener("load",(function(r){try{var o=JSON.parse(h.responseText);if(400===h.status&&"content improper"===o.error)return m({type:d.WEBIM_UPLOADFILE_ERROR,data:o}),!1;try{!function(r){var o=(new Date).getTime()-n;t&&(null==L?void 0:L.getInstance().geOperateFun({operationName:t}))({isEndApi:!0,data:{isSuccess:!(null==r?void 0:r.error),requestMethod:"POST",requestName:t,requestElapse:o,requestUrl:p,code:h.status,codeDesc:(null==r?void 0:r.error_description)||""}}),e.onFileUploadComplete&&e.onFileUploadComplete(r)}(o)}catch(r){m({type:d.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:r})}}catch(r){m({type:d.WEBIM_UPLOADFILE_ERROR,data:h.responseText})}}),!1),h.open("POST",p),h.setRequestHeader("restrict-access","true"),h.setRequestHeader("Accept","*/*"),h.setRequestHeader("Authorization","Bearer "+s);var f=new FormData;f.append("file",e.file.data),h.send(f)}}else e.onFileUploadError&&e.onFileUploadError({type:d.WEBIM_UPLOADFILE_ERROR,message:"AppKey illegal"})}else e.onFileUploadError&&e.onFileUploadError({type:d.WEBIM_UPLOADFILE_NO_LOGIN,message:"AccessToken cannot be empty"});function m(r){var o=(new Date).getTime()-n;t&&(null==L?void 0:L.getInstance().geOperateFun({operationName:t}))({isEndApi:!0,data:{isSuccess:!1,requestMethod:"POST",requestName:t,requestElapse:o,requestUrl:p,code:(null==h?void 0:h.status)||0,codeDesc:"upload file error"}}),e.onFileUploadError&&e.onFileUploadError(r)}},flow:function(e){for(var t=e.length,r=t;r--;)if("function"!=typeof e[r])throw new TypeError("Expected a function");return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];for(var n=0,s=t?e[n].apply(this,r):r[0];++n<t;)s=e[n].call(this,s);return s}},listenNetwork:function(e,t){var r=H();if(r.platform!==G.WEB){var o=r.global,n=function(r){r.isConnected?e():t()};o.offNetworkStatusChange&&o.offNetworkStatusChange(n),o.onNetworkStatusChange&&o.onNetworkStatusChange(n)}else window.addEventListener&&(window.addEventListener("online",e),window.addEventListener("offline",t))},getEnvInfo:H,wxRequest:function(e,t){return new Promise((function(t,r){var o=e.success||B,n=e.error||B,s=e.type||"POST",i=e.data||null,a="",c=(new Date).getTime(),u=q.getEnvInfo();if("get"===s.toLowerCase()&&i){for(var l in i)i.hasOwnProperty(l)&&(a+=l+"="+i[l]+"&");a=a?a.slice(0,-1):a,e.url+=(e.url.indexOf("?")>0?"&":"?")+(a?a+"&":a)+"_v="+(new Date).getTime(),i=null,a=""}var p={url:e.url,data:e.data,method:s,headers:{},success:function(e){var s,i,a,u,l,p={elapse:(new Date).getTime()-c,httpCode:Number((null===(s=e.statusCode)||void 0===s?void 0:s.toString())||(null===(i=e.status)||void 0===i?void 0:i.toString())),errDesc:(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.error_description)||""};if("200"===(null===(u=e.statusCode)||void 0===u?void 0:u.toString())||"200"===(null===(l=e.status)||void 0===l?void 0:l.toString())){var d=D(D({},e.data),{extraInfo:p});o(d),t(d)}else n(D(D({},e),{extraInfo:p})),r(D(D({},e),{extraInfo:p}))},complete:function(){},fail:function(e){console.log(e,"error"),n(e),r(e)}};if("zfb"===u.platform||"dd"===u.platform?p.headers=e.headers:p.header=e.headers,"dd"===u.platform)return dd.httpRequest(p);u.global.request(p)})).then((function(r){return"Object"===j(r)?(t&&(null==L?void 0:L.getInstance().geOperateFun({operationName:t}))({isEndApi:!0,data:D({isSuccess:!0,requestUrl:e.url,requestName:t,requestMethod:e.type},W(r.extraInfo))}),D(D({},r),{type:d.REQUEST_SUCCESS})):{data:r,type:d.REQUEST_SUCCESS}})).catch((function(r){throw t&&(null==L?void 0:L.getInstance().geOperateFun({operationName:t}))({isEndApi:!0,data:D({isSuccess:!1,requestUrl:e.url,requestName:t,requestMethod:e.type},W(r.extraInfo))}),r}))},parseDownloadResponse:function(e){if(!window||!window.URL)throw Error("parseDownloadResponse can be used in broswer only");return e&&e.type&&"application/json"===e.type||0>Object.prototype.toString.call(e).indexOf("Blob")?this.url+"?token=":window.URL.createObjectURL(e)},download:function(e,t){e.onFileDownloadComplete=e.onFileDownloadComplete||B,e.onFileDownloadError=e.onFileDownloadError||B;var r=(new Date).getTime(),o=new XMLHttpRequest;o.addEventListener("load",(function(n){var s=(new Date).getTime()-r;t&&(null==L?void 0:L.getInstance().geOperateFun({operationName:t}))({isEndApi:!0,data:{isSuccess:200===o.status,requestMethod:"POST",requestName:t,requestElapse:s,requestUrl:null==e?void 0:e.url,code:o.status,codeDesc:200===o.status?"":"download file error"}}),e.onFileDownloadComplete&&e.onFileDownloadComplete(o.response)}),!1),o.addEventListener("error",(function(n){var s=(new Date).getTime()-r;t&&(null==L?void 0:L.getInstance().geOperateFun({operationName:t}))({isEndApi:!0,data:{isSuccess:!1,requestMethod:"POST",requestName:t,requestElapse:s,requestUrl:null==e?void 0:e.url,code:(null==o?void 0:o.status)||0,codeDesc:"download file error"}}),e.onFileDownloadError&&e.onFileDownloadError({type:d.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:o})}),!1);var n=e.method||"GET",s=e.responseType||"blob",i=e.mimeType||"text/plain; charset=x-user-defined";o.open(n,e.url),"undefined"!=typeof Blob?o.responseType=s:o.overrideMimeType(i);var a={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":e.secret,Authorization:"Bearer "+this.context.accessToken},c=e.headers||{};for(var u in c)a[u]=c[u];for(var u in a)a[u]&&o.setRequestHeader(u,a[u]);o.send(null)},parseNotify:function(e){for(var t="",r=0;r<e.length;r++)t+="%"+e[r].toString(16);return JSON.parse(decodeURIComponent(t))},getExtraData:W};const K=q;var V=__webpack_require__(4188),J=__webpack_require__.n(V);function z(){console.log&&(console.log.apply?console.log.apply(console,Array.prototype.slice.call(arguments)):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}var Y,X="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),$=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,s=t.length;n<s;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Q=function(){},Z={};!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Y||(Y={}));var ee=function(){function e(e,t,r){this.name=e||"defaultLogger",this.currentLevel=0,this.useCookiePersist=!1,this.storageLogLevelKey="loglevel",this.levels=Y,this.logMethods=["trace","debug","info","warn","error"],this.methodFactory=r||this.defaultMethodFactory;var o=this._getPersistedLevel();null==o&&(o=null===t?"WARN":t),this.logs=[],this.config={useCache:!1,maxCache:3145728,color:"",background:""},this.logBytes=0,this.setLevel(o,!1,"")}return e.prototype.setConfig=function(e){this.config=e},e.prototype.getLevel=function(){return this.currentLevel},e.prototype.setLevel=function(e,t,r){if("string"==typeof e&&(e=Y[e]),void 0===e&&(e=0),!("number"==typeof e&&e>=0&&e<=this.levels.SILENT))throw Error("log.setLevel() called with invalid level: "+e);if(this.currentLevel=e,!1!==t&&this._persistLevel(e),this.replaceLoggingMethods(e,r),"undefined"==typeof console&&e<Y.SILENT)return"No console available for logging"},e.prototype.setDefaultLevel=function(e){this._getPersistedLevel()||this.setLevel(e,!1,"")},e.prototype.enableAll=function(e){this.setLevel(this.levels.TRACE,!0,"")},e.prototype.disableAll=function(e){this.setLevel(this.levels.SILENT,!0,"")},e.prototype.getLogs=function(){return this.logs},e.prototype.download=function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=this.getLogs().join("\n"),t=new Blob([e],{type:"text/plain;charset=UTF-8"}),r=window.URL.createObjectURL(t),o=document.createElement("a");o.style.display="none",o.href=r,o.setAttribute("download","sdklog"),document.body.appendChild(o),o.click()}},e.prototype._bindMethod=function(e,t,r){var o=this,n=e[t],s=this.getTime();if(r)return this._cacheLog;if("function"==typeof n.bind)return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var i=o.getTime();n.call.apply(n,$([e,"".concat(i," IM SDK [").concat("log"===t?"debug":t,"]: ")],r,!1))};try{return Function.prototype.bind.call(n,e,"".concat(s," IM SDK [").concat("log"===t?"debug":t,"]: "))}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}},e.prototype.getTime=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()},e.prototype._cacheLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(new Date).toLocaleString()+": ",o="";e.forEach((function(e){o+="object"==typeof e?JSON.stringify(e)+" ":e+" "})),this._cacheLogCall(r+o)},e.prototype._cacheLogCall=function(e){var t=te(e),r=this.logBytes+t,o=this.config.maxCache;if(!(t>=o)){if(r<o)this.logBytes+=t;else for(var n=r-o,s=0;s<n;){var i=this.logs.shift();void 0!==i&&(s+=te(i))}this.logs.push(e)}},e.prototype._getPersistedLevel=function(){var e;if("undefined"==typeof window)return 5;if("undefined"===(e=window&&window.localStorage&&window.localStorage[this.storageLogLevelKey])){var t=window.document.cookie,r=t.indexOf(encodeURIComponent(this.storageLogLevelKey));-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}return e||5},e.prototype._persistLevel=function(e){var t=this.logMethods[e]||"SILENT";"undefined"!=typeof window&&(window.localStorage&&(window.localStorage[this.storageLogLevelKey]=t),this.useCookiePersist&&(window.document.cookie=encodeURIComponent(this.storageLogLevelKey)+"="+t+";"))},e.prototype.replaceLoggingMethods=function(e,t){for(var r=0;r<this.logMethods.length;r++){var o=this.logMethods[r];this[o]=r<e?Q:this.methodFactory(o,e,t)}this.log=this.debug},e.prototype.defaultMethodFactory=function(e,t,r){return this.realMethod(e)||this.enableLoggingWhenConsoleArrives.apply(this,[e,t,r])},e.prototype.realMethod=function(e){return"debug"===e&&(e="log"),"undefined"!=typeof console&&("trace"===e&&X?z:void 0!==console[e]?this._bindMethod(console,e,this.config.useCache):void 0!==console.log?this._bindMethod(console,"log",this.config.useCache):Q)},e.prototype.enableLoggingWhenConsoleArrives=function(e,t,r){return function(){"undefined"!=typeof console&&(this.replaceLoggingMethods.call(this,t,r),this[e].apply(this,arguments))}.bind(this)},e}();function te(e){for(var t=e.length,r=0;r<e.length;r++)e.charCodeAt(r)>255&&t++;return t}var re=new ee;re.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=Z[e];return t||(t=Z[e]=new ee(e,re.getLevel(),re.methodFactory)),t};var oe="undefined"!=typeof window?window.log:void 0;re.noConflict=function(){return"undefined"!=typeof window&&window.log===re&&(window.log=oe),re},re.getLoggers=function(){return Z};const ne=re,se=function(){function e(e){var t=e.id;this.id=t,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.id,type:"read",to:e.to,from:e.from||"",chatType:e.chatType}},e.create=function(e){return{id:K.getUniqueId(),chatType:e.chatType,ackId:e.id,type:"read",to:e.to,from:e.from||"",ackContent:e.ackContent}},e}(),ie=function(){function e(e){this.id=e.id,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.ackId,type:"delivery",to:e.to,from:e.from||""}},e.create=function(e){return{id:K.getUniqueId(),ackId:e.ackId,type:"delivery",to:e.to,from:e.from||""}},e}(),ae=function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"channel",to:e.to,from:e.from||"",time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:K.getUniqueId(),type:"channel",chatType:e.chatType||"singleChat",to:e.to,from:e.from||"",time:Date.now()}},e}(),ce=function(){function e(e){var t=e.type,r=e.id||K.getUniqueId();this.id=r,this.type=t,this.value=""}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"txt",to:e.to,msg:e.msg,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()},this.value=e.msg},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{type:"txt",id:K.getUniqueId(),msg:e.msg,to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig}},e}(),ue=function(){function e(e){var t=e.type,r=e.id;this.id=r||K.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"cmd",to:e.to,action:e.action,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:K.getUniqueId(),type:"cmd",to:e.to,from:e.from||"",chatType:e.chatType||"singleChat",action:e.action,time:Date.now(),msgConfig:e.msgConfig}},e}(),le=function(){function e(e){var t=e.type,r=e.id||K.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:K.getUniqueId(),chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig}},e}(),pe=function(){function e(e){var t=e.type,r=e.id;this.id=r||K.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:K.getUniqueId(),chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig}},e}(),de=function(){function e(e){var t=e.type,r=e.id||K.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&K.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"img",file:e.file,width:e.width,height:e.height,to:e.to,from:e.from||"",roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:K.getUniqueId(),chatType:e.chatType,type:"img",url:e.url,width:e.width,height:e.height,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress}},e}(),he=function(){function e(e){var t=e.type,r=e.id||K.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&K.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"audio",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:K.getUniqueId(),chatType:e.chatType,type:"audio",filename:e.filename,length:e.length,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,file_length:e.file_length,msgConfig:e.msgConfig}},e}(),fe=function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&K.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),apiUrl:e.apiUrl,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:K.getUniqueId(),chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,msgConfig:e.msgConfig}},e}(),me=function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&K.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:K.getUniqueId(),chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,to:e.to,from:e.from||"",ext:e.ext,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,time:Date.now(),msgConfig:e.msgConfig}},e}();var ye=function(){function e(t,r){return this.type=t,this.id=r||K.getUniqueId(),e.createOldMsg({type:t,id:this.id})}return e.createOldMsg=function(e){switch(e.type){case"read":return new se({type:"read",id:e.id});case"delivery":return new ie({type:"delivery",id:e.id});case"channel":return new ae({type:"channel",id:e.id});case"txt":return new ce({type:"txt",id:e.id});case"cmd":return new ue({type:"cmd",id:e.id});case"custom":return new le({type:"custom",id:e.id});case"loc":return new pe({type:"loc",id:e.id});case"img":return new de({type:"img",id:e.id});case"audio":return new he({type:"audio",id:e.id});case"video":return new fe({type:"video",id:e.id});case"file":return new me({type:"file",id:e.id})}},e.create=function(e){return"txt"!==(t=e).type||"version"in t?function(e){return"img"===e.type&&!("version"in e)}(e)?de.create(e):function(e){return"cmd"===e.type&&!("version"in e)}(e)?ue.create(e):function(e){return"file"===e.type&&!("version"in e)}(e)?me.create(e):function(e){return"audio"===e.type&&!("version"in e)}(e)?he.create(e):function(e){return"video"===e.type&&!("version"in e)}(e)?fe.create(e):function(e){return"custom"===e.type&&!("version"in e)}(e)?le.create(e):function(e){return"loc"===e.type&&!("version"in e)}(e)?pe.create(e):function(e){return"channel"===e.type&&!("version"in e)}(e)?ae.create(e):function(e){return"delivery"===e.type&&!("version"in e)}(e)?ie.create(e):function(e){return"read"===e.type&&!("version"in e)}(e)?se.create(e):{}:ce.create(e);var t},e.prototype.set=function(e){},e}(),Ee={0:"TEXT",1:"IMAGE",2:"VIDEO",3:"LOCATION",4:"VOICE",5:"FILE",6:"COMMAND",7:"CUSTOM"};function ge(e){for(var t={},r=0;r<e.length;r++)if(8===e[r].type)t[e[r].key]=JSON.parse(e[r].stringValue);else if(7===e[r].type)t[e[r].key]=e[r].stringValue;else if(6===e[r].type)t[e[r].key]=e[r].doubleValue;else if(5===e[r].type)t[e[r].key]=e[r].floatValue;else if(1===e[r].type){var o=e[r].varintValue,n=new(u())(o.low,o.high,o.unsigned).toString();t[e[r].key]=0!==Number(n)}else 2!==e[r].type&&3!==e[r].type&&4!==e[r].type||(o=e[r].varintValue,n=new(u())(o.low,o.high,o.unsigned).toString(),t[e[r].key]=Number(n));return t}function _e(e,t,r){if(this.delivery&&e!==t){var o=this.getUniqueId(),n=new ye("delivery",o);n.set({ackId:r,to:e}),ne.debug("send delivery ack"),this.send(n.body)}}const Te=function(e,t,r,o){var n,s,i,a,c,l,p,d,h=new(u())(e.timestamp.low,e.timestamp.high,e.timestamp.unsigned).toString(),f=this.root.lookup("easemob.pb.MessageBody").decode(e.payload),m=new(u())(e.id.low,e.id.high,e.id.unsigned).toString(),y=f.ackMessageId?new(u())(f.ackMessageId.low,f.ackMessageId.high,f.ackMessageId.unsigned).toString():"",E="",g=f.from&&f.from.name,_=f.to&&f.to.name;switch(ne.debug("thirdMessage:",f),f.type){case 1:E="chat","agoraToken"===this.grantType&&(E="singleChat"),this.delivery&&_e.call(this,g,_,m);break;case 2:E="groupchat","agoraToken"===this.grantType&&(E="groupChat");break;case 3:E="chatroom","agoraToken"===this.grantType&&(E="chatRoom");break;case 4:E="read_ack";var T=void 0,v=f.ext[0]&&JSON.parse(f.ext[0].stringValue);return console.log("read_ack",f),v?(T={id:m,type:"read",from:g,to:_,mid:y,groupReadCount:f.ext[0]&&JSON.parse(f.ext[0].stringValue),ackContent:f.ackContent},this.onReadMessage&&this.onReadMessage(T),void(null===(n=this.eventHandler)||void 0===n||n.dispatch("onReadMessage",T))):(T={id:m,type:"read",from:g,to:_,mid:y},this.onReadMessage&&this.onReadMessage(T),void(null===(s=this.eventHandler)||void 0===s||s.dispatch("onReadMessage",T)));case 5:E="deliver_ack",this.onDeliveredMessage&&this.onDeliveredMessage({id:m,type:"delivery",from:g,to:_,mid:y});var O={id:m,type:"delivery",from:g,to:_,mid:y};return void(null===(i=this.eventHandler)||void 0===i||i.dispatch("onDeliveredMessage",O));case 6:E="recall";var R={id:m,from:g||"admin",to:_,mid:y};return this.onRecallMessage&&this.onRecallMessage(R),void(null===(a=this.eventHandler)||void 0===a||a.dispatch("onRecallMessage",R));case 7:this.onChannelMessage&&this.onChannelMessage({id:m,type:"channel",chatType:"singleChat",from:g,to:_,time:Number(h)});var I={id:m,type:"channel",chatType:"singleChat",from:g,to:_,time:Number(h)};return void(null===(c=this.eventHandler)||void 0===c||c.dispatch("onChannelMessage",I));default:return void ne.error("unexpected message type: ".concat(f.type))}d="chat"===E.toLowerCase()||"singleChat"===E?"singleChat":"groupchat"===E.toLowerCase()||"groupChat"===E?"groupChat":"chatRoom";for(var S=0;S<f.contents.length;S++){var C={},N={},A=t.errorCode>0,b=t.errorCode,M=t.reason,U=f.contents[S],w={},k=[],P=void 0;if(f.ext&&(w=ge(f.ext)),f.meta&&"string"==typeof f.meta){var x=JSON.parse(f.meta);x.reaction&&(console.log("metaMsg.reaction",x.reaction),k=x.reaction)}switch(U.type){case 0:!(C={id:m,type:E,contentsType:Ee[U.type],from:g,to:_,data:U.text,ext:w,sourceMsg:U.text,time:h,msgConfig:f.msgConfig}).msgConfig&&delete f.msgConfig,C.error=A,C.errorText=M,C.errorCode=b,!r&&this.onTextMessage&&this.onTextMessage(C);var L={id:m,type:"txt",chatType:d,msg:U.text,to:_,from:g,ext:w,time:Number(h)};C.msgConfig&&(L.msgConfig=C.msgConfig),console.log("reactionMsgs",k),k.length>0&&(L.reactions=k),N=L,!r&&this.eventHandler&&this.eventHandler.dispatch("onTextMessage",L);break;case 1:var G=(null===(l=null==U?void 0:U.size)||void 0===l?void 0:l.width)||0,D=(null===(p=null==U?void 0:U.size)||void 0===p?void 0:p.height)||0;P=this.useOwnUploadFun?U.remotePath:(U.remotePath&&this.apiUrl+U.remotePath.substr(U.remotePath.indexOf("/",9)))+"?em-redirect=true",U.secretKey&&!this.useOwnUploadFun&&(P="".concat(P,"&share-secret=").concat(U.secretKey)),!(C={id:m,type:E,contentsType:Ee[U.type],from:g,to:_,url:P,secret:U.secretKey,filename:U.displayName,thumb:U.thumbnailRemotePath,thumb_secret:U.thumbnailSecretKey,file_length:U.fileLength||"",width:G,height:D,filetype:U.filetype||"",accessToken:this.token,ext:w,time:h,msgConfig:f.msgConfig}).delay&&delete C.delay,!C.msgConfig&&delete f.msgConfig,C.error=A,C.errorText=M,C.errorCode=b,!r&&this.onPictureMessage&&this.onPictureMessage(C);var B={id:m,type:"img",chatType:d,from:g,to:_,url:P||"",file:{},width:G,height:D,secret:U.secretKey||"",thumb:U.thumbnailRemotePath||"",thumb_secret:U.thumbnailSecretKey||"",ext:w,time:Number(h)};C.msgConfig&&(B.msgConfig=C.msgConfig),k.length>0&&(B.reactions=k),N=B,!r&&this.eventHandler&&this.eventHandler.dispatch("onImageMessage",B);break;case 2:P=this.useOwnUploadFun?U.remotePath:(U.remotePath&&this.apiUrl+U.remotePath.substr(U.remotePath.indexOf("/",9)))+"?em-redirect=true",U.secretKey&&!this.useOwnUploadFun&&(P="".concat(P,"&share-secret=").concat(U.secretKey)),!(C={id:m,type:E,contentsType:Ee[U.type],from:g,to:_,url:P,secret:U.secretKey,filename:U.displayName,length:U.duration||"",file_length:U.fileLength||"",filetype:U.filetype||"",accessToken:this.token||"",ext:w,time:h,msgConfig:f.msgConfig}).delay&&delete C.delay,!C.msgConfig&&delete f.msgConfig,C.error=A,C.errorText=M,C.errorCode=b,!r&&this.onVideoMessage&&this.onVideoMessage(C);var j={id:m,type:"video",chatType:d,from:g,to:_,url:P,secret:U.secretKey,filename:U.displayName,length:U.duration||0,file:{},file_length:U.fileLength||0,filetype:U.filetype||"",accessToken:this.token||"",ext:w,time:Number(h)};C.msgConfig&&(j.msgConfig=C.msgConfig),k.length>0&&(j.reactions=k),N=j,!r&&this.eventHandler&&this.eventHandler.dispatch("onVideoMessage",j);break;case 3:!(C={id:m,type:E,contentsType:Ee[U.type],from:g,to:_,addr:U.address,buildingName:U.buildingName,lat:U.latitude,lng:U.longitude,ext:w,time:h,msgConfig:f.msgConfig}).delay&&delete C.delay,!C.msgConfig&&delete f.msgConfig,C.error=A,C.errorText=M,C.errorCode=b,!r&&this.onLocationMessage&&this.onLocationMessage(C);var H={id:m,type:"loc",chatType:d,from:g,to:_,buildingName:U.buildingName,addr:U.address,lat:U.latitude,lng:U.longitude,ext:w,time:Number(h)};C.msgConfig&&(H.msgConfig=C.msgConfig),k.length>0&&(H.reactions=k),N=H,!r&&this.eventHandler&&this.eventHandler.dispatch("onLocationMessage",H);break;case 4:P=this.useOwnUploadFun?U.remotePath:(U.remotePath&&this.apiUrl+U.remotePath.substr(U.remotePath.indexOf("/",9)))+"?em-redirect=true",U.secretKey&&!this.useOwnUploadFun&&(P="".concat(P,"&share-secret=").concat(U.secretKey)),!(C={id:m,type:E,contentsType:Ee[U.type],from:g,to:_,url:P,secret:U.secretKey,filename:U.displayName,file_length:U.fileLength||"",accessToken:this.token||"",ext:w,length:U.duration,time:h,msgConfig:f.msgConfig}).delay&&delete C.delay,!C.msgConfig&&delete f.msgConfig,C.error=A,C.errorText=M,C.errorCode=b,!r&&this.onAudioMessage&&this.onAudioMessage(C);var F={id:m,type:"audio",chatType:d,from:g,to:_,url:P,secret:U.secretKey,file:{},filename:U.displayName,length:U.duration||0,file_length:U.fileLength||0,filetype:U.filetype||"",accessToken:this.token||"",ext:w,time:Number(h)};C.msgConfig&&(F.msgConfig=C.msgConfig),k.length>0&&(F.reactions=k),N=F,!r&&this.eventHandler&&this.eventHandler.dispatch("onAudioMessage",F);break;case 5:P=this.useOwnUploadFun?U.remotePath:(U.remotePath&&this.apiUrl+U.remotePath.substr(U.remotePath.indexOf("/",9)))+"?em-redirect=true",U.secretKey&&!this.useOwnUploadFun&&(P="".concat(P,"&share-secret=").concat(U.secretKey)),!(C={id:m,type:E,contentsType:Ee[U.type],from:g,to:_,url:P,secret:U.secretKey,filename:U.displayName,file_length:U.fileLength,accessToken:this.token||"",ext:w,time:h,msgConfig:f.msgConfig}).delay&&delete C.delay,!C.msgConfig&&delete f.msgConfig,C.error=A,C.errorText=M,C.errorCode=b,!r&&this.onFileMessage&&this.onFileMessage(C);var W={id:m,type:"file",chatType:d,from:g,to:_,url:P,secret:U.secretKey,file:{},filename:U.displayName,length:U.duration||0,file_length:U.fileLength||0,filetype:U.filetype||"",accessToken:this.token||"",ext:w,time:Number(h)};C.msgConfig&&(W.msgConfig=C.msgConfig),k.length>0&&(W.reactions=k),N=W,!r&&this.eventHandler&&this.eventHandler.dispatch("onFileMessage",W);break;case 6:!(C={id:m,type:E,contentsType:Ee[U.type],from:g,to:_,action:U.action,ext:w,time:h,msgConfig:f.msgConfig}).msgConfig&&delete f.msgConfig,C.error=A,C.errorText=M,C.errorCode=b,!r&&this.onCmdMessage&&this.onCmdMessage(C);var q={id:m,type:"cmd",chatType:d,from:g,to:_,action:U.action,ext:w,time:Number(h)};C.msgConfig&&(q.msgConfig=C.msgConfig),k.length>0&&(q.reactions=k),N=q,!r&&this.eventHandler&&this.eventHandler.dispatch("onCmdMessage",q);break;case 7:var K={},V={};f.contents[0].customExts&&(K=ge(f.contents[0].customExts)),f.contents[0].params&&(V=ge(f.contents[0].params)),C={id:m,type:E,contentsType:Ee[U.type],from:g,to:_,customEvent:U.customEvent,params:V,customExts:K,ext:w,time:h},!r&&this.onCustomMessage&&this.onCustomMessage(C);var J={id:m,type:"custom",chatType:d,from:g,to:_,customEvent:U.customEvent,params:V,customExts:K,ext:w,time:Number(h)};C.msgConfig&&(J.msgConfig=C.msgConfig),k.length>0&&(J.reactions=k),N=J,!r&&this.eventHandler&&this.eventHandler.dispatch("onCustomMessage",J);break;default:ne.error("Unknow message type, message:",U)}return o?N:C}},ve=function(e){var t=this.root.lookup("easemob.pb.MUCBody").decode(e.payload),r=t.operation;(function(e){var r=this,o={type:"",owner:t.from.name,gid:t.mucId.name,from:t.from.name,fromJid:t.from,to:t.to.length?t.to[0].name:"",toJid:t.to,chatroom:t.isChatroom,status:t.status};return({32:function(){var e,n;o.type=t.isChatroom?"rmChatRoomMute":"rmGroupMute",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},31:function(){var e,n;o.type=t.isChatroom?"muteChatRoom":"muteGroup",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},30:function(){var e,n;o.type=t.isChatroom?"rmUserFromChatRoomWhiteList":"rmUserFromGroupWhiteList",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},29:function(){var e,n;o.type=t.isChatroom?"addUserToChatRoomWhiteList":"addUserToGroupWhiteList",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},28:function(){var e,n;o.type="deleteFile",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},27:function(){var e,n;o.type="uploadFile",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},26:function(){var e,n;o.type="deleteAnnouncement",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},25:function(){var e,n;o.type="updateAnnouncement",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},24:function(){var e,n;o.type="removeMute",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},23:function(){var e,n;o.type="addMute",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},22:function(){var e,n;o.type="removeAdmin",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},21:function(){var e,n;o.type="addAdmin",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},20:function(){var e,n;o.type="changeOwner",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},19:function(){var e,n;o.type="direct_joined",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},18:function(){var e,n;o.type=t.isChatroom?"leaveChatRoom":"leaveGroup",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},17:function(){var e,n;o.type=t.isChatroom?"memberJoinChatRoomSuccess":"memberJoinPublicGroupSuccess",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},16:function(){var e,n;o.type="unblock",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},15:function(){var e,n;o.type="block",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},14:function(){var e,n;o.type="update",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},13:function(){var e,n;o.type="allow",o.reason=t.reason,r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},12:function(){var e,n;o.type="ban",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},11:function(){var e,n;o.type="getBlackList",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},10:function(){var e,n;o.type="removedFromGroup",o.kicked=o.to,r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},9:function(){var e,n;o.type="invite_decline",o.kicked=o.to,r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},8:function(){var e,n;o.type="invite_accept",o.kicked=o.to,r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},7:function(){var e,n;o.type="invite",o.kicked=o.to,r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},6:function(){var e,n;o.type="joinPublicGroupDeclined",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},5:function(){var e,n;o.type="joinPublicGroupSuccess",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},4:function(){var e,n;o.type="joinGroupNotifications",o.reason=t.reason,r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},3:function(){var e,n;o.type="leave",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},2:function(){var e,n;o.type="join",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)},1:function(){var e,n;o.type="deleteGroupChat",r.onPresence&&r.onPresence(o),t.isChatroom?null===(e=r.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(n=r.eventHandler)||void 0===n||n.dispatch("onGroupChange",o)}}[e]||function(){console.error("No match operation ".concat(e))})()}).call(this,r)};var Oe;!function(e){e[e.Add=2]="Add",e[e.Remove=3]="Remove",e[e.Accept=4]="Accept",e[e.Decline=5]="Decline",e[e.Ban=6]="Ban",e[e.Allow=7]="Allow"}(Oe||(Oe={}));const Re={operatRoster:function(e,t){var r=[],o=this.root.lookup("easemob.pb.RosterBody"),n=o.decode(r);switch(t){case"add":n.operation=Oe.Add;break;case"remove":n.operation=Oe.Remove;break;case"accept":n.operation=Oe.Accept;break;case"decline":n.operation=Oe.Decline;break;case"ban":n.operation=Oe.Ban;break;case"allow":n.operation=Oe.Allow;break;default:ne.error("operatRoster:",t)}n.from=this.context.jid;var s=[];if("string"==typeof e.to)s.push({appKey:this.appKey||this.context.appKey,name:e.to,domain:"easemob.com"});else if(e.to instanceof Array)for(var i=0;i<e.to.length;i++)s.push({appKey:this.appKey,name:e.to[i],domain:"easemob.com"});n.to=s,n.reason=e.message||"",n=o.encode(n).finish();var a=this.root.lookup("easemob.pb.Meta").decode(r);a.id=e.id||this.getUniqueId();var c=null==L?void 0:L.getInstance().geOperateFun({operationName:m[t]});R.set(a.id,{rpt:c,requestName:m[t]}),a.from=this.context.jid,a.to={domain:"@easemob.com"},a.ns=3,a.payload=n;var u=this.root.lookup("easemob.pb.CommSyncUL"),l=u.decode(r);l.meta=a,l=u.encode(l).finish();var p=this.root.lookup("easemob.pb.MSync"),d=p.decode(r);d.version=this.version,d.encryptType=[0],d.command=0,d.guid=this.jid,d.payload=l,d=p.encode(d).finish();var h=this.mSync.base64transform(d);this.sock.send(h)},handleRosterMsg:function(e){var t,r,o,n,s,i,a=this.root.lookup("easemob.pb.RosterBody").decode(e.payload),c={type:"",to:a.to[0].name,from:a.from.name,status:a.reason};switch(a.operation){case 2:c.type="subscribe",this.onContactInvited&&this.onContactInvited(c),null===(t=this.eventHandler)||void 0===t||t.dispatch("onContactInvited",c);break;case 3:c.type="unsubscribed",this.onContactDeleted&&this.onContactDeleted(c),null===(r=this.eventHandler)||void 0===r||r.dispatch("onContactDeleted",c);break;case 4:c.type="subscribed",this.onContactAdded&&this.onContactAdded(c),null===(o=this.eventHandler)||void 0===o||o.dispatch("onContactAdded",c);break;case 5:c.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(c),null===(n=this.eventHandler)||void 0===n||n.dispatch("onContactRefuse",c);break;case 6:case 7:this.getBlacklist();break;case 8:c.type="subscribed",this.onContactAgreed&&this.onContactAgreed(c),null===(s=this.eventHandler)||void 0===s||s.dispatch("onContactAgreed",c);break;case 9:c.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(c),null===(i=this.eventHandler)||void 0===i||i.dispatch("onContactRefuse",c);break;default:ne.error("handleRosterMsg:",a)}this.onPresence&&c.type&&this.onPresence(c)}},Ie=function(e){var t,r,o,n,s,i,a=this.root.lookup("easemob.pb.StatisticsBody").decode(e.payload);switch(a.operation){case 0:this.onStatisticMessage&&this.onStatisticMessage(a),null===(t=this.eventHandler)||void 0===t||t.dispatch("onStatisticMessage",a);break;case 1:i=l.create({type:d.WEBIM_CONNCTION_USER_REMOVED,message:"user has been removed"}),this.logOut=!0,this.onError&&this.onError(i),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",i);break;case 2:i=l.create({type:d.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE,message:"the user is already logged on another device"}),this.logOut=!0,this.onError&&this.onError(i),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",i);break;case 3:i=l.create({type:d.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD,message:"the user was kicked by changing password"}),this.logOut=!0,this.onError&&this.onError(i),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",i);break;case 4:i=l.create({type:d.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE,message:"the user was kicked by other device"}),this.logOut=!0,this.onError&&this.onError(i),null===(s=this.eventHandler)||void 0===s||s.dispatch("onError",i);break;default:ne.error("handleStatisticsMsg:",a)}};function Se(e){var t,r=[],o=[];e.data&&e.data.values&&e.data.values.forEach((function(e){Object.entries(e.status).forEach((function(e){o.push({device:e[0],status:Number(e[1])})})),r.push({userId:e.uid,lastTime:Number(e.last_time),expire:Number(e.expiry),ext:e.ext,statusDetails:o})})),this.onPresenceStatusChange&&this.onPresenceStatusChange(r),null===(t=this.eventHandler)||void 0===t||t.dispatch("onPresenceStatusChange",r)}function Ce(e,t){var r=this,o=t.from,n=t.to;e.data.forEach((function(e){var t,s={from:o,to:n,chatType:"chat"===e.channel_type?"singleChat":"groupChat",messageId:e.messageId,reactions:e.reactions};null===(t=r.eventHandler)||void 0===t||t.dispatch("onReactionUpdate",s)}))}const Ne=function(e){var t=K.parseNotify(e.payload),r=e.from.name,o=e.to.name;switch(console.log("handleNotify",t),t.type){case"presence":Se.call(this,t);break;case"reaction":Ce.call(this,t,{from:r,to:o});break;default:ne.error("unexpected notify type: ".concat(t.type))}};var Ae=function(){return Ae=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Ae.apply(this,arguments)};function be(){var e="webim",t="",r="",o=[],n=(new Date).valueOf();"webim"===this.deviceId?(r="random_"+n.toString(),e=this.deviceId+"_"+r,t=this.deviceId):e=t=r="webim_"+this.deviceId,this.context.jid&&(this.context.jid.clientResource=e);var s=this.root.lookup("easemob.pb.Provision"),i=s.decode(o);i.compressType=this.compressType,i.encryptType=this.encryptType,i.osType=this.osType,i.version=this.version,i.deviceName=t,i.resource=e,i.deviceUuid=r,i.auth="$t$"+this.token,i=s.encode(i).finish();var a=this.root.lookup("easemob.pb.MSync"),c=a.decode(o);return c.version=this.version,c.guid=this.context.jid,c.auth="$t$"+this.token,c.command=3,c.deviceId=t,c.serverId=null==L?void 0:L.getInstance().sid,c.encryptType=this.encryptType,c.payload=i,a.encode(c).finish()}function Me(e,t){var r=this,o=K.getEnvInfo();if("web"===o.platform||"zfb"===o.platform||"dd"===o.platform){for(var n="",s=0;s<e.length;s++)n+=String.fromCharCode(e[s]);return n=J().btoa(n),"web"===o.platform?n:{data:n,isBuffer:!1,complete:function(){},fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||(ne.debug(""),r.reconnect()),t&&r._msgHash&&r._msgHash[t]&&r._msgHash[t].fail({id:t})}}}var i=e;return{data:i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength),fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||r.reconnect(),t&&r._msgHash&&r._msgHash[t]&&r._msgHash[t].fail({id:t})}}}function Ue(e,t){switch(e.ns){case 0:Ie.call(this,e);break;case 1:Te.call(this,e,t);break;case 2:ve.call(this,e);break;case 3:Re.handleRosterMsg.call(this,e);break;case 4:this.registerConfrIQHandler&&this.registerConfrIQHandler(e,t,this);break;case 5:Ne.call(this,e);break;default:ne.error("distributeMeta",e)}}function we(e,t){for(var r=function(r){var n=new(u())(e[r].id.low,e[r].id.high,e[r].id.unsigned).toString();if(o._load_msg_cache.some((function(e){return e.msgId===n})))return{value:void 0};var s=e[r].from.name,i=e[r].to?e[r].to.name:"",a=!!e[r].to&&-1!==e[r].to.domain.indexOf("conference");o._load_msg_cache.length<=hn.max_cache_length||o._load_msg_cache.shift(),o._load_msg_cache.push({msgId:n,from:s,to:i,isGroup:a}),Ue.call(o,e[r],t)},o=this,n=0;n<e.length;n++){var s=r(n);if("object"==typeof s)return s.value}}function ke(e){var t=this.root.lookup("easemob.pb.CommUnreadDL");if(t=t.decode(e.payload),"agoraToken"===this.grantType){var r=new(u())(t.timestamp.low,t.timestamp.high,t.timestamp.unsigned).toString();this.compareTokenExpireTime(Number(r),this.expirationTime)}if(0===t.unread.length)He.call(this);else for(var o=0;o<t.unread.length;o++)Le.call(this,t.unread[o].queue)}function Pe(){var e=[],t=this.root.lookup("easemob.pb.StatisticsBody"),r=t.decode(e);r.operation=0,r=t.encode(r).finish();var o=this.root.lookup("easemob.pb.Meta").decode(e);o.id=(new Date).valueOf(),o.ns=0,o.payload=r;var n=this.root.lookup("easemob.pb.CommSyncUL"),s=n.decode(e);s.meta=o,s=n.encode(s).finish();var i=this.root.lookup("easemob.pb.MSync"),a=i.decode(e);return a.version=this.version,a.encryptType=[0],a.command=0,a.payload=s,i.encode(a).finish()}function xe(e){var t=[],r=this.root.lookup("easemob.pb.CommSyncUL"),o=r.decode(t);o.queue=e,o=r.encode(o).finish();var n=this.root.lookup("easemob.pb.MSync"),s=n.decode(t);return s.version=this.version,s.encryptType=this.encryptType,s.command=0,s.payload=o,n.encode(s).finish()}function Le(e){ne.debug("sendBackqueue");var t=xe.call(this,e);rt.call(this,t)}function Ge(e,t){var r=[],o=this.root.lookup("easemob.pb.CommSyncUL"),n=o.decode(r);n.queue=t,n.key=new(u())(e.low,e.high,e.unsigned).toString(),n=o.encode(n).finish();var s=this.root.lookup("easemob.pb.MSync"),i=s.decode(r);return i.version=this.version,i.encryptType=this.encryptType,i.command=0,i.payload=n,s.encode(i).finish()}function De(e,t){ne.debug("sendLastSession");var r=Ge.call(this,e,t);rt.call(this,r)}function Be(e){var t,r=this.root.lookup("easemob.pb.Provision").decode(e.payload);if(this.context.jid&&(this.context.jid.clientResource=r.resource),this.clientResource=r.resource,0===r.status.errorCode){if(this.onOpened&&this.onOpened(),null===(t=this.eventHandler)||void 0===t||t.dispatch("onConnected"),"agoraToken"===this.grantType){var o=Date.now();this.expiresIn=this.expirationTime-o,this.tokenExpireTimeCountDown(this.expiresIn)}je.call(this),We.call(this),Fe.call(this),He.call(this)}else this.onError&&this.onError({type:d.WEBIM_CONNECTION_ERROR,message:"provision error",data:r})}function je(){if(this.unSendMsgArr.length>0){for(var e=0;e<this.unSendMsgArr.length;e++){var t=this.unSendMsgArr[e];et.call(this,t)}this.unSendMsgArr=[]}}function He(){var e=Pe.call(this);rt.call(this,e)}function Fe(){var e=Ke.call(this);rt.call(this,e)}function We(){var e=this;qe.call(this),this.heartBeatID=setInterval((function(){Fe.call(e)}),this.heartBeatWait)}function qe(){clearInterval(this.heartBeatID)}function Ke(){var e=this.root.lookup("easemob.pb.MSync"),t=e.decode([]);return t.version=this.version,t.encryptType=this.encryptType,t.command=1,e.encode(t).finish()}function Ve(e,t){return e.some((function(e){return e.name===t.name}))}function Je(e){var t=this,r=this.root.lookup("easemob.pb.CommNotice").decode(e.payload);Ve(this._queues,r.queue)||this.clientResource===r.queue.clientResource&&r.queue.name===this.context.userId||(this._queues.push(r.queue),this.qTimer&&clearTimeout(this.qTimer),this.qTimer=setTimeout((function(){var e=r.queue;Ve(t._queues,e)&&(Le.call(t,r.queue),ne.debug("q:",e))}),1e4),1===this._queues.length&&Le.call(this,r.queue))}function ze(e){var t=K.getEnvInfo();if("web"===t.platform||"zfb"===t.platform||"dd"===t.platform){for(var r=J().atob(e.data),o=[],n=0,s=r.length;n<s;++n)o.push(r.charCodeAt(n));return this.root.lookup("easemob.pb.MSync").decode(o)}return this.root.lookup("easemob.pb.MSync").decode(e.data)}function Ye(e){switch(e.command){case 0:Xe.call(this,e);break;case 1:ke.call(this,e);break;case 2:Je.call(this,e);break;case 3:Be.call(this,e)}}function Xe(e){var t,r,o,n,s,i=this.root.lookup("easemob.pb.CommSyncDL");i=i.decode(e.payload);var a=new(u())(i.serverId.low,i.serverId.high,i.serverId.unsigned).toString(),c=new(u())(i.metaId.low,i.metaId.high,i.metaId.unsigned).toString();if(0!==i.metas.length)try{we.call(this,i.metas,i.status)}catch(e){this.onError&&this.onError({type:d.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e})}finally{if(i.isLast){var p=-1;this._queues.some((function(e,t){return e.name===i.name&&(p=t,!0)}))&&p>0&&this._queues.splice(p,1),this._queues.length>0&&(Le.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer))}else De.call(this,i.nextKey,i.queue)}else if(i.isLast){var h=-1;this._queues.some((function(e,t){return e.name===i.queue.name&&(h=t,!0)}))&&this._queues.splice(h,1),this._queues.length>0&&(Le.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer))}else if(i.status&&0===i.status.errorCode){if((y=R.get(c))&&((0,y.rpt)({isEndApi:!0,data:{isSuccess:!0,requestName:y.requestName,requestMethod:"websocket",requestUrl:this.url,code:g.success}}),R.delete(c)),this._msgHash[c]){I.has(c)&&(I.get(c).rpt({isEndApi:!0,data:{isSuccess:!0,requestMethod:"websocket",requestUrl:this.url,code:g.success,msgId:c}}),I.delete(c));try{(null===(t=this._msgHash[c])||void 0===t?void 0:t.resolve)instanceof Function&&this._msgHash[c].resolve({localMsgId:c,serverMsgId:a}),(null===(r=this._msgHash[c])||void 0===r?void 0:r.success)instanceof Function&&this._msgHash[c].success(c,a)}catch(e){this.onError&&this.onError({type:d.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:e})}this.onReceivedMessage&&this.onReceivedMessage({id:c,mid:a,to:this._msgHash[c].to,time:0}),null===(o=this.eventHandler)||void 0===o||o.dispatch("onReceivedMessage",{id:c,mid:a,to:this._msgHash[c].to}),delete this._msgHash[c]}}else if(i.status&&15===i.status.errorCode)this.onMutedMessage&&this.onMutedMessage({mid:a}),this._msgHash[c].reject instanceof Function&&this._msgHash[c].reject({type:d.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"});else if(i.status&&1===i.status.errorCode){var f=void 0;switch(i.status.reason){case"blocked":f=d.PERMISSION_DENIED;break;case"group not found":f=d.GROUP_NOT_EXIST;break;case"not in group or chatroom":f=d.GROUP_NOT_JOINED;break;case"exceed recall time limit":f=d.MESSAGE_RECALL_TIME_LIMIT;break;case"message recall disabled":f=d.SERVICE_NOT_ENABLED;break;case"not in group or chatroom white list":f=d.SERVICE_NOT_ALLOW_MESSAGING;break;case"nonroster":f=d.USER_NOT_FRIEND,i.status.reason="not contact";break;default:f=d.SERVER_UNKNOWN_ERROR}if(this._msgHash[c]){var m=l.create({type:f,message:i.status.reason||"",data:{id:c,mid:a}});this._msgHash[c].reject instanceof Function&&this._msgHash[c].reject(m),this._msgHash[c].fail instanceof Function&&this._msgHash[c].fail({type:f,reason:i.status.reason?i.status.reason:"",data:{id:c,mid:a}})}}else if(i.status&&7===i.status.errorCode)"sensitive words"===i.status.reason&&this._msgHash[c]?(m=l.create({type:d.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"sensitive words",data:{id:c,mid:a}}),this._msgHash[c].reject instanceof Function&&this._msgHash[c].reject(m),this._msgHash[c].fail instanceof Function&&this._msgHash[c].fail({type:d.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:c,mid:a,reason:"sensitive words"}})):"blocked by mod_antispam"===i.status.reason&&this._msgHash[c]?(m=l.create({type:d.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"blocked by mod_antispam",data:{id:c,mid:a}}),this._msgHash[c].reject instanceof Function&&this._msgHash[c].reject(m),this._msgHash[c].fail instanceof Function&&this._msgHash[c].fail({type:d.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:c,mid:a,reason:"blocked by mod_antispam"}})):"user is mute"===i.status.reason&&this._msgHash[c]&&(m=l.create({type:d.USER_MUTED_BY_ADMIN,message:"user is mute",data:{id:c,mid:a}}),this._msgHash[c].reject instanceof Function&&this._msgHash[c].reject(m),this._msgHash[c].fail instanceof Function&&this._msgHash[c].fail(m));else if(i.status&&19===i.status.errorCode)this._msgHash[c]&&(I.has(c)&&(I.get(c).rpt({isEndApi:!0,data:{isSuccess:!1,requestMethod:"websocket",requestUrl:this.url,code:d.MESSAGE_EXTERNAL_LOGIC_BLOCKED,codeDesc:i.status.reason||"",msgId:c}}),I.delete(c)),m=l.create({type:d.MESSAGE_EXTERNAL_LOGIC_BLOCKED,message:i.status.reason||"",data:{id:c,mid:a}}),this._msgHash[c].reject instanceof Function&&this._msgHash[c].reject(m),this._msgHash[c].fail instanceof Function&&this._msgHash[c].fail({type:d.MESSAGE_EXTERNAL_LOGIC_BLOCKED,data:{id:c,mid:a,reason:i.status.reason}}));else if(this._msgHash[c]){I.has(c)&&(I.get(c).rpt({isEndApi:!0,data:{isSuccess:!1,requestMethod:"websocket",requestUrl:this.url,code:d.WEBIM_LOAD_MSG_ERROR,codeDesc:(null===(n=i.status)||void 0===n?void 0:n.reason)||"",msgId:c}}),I.delete(c));try{m=l.create({type:d.WEBIM_LOAD_MSG_ERROR,message:(null===(s=i.status)||void 0===s?void 0:s.reason)||"",data:{id:c,mid:a,reason:i.status&&i.status.reason}}),this._msgHash[c].reject instanceof Function&&this._msgHash[c].reject(m),this._msgHash[c].fail instanceof Function&&this._msgHash[c].fail({type:d.WEBIM_LOAD_MSG_ERROR,data:{errorCode:i.status&&i.status.errorCode,reason:i.status&&i.status.reason}})}catch(e){this.onError&&this.onError({type:d.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing fail function error",data:e})}delete this._msgHash[c]}else{var y;I.has(c)&&(I.get(c).rpt({isEndApi:!0,data:{isSuccess:!1,requestMethod:"websocket",requestUrl:this.url,code:d.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,codeDesc:"on message error",msgId:c}}),I.delete(c)),(y=R.get(c))&&((0,y.rpt)({isEndApi:!0,data:{isSuccess:!1,requestName:y.requestName,requestMethod:"websocket",requestUrl:this.url,code:g.failed,codeDesc:"on message error"}}),R.delete(c)),this.onError&&this.onError({type:d.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"on message error"})}}function $e(e){var t=[],r=this.root.lookup("easemob.pb.KeyValue"),o=[];for(var n in e){var s=r.decode(t);s.key=n,"object"==typeof e[n]?(s.type=8,s.stringValue=JSON.stringify(e[n])):"string"==typeof e[n]?(s.type=7,s.stringValue=e[n]):"boolean"==typeof e[n]?(s.type=1,s.varintValue=!0===e[n]?1:0):Number.isInteger(e[n])?(s.type=2,s.varintValue=e[n]):(s.type=6,s.doubleValue=e[n]),o.push(s)}return o}function Qe(e){var t,r,o=[];if(this.root){var n,s=this.root.lookup("easemob.pb.MessageBody.Content").decode(o);switch(n=!e.group&&"groupchat"!==(null===(t=null==e?void 0:e.chatType)||void 0===t?void 0:t.toLowerCase())||e.roomType?e.group&&e.roomType||"chatroom"===(null===(r=null==e?void 0:e.chatType)||void 0===r?void 0:r.toLowerCase())?"chatRoom":"singleChat":"groupChat",e.type){case"txt":s.type=0,s.text=e.msg;break;case"img":s.type=1,e.body?(s.displayName=e.body.filename,s.remotePath=e.body.url,s.secretKey=e.body.secret,s.fileLength=e.body.file_length,s.size=e.body.size,s.thumbnailDisplayName=e.body.filename):e.file?(s.displayName=e.file.filename,s.remotePath=e.file.url,s.secretKey=e.file.secret,s.fileLength=e.file.file_length,s.size=e.file.size,s.thumbnailDisplayName=e.file.filename):(s.displayName=e.filename,s.remotePath=e.url,s.secretKey=e.secret,s.fileLength=e.file_length,s.size=e.size,s.thumbnailDisplayName=e.filename);break;case"video":s.type=2,s.displayName=e.body.filename,s.remotePath=e.body.url,s.secretKey=e.body.secret,s.fileLength=e.body.file_length,s.duration=e.body.length,s.thumbnailDisplayName=e.body.filename;break;case"loc":s.type=3,s.latitude=e.lat,s.longitude=e.lng,s.address=e.addr,s.buildingName=e.buildingName,s.latitude=e.lat;break;case"audio":s.type=4,s.displayName=e.body.filename,s.remotePath=e.body.url,s.secretKey=e.body.secret,s.fileLength=e.body.file_length,s.duration=e.body.length,s.thumbnailDisplayName=e.body.filename;break;case"file":s.type=5,s.displayName=e.body.filename,s.remotePath=e.body.url,s.secretKey=e.body.secret,s.fileLength=e.body.file_length,s.size=e.body.size,s.thumbnailDisplayName=e.body.filename;break;case"cmd":s.type=6,s.action=e.action;break;case"custom":s.type=7,s.customEvent=e.customEvent,s.customExts=$e.call(this,e.customExts)}var i=[];e.ext&&(i=$e.call(this,e.ext));var a=this.root.lookup("easemob.pb.MessageBody"),c=a.decode(o);c.from={name:this.context.jid.name},c.to={name:e.to},"channel"===e.type?c.type=7:"recall"===e.type?(c.type=6,c.ackMessageId=e.ackId):"delivery"===e.type?(c.type=5,c.ackMessageId=e.ackId):"read"===e.type?(c.type=4,c.ackMessageId=e.ackId,"groupChat"===n&&(c.msgConfig={allowGroupAck:!0},c.ackContent=e.ackContent)):"chatRoom"===n?c.type=3:"groupChat"===n?(c.type=2,e.msgConfig&&(c.msgConfig=e.msgConfig)):"singleChat"===n&&(c.type=1),c.contents=[s],c.ext=i,c=a.encode(c).finish();var u=this.root.lookup("easemob.pb.Meta").decode(o);u.id=e.id;var l="easemob.com";"chatRoom"!==n&&"groupChat"!==n||(l="conference.easemob.com"),u.from=this.context.jid,u.to={appKey:this.appKey,name:e.to,domain:l},u.ns=1,u.payload=c;var p=this.root.lookup("easemob.pb.CommSyncUL"),h=p.decode(o);h.meta=u,h=p.encode(h).finish();var f=this.root.lookup("easemob.pb.MSync"),m=f.decode(o);return m.version=this.version,m.encryptType=this.encryptType,m.command=0,m.guid=this.context.jid,m.payload=h,f.encode(m).finish()}e.fail&&e.fail({type:d.WEBIM_CONNCTION_CLIENT_OFFLINE,message:"Not logged in"})}function Ze(e){var t=this;if(!e.file)return e;var r=Ae({},e);return r.accessToken=this.token,r.appKey=this.appKey,r.apiUrl=this.apiUrl,r.body&&r.body.url?Qe.call(this,r):new Promise((function(o,n){var s=r.onFileUploadComplete;r.onFileUploadComplete=function(o){var n;if(o.entities[0]["file-metadata"]){var i=o.entities[0]["file-metadata"]["content-length"];r.file_length=i,r.filetype=o.entities[0]["file-metadata"]["content-type"],i>204800&&(r.thumbnail=!0)}r.body={type:r.type||"file",secret:o.entities[0]["share-secret"],filename:r.file.filename||r.filename,url:(t.isHttpDNS?t.apiUrl+o.uri.substr(o.uri.indexOf("/",9)):o.uri)+"/"+o.entities[0].uuid,length:r.length||0,filetype:r.filetype||r.file.filetype,file_length:(null===(n=null==r?void 0:r.ext)||void 0===n?void 0:n.file_length)||0,size:{width:r.width||0,height:r.height||0}},r.file.url=o.uri,e.secret=o.entities[0]["share-secret"],e.url=(t.isHttpDNS?t.apiUrl+o.uri.substr(o.uri.indexOf("/",9)):o.uri)+"/"+o.entities[0].uuid,s instanceof Function&&s(o,r.id);var a=Qe.call(t,r);I.set(r.id,{rpt:null==L?void 0:L.getInstance().geOperateFun({operationName:m.SEND_MSG})}),rt.call(t,a)},K.uploadFile.call(t,r,m.UPLOAD_MSG_ATTACH)}))}function et(e){var t=this;return new Promise((function(r,o){if(t.logOut)return o({type:d.WEBIM_CONNECTION_CLOSED,message:"not login"});var n="file"===e.type||"img"===e.type||"audio"===e.type||"video"===e.type,s="delivery"===e.type||"read"===e.type||"channel"===e.type;if(e.id&&(n||s||I.set(e.id,{rpt:null==L?void 0:L.getInstance().geOperateFun({operationName:"recall"===e.type?m.SEND_RECALL_MSG:m.SEND_MSG})}),t._msgHash[e.id]=Ae(Ae({},e),{resolve:r,reject:o})),n&&e.file)return Ze.call(t,e);var i=Qe.call(t,e);rt.call(t,i,e.id)}))}function rt(e,t){if(!this.isOpened())return this.unSendMsgArr.push(e),!this.logOut&&this.autoReconnectNumTotal<this.autoReconnectNumMax&&(this.autoReconnectNumTotal<=this.socketHost.length&&this.isHttpDNS||!this.isHttpDNS)&&(ne.debug("need to reconnect",this.autoReconnectNumTotal,this.autoReconnectNumMax),this.offLineSendConnecting=!0,this.reconnect()),void(this.onError&&this.onError({type:d.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"}));var r=Me.call(this,e,t);this.sock.send(r)}const ot=function(e,t){return e.send=et,e.sendMsg=et,{generateProvision:be.bind(e),base64transform:Me.bind(e),distributeMeta:Ue.bind(e),decodeMeta:we.bind(e),decodeUnreadDL:ke.bind(e),_rebuild:Pe.bind(e),_lastsession:Ge.bind(e),receiveProvision:Be.bind(e),isInQueue:Ve.bind(e),decodeNotice:Je.bind(e),decodeMSync:ze.bind(e),distributeMSync:Ye.bind(e),encodeChatMsg:Qe.bind(e),upLoadFile:Ze.bind(e),send:et.bind(e),stopHeartBeat:qe.bind(e)}};var nt=function(){function e(e,t,r){this.handlerData={},this.handlerData={},e.addEventHandler=this.addEventHandler.bind(this),e.removeEventHandler=this.removeEventHandler.bind(this)}return e.prototype.addEventHandler=function(e,t){this.handlerData[e]=t},e.prototype.removeEventHandler=function(e){delete this.handlerData[e]},e.prototype.dispatch=function(e,t){for(var r in ne.debug("dispatch event: "+e,t||""),this.handlerData){var o=this.handlerData[r][e];o&&o(t)}},e}();const st=nt;var it=function(){};function at(e){this.onOpened=e.onOpened||it,this.onPresence=e.onPresence||it,this.onTextMessage=e.onTextMessage||it,this.onPictureMessage=e.onPictureMessage||it,this.onAudioMessage=e.onAudioMessage||it,this.onVideoMessage=e.onVideoMessage||it,this.onFileMessage=e.onFileMessage||it,this.onLocationMessage=e.onLocationMessage||it,this.onCmdMessage=e.onCmdMessage||it,this.onCustomMessage=e.onCustomMessage||it,this.onReceivedMessage=e.onReceivedMessage||it,this.onDeliveredMessage=e.onDeliveredMessage||it,this.onReadMessage=e.onReadMessage||it,this.onRecallMessage=e.onRecallMessage||it,this.onMutedMessage=e.onMutedMessage||it,this.onChannelMessage=e.onChannelMessage||it,this.onError=e.onError||it,this.onOffline=e.onOffline||it,this.onOnline=e.onOnline||it,this.onRoster=e.onRoster||it,this.onStatisticMessage=e.onStatisticMessage||it,this.onCreateGroup=e.onCreateGroup||it,this.onBlacklistUpdate=e.onBlacklistUpdate||it,this.onContactInvited=e.onContactInvited||it,this.onContactAgreed=e.onContactAgreed||it,this.onContactRefuse=e.onContactRefuse||it,this.onContactDeleted=e.onContactDeleted||it,this.onContactAdded=e.onContactAdded||it,this.onTokenWillExpire=e.onTokenWillExpire||it,this.onTokenExpired=e.onTokenExpired||it,this.onClosed=e.onClosed||it,this.onPresenceStatusChange=e.onPresenceStatusChange||it}function ct(){var e=this.context.appName,t=this.context.orgName;return!(!e||!t)||(this.onError&&this.onError({type:d.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"}),!1)}function ut(){var e;if(!this.context.accessToken){var t=l.create({type:d.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"});return this.onError&&this.onError(t),null===(e=this.eventHandler)||void 0===e||e.dispatch("onError",t),!1}return!0}function lt(){return ut.call(this)&&ct.call(this)}var pt=function(){return pt=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},pt.apply(this,arguments)},dt=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))},ht=function(e,t){var r,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((n=(n=i.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function ft(e){var t=this;if(!lt.call(this)){var r=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a={url:this.apiUrl+"/"+n+"/"+s+"/users/"+this.user+"/blocks/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i},success:function(r){var o={};r.data.forEach((function(e){o[e]={name:e}})),t.onBlacklistUpdate&&t.onBlacklistUpdate(o),"function"==typeof(null==e?void 0:e.success)&&e.success(r)},error:function(r){t.onBlacklistUpdate&&t.onBlacklistUpdate({}),"function"==typeof(null==e?void 0:e.error)&&e.error(r)}};return ne.debug("Call getBlacklist"),K.ajax(a,m.GET_BLACK_LIST)}function mt(e){var t=this;if(!lt.call(this)){var r=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a={url:this.apiUrl+"/"+n+"/"+s+"/users/"+this.user+"/contacts/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i},success:function(r){var o=[];r.data.forEach((function(e){o.push({name:e,subscription:"both",jid:t.context.jid})})),"function"==typeof(null==e?void 0:e.success)&&e.success(o),t.onRoster&&t.onRoster(o)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return ne.debug("Call getContacts"),K.ajax(a,m.GET_CONTACTS)}var yt=mt;function Et(e){if("string"!=typeof e.deviceId||""===e.deviceId)throw Error('Invalid parameter: "deviceId"');if("string"!=typeof e.deviceToken||""===e.deviceToken)throw Error('Invalid parameter: "deviceToken"');if("string"!=typeof e.notifierName||""===e.notifierName)throw Error('Invalid parameter: "notifierName"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/users/").concat(this.user),type:"PUT",data:JSON.stringify({device_id:e.deviceId,device_token:e.deviceToken,notifier_name:e.notifierName}),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call uploadPushToken",e),K.ajax(i,m.UPLOAD_PUSH_TOKEN)}var gt=Et;function _t(e){if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/users/").concat(this.user,"/user_channels"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return ne.debug("Call getSessionList"),K.ajax(i,m.GET_SESSION_LIST)}function Tt(e){if(e&&"string"!=typeof e.channel)throw Error("Invalid parameter channel: ".concat(e.channel));if(e&&"singleChat"!==e.chatType&&"groupChat"!==e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(e&&"boolean"!=typeof e.deleteRoam)throw Error("Invalid parameter deleteRoam: ".concat(e.deleteRoam));if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r,o=this.context,n=o.orgName,s=o.appName,i=o.accessToken;r="singleChat"===e.chatType?"chat":"groupChat";var a={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(s,"/users/").concat(this.user,"/user_channel"),dataType:"json",type:"DELETE",data:JSON.stringify({channel:e.channel,type:r,delete_roam:e.deleteRoam}),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call deleteSession",e),K.ajax(a,m.DELETE_SESSION)}function vt(e,t){if(!lt.call(this)){var r=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a=["nickname","avatarurl","mail","phone","gender","sign","birth","ext"],c={};if("undefined"!=typeof wx||"undefined"!=typeof qq)if("string"==typeof e&&void 0!==t){if(!a.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");c[e]=t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");a.forEach((function(t){a.includes(t)&&void 0!==e[t]&&(c[t]=e[t])}))}else if("string"==typeof e){if(!a.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");c=e+"="+t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");var u=[];a.forEach((function(t){if(a.includes(t)&&void 0!==e[t]){var r=encodeURIComponent(t),o=encodeURIComponent(e[t]);u.push(r+"="+o)}})),c=u.join("&")}var p={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(s,"/metadata/user/").concat(this.user),type:"PUT",data:c,dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/x-www-form-urlencoded"}};return ne.debug("Call updateOwnUserInfo",e),K.ajax(p,m.UPDATE_USER_INFO)}function Ot(e,t){if(!lt.call(this)){var r=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o,n=this.context,s=n.orgName,i=n.appName,a=n.accessToken,c=[];if("string"==typeof e)c=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("illegal params");c=e}o="string"==typeof t?[t]:"[object Array]"===Object.prototype.toString.call(t)?t:["nickname","avatarurl","mail","phone","gender","sign","birth","ext"];var u={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(i,"/metadata/user/get"),type:"POST",data:JSON.stringify({targets:c,properties:o}),dataType:"json",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}};return ne.debug("Call fetchUserInfoById",e),K.ajax(u,m.GET_USER_INFO)}function Rt(e){if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/users/").concat(this.user),type:"PUT",dataType:"json",data:JSON.stringify({nickname:e}),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"}};return ne.debug("Call updateCurrentUserNick",e),K.ajax(i)}function It(e){if("string"!=typeof e||""===e)throw Error('Invalid parameter: "agoraToken"');var t=this.context,r=t.orgName,o=t.appName,n={url:this.apiUrl+"/"+r+"/"+o+"/token",dataType:"json",type:"POST",data:JSON.stringify({grant_type:"agora"}),headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}};return ne.debug("Call getChatToken",e),K.ajax(n,m.UPDATE_USER_NICK)}function St(e){var t=this;return new Promise((function(r,o){if(!e.queue)throw Error('Invalid parameter: "specified"');if(!lt.call(t)){var n=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}(function e(t){var n=this,s=t.count||20;Ct.call(this,{count:s,isGroup:!!t.isGroup,queue:t.queue,start:t.start,format:t.format,success:function(o){if(o.msgs.length>=s||o.is_last){var i=o.msgs.splice(0,s).reverse();t.success&&t.success(i),r(i)}else e.call(n,pt(pt({},t),{start:null}))},fail:function(e){o(e),t.fail&&t.fail(e)}})}).call(t,e),ne.debug("Call fetchHistoryMessages",e)}))}function Ct(e){var t=this,r=e.queue,o=this.mr_cache[r]||(this.mr_cache[r]={msgs:[]}),n=this.context.userId,s=e.start||-1,i=e.count||20;if(o.msgs.length>=i||o.is_last)"function"==typeof e.success&&e.success(o);else{o&&o.next_key&&(s=o.next_key),e.start&&(s=e.start);var a={queue:r+(e.isGroup?"@conference.easemob.com":"@easemob.com"),start:s,end:-1},c=this.context,u=c.orgName,p=c.appName,h=function(r){if(r.error&&r.error_description){var o=l.create({type:d.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:"fetch history messages error",data:r});t.onError&&t.onError(o)}"function"==typeof e.fail&&e.fail(h)},f={url:this.apiUrl+"/"+u+"/"+p+"/users/"+n+"/messageroaming",dataType:"json",type:"POST",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(a),success:function(r){var n=null==r?void 0:r.data;if(!r.data.msgs)return"function"==typeof e.success&&e.success(o),o.is_last=!0,void(o.next_key="");var s=n.msgs,i=s.length;o.is_last=n.is_last,o.next_key=n.next_key;for(var a=function(r){for(var o=[],n=0,s=(r=J().atob(r)).length;n<s;++n)o.push(r.charCodeAt(n));var i=t.context.root.lookup("easemob.pb.Meta");if(1===(i=i.decode(o)).ns)return Te.call(t,i,{errorCode:0,reason:""},!0,e.format)},c=0;c<i;c++){var u=a(s[c].msg);u&&o.msgs.push(u)}"function"==typeof e.success&&e.success(o)},error:h};K.ajax(f,m.GET_HISTORY_MSG)}}function Nt(e,t){var r={id:this.getUniqueId(),to:e,message:t};Re.operatRoster.call(this,r,"add"),ne.debug("Call addContact",r)}function At(e){var t={id:this.getUniqueId(),to:e};Re.operatRoster.call(this,t,"remove"),ne.debug("Call deleteContact",t)}function bt(e){var t={id:this.getUniqueId(),to:e};Re.operatRoster.call(this,t,"accept"),ne.debug("Call acceptInvitation",t)}var Mt=bt;function Ut(e){var t={id:this.getUniqueId(),to:e};Re.operatRoster.call(this,t,"decline"),ne.debug("Call declineContactInvite",t)}var wt=Ut;function kt(e){Re.operatRoster.call(this,{to:e.name},"ban"),ne.debug("Call addUsersToBlacklist",e)}var Pt=kt;function xt(e){Re.operatRoster.call(this,{to:e.name},"allow"),ne.debug("Call removeFromBlackList",e)}var Lt=xt;function Gt(e){Re.operatRoster.call(this,e,"add")}function Dt(e){Re.operatRoster.call(this,e,"accept")}function Bt(e){Re.operatRoster.call(this,e,"decline")}function jt(e){Re.operatRoster.call(this,e,"remove"),ne.debug("Call removeRoster",e)}function Ht(e){var t=this.getUniqueId(),r={id:t,to:e.to};this._msgHash[t]=pt({},r);var o="";void 0!==e.chatType?o=e.chatType:void 0!==e.type&&(o="chat"===e.type?"singleChat":e.type);var n={id:t,type:"recall",chatType:o,ackId:e.mid,to:e.to,success:e.success,fail:e.fail};return ne.debug("Call recallMessage",e),this.mSync.send(n,this)}function Ft(e){return dt(this,void 0,void 0,(function(){var t,r,o,n,s,i,a,c,u;return ht(this,(function(p){switch(p.label){case 0:if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));return lt.call(this)?(r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.reaction,a=e.messageId,c={msgId:a,message:i},u={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/user/").concat(this.user,"/reaction"),type:"POST",data:JSON.stringify(c),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"}},[4,K.ajax(u)]):(t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return p.sent(),[2]}}))}))}function Wt(e){return dt(this,void 0,void 0,(function(){var t,r,o,n,s,i,a,c;return ht(this,(function(u){switch(u.label){case 0:if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reactionId: ".concat(e.reaction));return lt.call(this)?(r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.messageId,a=e.reaction,c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/user/").concat(this.user,"/reaction?msgId=").concat(i,"&message=").concat(a),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"}},[4,K.ajax(c)]):(t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return u.sent(),[2]}}))}))}function qt(e){if("string"!=typeof e.chatType||!e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatType,a=e.messageId,c={msgIdList:"string"==typeof a?[a]:a,msgType:"singleChat"===i?"chat":"groupchat",groupId:e.groupId||null},u={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/user/").concat(this.user,"/reaction"),type:"GET",data:c,dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"}};return K.ajax(u)}function Kt(e){if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.cursor,a=e.pageSize,c={msgId:e.messageId,message:e.reaction,currentPage:i||null,pageSize:a||20},u={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/user/").concat(this.user,"/reaction/detail"),type:"GET",data:c,dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"}};return K.ajax(u)}function Vt(e){var t=this;if(!e||!e.data)throw Error("Invalid parameter");if(!lt.call(this)){var r=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a={url:this.apiUrl+"/"+n+"/"+s+"/chatgroups",dataType:"json",type:"POST",data:JSON.stringify({owner:this.user,groupname:e.data.groupname,desc:e.data.desc,members:e.data.members,public:e.data.public,approval:e.data.approval,allowinvites:e.data.allowinvites,invite_need_confirm:e.data.inviteNeedConfirm}),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:function(r){e.success&&e.success(r),t.onCreateGroup&&t.onCreateGroup(r)},error:e.error};return ne.debug("Call createGroup:",e),K.ajax(a,m.CREATE_GROUP)}var Jt=Vt;function zt(e){var t;if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!lt.call(this)){var r=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a={entities:[(t={},t["notification_ignore_"+e.groupId]=!0,t)]},c={type:"PUT",url:"".concat(this.apiUrl,"/").concat(n,"/").concat(s,"/users/").concat(this.user),data:JSON.stringify(a),dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call blockGroupMessages",e),K.ajax(c,m.BLOCK_GROUP)}var Yt=zt;function Xt(e){if("number"!=typeof e.limit)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={limit:e.limit,cursor:e.cursor};e.cursor||delete i.cursor;var a={url:this.apiUrl+"/"+o+"/"+n+"/publicchatgroups",type:"GET",dataType:"json",data:i,headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call listGroups",e),K.ajax(a,m.LIST_GROUP)}function $t(e){if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:this.apiUrl+"/"+o+"/"+n+"/users/"+this.user+"/joined_chatgroups",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return ne.debug("Call getGroup",e),K.ajax(i,m.GET_USER_GROUP)}function Qt(e){if("string"!=typeof e.groupId||"string"!=typeof e.newOwner)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={newowner:e.newOwner},o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a={url:this.apiUrl+"/"+n+"/"+s+"/chatgroups/"+e.groupId,type:"PUT",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},data:JSON.stringify(r),success:e.success,error:e.error};return ne.debug("Call changeOwner",e),K.ajax(a,m.CHANGE_OWNER)}var Zt=Qt;function er(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+e.groupId+"?joined_time=true",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getGroupInfo",e),K.ajax(i,m.GET_GROUP_INFO)}function tr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={groupname:e.groupName,description:e.description},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i,type:"PUT",data:JSON.stringify(a),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call modifyGroup",e),K.ajax(c,m.MODIFY_GROUP)}function rr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={pagenum:e.pageNum,pagesize:e.pageSize},o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a={url:this.apiUrl+"/"+n+"/"+s+"/chatgroups/"+e.groupId+"/users",dataType:"json",type:"GET",data:r,headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call listGroupMember",e),K.ajax(a,m.LIST_GROUP_MEMBER)}var or=rr;function nr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getGroupAdmin",e),K.ajax(a,m.GET_GROUP_ADMIN)}function sr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={newadmin:e.username},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/admin",type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call setGroupAdmin",e),K.ajax(c,m.SET_GROUP_ADMIN)}var ir=sr;function ar(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/admin/"+a,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call removeAdmin",e),K.ajax(c,m.REMOVE_GROUP_ADMIN)}function cr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"?version=v3",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call destroyGroup",e),K.ajax(a,m.DISSOLVE_GROUP)}var ur=cr;function lr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/quit",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call quitGroup",e),K.ajax(a,m.QUIT_GROUP)}function pr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.groupId,o={usernames:e.users},n=this.context,s=n.orgName,i=n.appName,a=n.accessToken,c={url:this.apiUrl+"/"+s+"/"+i+"/chatgroups/"+r+"/invite",type:"POST",data:JSON.stringify(o),dataType:"json",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call inviteUsersToGroup",e),K.ajax(c,m.INVITE_TO_GROUP)}var dr=pr;function hr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+e.groupId+"/apply",type:"POST",dataType:"json",data:JSON.stringify({message:e.message||""}),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call joinGroup",e),K.ajax(i,m.JOIN_GROUP)}function fr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={applicant:e.applicant,verifyResult:!0,reason:"no clue"},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/apply_verify",type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call agreeJoinGroup",e),K.ajax(c,m.AGREE_JOIN_GROUP)}var mr=fr;function yr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={applicant:e.applicant,verifyResult:!1,reason:e.reason||""},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/apply_verify",type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call rejectGroupJoinRequest",e),K.ajax(c,m.REJECT_JOIN_GROUP)}var Er=yr;function gr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={invitee:e.invitee,verifyResult:!0},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/invite_verify",type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call acceptGroupInvite",e),K.ajax(c,m.AGREE_INVITE_GROUP)}var _r=gr;function Tr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={invitee:e.invitee,verifyResult:!1},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/invite_verify",type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call rejectGroupInvite",e),K.ajax(c,m.REJECT_INVITE_GROUP)}var vr=Tr;function Or(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.groupId,o=e.username,n=this.context,s=n.orgName,i=n.appName,a=n.accessToken,c={url:this.apiUrl+"/"+s+"/"+i+"/chatgroups/"+r+"/users/"+o,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call removeGroupMember",e),K.ajax(c,m.REMOVE_GROUP_MEMBER)}var Rr=Or;function Ir(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a=e.users.join(","),c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/users/"+a,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call removeGroupMembers",e),K.ajax(c,m.MULTI_REMOVE_GROUP_MEMBER)}var Sr=Ir;function Cr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={usernames:[e.username],mute_duration:e.muteDuration},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/mute",dataType:"json",type:"POST",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},data:JSON.stringify(a),success:e.success,error:e.error};return ne.debug("Call muteGroupMember",e),K.ajax(c,m.MUTE_GROUP_MEMBER)}var Nr=Cr;function Ar(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/mute/"+a,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call unmuteGroupMember",e),K.ajax(c,m.UNMUTE_GROUP_MEMBER)}var br=Ar;function Mr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getGroupMuteList",e),K.ajax(a,m.GET_GROUP_MUTE_LIST)}var Ur=Mr;function wr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/blocks/users/"+a,type:"POST",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call blockGroupMember",e),K.ajax(c,m.BLOCK_GROUP_MEMBER)}var kr=wr;function Pr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={usernames:e.usernames},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/blocks/users",data:JSON.stringify(a),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call blockGroupMembers",e),K.ajax(c,m.BLOCK_GROUP_MEMBERS)}var xr=Pr;function Lr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/blocks/users/"+a,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call unblockGroupMember",e),K.ajax(c,m.UNBLOCK_GROUP_MEMBER)}var Gr=Lr;function Dr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a=e.usernames.join(","),c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/blocks/users/"+a,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call unblockGroupMembers",e),K.ajax(c,m.UNBLOCK_GROUP_MEMBERS)}var Br=Dr;function jr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getGroupBlacklist",e),K.ajax(a,m.GET_GROUP_BLACK_LIST)}var Hr=jr;function Fr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/ban",type:"POST",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call disableSendGroupMsg",e),K.ajax(a,m.DISABLED_SEND_GROUP_MSG)}function Wr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/ban",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call enableSendGroupMsg",e),K.ajax(a,m.ENABLE_SEND_GROUP_MSG)}function qr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={usernames:e.users},c={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/white/users",type:"POST",data:JSON.stringify(a),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call addUsersToGroupWhitelist",e),K.ajax(c,m.ADD_USERS_TO_GROUP_WHITE)}function Kr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/white/users/"+e.userName,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call removeGroupWhitelistMember",e),K.ajax(a,m.REMOVE_GROUP_WHITE_MEMBER)}var Vr=Kr;function Jr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getGroupWhitelist",e),K.ajax(a,m.GET_GROUP_WHITE_LIST)}function zr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+i+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call isGroupWhiteUser",e),K.ajax(a,m.IS_IN_GROUP_WHITE_LIST)}var Yr=zr;function Xr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.msgId||""===e.msgId)throw Error('Invalid parameter: "msgId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:this.apiUrl+"/"+o+"/"+n+"/chatgroups/"+e.groupId+"/acks/"+e.msgId,dataType:"json",type:"GET",data:{limit:500,key:void 0},headers:{Authorization:"Bearer "+s},success:e.success,error:e.error};return ne.debug("Call getGroupMsgReadUser",e),K.ajax(i,m.GET_GROUP_MSG_READ_USER)}function $r(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/chatgroups/").concat(i,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call fetchGroupAnnouncement",e),K.ajax(a,m.GET_GROUP_ANN)}function Qr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a={announcement:e.announcement},c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/chatgroups/").concat(i,"/announcement"),type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call updateGroupAnnouncement",e),K.ajax(c,m.UPDATE_GROUP_ANN)}function Zr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("object"!=typeof e.file)throw Error('Invalid parameter: "file"');if(lt.call(this)){var t=this.context,r=t.orgName,o=t.appName,n=t.accessToken,s=e.groupId;K.uploadFile({uploadUrl:"".concat(this.apiUrl,"/").concat(r,"/").concat(o,"/chatgroups/").concat(s,"/share_files"),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:n,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},m.UPLOAD_GROUP_FILE),ne.debug("Call uploadGroupSharedFile",e)}}function eo(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "file"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.groupId,a=e.fileId,c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/chatgroups/").concat(i,"/share_files/").concat(a),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call deleteGroupSharedFile",e),K.ajax(c,m.DELETE_GROUP_FILE)}function to(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.pageNum||1,a=e.pageSize||10,c=e.groupId,u={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/chatgroups/").concat(c,"/share_files?pagenum=").concat(i,"&pagesize=").concat(a),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call fetchGroupSharedFileList",e),K.ajax(u,m.GET_GROUP_FILE_LIST)}function ro(e){var t=this.context,r=t.orgName,o=t.appName,n=t.accessToken,s=this.apiUrl,i=e.groupId,a=e.fileId;K.download.call(this,{url:"".concat(s,"/").concat(r,"/").concat(o,"/chatgroups/").concat(i,"/share_files/").concat(a),onFileDownloadComplete:e.onFileDownloadComplete,onFileDownloadError:e.onFileDownloadError,accessToken:n,id:a,secret:e.secret},m.DOWN_GROUP_FILE),ne.debug("Call downloadGroupSharedFile",e)}function oo(e){var t=this;if("number"!=typeof e.pagenum||"number"!=typeof e.pagesize)throw Error("Invalid parameter");if(!lt.call(this)){var r=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o={pagenum:e.pagenum||1,pagesize:e.pagesize||20},n=this.context,s=n.orgName,i=n.appName,a=n.accessToken,c={url:this.apiUrl+"/"+s+"/"+i+"/chatrooms",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+a},data:o,success:function(t){"function"==typeof e.success&&e.success(t)},error:function(r){r.error&&r.error_description&&t.onError&&t.onError({type:d.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:r.error_description,data:r}),"function"==typeof e.error&&e.error(r)}};return ne.debug("Call getChatRooms",e),K.ajax(c,m.GET_CHATROOM_LIST)}function no(e){if("string"!=typeof e.name)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={name:e.name,description:e.description,maxusers:e.maxusers,owner:this.user,members:e.members},o=this.context,n=o.orgName,s=o.appName,i=(o.accessToken,{url:this.apiUrl+"/"+n+"/"+s+"/chatrooms",dataType:"json",type:"POST",data:JSON.stringify(r),headers:{Authorization:"Bearer "+e.token||0,"Content-Type":"application/json"},success:e.success,error:e.error});return ne.debug("Call createChatRoom",e),K.ajax(i,m.CREATE_CHATROOM)}function so(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=(r.accessToken,{url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+e.chatRoomId,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+e.token||0},success:e.success,error:e.error});return ne.debug("Call destroyChatRoom",e),K.ajax(s,m.DESTROY_CHATROOM)}function io(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+e.chatRoomId,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getChatRoomDetails",e),K.ajax(i,m.GET_CHATROOM_DETAIL)}function ao(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={groupname:e.chatRoomName,description:e.description,maxusers:e.maxusers},c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i,type:"PUT",data:JSON.stringify(a),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call modifyChatRoom",e),K.ajax(c,m.MODIFY_CHATROOM)}function co(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||"string"!=typeof e.username)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/users/"+a,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call removeChatRoomMember",e),K.ajax(c,m.REMOVE_CHATROOM_MEMBER)}var uo=co;function lo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.chatRoomId,o=e.users.join(","),n=this.context,s=n.orgName,i=n.appName,a=n.accessToken,c={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(i,"/chatrooms/").concat(r,"/users/").concat(o),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call removeChatRoomMembers",e),K.ajax(c,m.MULTI_REMOVE_CHATROOM_MEMBER)}var po=lo;function ho(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.chatRoomId,o={usernames:e.users},n=this.context,s=n.orgName,i=n.appName,a=n.accessToken,c={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(i,"/chatrooms/").concat(r,"/users"),type:"POST",data:JSON.stringify(o),dataType:"json",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call addUsersToChatRoom",e),K.ajax(c,m.ADD_USERS_TO_CHATROOM)}function fo(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+e.roomId+"/apply",dataType:"json",type:"POST",data:JSON.stringify({message:e.message||""}),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call joinChatRoom",e),K.ajax(i,m.JOIN_CHATROOM)}function mo(e){var t=this;if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!lt.call(this)){var r=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a={url:this.apiUrl+"/"+n+"/"+s+"/chatrooms/"+e.roomId+"/quit",dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+i},success:function(r){t._load_msg_cache=t._load_msg_cache.filter((function(t){return(!t.isGroup||t.to!==e.roomId)&&t})),"function"==typeof e.success&&e.success(r)},error:e.error};return ne.debug("Call quitChatRoom",e),K.ajax(a,m.QUIT_CHATROOM)}function yo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={pagenum:e.pageNum,pagesize:e.pageSize},o=this.context,n=o.orgName,s=o.appName,i=o.accessToken,a={url:this.apiUrl+"/"+n+"/"+s+"/chatrooms/"+e.chatRoomId+"/users",dataType:"json",type:"GET",data:r,headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call listChatRoomMembers",e),K.ajax(a,m.LIST_CHATROOM_MEMBERS)}var Eo=yo;function go(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getChatRoomAdmin",e),K.ajax(a,m.GET_CHATROOM_ADMIN)}function _o(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={newadmin:e.username},c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/admin",type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call setChatRoomAdmin",e),K.ajax(c,m.SET_CHATROOM_ADMIN)}function To(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/admin/"+a,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call removeChatRoomAdmin",e),K.ajax(c,m.REMOVE_CHATROOM_ADMIN)}function vo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={usernames:[e.username],mute_duration:e.muteDuration},c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/mute",dataType:"json",type:"POST",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},data:JSON.stringify(a),success:e.success,error:e.error};return ne.debug("Call muteChatRoomMember",e),K.ajax(c,m.MUTE_CHATROOM_MEMBER)}function Oo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/mute/"+a,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call unmuteChatRoomMember",e),K.ajax(c,m.REMOVE_MUTE_CHATROOM_MEMBER)}var Ro=Oo;function Io(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getChatRoomMuteList",e),K.ajax(a,m.GET_MUTE_CHATROOM_MEMBERS)}var So=Io;function Co(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/blocks/users/"+a,type:"POST",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call blockChatRoomMember",e),K.ajax(c,m.SET_CHATROOM_MEMBER_TO_BLACK)}var No=Co;function Ao(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={usernames:e.usernames},c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/blocks/users",data:JSON.stringify(a),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Chat RoomBlock Multi Api:",c),K.ajax(c,m.MULTI_SET_CHATROOM_MEMBER_TO_BLACK)}var bo=Ao;function Mo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a=e.username,c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/blocks/users/"+a,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call unblockChatRoomMember",e),K.ajax(c,m.REMOVE_CHATROOM_MEMBER_BLACK)}var Uo=Mo;function wo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a=e.usernames.join(","),c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/blocks/users/"+a,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call unblockChatRoomMembers",e),K.ajax(c,m.MULTI_REMOVE_CHATROOM_MEMBER_BLACK)}var ko=wo;function Po(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getChatRoomBlacklist",e),K.ajax(a,m.GET_CHATROOM_BLOCK_MEMBERS)}var xo=Po;function Lo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/ban",type:"POST",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call disableSendChatRoomMsg",e),K.ajax(a,m.DISABLED_CHATROOM_SEND_MSG)}function Go(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/ban",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call enableSendChatRoomMsg",e),K.ajax(a,m.ENABLE_CHATROOM_SEND_MSG)}function Do(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={usernames:e.users},c={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/white/users",type:"POST",data:JSON.stringify(a),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call addUsersToChatRoomWhitelist",e),K.ajax(c,m.ADD_USERS_TO_CHATROOM)}function Bo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/white/users/"+e.userName,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call removeChatRoomWhitelistMember",e),K.ajax(a,m.REMOVE_CHATROOM_WHITE_USERS)}var jo=Bo;function Ho(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getChatRoomWhitelist",e),K.ajax(a,m.GET_CHATROOM_WHITE_USERS)}function Fo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.chatRoomId,a={url:this.apiUrl+"/"+o+"/"+n+"/chatrooms/"+i+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call isChatRoomWhiteUser",e),K.ajax(a,m.CHECK_CHATROOM_WHITE_USER)}function Wo(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.roomId,a={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/chatrooms/").concat(i,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call fetchChatRoomAnnouncement",e),K.ajax(a,m.GET_CHATROOM_ANN)}function qo(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.roomId,a={announcement:e.announcement},c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/chatrooms/").concat(i,"/announcement"),type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call updateChatRoomAnnouncement:",e),K.ajax(c,m.UPDATE_CHATROOM_ANN)}function Ko(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("object"!=typeof e.file)throw Error('Invalid parameter: "file"');if(lt.call(this)){var t=this.context,r=t.orgName,o=t.appName,n=t.accessToken,s=e.roomId;K.uploadFile({uploadUrl:"".concat(this.apiUrl,"/").concat(r,"/").concat(o,"/chatrooms/").concat(s,"/share_files"),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:n,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},m.UPLOAD_CHATROOM_FILE),ne.debug("Call uploadChatRoomSharedFile",e)}}function Vo(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "fileId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.roomId,a=e.fileId,c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/chatrooms/").concat(i,"/share_files/").concat(a),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call deleteChatRoomSharedFile",e),K.ajax(c,m.DELETE_CHATROOM_FILE)}function Jo(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.accessToken,i=e.roomId,a={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/chatrooms/").concat(i,"/share_files"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json",accept:"application/json"},success:e.success,error:e.error};return ne.debug("Call fetchChatRoomSharedFileList",e),K.ajax(a,m.GET_CHATROOM_FILES)}function zo(e){if("string"!=typeof e.description)throw Error('Invalid parameter: "description"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.accessToken,n=r.orgName,s=r.appName,i=r.userId,a=this.context.jid.clientResource,c={ext:e.description},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(s,"/users/").concat(i,"/presence/").concat(a,"/1"),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call publishPresence:",e),K.ajax(u)}function Yo(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if("number"!=typeof e.expiry)throw Error('Invalid parameter: "expiry"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.userId,i=r.accessToken,a={usernames:e.usernames},c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/users/").concat(s,"/presence/").concat(e.expiry),type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call subscribePresence:",e),K.ajax(c)}function Xo(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.userId,i=r.accessToken,a=(e.usernames,{url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/users/").concat(s,"/presence"),type:"DELETE",dataType:"json",data:JSON.stringify(e.usernames),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error});return ne.debug("Call unsubscribePresence:",e),K.ajax(a)}function $o(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "page or pagesize"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,o=r.orgName,n=r.appName,s=r.userId,i=r.accessToken,a={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(n,"/users/").concat(s,"/presence/sublist?pageNum=").concat(e.pageNum,"&pageSize=").concat(e.pageSize),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getSubscribedPresenceList:",e),K.ajax(a)}function Qo(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!lt.call(this)){var t=l.create({type:d.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={usernames:e.usernames},o=this.context,n=o.orgName,s=o.appName,i=o.userId,a=o.accessToken,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(s,"/users/").concat(i,"/presence"),type:"POST",dataType:"json",data:JSON.stringify(r),headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return ne.debug("Call getPresenceStatus:",e),K.ajax(c)}var Zo=function(){return Zo=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Zo.apply(this,arguments)},en=K.getEnvInfo(),tn="web"===en.platform,rn=function(){};function on(e,t){var r=this,o=t.rpt,n=t.isRetry,s=e.promise,i=this.apiUrl+"/"+this.orgName+"/"+this.appName+"/users",a={requestName:y.RESISTER,requestUrl:i},c=e.error||rn;if(!this.orgName&&!this.appName){var u=l.create({type:d.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"signup error"});return c(u),Promise.reject(u)}var p={headers:{"Content-type":"application/json"},url:i,dataType:"json",data:JSON.stringify({username:e.username,password:e.password,nickname:e.nickname||""}),success:function(t){e.success&&e.success(t);var r=Zo(Zo({},t),{type:d.REQUEST_SUCCESS});s.resolve&&s.resolve(r);var i=t.extraInfo,c=i.httpCode,u=i.elapse;o({isEndApi:!0,isRetry:n,data:Zo(Zo({},{requestElapse:u,isSuccess:!0,code:c}),a)})},error:function(t){var i=t.extraInfo,u=i.elapse,l=i.httpCode,p=i.errDesc;return o({isRetry:n,data:Zo(Zo({},{requestElapse:u,isSuccess:!1,code:l,codeDesc:p}),a)}),r.isHttpDNS&&r.restIndex+1<r.restTotal?(r.restIndex++,dn.call(r,"signup"),on.call(r,e,{rpt:o,isRetry:n}),Promise.reject(t)):(o({data:{isLastAPI:1,isSuccess:!1}}),r.clear(),s.reject&&s.reject(t),c(t))}};return K.ajax(p)}function nn(e,t){var r=this;if(un.call(this,e)&&!this.isOpened()){var o=t.rpt,n=t.isRetry;ln.call(this,e),this.user=e.user;var s=e.promise,i=this.context.appName,a=this.context.orgName,c=this.apiUrl+"/"+a+"/"+i+"/token";if(e.agoraToken)this.grantType="agoraToken",this.getChatToken(e.agoraToken).then((function(t){ne.info("getChatToken result:",t),r.expirationTime=t.expire_timestamp,r.token=t.access_token,r.context.accessToken=t.access_token,r.context.restTokenData=t.access_token;var n=t.extraInfo,i=n.httpCode,a=n.elapse;s.resolve({accessToken:t.access_token,expireTimestamp:t.expire_timestamp}),cn.call(r,Zo(Zo({},e),{access_token:t.access_token}),o);var u={requestName:y.LOGIN_BY_AGORA_TOKEN,requestUrl:c,requestElapse:a,isSuccess:!0,code:i};o({data:u})})).catch((function(e){var t,n=l.create({type:d.WEBIM_CONNCTION_GETROSTER_ERROR,message:"get chat token fail",data:e});s.reject(n),r.onError&&r.onError(n),null===(t=r.eventHandler)||void 0===t||t.dispatch("onError",n);var i=e.extraInfo,a=i.elapse,u=i.httpCode,p=i.errDesc,h={requestName:y.LOGIN_BY_AGORA_TOKEN,requestUrl:c,requestElapse:a,isSuccess:!1,code:u,codeDesc:p};o({data:h}),o({data:{isLastAPI:1,isSuccess:!1}})}));else if(e.accessToken)this.grantType="accessToken",this.token=e.accessToken,this.context.accessToken=e.accessToken,this.context.restTokenData=e.accessToken,s.resolve({accessToken:e.accessToken}),cn.call(this,e,o);else{this.grantType="password";var u={grant_type:"password",username:e.user,password:e.pwd,timestamp:+new Date},p=JSON.stringify(u),h={headers:{"Content-type":"application/json"},url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/token",dataType:"json",data:p,success:function(t){"function"==typeof e.success&&e.success(t),r.token=t.access_token,r.context.restTokenData=t.access_token,r.context.accessToken=t.access_token,s.resolve({accessToken:t.access_token,duration:t.expires_in});var i=t.extraInfo,a=i.httpCode,u=i.elapse,l={requestName:y.LOGIN_BY_PWD,requestElapse:u,requestUrl:c,isSuccess:!0,code:a};o({isRetry:n,data:l}),cn.call(r,t,o)}||rn,error:function(t){var i,a=t.extraInfo,u=a.elapse,p=a.httpCode,h=a.errDesc,f={requestName:y.LOGIN_BY_PWD,requestElapse:u,requestUrl:c,isSuccess:!1,code:p,codeDesc:h};if(o({isRetry:n,data:f}),r.isHttpDNS&&r.restIndex+1<r.restTotal)return r.restIndex++,dn.call(r,"login"),void nn.call(r,e,{rpt:o,isRetry:!0});o({data:{isLastAPI:1,isSuccess:!1}}),r.clear(),t.error&&t.error_description?(i=l.create({type:d.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,message:t.error_description,data:t}),r.onError&&r.onError(i)):(i=l.create({type:d.WEBIM_CONNCTION_OPEN_ERROR,message:"login failed",data:t}),r.onError&&r.onError(i)),"function"==typeof e.error&&e.error(i),s.reject(i)}||rn,version:"4.0.0"};K.ajax(h).catch((function(e){console.warn(e)}))}K.listenNetwork(sn.bind(this),an.bind(this))}}function sn(){var e;ne.debug("online"),this.onOnline&&this.onOnline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOnline"),this.sock&&1!==this.sock.readyState&&(ne.debug("sock.readyState:",this.sock.readyState),this.reconnect())}function an(){var e;ne.debug("offline"),this.onOffline&&this.onOffline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOffline")}function cn(e,t){var r=this,o=this._getSock();this.sock=o;var n=function(){var e;r.logOut=!1,t&&t({data:{isLastAPI:1,isSuccess:!0,accessChannel:null===(e=r.socketHost[r.hostIndex])||void 0===e?void 0:e.channel}}),"zfb"!==en.platform&&"dd"!==en.platform||(r.sock.readyState=1);var n=K.flow([r.mSync.generateProvision,r.mSync.base64transform])();try{o.send(n)}catch(e){var s=l.create({type:d.SDK_RUNTIME_ERROR,message:"send message error",data:e});r.onError&&r.onError(s)}},s=function(){var e,t;if(ne.debug("websockt onClose"),"zfb"!==en.platform&&"dd"!==en.platform||(r.sock.readyState=3),!r.logOut&&r.autoReconnectNumTotal<r.autoReconnectNumMax){r.reconnect();var o={type:d.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};r.onError&&r.onError(o)}else r.logOut?(r.clear(),r.onClosed&&r.onClosed(),null===(e=r.eventHandler)||void 0===e||e.dispatch("onDisconnected"),r.mSync.stopHeartBeat(),r.autoReconnectInterval=0,r.times=1,r.autoReconnectNumTotal=0,r.hostIndex=0):(o={type:d.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"},r.onError&&r.onError(o),r.onClosed&&r.onClosed(),null===(t=r.eventHandler)||void 0===t||t.dispatch("onDisconnected"),r.mSync.stopHeartBeat(),ne.debug("reconnect fail"),r.autoReconnectInterval=0,r.times=1,r.autoReconnectNumTotal=0,r.hostIndex=0)},i=function(e){var t=r.mSync,o=t.decodeMSync,n=t.distributeMSync;K.flow([o,n])(e)};"web"===en.platform?(o.onopen=n,o.onclose=s,o.onmessage=i):(o.onOpen(n),o.onMessage(i),o.onClose(s),o.onError((function(e){var o;ne.debug(" sock on error",e),r.isOnCloseReconnet=!1,r.onError&&r.onError({type:d.WEBIM_CONNECTION_ERROR,message:"on socket error",data:e}),!r.logOut&&r.autoReconnectNumTotal<r.autoReconnectNumMax&&(ne.debug("----- sock.onError reconnect -----",r.autoReconnectNumTotal,r.autoReconnectNumMax),r.reconnect()),t&&t({data:{isLastAPI:1,isSuccess:!1,accessChannel:null===(o=r.socketHost[r.hostIndex])||void 0===o?void 0:o.channel}})})))}function un(e){if(""===e.user){var t=l.create({type:d.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR,message:"the user cannot be empty"});return this.onError&&this.onError(t),!1}var r=this.appKey.split("#");return!(2!==r.length||!r[0]||!r[1])||(t=l.create({type:d.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"the appKey is illegal"}),this.onError&&this.onError(t),!1)}function ln(e){this.context.jid={appKey:this.appKey,name:e.user,domain:this.domain,clientResource:this.clientResource};var t=this.appKey.split("#"),r=t[0],o=t[1];this.context.root=this.root,this.context.userId=e.user,this.context.appKey=this.appKey,this.context.appName=o,this.context.orgName=r}function pn(e,t,r){var o=this,n=r.rpt,s=r.isRetry,i=this.dnsArr[this.dnsIndex]+"/easemob/server.json",a={url:i,dataType:"json",type:"GET",data:{app_key:encodeURIComponent(this.appKey)},success:function(r){var a,c=r.extraInfo,u=c.elapse,l=c.httpCode,p={requestUrl:i,requestName:y.GET_DNS,requestElapse:u,isSuccess:!0,code:l};n({isRetry:s,data:p});var d=r.rest.hosts,h=o.https?"https":"http";if(ne.info("httpType: "+h),!d)return Promise.reject(!1);for(var f=d.filter((function(e){if(e.protocol===h)return e})),m=0;m<f.length;m++)if(f[m].protocol===h){var E=f[m];f.splice(m,1),f.unshift(E)}o.restHosts=f,o.restTotal=f.length;var g=r["msync-ws"].hosts;if(!g)return Promise.reject(!1);var _=g.filter((function(e){return e.protocol===h&&e}));o.socketHost=_,o.hostTotal=_.length;var T=((null===(a=r["mserver-im"])||void 0===a?void 0:a.hosts)||[]).filter((function(e){if(e.protocol===h)return e}));for(m=0;m<T.length;m++){var v=T[m];T.splice(m,1),T.unshift(v)}if(o.mserverHosts=T,o.mserverTotal=T.length,T&&T.length>0){var O=T[o.mserverIndex],R=O.protocol,I=O.domain,S={url:"".concat(R,"://").concat(I,"/api/v1/sdk/config"),dataType:"json",type:"GET",data:{appkey:encodeURIComponent(o.appKey),version:encodeURIComponent(o.version)},success:function(e){JSON.parse(e.data).enableServer?(null==L||L.getInstance().setIsCollectDt(!0),null==L||L.getInstance().setIsReportDt(!0)):(null==L||L.getInstance().setIsReportDt(!1),null==L||L.getInstance().setIsCollectDt(!1))},error:function(){console.warn("The service configuration request failed")}};K.ajax(S)}dn.call(o,e),"login"===e?nn.call(o,t,{rpt:n}):on.call(o,t,{rpt:n})}||rn,error:function(r){var a=r.extraInfo,c=a.elapse,u=a.httpCode,l=a.errDesc,p={requestUrl:i,requestName:y.GET_DNS,isSuccess:!1,code:u,codeDesc:l,requestElapse:c};n({isRetry:s,data:p}),ne.debug("getHttpDNS fail: "+o.dnsIndex),o.dnsIndex++,o.dnsIndex<o.dnsTotal&&pn.call(o,e,t,{rpt:n,isRetry:!0})}||rn};return K.ajax(a).catch((function(e){console.warn(e)}))}function dn(e){var t,r;if(this.restIndex>this.restTotal)return"";var o="",n=this.restHosts[this.restIndex],s=n.domain,i=n.ip,a=n.port,c=this.https?"https:":"http:";return i&&"undefined"!=typeof window&&"http:"===(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.protocol)?o=c+"//"+i+":"+a:(o=c+"//"+s,a&&"80"!==a&&"443"!==a&&(o+=":".concat(a)),"undefined"==typeof window||window.location||(o="https://"+s),"undefined"!=typeof window&&window.location&&"file:"===(null===(r=window.location)||void 0===r?void 0:r.protocol)&&(o="https://"+s)),"undefined"==typeof window&&(o=c+"//"+s),this.apiUrl=o,o}const hn=function(){function n(s){var i;this.isDebug=s.isDebug||!1,this.isReport=s.isReport||!1,this.isHttpDNS=void 0===s.isHttpDNS?tn:s.isHttpDNS,this.heartBeatWait=s.heartBeatWait||3e4,this.autoReconnectNumMax=s.autoReconnectNumMax||5,this.delivery=s.delivery||!1,this.dnsArr=["https://rs.easemob.com","http://59.110.89.59","http://39.97.193.190","http://39.97.193.187"],this.dnsIndex=0,this.dnsTotal=this.dnsArr.length,this.restHosts=[],this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.socketHost=[],this.hostTotal=0,this.times=1,this.autoReconnectNumTotal=0,this.domain="easemob.com",this.appKey=s.appKey,this.appName="",this.orgName="",this.token="",this.grantType="",this.apiUrl=s.apiUrl||"",this.url=s.url||"",this.https=s.https||"undefined"!=typeof window&&"https:"===(null===(i=window.location)||void 0===i?void 0:i.protocol),this.mserverIndex=0,this.version="4.0.3",this.deviceId=s.deviceId||"webim",this.osType=16,this.useOwnUploadFun=s.useOwnUploadFun||!1,this.compressType=[0],this.encryptType=[0],this.clientResource="",this.expiresIn=0,this.expirationTime=0,this.logOut=!0,this.context={jid:{appKey:"",clientResource:"",domain:"easemob.com",name:""},userId:"",appKey:"",status:0,restTokenData:"",appName:"",orgName:"",root:{},accessToken:""},this._msgHash={},this._msgPromiseHash={},this._queues=[],this._load_msg_cache=[],this.unSendMsgArr=[],this.mr_cache={};var a=this.appKey.split("#");if(2!==a.length&&a[0]&&a[1])throw Error("Illegal appkey: ".concat(this.appKey));this.orgName=a[0],this.appName=a[1],this.listen=at.bind(this),this.mSync=this.usePlugin(ot),this.eventHandler=this.usePlugin(st),Object.assign(n.prototype,e),Object.assign(n.prototype,t),Object.assign(n.prototype,r),Object.assign(n.prototype,o),new L({appkey:this.appKey,org:this.orgName,sdkVersion:this.version,deviceId:this.deviceId,isReport:this.isReport})}return n.prototype.usePlugin=function(e,t){if(!t)return new e(this);this[t]=new e(this)},n.prototype.listen=function(e){},n.prototype.addEventHandler=function(e,t){},n.prototype.removeEventHandler=function(e){},n.prototype.registerUser=function(e){var t=this;return new Promise((function(r,o){var n,s=null===(n=L.getInstance())||void 0===n?void 0:n.geOperateFun({uid:e.username,operationName:m.REGISTER});if(t.isHttpDNS){t.dnsIndex=0;var i=Zo(Zo({},e),{user:e.username,pwd:e.password,promise:{resolve:r,reject:o}});pn.call(t,"signup",i,{rpt:s})}else i=Zo(Zo({},e),{promise:{resolve:r,reject:o}}),on.call(t,i,{rpt:s})}))},n.prototype.open=function(e){var t=this;return ne.debug("open"),new Promise((function(r,o){if(un.call(t,e)){e.accessToken&&(t.token=e.accessToken);var n=Zo(Zo({},e),{promise:{resolve:r,reject:o}}),s=L.getInstance().geOperateFun({uid:e.user,operationName:m.LOGIN});t.isHttpDNS?pn.call(t,"login",n,{rpt:s}):nn.call(t,n,{rpt:s})}}))},n.prototype.isOpened=function(){return this.sock&&1===this.sock.readyState||!1},n.prototype.close=function(){this.logOut=!0,this.context.status=d.STATUS_CLOSING,this.sock&&this.sock.close(),this.stopHeartBeat(),this.context.status=d.STATUS_CLOSED},n.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},n.prototype._checkOpenParams=function(e){return un.call(this,e)},n.prototype.clear=function(){this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.hostTotal=0},n.prototype.heartBeat=function(){},n.prototype.getChatToken=function(e){var t=this.context.appName,r=this.context.orgName,o={url:this.apiUrl+"/"+r+"/"+t+"/token",dataType:"json",type:"POST",data:JSON.stringify({grant_type:"agora"}),headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}};return K.ajax(o)},n.prototype.renewToken=function(e){var t=this;return this.isOpened()?this.getChatToken(e).then((function(e){var r=Date.now();return t.expirationTime=e.expire_timestamp,t.expiresIn=e.expire_timestamp-r,t.token=e.access_token,t.context.accessToken=e.access_token,t.clearTokenTimeout(),t.tokenExpireTimeCountDown(t.expiresIn),{status:!0,token:e.access_token,expire:e.expire_timestamp}})):Promise.reject({status:!1})},n.prototype.clearTokenTimeout=function(){ne.debug("clearTokenTimeout"),this.tokenWillExpireTimer&&clearTimeout(this.tokenWillExpireTimer),this.tokenExpiredTimer&&clearTimeout(this.tokenExpiredTimer)},n.prototype.tokenExpireTimeCountDown=function(e){var t=this;this.tokenWillExpireTimer=setTimeout((function(){var e;t.onTokenWillexpire&&t.onTokenWillexpire(),null===(e=t.eventHandler)||void 0===e||e.dispatch("onTokenWillExpire"),ne.info("onTokenWillExpire")}),e/2),this.tokenExpiredTimer=setTimeout((function(){var e;ne.info("onTokenExpired"),t.onTokenExpired&&t.onTokenExpired(),null===(e=t.eventHandler)||void 0===e||e.dispatch("onTokenExpired"),t.close()}),e)},n.prototype.compareTokenExpireTime=function(e,t){var r,o=Number(t)-Number(e);ne.debug("compareTokenExpireTime",o),o<=this.expiresIn/2&&o>0?(this.onTokenWillExpire&&this.onTokenWillExpire(),null===(r=this.eventHandler)||void 0===r||r.dispatch("onTokenWillExpire"),ne.info("onTokenWillExpire")):o<=0&&(this.closeByTokenExpired(),ne.info("closeByTokenExpired"))},n.prototype.closeByTokenExpired=function(){var e;ne.info("closed By TokenExpired"),this.onTokenExpired&&this.onTokenExpired(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onTokenExpired"),this.close()},n.prototype.reconnect=function(){var e=this;ne.info("reconnect: time",this.times),ne.info("reconnect sock.readyState: ",this.sock.readyState),0!==this.sock.readyState&&1!==this.sock.readyState&&(this.isHttpDNS&&(this.hostIndex,this.socketHost.length),this.hostIndex++,this.hostIndex>=this.socketHost.length-1&&(this.hostIndex=this.socketHost.length-1),setTimeout((function(){ne.info("login sock.readyState: ",e.sock.readyState),e.sock.close(),1!==e.sock.readyState&&(cn.call(e,{access_token:e.context.accessToken}),e.autoReconnectInterval+=e.times*e.times,e.times++)}),500*this.times),this.autoReconnectNumTotal++)},n.prototype.send=function(e){return Promise.resolve(null)},n.max_cache_length=100,n._getSock=function(){},n}();a().util.Long=u(),a().configure();var fn=a().Root.fromJSON({nested:{easemob:{nested:{pb:{nested:{MessageBody:{fields:{type:{type:"Type",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},contents:{rule:"repeated",type:"Content",id:4},ext:{rule:"repeated",type:"KeyValue",id:5},ackMessageId:{type:"uint64",id:6},msgConfig:{type:"MessageConfig",id:7},ackContent:{type:"string",id:8},meta:{type:"string",id:9}},nested:{Content:{fields:{type:{type:"Type",id:1},text:{type:"string",id:2},latitude:{type:"double",id:3},longitude:{type:"double",id:4},address:{type:"string",id:5},displayName:{type:"string",id:6},remotePath:{type:"string",id:7},secretKey:{type:"string",id:8},fileLength:{type:"int32",id:9},action:{type:"string",id:10},params:{rule:"repeated",type:"KeyValue",id:11},duration:{type:"int32",id:12},size:{type:"Size",id:13},thumbnailRemotePath:{type:"string",id:14},thumbnailSecretKey:{type:"string",id:15},thumbnailDisplayName:{type:"string",id:16},thumbnailFileLength:{type:"int32",id:17},thumbnailSize:{type:"Size",id:18},customEvent:{type:"string",id:19},customExts:{rule:"repeated",type:"KeyValue",id:20},buildingName:{type:"string",id:21}},nested:{Type:{values:{TEXT:0,IMAGE:1,VIDEO:2,LOCATION:3,VOICE:4,FILE:5,COMMAND:6,CUSTOM:7}},Size:{fields:{width:{type:"double",id:1},height:{type:"double",id:2}}}}},Type:{values:{NORMAL:0,CHAT:1,GROUPCHAT:2,CHATROOM:3,READ_ACK:4,DELIVER_ACK:5,RECALL:6,CHANNEL_ACK:7}},MessageConfig:{fields:{allowGroupAck:{type:"bool",id:1}}}}},KeyValue:{oneofs:{value:{oneof:["varintValue","floatValue","doubleValue","stringValue"]}},fields:{key:{type:"string",id:1},type:{type:"ValueType",id:2},varintValue:{type:"int64",id:3},floatValue:{type:"float",id:4},doubleValue:{type:"double",id:5},stringValue:{type:"string",id:6}},nested:{ValueType:{values:{BOOL:1,INT:2,UINT:3,LLINT:4,FLOAT:5,DOUBLE:6,STRING:7,JSON_STRING:8}}}},JID:{fields:{appKey:{type:"string",id:1},name:{type:"string",id:2},domain:{type:"string",id:3},clientResource:{type:"string",id:4}}},ConferenceBody:{fields:{sessionId:{type:"string",id:1},operation:{type:"Operation",id:2},conferenceId:{type:"string",id:3},type:{type:"Type",id:4},content:{type:"string",id:5},network:{type:"string",id:6},version:{type:"string",id:7},identity:{type:"Identity",id:8},duration:{type:"string",id:9},peerName:{type:"string",id:10},endReason:{type:"EndReason",id:11},status:{type:"Status",id:12},isDirect:{type:"bool",id:13},controlType:{type:"StreamControlType",id:14},routeFlag:{type:"int32",id:15},routeKey:{type:"string",id:16}},nested:{Status:{fields:{errorCode:{type:"int32",id:1}}},Operation:{values:{JOIN:0,INITIATE:1,ACCEPT_INITIATE:2,ANSWER:3,TERMINATE:4,REMOVE:5,STREAM_CONTROL:6,MEDIA_REQUEST:7}},Type:{values:{VOICE:0,VIDEO:1}},Identity:{values:{CALLER:0,CALLEE:1}},EndReason:{values:{HANGUP:0,NORESPONSE:1,REJECT:2,BUSY:3,FAIL:4,UNSUPPORTED:5,OFFLINE:6}},StreamControlType:{values:{PAUSE_VOICE:0,RESUME_VOICE:1,PAUSE_VIDEO:2,RESUME_VIDEO:3}}}},MSync:{fields:{version:{type:"Version",id:1,options:{default:"MSYNC_V1"}},guid:{type:"JID",id:2},auth:{type:"string",id:3},compressAlgorimth:{type:"uint32",id:4},crypto:{type:"uint32",id:5},userAgent:{type:"string",id:6},pov:{type:"uint64",id:7},command:{type:"Command",id:8},deviceId:{type:"uint32",id:10},encryptType:{rule:"repeated",type:"EncryptType",id:11,options:{packed:!1}},encryptKey:{type:"string",id:12},payload:{type:"bytes",id:9}},nested:{Version:{values:{MSYNC_V1:0,MSYNC_V2:1}},Command:{values:{SYNC:0,UNREAD:1,NOTICE:2,PROVISION:3}}}},EncryptType:{values:{ENCRYPT_NONE:0,ENCRYPT_AES_128_CBC:1,ENCRYPT_AES_256_CBC:2}},CommSyncUL:{fields:{meta:{type:"Meta",id:1},key:{type:"uint64",id:2},queue:{type:"JID",id:3},isRoam:{type:"bool",id:4},lastFullRoamKey:{type:"uint64",id:5}}},CommSyncDL:{fields:{status:{type:"Status",id:1},metaId:{type:"uint64",id:2},serverId:{type:"uint64",id:3},metas:{rule:"repeated",type:"Meta",id:4},nextKey:{type:"uint64",id:5},queue:{type:"JID",id:6},isLast:{type:"bool",id:7},timestamp:{type:"uint64",id:8},isRoam:{type:"bool",id:9}}},CommNotice:{fields:{queue:{type:"JID",id:1}}},CommUnreadUL:{fields:{}},CommUnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"MetaQueue",id:2},timestamp:{type:"uint64",id:3}}},MetaQueue:{fields:{queue:{type:"JID",id:1},n:{type:"uint32",id:2}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6},routetype:{type:"RouteType",id:7}},nested:{NameSpace:{values:{STATISTIC:0,CHAT:1,MUC:2,ROSTER:3,CONFERENCE:4,NOTIFY:5,QUERY:6}},RouteType:{values:{ROUTE_ALL:0,ROUTE_ONLINE:1}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},reason:{type:"string",id:2},redirectInfo:{rule:"repeated",type:"RedirectInfo",id:3}},nested:{ErrorCode:{values:{OK:0,FAIL:1,UNAUTHORIZED:2,MISSING_PARAMETER:3,WRONG_PARAMETER:4,REDIRECT:5,TOKEN_EXPIRED:6,PERMISSION_DENIED:7,NO_ROUTE:8,UNKNOWN_COMMAND:9,PB_PARSER_ERROR:10,BIND_ANOTHER_DEVICE:11,IM_FORBIDDEN:12,TOO_MANY_DEVICES:13,PLATFORM_LIMIT:14,USER_MUTED:15,ENCRYPT_DISABLE:16,ENCRYPT_ENABLE:17,DECRYPT_FAILURE:18,PERMISSION_DENIED_EXTERNAL:19}}}},RedirectInfo:{fields:{host:{type:"string",id:1},port:{type:"uint32",id:2}}},Provision:{fields:{osType:{type:"OsType",id:1},version:{type:"string",id:2},networkType:{type:"NetworkType",id:3},appSign:{type:"string",id:4},compressType:{rule:"repeated",type:"CompressType",id:5,options:{packed:!1}},encryptType:{rule:"repeated",type:"EncryptType",id:6,options:{packed:!1}},encryptKey:{type:"string",id:7},status:{type:"Status",id:8},deviceUuid:{type:"string",id:9},isManualLogin:{type:"bool",id:10},password:{type:"string",id:11},deviceName:{type:"string",id:12},resource:{type:"string",id:13},auth:{type:"string",id:14},serviceId:{type:"string",id:16}},nested:{OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}},CompressType:{values:{COMPRESS_NONE:0,COMPRESS_ZLIB:1}}}},MUCBody:{fields:{mucId:{type:"JID",id:1},operation:{type:"Operation",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},setting:{type:"Setting",id:5},reason:{type:"string",id:6},isChatroom:{type:"bool",id:7},status:{type:"Status",id:8}},nested:{Operation:{values:{CREATE:0,DESTROY:1,JOIN:2,LEAVE:3,APPLY:4,APPLY_ACCEPT:5,APPLY_DECLINE:6,INVITE:7,INVITE_ACCEPT:8,INVITE_DECLINE:9,KICK:10,GET_BLACKLIST:11,BAN:12,ALLOW:13,UPDATE:14,BLOCK:15,UNBLOCK:16,PRESENCE:17,ABSENCE:18,DIRECT_JOINED:19,ASSIGN_OWNER:20,ADD_ADMIN:21,REMOVE_ADMIN:22,ADD_MUTE:23,REMOVE_MUTE:24,UPDATE_ANNOUNCEMENT:25,DELETE_ANNOUNCEMENT:26,UPLOAD_FILE:27,DELETE_FILE:28,ADD_USER_WHITE_LIST:29,REMOVE_USER_WHITE_LIST:30,BAN_GROUP:31,REMOVE_BAN_GROUP:32}},Setting:{fields:{name:{type:"string",id:1},desc:{type:"string",id:2},type:{type:"Type",id:3},maxUsers:{type:"int32",id:4},owner:{type:"string",id:5}},nested:{Type:{values:{PRIVATE_OWNER_INVITE:0,PRIVATE_MEMBER_INVITE:1,PUBLIC_JOIN_APPROVAL:2,PUBLIC_JOIN_OPEN:3,PUBLIC_ANONYMOUS:4}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,PERMISSION_DENIED:1,WRONG_PARAMETER:2,MUC_NOT_EXIST:3,USER_NOT_EXIST:4,UNKNOWN:5}}}}}},RosterBody:{fields:{operation:{type:"Operation",id:1},status:{type:"Status",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},reason:{type:"string",id:5},rosterVer:{type:"string",id:6},biDirection:{type:"bool",id:7}},nested:{Operation:{values:{GET_ROSTER:0,GET_BLACKLIST:1,ADD:2,REMOVE:3,ACCEPT:4,DECLINE:5,BAN:6,ALLOW:7,REMOTE_ACCEPT:8,REMOTE_DECLINE:9}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,USER_NOT_EXIST:1,USER_ALREADY_FRIEND:2,USER_ALREADY_BLACKLIST:3}}}}}},StatisticsBody:{fields:{operation:{type:"Operation",id:1},os:{type:"OsType",id:2},version:{type:"string",id:3},network:{type:"NetworkType",id:4},imTime:{type:"uint32",id:5},chatTime:{type:"uint32",id:6},location:{type:"string",id:7}},nested:{Operation:{values:{INFORMATION:0,USER_REMOVED:1,USER_LOGIN_ANOTHER_DEVICE:2,USER_KICKED_BY_CHANGE_PASSWORD:3,USER_KICKED_BY_OTHER_DEVICE:4}},OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}}}}}}}}}});hn.prototype.root=fn;var mn=ne.getLogger("IM-SDK-LOG");mn.setConfig({useCache:!1,maxCache:3145728}),mn.enableAll(),hn.prototype._getSock=function(){if(this.isHttpDNS){var e=this.socketHost[this.hostIndex];if(!e)throw this.autoReconnectInterval=0,this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0,this.onClosed&&this.onClosed(),new Error("No connected domain name when get websocket.");var t=e.domain,r=e.ip,o="",n=e.port;o=t||r,n&&"80"!==n&&"443"!==n&&(o+=":"+n),o&&(this.url="//"+o+"/ws");var i=this.https?"https:":"http:";this.url=i+this.url}return new(s())(this.url)},hn.prototype.getUniqueId=K.getUniqueId;var yn={connection:hn,message:ye,utils:K,logger:ne,statusCode:d};"undefined"!=typeof window&&(window.WebIM=yn);const En=yn})(),__webpack_exports__})()}));
//# sourceMappingURL=Easemob-chat.js.map