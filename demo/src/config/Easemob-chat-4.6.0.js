!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.websdk=t():e.websdk=t()}(self,(function(){return function(){var __webpack_modules__={8045:function(e){"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))}},8839:function(e,t){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),o=new Array(123),i=0;i<64;)o[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var o,i=null,a=[],s=0,c=0;t<r;){var u=e[t++];switch(c){case 0:a[s++]=n[u>>2],o=(3&u)<<4,c=1;break;case 1:a[s++]=n[o|u>>4],o=(15&u)<<2,c=2;break;case 2:a[s++]=n[o|u>>6],a[s++]=n[63&u],c=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=n[o],a[s++]=61,1===c&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,s=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&s>1)break;if(void 0===(u=o[u]))throw Error(a);switch(s){case 0:n=u,s=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:t[r++]=(3&n)<<6|u,s=0}}if(1===s)throw Error(a);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},8561:function(e){"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var n=[];function o(e){if("string"!=typeof e){var r=i();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var a=Object.keys(e),s=new Array(a.length+1),c=new Array(a.length),u=0;u<a.length;)s[u]=a[u],c[u]=e[a[u++]];return s[u]=r,Function.apply(null,s).apply(null,c)}return Function(r)()}for(var l=new Array(arguments.length-1),p=0;p<l.length;)l[p]=arguments[++p];if(p=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=l[p++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),p!==l.length)throw Error("parameter count mismatch");return n.push(e),o}function i(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return o.toString=i,o}e.exports=t,t.verbose=!1},4358:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},5212:function(e,t,r){"use strict";e.exports=i;var n=r(8045),o=r(4153)("fs");function i(e,t,r){return"function"==typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&o&&o.readFile?o.readFile(e,(function(n,o){return n&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,r):n?r(n):r(null,t.binary?o:o.toString("utf8"))})):i.xhr(e,t,r):n(i,this,e,t)}i.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var o=0;o<n.responseText.length;++o)e.push(255&n.responseText.charCodeAt(o))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},9410:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function a(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=a.bind(null,o),e.readFloatBE=a.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=n*Math.pow(2,-c))>>>0,o,i+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function a(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),s=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=a.bind(null,o,0,4),e.readDoubleBE=a.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},4153:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},9207:function(e,t){"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),o="";r&&(o=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):r?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return o+t.join("/")};r.resolve=function(e,t,r){return r||(t=o(t)),n(t)?t:(r||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},9390:function(e){"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}},1447:function(e,t){"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},r.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},3887:function(e,t,r){var n,o,i;!function(a){"use strict";if(null!=t&&"number"!=typeof t.nodeType)e.exports=a();else if(null!=r.amdO)o=[],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i);else{var s=a(),c="undefined"!=typeof self?self:$.global;"function"!=typeof c.btoa&&(c.btoa=s.btoa),"function"!=typeof c.atob&&(c.atob=s.atob)}}((function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:function(r){for(var n,o,i=String(r),a=0,s=e,c="";i.charAt(0|a)||(s="=",a%1);c+=s.charAt(63&n>>8-a%1*8)){if((o=i.charCodeAt(a+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return c},atob:function(r){var n=String(r).replace(/[=]+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,a=0,s=0,c="";i=n.charAt(s++);~i&&(o=a%4?64*o+i:i,a++%4)?c+=String.fromCharCode(255&o>>(-2*a&6)):0)i=e.indexOf(i);return c}}}))},308:function(e,t,r){"use strict";r.r(t),r.d(t,{addUsersToChatRoom:function(){return _},addUsersToChatRoomAllowlist:function(){return J},addUsersToChatRoomWhitelist:function(){return V},blockChatRoomMember:function(){return x},blockChatRoomMembers:function(){return D},chatRoomBlockMulti:function(){return L},chatRoomBlockSingle:function(){return P},createChatRoom:function(){return p},deleteChatRoomSharedFile:function(){return ae},destroyChatRoom:function(){return d},disableSendChatRoomMsg:function(){return q},enableSendChatRoomMsg:function(){return K},fetchChatRoomAnnouncement:function(){return ne},fetchChatRoomSharedFileList:function(){return se},getChatRoomAdmin:function(){return S},getChatRoomAllowlist:function(){return Z},getChatRoomAttributes:function(){return ue},getChatRoomBlacklist:function(){return W},getChatRoomBlacklistNew:function(){return H},getChatRoomBlocklist:function(){return z},getChatRoomDetails:function(){return h},getChatRoomMuteList:function(){return U},getChatRoomMuted:function(){return w},getChatRoomMutelist:function(){return k},getChatRoomSharedFilelist:function(){return ce},getChatRoomWhitelist:function(){return $},getChatRooms:function(){return l},isChatRoomWhiteUser:function(){return ee},isInChatRoomAllowlist:function(){return te},isInChatRoomMutelist:function(){return re},joinChatRoom:function(){return E},leaveChatRoom:function(){return R},listChatRoomMember:function(){return O},listChatRoomMembers:function(){return I},modifyChatRoom:function(){return f},muteChatRoomMember:function(){return b},quitChatRoom:function(){return T},removeChatRoomAdmin:function(){return A},removeChatRoomAllowlistMember:function(){return Q},removeChatRoomAttribute:function(){return he},removeChatRoomAttributes:function(){return de},removeChatRoomBlockMulti:function(){return B},removeChatRoomBlockSingle:function(){return j},removeChatRoomMember:function(){return v},removeChatRoomMembers:function(){return g},removeChatRoomWhitelistMember:function(){return Y},removeMultiChatRoomMember:function(){return y},removeMuteChatRoomMember:function(){return N},removeSingleChatRoomMember:function(){return m},rmUsersFromChatRoomWhitelist:function(){return X},setChatRoomAdmin:function(){return C},setChatRoomAttribute:function(){return pe},setChatRoomAttributes:function(){return le},unblockChatRoomMember:function(){return G},unblockChatRoomMembers:function(){return F},unmuteChatRoomMember:function(){return M},updateChatRoomAnnouncement:function(){return oe},uploadChatRoomSharedFile:function(){return ie}}),r(2675),r(9463),r(2259),r(8706),r(4346),r(3792),r(8598),r(739),r(2010),r(6099),r(3362),r(7764),r(2953);var n=r(1531),o=r(346),i=r(8678),a=r(1750),s=r(2056),c=r(3893);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e){var t=this;if("number"!=typeof e.pagenum||"number"!=typeof e.pagesize)throw Error("Invalid parameter");if(!a.dO.call(this)){var r=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var u={pagenum:e.pagenum||1,pagesize:e.pagesize||20},l=this.context,p=l.orgName,d=l.appName,h=l.accessToken,f={url:this.apiUrl+"/"+p+"/"+d+"/chatrooms",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+h},data:u,success:function(t){"function"==typeof e.success&&e.success(t)},error:function(r){r.error&&r.error_description&&t.onError&&t.onError({type:n.C.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:r.error_description,data:r}),"function"==typeof e.error&&e.error(r)}};return s.vF.debug("Call getChatRooms",e),i.RD.call(this,f,c.jz.GET_CHATROOM_LIST)}function p(e){if("string"!=typeof e.name)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={name:e.name,description:e.description,maxusers:e.maxusers,owner:this.user,members:e.members},u=this.context,l=u.orgName,p=u.appName,d=(u.accessToken,u.jid),h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(p,"/chatrooms?resource=").concat(d.clientResource),dataType:"json",type:"POST",data:JSON.stringify(r),headers:{Authorization:"Bearer "+e.token||0,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call createChatRoom",e),i.RD.call(this,h,c.jz.CREATE_CHATROOM)}function d(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=(r.accessToken,r.jid),d={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(e.chatRoomId,"?resource=").concat(p.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+e.token||0},success:e.success,error:e.error};return s.vF.debug("Call destroyChatRoom",e),i.RD.call(this,d,c.jz.DESTROY_CHATROOM)}function h(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d={url:this.apiUrl+"/"+u+"/"+l+"/chatrooms/"+e.chatRoomId,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getChatRoomDetails",e),i.RD.call(this,d,c.jz.GET_CHATROOM_DETAIL)}function f(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f={groupname:e.chatRoomName,description:e.description,maxusers:e.maxusers},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"?resource=").concat(d.clientResource),type:"PUT",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call modifyChatRoom",e),i.RD.call(this,m,c.jz.MODIFY_CHATROOM)}function m(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||"string"!=typeof e.username)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/users/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call removeChatRoomMember",e),i.RD.call(this,m,c.jz.REMOVE_CHATROOM_MEMBER)}var v=m;function y(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.chatRoomId,u=e.users.join(","),l=this.context,p=l.orgName,d=l.appName,h=l.accessToken,f=l.jid,m={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(d,"/chatrooms/").concat(r,"/users/").concat(u,"?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call removeChatRoomMembers",e),i.RD.call(this,m,c.jz.MULTI_REMOVE_CHATROOM_MEMBER)}var g=y;function _(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.chatRoomId,u={usernames:e.users},l=this.context,p=l.orgName,d=l.appName,h=l.accessToken,f=l.jid,m={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(d,"/chatrooms/").concat(r,"/users?resource=").concat(f.clientResource),type:"POST",data:JSON.stringify(u),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call addUsersToChatRoom",e),i.RD.call(this,m,c.jz.ADD_USERS_TO_CHATROOM)}function E(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return s.vF.debug("Call joinChatRoom",e),this.logOut?Promise.reject({type:n.C.WEBIM_CONNECTION_CLOSED,message:"not login"}):this.mSync.handleChatRoom(e,"join")}function T(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return s.vF.debug("Call leaveChatRoom",e),this.logOut?Promise.reject({type:n.C.WEBIM_CONNECTION_CLOSED,message:"not login"}):this.mSync.handleChatRoom(e,"leave")}var R=T;function O(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={pagenum:e.pageNum,pagesize:e.pageSize},u=this.context,l=u.orgName,p=u.appName,d=u.accessToken,h={url:this.apiUrl+"/"+l+"/"+p+"/chatrooms/"+e.chatRoomId+"/users",dataType:"json",type:"GET",data:r,headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call listChatRoomMembers",e),i.RD.call(this,h,c.jz.LIST_CHATROOM_MEMBERS)}var I=O;function S(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.chatRoomId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatrooms/"+d+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getChatRoomAdmin",e),i.RD.call(this,h,c.jz.GET_CHATROOM_ADMIN)}function C(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f={newadmin:e.username},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/admin?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call setChatRoomAdmin",e),i.RD.call(this,m,c.jz.SET_CHATROOM_ADMIN)}function A(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/admin/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call removeChatRoomAdmin",e),i.RD.call(this,m,c.jz.REMOVE_CHATROOM_ADMIN)}function b(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f={usernames:[e.username],mute_duration:e.muteDuration},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/mute?resource=").concat(d.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},data:JSON.stringify(f),success:e.success,error:e.error};return s.vF.debug("Call muteChatRoomMember",e),i.RD.call(this,m,c.jz.MUTE_CHATROOM_MEMBER)}function N(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/mute/").concat(f,"?resource=").concat(d.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call unmuteChatRoomMember",e),i.RD.call(this,m,c.jz.REMOVE_MUTE_CHATROOM_MEMBER)}var M=N;function w(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.chatRoomId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatrooms/"+d+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getChatRoomMutelist",e),i.RD.call(this,h,c.jz.GET_MUTE_CHATROOM_MEMBERS)}var U=w,k=w;function P(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(d.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call blockChatRoomMember",e),i.RD.call(this,m,c.jz.SET_CHATROOM_MEMBER_TO_BLACK)}var x=P;function L(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f={usernames:e.usernames},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/blocks/users?resource=").concat(d.clientResource),data:JSON.stringify(f),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Chat blockChatRoomMembers:",m),i.RD.call(this,m,c.jz.MULTI_SET_CHATROOM_MEMBER_TO_BLACK)}var D=L;function j(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call unblockChatRoomMember",e),i.RD.call(this,m,c.jz.REMOVE_CHATROOM_MEMBER_BLACK)}var G=j;function B(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f=e.usernames.join(","),m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call unblockChatRoomMembers",e),i.RD.call(this,m,c.jz.MULTI_REMOVE_CHATROOM_MEMBER_BLACK)}var F=B;function H(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.chatRoomId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatrooms/"+d+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getChatRoomBlocklist",e),i.RD.call(this,h,c.jz.GET_CHATROOM_BLOCK_MEMBERS)}var W=H,z=H;function q(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/ban?resource=").concat(d.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call disableSendChatRoomMsg",e),i.RD.call(this,f,c.jz.DISABLED_CHATROOM_SEND_MSG)}function K(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/ban?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call enableSendChatRoomMsg",e),i.RD.call(this,f,c.jz.ENABLE_CHATROOM_SEND_MSG)}function V(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f={usernames:e.users},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/white/users?resource=").concat(d.clientResource),type:"POST",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call addUsersToChatRoomWhitelist",e),i.RD.call(this,m,c.jz.ADD_USERS_TO_CHATROOM)}var J=V;function X(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/white/users/").concat(e.userName,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call removeChatRoomAllowlistMember",e),i.RD.call(this,f,c.jz.REMOVE_CHATROOM_WHITE_USERS)}var Y=X,Q=X;function $(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.chatRoomId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatrooms/"+d+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getChatRoomAllowlist",e),i.RD.call(this,h,c.jz.GET_CHATROOM_WHITE_USERS)}var Z=$;function ee(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.chatRoomId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatrooms/"+d+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call isInChatRoomAllowlist",e),i.RD.call(this,h,c.jz.CHECK_CHATROOM_WHITE_USER)}var te=ee;function re(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.orgName,u=r.appName,l=r.accessToken,p=r.userId,d={url:this.apiUrl+"/"+c+"/"+u+"/sdk/chatrooms/"+e.chatRoomId+"/mute/"+p,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l}};return s.vF.debug("Call isInChatRoomMutelist",e),i.RD.call(this,d).then((function(e){return{type:e.type,data:e.data}}))}function ne(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.roomId,h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(d,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call fetchChatRoomAnnouncement",e),i.RD.call(this,h,c.jz.GET_CHATROOM_ANN)}function oe(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.roomId,f={announcement:e.announcement},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/announcement?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call updateChatRoomAnnouncement:",e),i.RD.call(this,m,c.jz.UPDATE_CHATROOM_ANN)}function ie(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("object"!==u(e.file))throw Error('Invalid parameter: "file"');if(a.dO.call(this)){var t=this.context,r=t.orgName,n=t.appName,o=t.accessToken,l=t.jid,p=e.roomId;i.QM.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(r,"/").concat(n,"/chatrooms/").concat(p,"/share_files?resource=").concat(l.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:o,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},c.jz.UPLOAD_CHATROOM_FILE),s.vF.debug("Call uploadChatRoomSharedFile",e)}}function ae(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "fileId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.roomId,f=e.fileId,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(h,"/share_files/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call deleteChatRoomSharedFile",e),i.RD.call(this,m,c.jz.DELETE_CHATROOM_FILE)}function se(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.roomId,h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatrooms/").concat(d,"/share_files"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json",accept:"application/json"},success:e.success,error:e.error};return s.vF.debug("Call fetchChatRoomSharedFileList",e),i.RD.call(this,h,c.jz.GET_CHATROOM_FILES)}var ce=se;function ue(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(e.attributeKeys&&!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributeKeys": '+e.attributeKeys);if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=(r.jid,e.chatRoomId),h={keys:e.attributeKeys},f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/metadata/chatroom/").concat(d),type:"POST",dataType:"json",data:JSON.stringify(h),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"}};return s.vF.debug("Call getChatRoomAttributes:",e),i.RD.call(this,f,c.jz.GET_CHATROOM_ATTR).then((function(e){return{data:e.data,type:e.type}}))}function le(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("object"!==u(e.attributes))throw Error("Invalid parameter attributes: "+e.attributes);if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,l=r.orgName,p=r.appName,d=r.accessToken,h=r.userId,f=e.chatRoomId,m=e.attributes,v=e.autoDelete,y=void 0===v||v,g=e.isForced?"/forced":"",_={metaData:m,autoDelete:y?"DELETE":"NO_DELETE"},E={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(p,"/metadata/chatroom/").concat(f,"/user/").concat(h)+g,type:"PUT",dataType:"json",data:JSON.stringify(_),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return s.vF.debug("Call setChatRoomAttributes:",e),i.RD.call(this,E,c.jz.SET_CHATROOM_ATTR).then((function(e){return(0,a.fu)(e)}))}function pe(e){var t;if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error("Invalid parameter attributeKey: "+e.attributeKey);if("string"!=typeof e.attributeValue||""===e.attributeValue)throw Error("Invalid parameter attributeValue: "+e.attributeValue);if(!a.dO.call(this)){var r=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var u=this.context,l=u.orgName,p=u.appName,d=u.accessToken,h=u.userId,f=e.chatRoomId,m=e.attributeKey,v=e.attributeValue,y=e.autoDelete,g=void 0===y||y,_=e.isForced?"/forced":"",E={metaData:(t={},t[m]=v,t),autoDelete:g?"DELETE":"NO_DELETE"},T={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(p,"/metadata/chatroom/").concat(f,"/user/").concat(h)+_,type:"PUT",dataType:"json",data:JSON.stringify(E),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return s.vF.debug("Call setChatRoomAttribute:",e),i.RD.call(this,T,c.jz.SET_CHATROOM_ATTR).then((function(e){var t=(0,a.A4)(e);if(t)throw t}))}function de(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributes": '+e.attributeKeys);if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.userId,h=e.chatRoomId,f=e.attributeKeys,m=e.isForced?"/forced":"",v={keys:f},y={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/metadata/chatroom/").concat(h,"/user/").concat(d)+m,type:"DELETE",dataType:"json",data:JSON.stringify(v),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"}};return s.vF.debug("Call removeChatRoomAttributes:",e),i.RD.call(this,y,c.jz.DELETE_CHATROOM_ATTR).then((function(e){return(0,a.fu)(e)}))}function he(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error('"Invalid parameter attributeKey": '+e.attributeKey);if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.userId,h=e.chatRoomId,f=e.attributeKey,m=e.isForced?"/forced":"",v={keys:[f]},y={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/metadata/chatroom/").concat(h,"/user/").concat(d)+m,type:"DELETE",dataType:"json",data:JSON.stringify(v),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"}};return s.vF.debug("Call removeChatRoomAttribute:",e),i.RD.call(this,y,c.jz.DELETE_CHATROOM_ATTR).then((function(e){var t=(0,a.A4)(e);if(t)throw t}))}},565:function(e,t,r){"use strict";r.d(t,{h:function(){return c},p:function(){return s}}),r(5276),r(2062),r(9085);var n=r(2056),o=r(8801),i=r(8678),a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},s={chat:"singleChat",chatroom:"chatRoom",groupchat:"groupChat",singleChat:"singleChat",chatRoom:"chatRoom",groupChat:"groupChat"};function c(e,t){var r,c,u,l=t||{},p=l.formatCustomExts,d=void 0===p||p,h=l.formatChatType,f=void 0!==h&&h,m=e.id,v=e.payload,y=e.timestamp,g=e.to,_=v.bodies&&v.bodies.length>0?v.bodies[0]:{},E={},T={},R=v.type?v.type:g.indexOf("@conference.easemob.com")>-1?"groupChat":"singleChat";R="chat"===R?"singleChat":R,f&&v.type&&(R=s[v.type]);var O="";switch(_.type){case"txt":if(Object.prototype.hasOwnProperty.call(_,"subType")&&"sub_combine"===_.subType)O=o.z.call(this,{remotePath:null==_?void 0:_.url,secret:null==_?void 0:_.secret}),E={id:m,type:"combine",chatType:R,to:v.to,from:v.from,ext:v.ext,time:y,title:_.title||"",summary:_.summary||"",url:O||"",secret:_.secret||"",file_length:_.file_length||0,filename:_.filename||"",compatibleText:_.msg,combineLevel:_.combineLevel||0};else{var I=null===(r=null==v?void 0:v.meta)||void 0===r?void 0:r.edit_msg;if(E={id:m,type:"txt",chatType:R,msg:_.msg||"",to:v.to||"",from:v.from,time:y,ext:v.ext},I){var S=I.edit_time,C=I.operator,A=I.count;E.modifiedInfo={operationTime:S,operatorId:C,operationCount:A}}}break;case"img":O=this.useOwnUploadFun?null==_?void 0:_.url:o.z.call(this,{remotePath:null==_?void 0:_.url,secret:null==_?void 0:_.secret}),E={id:m,type:"img",chatType:R,to:v.to,from:v.from,time:y,ext:v.ext,width:(null===(c=_.size)||void 0===c?void 0:c.width)||0,height:(null===(u=_.size)||void 0===u?void 0:u.height)||0,thumb:this.useOwnUploadFun?"":"".concat(O,"&thumbnail=true"),thumb_secret:_.secret,secret:_.secret||"",url:O||"",file_length:_.file_length||0,file:{}};break;case"video":O=this.useOwnUploadFun?null==_?void 0:_.url:o.z.call(this,{remotePath:null==_?void 0:_.url,secret:null==_?void 0:_.secret}),E={id:m,type:"video",chatType:R,from:v.from,to:v.to,thumb:i.Wp.formatAttachUrl.call(this,_.thumb),thumb_secret:_.thumb_secret||"",url:O||"",secret:_.secret||"",filename:_.filename,length:_.length||0,file:{},file_length:_.file_length||0,filetype:v.ext.file_type||"",ext:v.ext,time:y};break;case"loc":E={id:m,type:"loc",chatType:R,from:v.from,to:v.to,buildingName:_.buildingName||"",addr:_.addr,lat:_.lat,lng:_.lng,ext:v.ext,time:y};break;case"audio":O=this.useOwnUploadFun?null==_?void 0:_.url:o.z.call(this,{remotePath:null==_?void 0:_.url,secret:null==_?void 0:_.secret}),E={id:m,type:"audio",chatType:R,from:v.from,to:v.to,secret:_.secret||"",ext:v.ext,time:y,url:O||"",file:{},filename:_.filename,length:_.length||0,file_length:_.file_length||0,filetype:v.ext.file_type||""};break;case"file":O=this.useOwnUploadFun?null==_?void 0:_.url:o.z.call(this,{remotePath:null==_?void 0:_.url,secret:null==_?void 0:_.secret}),E={id:m,type:"file",chatType:R,from:v.from,to:v.to,ext:v.ext,time:y,url:O||"",secret:_.secret||"",file:{},filename:_.filename||"",file_length:_.file_length||0,filetype:v.ext.file_type||""};break;case"cmd":E={id:m,type:"cmd",chatType:R,from:v.from,to:v.to,ext:v.ext,time:y,action:_.action||""};break;case"custom":var b=_.customExts||{};d&&_.customExts&&(b={},_.customExts.map((function(e){b=a(a({},b),e)}))),E={id:m,type:"custom",chatType:R,from:v.from,to:v.to,ext:v.ext,time:y,customEvent:_.customEvent||"",customExts:b};break;case"combine":O=o.z.call(this,{remotePath:null==_?void 0:_.url,secret:null==_?void 0:_.secret}),E={id:m,type:"combine",chatType:R,msg:_.msg||"",to:v.to||"",from:v.from,time:y,ext:v.ext,title:_.title||"",summary:_.summary||"",url:O||"",compatibleText:_.text,combineLevel:_.combineLevel||0,secret:_.secret||"",filename:_.filename||"",file_length:_.file_length||0};break;default:n.vF.error("unexpected message: ".concat(e))}if(v.msgConfig&&(T.msgConfig=v.msgConfig),null==v?void 0:v.meta){var N=v.meta;N.thread&&(T.chatThread={messageId:N.thread.msg_parent_id,parentId:N.thread.muc_parent_id,chatThreadName:N.thread.thread_name}),N.reaction&&(T.reactions=N.reaction),N.translations&&(T.translations=N.translations)}return a(a({},E),T)}},846:function(e,t,r){"use strict";r.r(t),r.d(t,{acceptGroupInvite:function(){return W},acceptGroupJoinRequest:function(){return G},addUsersToGroupAllowlist:function(){return ye},addUsersToGroupWhitelist:function(){return ve},agreeInviteIntoGroup:function(){return H},agreeJoinGroup:function(){return j},blockGroup:function(){return f},blockGroupMember:function(){return oe},blockGroupMembers:function(){return ae},blockGroupMessages:function(){return m},changeGroupOwner:function(){return T},changeOwner:function(){return E},createGroup:function(){return h},createGroupNew:function(){return d},deleteGroupSharedFile:function(){return we},destroyGroup:function(){return U},disableSendGroupMsg:function(){return fe},dissolveGroup:function(){return w},downloadGroupSharedFile:function(){return Pe},enableSendGroupMsg:function(){return me},fetchGroupAnnouncement:function(){return be},fetchGroupSharedFileList:function(){return Ue},getGroup:function(){return g},getGroupAdmin:function(){return C},getGroupAllowlist:function(){return Re},getGroupBlacklist:function(){return de},getGroupBlacklistNew:function(){return pe},getGroupBlocklist:function(){return he},getGroupInfo:function(){return R},getGroupMemberAttributes:function(){return Le},getGroupMembersAttributes:function(){return De},getGroupMsgReadUser:function(){return Ae},getGroupMuteList:function(){return te},getGroupMutelist:function(){return re},getGroupSharedFilelist:function(){return ke},getGroupWhitelist:function(){return Te},getJoinedGroups:function(){return _},getMuted:function(){return ee},getPublicGroups:function(){return y},groupBlockMulti:function(){return ie},groupBlockSingle:function(){return ne},inviteToGroup:function(){return x},inviteUsersToGroup:function(){return L},isGroupWhiteUser:function(){return Oe},isInGroupAllowlist:function(){return Se},isInGroupMutelist:function(){return Ce},isInGroupWhiteList:function(){return Ie},joinGroup:function(){return D},leaveGroup:function(){return P},listGroupMember:function(){return I},listGroupMembers:function(){return S},listGroups:function(){return v},modifyGroup:function(){return O},mute:function(){return Y},muteGroupMember:function(){return Q},quitGroup:function(){return k},rejectGroupInvite:function(){return q},rejectGroupJoinRequest:function(){return F},rejectInviteIntoGroup:function(){return z},rejectJoinGroup:function(){return B},removeAdmin:function(){return N},removeGroupAdmin:function(){return M},removeGroupAllowlistMember:function(){return Ee},removeGroupBlockMulti:function(){return ue},removeGroupBlockSingle:function(){return se},removeGroupMember:function(){return V},removeGroupMembers:function(){return X},removeGroupWhitelistMember:function(){return _e},removeMultiGroupMember:function(){return J},removeMute:function(){return $},removeSingleGroupMember:function(){return K},rmUsersFromGroupWhitelist:function(){return ge},setAdmin:function(){return A},setGroupAdmin:function(){return b},setGroupMemberAttributes:function(){return xe},unblockGroupMember:function(){return ce},unblockGroupMembers:function(){return le},unmuteGroupMember:function(){return Z},updateGroupAnnouncement:function(){return Ne},uploadGroupSharedFile:function(){return Me}}),r(2675),r(9463),r(2259),r(8706),r(1629),r(4423),r(4346),r(3792),r(8598),r(739),r(2010),r(6099),r(3362),r(1699),r(7764),r(3500),r(2953);var n=r(1531),o=r(346),i=r(8678),a=r(1750),s=r(2056),c=r(3893);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function d(e){if(!e||!e.data)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups?resource=").concat(d.clientResource),dataType:"json",type:"POST",data:JSON.stringify({owner:this.user,groupname:e.data.groupname,desc:e.data.desc,members:e.data.members,public:e.data.public,approval:e.data.approval,allowinvites:e.data.allowinvites,invite_need_confirm:e.data.inviteNeedConfirm,maxusers:e.data.maxusers,custom:e.data.ext}),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:function(t){e.success&&e.success(t)},error:e.error};return s.vF.debug("Call createGroup:",e),i.RD.call(this,h,c.jz.CREATE_GROUP)}var h=d;function f(e){var t;if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!a.dO.call(this)){var r=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var u=this.context,l=u.orgName,p=u.appName,d=u.accessToken,h=u.jid,f={entities:[(t={},t["notification_ignore_"+e.groupId]=!0,t)]},m={type:"PUT",url:"".concat(this.apiUrl,"/").concat(l,"/").concat(p,"/users/").concat(this.user,"?resource=").concat(h.clientResource),data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call blockGroupMessages",e),i.RD.call(this,m,c.jz.BLOCK_GROUP)}var m=f;function v(e){if("number"!=typeof e.limit)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d={limit:e.limit,cursor:e.cursor};e.cursor||delete d.cursor;var h={url:this.apiUrl+"/"+u+"/"+l+"/publicchatgroups",type:"GET",dataType:"json",data:d,headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call listGroups",e),i.RD.call(this,h,c.jz.LIST_GROUP)}var y=v;function g(e){if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d={url:this.apiUrl+"/"+u+"/"+l+"/users/"+this.user+"/joined_chatgroups",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return s.vF.debug("Call getJoinedGroups",e),i.RD.call(this,d,c.jz.GET_USER_GROUP)}function _(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.needAffiliations||e.needRole?"/chatgroups/user/".concat(this.user,"?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize,"&needAffiliations=").concat(e.needAffiliations,"&needRole=").concat(e.needRole):"/users/".concat(this.user,"/joined_chatgroups?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize),h={url:this.apiUrl+"/"+u+"/"+l+d,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return s.vF.debug("Call getGroup",e),i.RD.call(this,h,c.jz.GET_USER_GROUP).then((function(e){var t=e.uri,r=e.entities,n=[];return t.includes("joined_chatgroups")||(r.forEach((function(e){var t={affiliationsCount:e.affiliations_count,groupName:e.name,groupId:e.groupId,role:e.permission,disabled:e.disabled,approval:e.membersonly,allowInvites:e.allowinvites,description:e.description,maxUsers:e.maxusers,public:e.public};n.push(t)})),e.entities=n),e}))}function E(e){if("string"!=typeof e.groupId||"string"!=typeof e.newOwner)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={newowner:e.newOwner},u=this.context,l=u.orgName,p=u.appName,d=u.accessToken,h=u.jid,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(p,"/chatgroups/").concat(e.groupId,"?resource=").concat(h.clientResource),type:"PUT",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},data:JSON.stringify(r),success:e.success,error:e.error};return s.vF.debug("Call changeOwner",e),i.RD.call(this,f,c.jz.CHANGE_OWNER)}var T=E;function R(e){if("string"!=typeof e.groupId&&!Array.isArray(e.groupId))throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d={url:this.apiUrl+"/"+u+"/"+l+"/chatgroups/"+e.groupId+"?joined_time=true",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getGroupInfo",e),i.RD.call(this,d,c.jz.GET_GROUP_INFO)}function O(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={groupname:e.groupName,description:e.description,custom:e.ext},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"?resource=").concat(d.clientResource),type:"PUT",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call modifyGroup",e),i.RD.call(this,m,c.jz.MODIFY_GROUP)}function I(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={pagenum:e.pageNum,pagesize:e.pageSize},u=this.context,l=u.orgName,p=u.appName,d=u.accessToken,h={url:this.apiUrl+"/"+l+"/"+p+"/chatgroups/"+e.groupId+"/users",dataType:"json",type:"GET",data:r,headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call listGroupMember",e),i.RD.call(this,h,c.jz.LIST_GROUP_MEMBER)}var S=I;function C(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.groupId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatgroups/"+d+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getGroupAdmin",e),i.RD.call(this,h,c.jz.GET_GROUP_ADMIN)}function A(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={newadmin:e.username},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/admin?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call setGroupAdmin",e),i.RD.call(this,m,c.jz.SET_GROUP_ADMIN)}var b=A;function N(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/admin/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call removeAdmin",e),i.RD.call(this,m,c.jz.REMOVE_GROUP_ADMIN)}var M=N;function w(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"?version=v3&resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call destroyGroup",e),i.RD.call(this,f,c.jz.DISSOLVE_GROUP)}var U=w;function k(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/quit?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call quitGroup",e),i.RD.call(this,f,c.jz.QUIT_GROUP)}var P=k;function x(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.groupId,u={usernames:e.users},l=this.context,p=l.orgName,d=l.appName,h=l.accessToken,f=l.jid,m={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(d,"/chatgroups/").concat(r,"/invite?resource=").concat(f.clientResource),type:"POST",data:JSON.stringify(u),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call inviteUsersToGroup",e),i.RD.call(this,m,c.jz.INVITE_TO_GROUP)}var L=x;function D(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(e.groupId,"/apply?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify({message:e.message||""}),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call joinGroup",e),i.RD.call(this,h,c.jz.JOIN_GROUP)}function j(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={applicant:e.applicant,verifyResult:!0,reason:"no clue"},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/apply_verify?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call agreeJoinGroup",e),i.RD.call(this,m,c.jz.AGREE_JOIN_GROUP)}var G=j;function B(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={applicant:e.applicant,verifyResult:!1,reason:e.reason||""},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/apply_verify?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call rejectGroupJoinRequest",e),i.RD.call(this,m,c.jz.REJECT_JOIN_GROUP)}var F=B;function H(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={invitee:e.invitee,verifyResult:!0},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/invite_verify?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call acceptGroupInvite",e),i.RD.call(this,m,c.jz.AGREE_INVITE_GROUP)}var W=H;function z(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={invitee:e.invitee,verifyResult:!1},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/invite_verify?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call rejectGroupInvite",e),i.RD.call(this,m,c.jz.REJECT_INVITE_GROUP)}var q=z;function K(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.groupId,u=e.username,l=this.context,p=l.orgName,d=l.appName,h=l.accessToken,f=l.jid,m={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(d,"/chatgroups/").concat(r,"/users/").concat(u,"?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call removeGroupMember",e),i.RD.call(this,m,c.jz.REMOVE_GROUP_MEMBER)}var V=K;function J(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f=e.users.join(","),m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/users/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call removeGroupMembers",e),i.RD.call(this,m,c.jz.MULTI_REMOVE_GROUP_MEMBER)}var X=J;function Y(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={usernames:"string"==typeof e.username?[e.username]:e.username,mute_duration:e.muteDuration},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/mute?resource=").concat(d.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},data:JSON.stringify(f),success:e.success,error:e.error};return s.vF.debug("Call muteGroupMember",e),i.RD.call(this,m,c.jz.MUTE_GROUP_MEMBER)}var Q=Y;function $(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/mute/").concat(f,"?resource=").concat(d.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call unmuteGroupMember",e),i.RD.call(this,m,c.jz.UNMUTE_GROUP_MEMBER)}var Z=$;function ee(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.groupId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatgroups/"+d+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getGroupMuteList",e),i.RD.call(this,h,c.jz.GET_GROUP_MUTE_LIST)}var te=ee,re=ee;function ne(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(d.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call blockGroupMember",e),i.RD.call(this,m,c.jz.BLOCK_GROUP_MEMBER)}var oe=ne;function ie(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={usernames:e.usernames},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/blocks/users?resource=").concat(d.clientResource),data:JSON.stringify(f),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call blockGroupMembers",e),i.RD.call(this,m,c.jz.BLOCK_GROUP_MEMBERS)}var ae=ie;function se(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call unblockGroupMember",e),i.RD.call(this,m,c.jz.UNBLOCK_GROUP_MEMBER)}var ce=se;function ue(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f=e.usernames.join(","),m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call unblockGroupMembers",e),i.RD.call(this,m,c.jz.UNBLOCK_GROUP_MEMBERS)}var le=ue;function pe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.groupId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatgroups/"+d+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getGroupBlacklist",e),i.RD.call(this,h,c.jz.GET_GROUP_BLACK_LIST)}var de=pe,he=pe;function fe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/ban?resource=").concat(d.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call disableSendGroupMsg",e),i.RD.call(this,f,c.jz.DISABLED_SEND_GROUP_MSG)}function me(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/ban?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call enableSendGroupMsg",e),i.RD.call(this,f,c.jz.ENABLE_SEND_GROUP_MSG)}function ve(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={usernames:e.users},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/white/users?resource=").concat(d.clientResource),type:"POST",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call addUsersToGroupWhitelist",e),i.RD.call(this,m,c.jz.ADD_USERS_TO_GROUP_WHITE)}var ye=ve;function ge(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/white/users/").concat(e.userName,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call removeGroupAllowlistMember",e),i.RD.call(this,f,c.jz.REMOVE_GROUP_WHITE_MEMBER)}var _e=ge,Ee=ge;function Te(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.groupId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatgroups/"+d+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getGroupAllowlist",e),i.RD.call(this,h,c.jz.GET_GROUP_WHITE_LIST)}var Re=Te;function Oe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.groupId,h={url:this.apiUrl+"/"+u+"/"+l+"/chatgroups/"+d+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call isInGroupAllowlist",e),i.RD.call(this,h,c.jz.IS_IN_GROUP_WHITE_LIST)}var Ie=Oe,Se=Oe;function Ce(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "chatRoomId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.orgName,u=r.appName,l=r.accessToken,p=r.userId,d={url:this.apiUrl+"/"+c+"/"+u+"/sdk/chatgroups/"+e.groupId+"/mute/"+p,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l}};return s.vF.debug("Call isInGroupMutelist",e),i.RD.call(this,d).then((function(e){return{type:e.type,data:e.data}}))}function Ae(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.msgId||""===e.msgId)throw Error('Invalid parameter: "msgId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d={url:this.apiUrl+"/"+u+"/"+l+"/chatgroups/"+e.groupId+"/acks/"+e.msgId,dataType:"json",type:"GET",data:{limit:500,key:void 0},headers:{Authorization:"Bearer "+p},success:e.success,error:e.error};return s.vF.debug("Call getGroupMsgReadUser",e),i.RD.call(this,d,c.jz.GET_GROUP_MSG_READ_USER)}function be(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.groupId,h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(d,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call fetchGroupAnnouncement",e),i.RD.call(this,h,c.jz.GET_GROUP_ANN)}function Ne(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f={announcement:e.announcement},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/announcement?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call updateGroupAnnouncement",e),i.RD.call(this,m,c.jz.UPDATE_GROUP_ANN)}function Me(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("object"!==u(e.file))throw Error('Invalid parameter: "file"');if(a.dO.call(this)){var t=this.context,r=t.orgName,n=t.appName,o=t.accessToken,l=t.jid,p=e.groupId;i.QM.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(r,"/").concat(n,"/chatgroups/").concat(p,"/share_files?resource=").concat(l.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:o,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},c.jz.UPLOAD_GROUP_FILE),s.vF.debug("Call uploadGroupSharedFile",e)}}function we(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "file"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=r.jid,h=e.groupId,f=e.fileId,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(h,"/share_files/").concat(f,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call deleteGroupSharedFile",e),i.RD.call(this,m,c.jz.DELETE_GROUP_FILE)}function Ue(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,u=r.orgName,l=r.appName,p=r.accessToken,d=e.pageNum||1,h=e.pageSize||10,f=e.groupId,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/chatgroups/").concat(f,"/share_files?pagenum=").concat(d,"&pagesize=").concat(h),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getGroupSharedFilelist",e),i.RD.call(this,m,c.jz.GET_GROUP_FILE_LIST)}var ke=Ue;function Pe(e){var t=this.context,r=t.orgName,n=t.appName,o=t.accessToken,a=this.apiUrl,u=e.groupId,l=e.fileId;i.RG.call(this,{url:"".concat(a,"/").concat(r,"/").concat(n,"/chatgroups/").concat(u,"/share_files/").concat(l),onFileDownloadComplete:e.onFileDownloadComplete,onFileDownloadError:e.onFileDownloadError,accessToken:o,id:l,secret:e.secret},c.jz.DOWN_GROUP_FILE),s.vF.debug("Call downloadGroupSharedFile",e)}function xe(e){return l(this,void 0,void 0,(function(){var t,r,l,d,h,f,m,v,y,g,_;return p(this,(function(p){switch(p.label){case 0:if(t=e.groupId,r=e.userId,l=e.memberAttributes,"string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if("string"!=typeof r||""===r)throw Error('Invalid parameter: "userId"');if("object"!==u(l))throw Error('Invalid parameter: "memberAttributes"');return a.dO.call(this)?(h=this.context,f=h.orgName,m=h.appName,v=h.accessToken,y=h.jid,g={metaData:l},_={url:"".concat(this.apiUrl,"/").concat(f,"/").concat(m,"/sdk/metadata/chatgroup/").concat(t,"/user/").concat(r,"?resource=").concat(y.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+v,"Content-Type":"application/json"}},s.vF.debug("Call setGroupMemberAttributes",e),[4,i.RD.call(this,_,c.jz.SET_GROUP_MEMBER_ATTRS)]):(d=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(d)]);case 1:return p.sent(),[2]}}))}))}function Le(e){var t=e.groupId,r=e.userId;return De.call(this,{groupId:t,userIds:[r]}).then((function(e){var t;return{type:e.type,data:null===(t=e.data)||void 0===t?void 0:t[r]}}))}function De(e){var t=e.groupId,r=e.userIds,u=e.keys,l=void 0===u?[]:u;if("string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(r)||(null==r?void 0:r.length)<=0)throw Error('Invalid parameter: "userIds"');if(!Array.isArray(l))throw Error('Invalid parameter: "keys"');if(!a.dO.call(this)){var p=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(p)}var d=this.context,h=d.orgName,f=d.appName,m=d.accessToken,v={targets:r,properties:l},y={url:"".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/sdk/metadata/chatgroup/").concat(t,"/get"),type:"POST",dataType:"json",data:JSON.stringify(v),headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}};return s.vF.debug("Call getGroupMembersAttributes",e),i.RD.call(this,y,c.jz.GET_GROUP_MEMBER_ATTR).then((function(e){return{type:e.type,data:(null==e?void 0:e.data)||{}}}))}},9359:function(e,t,r){"use strict";r.r(t),r.d(t,{acceptContactInvite:function(){return W},acceptInvitation:function(){return H},addContact:function(){return G},addConversationMark:function(){return me},addReaction:function(){return ee},addToBlackList:function(){return K},addUsersToBlacklist:function(){return V},addUsersToBlocklist:function(){return J},declineContactInvite:function(){return q},declineInvitation:function(){return z},deleteAllMessagesAndConversations:function(){return _e},deleteContact:function(){return F},deleteConversation:function(){return M},deleteReaction:function(){return te},deleteSession:function(){return N},fetchHistoryMessages:function(){return L},fetchUserInfoById:function(){return k},getAllContacts:function(){return de},getBlacklist:function(){return E},getBlocklist:function(){return T},getContacts:function(){return O},getContactsWithCursor:function(){return he},getConversationlist:function(){return A},getHistoryMessages:function(){return j},getReactionDetail:function(){return oe},getReactionList:function(){return re},getReactionlist:function(){return ne},getRoster:function(){return R},getSelfIdsOnOtherPlatform:function(){return ge},getServerConversations:function(){return se},getServerConversationsByFilter:function(){return ye},getServerPinnedConversations:function(){return ue},getServerPinnedMessages:function(){return Oe},getSessionList:function(){return C},getTokenExpireTimestamp:function(){return x},modifyMessage:function(){return Z},pinConversation:function(){return le},pinMessage:function(){return Te},recallMessage:function(){return $},removeConversationMark:function(){return ve},removeFromBlackList:function(){return X},removeHistoryMessages:function(){return ae},removeRoster:function(){return B},removeUserFromBlackList:function(){return Y},removeUserFromBlocklist:function(){return Q},reportMessage:function(){return ie},setContactRemark:function(){return pe},unpinMessage:function(){return Re},updateCurrentUserNick:function(){return P},updateOwnUserInfo:function(){return w},updateUserInfo:function(){return U},uploadPushToken:function(){return S},uploadToken:function(){return I}}),r(2675),r(9463),r(2259),r(8706),r(2008),r(1629),r(4423),r(4346),r(3792),r(8598),r(2062),r(4490),r(4554),r(739),r(907),r(2010),r(9085),r(9432),r(6099),r(3362),r(8781),r(7764),r(3500),r(2953);var n=r(1750),o=r(1531),i=r(346),a=r(8678),s=r(4723),c=r(8801),u=r(3887),l=r.n(u),p=r(2056),d=r(3893),h=r(565),f=r(8232),m=r(564),v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)},y=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},g=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},_={singleChat:"chat",chatRoom:"chatroom",groupChat:"groupchat"};function E(e){if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l={url:this.apiUrl+"/"+s+"/"+c+"/users/"+this.user+"/blocks/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u},success:function(t){var r={};t.data.forEach((function(e){r[e]={name:e}})),"function"==typeof(null==e?void 0:e.success)&&e.success(t)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return p.vF.debug("Call getBlocklist"),a.RD.call(this,l,d.jz.GET_BLACK_LIST)}var T=E,R=O;function O(e){var t=this;if(!n.dO.call(this)){var r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var s=this.context,c=s.orgName,u=s.appName,l=s.accessToken,h={url:this.apiUrl+"/"+c+"/"+u+"/users/"+this.user+"/contacts/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l},success:function(r){var n=[];r.data.forEach((function(e){n.push({name:e,subscription:"both",jid:t.context.jid})})),"function"==typeof(null==e?void 0:e.success)&&e.success(n)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return p.vF.debug("Call getContacts"),a.RD.call(this,h,d.jz.GET_CONTACTS)}function I(e){if("string"!=typeof e.deviceId||""===e.deviceId)throw Error('Invalid parameter: "deviceId"');if("string"!=typeof e.deviceToken||""===e.deviceToken)throw Error('Invalid parameter: "deviceToken"');if("string"!=typeof e.notifierName||""===e.notifierName)throw Error('Invalid parameter: "notifierName"');if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/users/").concat(this.user),type:"PUT",data:JSON.stringify({device_id:e.deviceId,device_token:e.deviceToken,notifier_name:e.notifierName}),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return p.vF.debug("Call uploadPushToken",e),a.RD.call(this,l,d.jz.UPLOAD_PUSH_TOKEN)}var S=I;function C(e){if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/users/").concat(this.user,"/user_channels"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return p.vF.debug("Call getSessionList"),a.RD.call(this,l,d.jz.GET_SESSION_LIST)}function A(e){var t=this;if(!n.dO.call(this)){var r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var s=this.context,c=s.orgName,u=s.appName,l=s.accessToken,h=!!(e&&"number"==typeof e.pageNum&&"number"==typeof e.pageSize&&e.pageNum>0&&e.pageSize>0),f={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/users/").concat(this.user,"/user_channels").concat(h?"/page":""),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return h&&(f.data={pageNum:e.pageNum,pageSize:e.pageSize}),p.vF.debug("Call getConversationlist"),a.RD.call(this,f,d.jz.GET_SESSION_LIST).then((function(e){return b.call(t,e)}))}function b(e){var t=this,r=e.data.channel_infos;return null==r||r.forEach((function(e){e.meta&&"{}"!==JSON.stringify(e.meta)?(e.meta.payload=JSON.parse(e.meta.payload),e.lastMessage=h.h.call(t,e.meta,{formatCustomExts:!1})):e.lastMessage=e.meta,delete e.meta})),e}function N(e){if(e&&"string"!=typeof e.channel)throw Error("Invalid parameter channel: ".concat(e.channel));if(e&&"singleChat"!==e.chatType&&"groupChat"!==e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(e&&"boolean"!=typeof e.deleteRoam)throw Error("Invalid parameter deleteRoam: ".concat(e.deleteRoam));if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r,s=this.context,c=s.orgName,u=s.appName,l=s.accessToken,h=s.jid;r="singleChat"===e.chatType?"chat":"groupChat";var f={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/user/").concat(this.user,"/user_channel?resource=").concat(h.clientResource),dataType:"json",type:"DELETE",data:JSON.stringify({channel:e.channel,type:r,delete_roam:e.deleteRoam}),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e.success,error:e.error};return p.vF.debug("Call deleteSession",e),a.RD.call(this,f,d.jz.DELETE_SESSION)}var M=N;function w(e,t){if(!n.dO.call(this)){var r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var s=this.context,c=s.orgName,u=s.appName,l=s.accessToken,h=["nickname","avatarurl","mail","phone","gender","sign","birth","ext"],f={},m=a.Wp.getEnvInfo();if("wx"===m.platform||"qq"===m.platform)if("string"==typeof e&&void 0!==t){if(!h.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");f[e]=t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");h.forEach((function(t){h.includes(t)&&void 0!==e[t]&&(f[t]=e[t])}))}else if("string"==typeof e){if(!h.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");f=e+"="+t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");var v=[];h.forEach((function(t){if(h.includes(t)&&void 0!==e[t]){var r=encodeURIComponent(t),n=encodeURIComponent(e[t]);v.push(r+"="+n)}})),f=v.join("&")}var y={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/metadata/user/").concat(this.user),type:"PUT",data:f,dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/x-www-form-urlencoded"}};return p.vF.debug("Call updateOwnUserInfo",e),a.RD.call(this,y,d.jz.UPDATE_USER_INFO)}var U=w;function k(e,t){if(!n.dO.call(this)){var r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var s,c=this.context,u=c.orgName,l=c.appName,h=c.accessToken,f=[];if("string"==typeof e)f=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("illegal params");f=e}s="string"==typeof t?[t]:t&&"[object Array]"===Object.prototype.toString.call(t)?t:["nickname","avatarurl","mail","phone","gender","sign","birth","ext"];var m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/metadata/user/get"),type:"POST",data:JSON.stringify({targets:f,properties:s}),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}};return p.vF.debug("Call fetchUserInfoById",e),a.RD.call(this,m,d.jz.GET_USER_INFO)}function P(e){if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/users/").concat(this.user),type:"PUT",dataType:"json",data:JSON.stringify({nickname:e}),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return p.vF.debug("Call updateCurrentUserNick",e),a.RD.call(this,l)}function x(e){if("string"!=typeof e||""===e)throw Error('Invalid parameter: "token"');var t=this.context,r=t.orgName,n=t.appName,o={url:"".concat(this.apiUrl,"/").concat(r,"/").concat(n,"/sdk/users/").concat(this.user,"/token/expires"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}};return p.vF.debug("Call getTokenExpireTimestamp",e),a.RD.call(this,o,d.jz.SDK_INTERNAL)}function L(e){var t=this;return new Promise((function(r,a){if(!e.queue)throw Error('Invalid parameter: "specified"');if(!n.dO.call(t)){var s=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(s)}(function e(t){var n=this,o=t.count||20;D.call(this,{count:o,isGroup:!!t.isGroup,queue:t.queue,start:t.start,format:t.format,success:function(i){if(i.msgs.length>=o||i.is_last){var a=i.msgs.splice(0,o).reverse();t.success&&t.success(a),r(a)}else e.call(n,v(v({},t),{start:null}))},fail:function(e){a(e),t.fail&&t.fail(e)}})}).call(t,e),p.vF.debug("Call fetchHistoryMessages",e)}))}function D(e){var t=this,r=e.queue,n=this.mr_cache[r]||(this.mr_cache[r]={msgs:[]}),s=this.context.userId,u=e.start||-1,p=e.count||20;if(n.msgs.length>=p||n.is_last)"function"==typeof e.success&&e.success(n);else{n&&n.next_key&&(u=n.next_key),e.start&&(u=e.start);var h={queue:r+(e.isGroup?"@conference.easemob.com":"@easemob.com"),start:u,end:-1},f=this.context,m=f.orgName,v=f.appName,_={url:"".concat(this.apiUrl,"/").concat(m,"/").concat(v,"/users/").concat(s,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(h),success:function(r){return y(t,void 0,void 0,(function(){var t,o,i,a,s,u,p=this;return g(this,(function(d){switch(d.label){case 0:if(t=null==r?void 0:r.data,!r.data.msgs)return"function"==typeof e.success&&e.success(n),n.is_last=!0,n.next_key="",[2];o=t.msgs,i=o.length,n.is_last=t.is_last,n.next_key=t.next_key,a=function(t){return y(p,void 0,void 0,(function(){var r,n,o,i,a;return g(this,(function(s){switch(s.label){case 0:for(r=[],t=l().atob(t),n=0,o=t.length;n<o;++n)r.push(t.charCodeAt(n));return i=(i=this.context.root.lookup("easemob.pb.Meta")).decode(r),a={errorCode:0,reason:""},1!==i.ns?[3,2]:[4,c.A.call(this,i,a,!0,e.format)];case 1:return[2,s.sent()];case 2:return[2]}}))}))},s=0,d.label=1;case 1:return s<i?[4,a(o[s].msg)]:[3,4];case 2:(u=d.sent())&&n.msgs.push(u),d.label=3;case 3:return s++,[3,1];case 4:return"function"==typeof e.success&&e.success(n),[2]}}))}))},error:function(e){if(e.error&&e.error_description){var r=i.A.create({type:o.C.WEBIM_CONNCTION_AJAX_ERROR,message:"fetch history messages error",data:e});t.onError&&t.onError(r)}}};a.RD.call(this,_,d.jz.GET_HISTORY_MSG).catch((function(t){"function"==typeof e.fail&&e.fail(t)}))}}function j(e){var t=this;return new Promise((function(r,s){var u=e.targetId,d=e.cursor,h=void 0===d?-1:d,f=e.pageSize,m=void 0===f?20:f,v=e.chatType,_=e.searchDirection,E=e.searchOptions,T=void 0===E?{}:E,R=T.msgTypes,O=void 0===R?[]:R,I=T.startTime,S=void 0===I?null:I,C=T.endTime,A=void 0===C?null:C,b=T.from,N=void 0===b?null:b;if("string"!=typeof u||""===u)throw Error('"Invalid parameter": "targetId"');if(N&&"string"!=typeof N)throw Error('"Invalid parameter": "searchOptions.from"');if(O&&!Array.isArray(O))throw Error('"Invalid parameter": "searchOptions.msgTypes"');if(S&&"number"!=typeof S)throw Error('"Invalid parameter": "searchOptions.startTime"');if(A&&"number"!=typeof S)throw Error('"Invalid parameter": "searchOptions.endTime"');if(!n.dO.call(t)){var M=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return s(M)}var w=t.context,U=w.orgName,k=w.appName,P=w.userId,x="singleChat"===e.chatType?"@easemob.com":"@conference.easemob.com",L={queue:"".concat(u).concat(x),start:h,pull_number:m,is_positive:"down"===_,msgType:O.join(",")||"",end:-1,startTime:S,endTime:A,userId:"singleChat"===v?null:N},D={url:"".concat(t.apiUrl,"/").concat(U,"/").concat(k,"/users/").concat(P,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+t.token,"Content-Type":"application/json"},data:JSON.stringify(L),success:function(n){return y(t,void 0,void 0,(function(){var t,o,i,a,s,u,p,d,h=this;return g(this,(function(f){switch(f.label){case 0:t=null==n?void 0:n.data,o=t.msgs||[],i=function(e){return y(h,void 0,void 0,(function(){var t,r,n,o,i;return g(this,(function(a){switch(a.label){case 0:for(t=[],e=l().atob(e),r=0,n=e.length;r<n;++r)t.push(e.charCodeAt(r));return o=(o=this.context.root.lookup("easemob.pb.Meta")).decode(t),i={errorCode:0,reason:""},1!==o.ns?[3,2]:[4,c.A.call(this,o,i,!0,!0)];case 1:return[2,a.sent()];case 2:return[2]}}))}))},a=[],s=0,f.label=1;case 1:return s<o.length?[4,i(o[s].msg)]:[3,4];case 2:(u=f.sent())&&a.push(u),f.label=3;case 3:return s++,[3,1];case 4:return t.msgs=a,p={cursor:t.next_key,messages:a,isLast:t.is_last},null===(d=e.success)||void 0===d||d.call(e,p),r(p),[2]}}))}))},error:e.fail};a.RD.call(t,D).catch((function(e){s(e)})),p.vF.debug("Call getHistoryMessages",e)}))}function G(e,t){return y(this,void 0,void 0,(function(){var r,s,c,u,l,h,f;return g(this,(function(m){switch(m.label){case 0:if(!n.dO.call(this))return r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(r)];if("string"!=typeof e||""===e)throw Error('"Invalid parameter": "to"');return p.vF.debug("Call addContact",e,t),s=this.context,c=s.orgName,u=s.appName,l=s.accessToken,h=s.jid,f={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/users/").concat(this.user,"/contacts/apply?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify({usernames:[e],reason:t}),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,a.RD.call(this,f,d.jz.ROSTER_ADD)];case 1:return m.sent(),[2]}}))}))}var B=F;function F(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,h;return g(this,(function(f){switch(f.label){case 0:if(!n.dO.call(this))return t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if("string"!=typeof e||""===e)throw Error('"Invalid parameter": "to"');return p.vF.debug("Call deleteContact",e),r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=r.jid,h={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/users/").concat(this.user,"/contacts/users/").concat(e,"?resource=").concat(l.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},[4,a.RD.call(this,h,d.jz.ROSTER_REMOVE)];case 1:return f.sent(),[2]}}))}))}function H(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,h;return g(this,(function(f){switch(f.label){case 0:if(!n.dO.call(this))return t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if("string"!=typeof e||""===e)throw Error('"Invalid parameter": "to"');return p.vF.debug("Call acceptInvitation",e),r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=r.jid,h={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/users/").concat(this.user,"/contacts/accept/users/").concat(e,"?resource=").concat(l.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},[4,a.RD.call(this,h,d.jz.ROSTER_ACCEPT)];case 1:return f.sent(),[2]}}))}))}var W=H;function z(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,h;return g(this,(function(f){switch(f.label){case 0:if(!n.dO.call(this))return t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if("string"!=typeof e||""===e)throw Error('"Invalid parameter": "to"');return p.vF.debug("Call declineInvitation",e),r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=r.jid,h={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/users/").concat(this.user,"/contacts/decline/users/").concat(e,"?resource=").concat(l.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},[4,a.RD.call(this,h,d.jz.ROSTER_DECLINE)];case 1:return f.sent(),[2]}}))}))}var q=z;function K(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,h,f,m;return g(this,(function(v){switch(v.label){case 0:if(!n.dO.call(this))return t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(r=e.name,s=[],"string"==typeof r){if(""===r)throw Error('"Invalid parameter": "name"');s=[r]}else{if(!Array.isArray(r))throw Error('"Invalid parameter": "name"');s=r}return p.vF.debug("Call addToBlockList",e),c=this.context,u=c.orgName,l=c.appName,h=c.accessToken,f=c.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/sdk/user/").concat(this.user,"/blocks?resource=").concat(f.clientResource),type:"POST",dataType:"json",data:JSON.stringify({usernames:s}),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}},[4,a.RD.call(this,m,d.jz.ROSTER_BAN).then((function(e){return{type:e.type,data:{userIds:(null==e?void 0:e.data)||[]}}}))];case 1:return[2,v.sent()]}}))}))}var V=K,J=K;function X(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,h,f,m;return g(this,(function(v){switch(v.label){case 0:if(!n.dO.call(this))return t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(r=e.name,s=[],"string"==typeof r){if(""===r)throw Error('"Invalid parameter": "name"');s=[r]}else{if(!Array.isArray(r))throw Error('"Invalid parameter": "name"');s=r}return p.vF.debug("Call removeFromBlockList",e),c=this.context,u=c.orgName,l=c.appName,h=c.accessToken,f=c.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/sdk/user/").concat(this.user,"/blocks?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",data:JSON.stringify({usernames:s}),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}},[4,a.RD.call(this,m,d.jz.ROSTER_ALLOW)];case 1:return v.sent(),[2]}}))}))}var Y=X,Q=X;function $(e){var t=this,r=this.getUniqueId(),n={id:r,to:e.to};this._msgHash[r]=v({},n);var o="";void 0!==e.chatType?o=e.chatType:void 0!==e.type&&(o="chat"===e.type?"singleChat":e.type);var i={id:r,type:"recall",chatType:o,ackId:e.mid,to:e.to,isChatThread:e.isChatThread||!1,success:function(r){return y(t,void 0,void 0,(function(){var t,n,i,a,s,c,u,l,p;return g(this,(function(d){switch(d.label){case 0:return d.trys.push([0,5,,6]),"singleChat"!==o&&"groupChat"!==o?[3,4]:[4,null===(i=null===(n=this._localCache)||void 0===n?void 0:n.getInstance())||void 0===i?void 0:i.removeMsgByServerMsgId(e.mid)];case 1:return d.sent(),[4,null===(s=null===(a=this._localCache)||void 0===a?void 0:a.getInstance())||void 0===s?void 0:s.getConversationLastMessage(e.to,o)];case 2:return t=d.sent(),[4,null===(u=null===(c=this._localCache)||void 0===c?void 0:c.getInstance())||void 0===u?void 0:u.updateLocalConversation((0,m.u0)({conversationId:e.to,conversationType:o}),{lastMessageId:null==t?void 0:t.serverMsgId})];case 3:d.sent(),d.label=4;case 4:return null===(l=null==e?void 0:e.success)||void 0===l||l.call(e,r),[3,6];case 5:return d.sent(),null===(p=null==e?void 0:e.success)||void 0===p||p.call(e,r),[3,6];case 6:return[2]}}))}))},fail:e.fail};return p.vF.debug("Call recallMessage",e),this.mSync.send(i,this)}function Z(e){var t=e||{},r=t.messageId,n=t.modifiedMessage;if(p.vF.debug("Call modifyMessage",r,n),""===r)throw Error('Invalid parameter: "messageId"');if("txt"!==n.type)throw Error('Invalid parameter: "modifiedMessage.type"');return this.mSync.send(v({editMessageId:r},n))}function ee(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,p,d,h;return g(this,(function(f){switch(f.label){case 0:if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));return n.dO.call(this)?(r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=e.reaction,p=e.messageId,d={msgId:p,message:l},h={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/reaction/user/").concat(this.user),type:"POST",data:JSON.stringify(d),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},[4,a.RD.call(this,h)]):(t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return f.sent(),[2]}}))}))}function te(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,p,d;return g(this,(function(h){switch(h.label){case 0:if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reactionId: ".concat(e.reaction));return n.dO.call(this)?(r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=e.messageId,p=e.reaction,d={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/reaction/user/").concat(this.user,"?msgId=").concat(l,"&message=").concat(p),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},[4,a.RD.call(this,d)]):(t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return h.sent(),[2]}}))}))}function re(e){if("string"!=typeof e.chatType||!e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=e.chatType,p=e.messageId,d={msgIdList:"string"==typeof p?[p]:p,msgType:"singleChat"===l?"chat":"groupchat",groupId:e.groupId||null},h={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/reaction/user/").concat(this.user),type:"GET",data:d,dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return a.RD.call(this,h).then((function(e){var t=e.data;return null==t||t.forEach((function(e){null==e||e.reactionList.forEach((function(e){e.isAddedBySelf=e.state,delete e.state,delete e.reactionId}))})),e}))}var ne=re;function oe(e){if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=e.cursor,p=e.pageSize,d={msgId:e.messageId,message:e.reaction,currentPage:l||null,pageSize:p||20},h={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/reaction/user/").concat(this.user,"/detail"),type:"GET",data:d,dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return a.RD.call(this,h).then((function(e){return e.data.isAddedBySelf=e.data.state,delete e.data.state,delete e.data.reactionId,e}))}function ie(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,p,d,h,f,m;return g(this,(function(v){switch(v.label){case 0:if("string"!=typeof e.reportType||!e.reportType)throw Error("Invalid parameter reportType: ".concat(e.reportType));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reportReason||!e.reportReason)throw Error("Invalid parameter messageId: ".concat(e.reportReason));return n.dO.call(this)?(r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=e.reportType,p=e.reportReason,d=e.messageId,h={username:this.user,reportType:l,reportReason:p},f="".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/user/").concat(this.user,"/moderation/report/message/").concat(d),m={url:f,type:"POST",data:JSON.stringify(h),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},[4,a.RD.call(this,m)]):(t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return v.sent(),[2]}}))}))}function ae(e){var t;return y(this,void 0,void 0,(function(){var r,s,c,u,l,d,h,f,m;return g(this,(function(v){switch(v.label){case 0:if("string"!=typeof e.targetId||""===e.targetId)throw Error('"Invalid parameter targetId": '+e.targetId);if(!["singleChat","groupChat"].includes(e.chatType))throw Error('"Invalid parameter chatType": '+e.chatType);if(e.beforeTimeStamp&&("number"!=typeof e.beforeTimeStamp||e.beforeTimeStamp<0||(null===(t=e.beforeTimeStamp)||void 0===t?void 0:t.toString().length)>18))throw Error('"Invalid parameter beforeTimeStamp": '+e.beforeTimeStamp);if(e.messageIds&&!(Array.isArray(e.messageIds)&&e.messageIds.length>0&&e.messageIds.length<=20))throw Error('"Invalid parameter messageIds": '+e.messageIds);if(!e.messageIds&&!e.beforeTimeStamp)throw Error("messageIds or beforeTimeStamp field is required.");return n.dO.call(this)?(s=this.context,c=s.orgName,u=s.appName,l=s.userId,d="singleChat"===e.chatType?"userId":"groupId",h="singleChat"===e.chatType?"chat":"group",f=e.messageIds?"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/sdk/message/roaming/").concat(h,"/user/").concat(l,"?").concat(d,"=").concat(e.targetId,"&msgIdList=").concat(e.messageIds,"&resource=").concat(this.clientResource):"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/sdk/message/roaming/").concat(h,"/user/").concat(l,"/time?").concat(d,"=").concat(e.targetId,"&delTime=").concat(e.beforeTimeStamp,"&&resource=").concat(this.clientResource),m={url:f,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}},p.vF.debug("Call removeHistoryMessages",e),[4,a.RD.call(this,m)]):(r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(r)]);case 1:return v.sent(),[2]}}))}))}function se(e){var t=this;if(!n.dO.call(this)){var r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}if((null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var s=this.context,c=s.orgName,u=s.appName,l=s.accessToken,h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||"",need_mark:!0},headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return p.vF.debug("Call getServerConversations",e),new Promise((function(e,r){a.RD.call(t,h,d.jz.GET_SESSION_LIST).then((function(r){return y(t,void 0,void 0,(function(){var t,n=this;return g(this,(function(o){switch(o.label){case 0:return t=ce.call(this,r),this._localCache?[4,Promise.all(t.data.conversations.map((function(e){return y(n,void 0,void 0,(function(){var t,r,n=this;return g(this,(function(o){return null===(r=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===r||r.storeMessage(e.lastMessage,f.q.SUCCESS,!0).then((function(){var t,r;null===(r=null===(t=n._localCache)||void 0===t?void 0:t.getInstance())||void 0===r||r.updateLocalConversation((0,m.u0)({conversationId:e.conversationId,conversationType:e.conversationType}),{unReadCount:e.unReadCount})})),[2]}))}))})))]:[3,2];case 1:return o.sent(),e(t),[2];case 2:return e(t),[2]}}))}))})).catch((function(e){r(e)}))}))}function ce(e){var t=this,r=e.data,n=r.cursor,o=r.channel_infos,i=[];null==o||o.forEach((function(e){var r=null;(null==e?void 0:e.meta)&&"{}"!==JSON.stringify(e.meta)&&(e.meta.payload=JSON.parse(e.meta.payload),"delivery"!==(r=h.h.call(t,e.meta)).type&&"read"!==r.type&&"channel"!==r.type&&(r.chatType=h.p[r.chatType]));var n={conversationId:e.session_to,conversationType:"chat"===e.session_type?"singleChat":"groupChat",isPinned:e.is_top,pinnedTime:e.is_top?e.update_top_status_time:0,unReadCount:e.unread_num,lastMessage:r};e.marks&&(n.marks=e.marks.map((function(e){return s.s[e]}))),i.push(n)}));var a={conversations:i,cursor:n||""};return{type:e.type,data:a}}function ue(e){var t=this;if(!n.dO.call(this)){var r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}if((null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var s=this.context,c=s.orgName,u=s.appName,l=s.accessToken,h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||"",is_top:!0,need_mark:!0},headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return p.vF.debug("Call getServerPinnedConversations",e),a.RD.call(this,h,d.jz.GET_SESSION_LIST).then((function(e){return ce.call(t,e)}))}function le(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,h,f,m,v,y,_,E,T;return g(this,(function(g){if(!n.dO.call(this))return t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(r=e.conversationId,s=e.conversationType,c=e.isPinned,u="singleChat"===s?"chat":"groupChat","string"!=typeof r||""===r)throw Error("Invalid parameter conversationId: ".concat(r));if(!["singleChat","groupChat"].includes(s))throw Error("Invalid parameter conversationType: ".concat(s));if("boolean"!=typeof c)throw Error("Invalid parameter isPinned: ".concat(c));return l=this.context,h=l.orgName,f=l.appName,m=l.accessToken,v=l.jid,y={type:u,to:r},_=c?"":"type=".concat(u,"&to=").concat(r,"&"),E="".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/sdk/user/").concat(this.user,"/user_channel/top?").concat(_,"resource=").concat(v.clientResource),T={url:E,type:c?"POST":"DELETE",dataType:"json",headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}},c&&(T.data=JSON.stringify(y)),p.vF.debug("Call pinConversation",e),[2,a.RD.call(this,T,d.jz.PIN_CONVERSATION).then((function(e){var t=e.type,r=e.data;return{type:t,data:{isPinned:r.is_top||!1,pinnedTime:r.is_top?r.update_top_status_time:0}}}))]}))}))}function pe(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,h,f,m,v;return g(this,(function(y){switch(y.label){case 0:if(t=e.userId,r=e.remark,!n.dO.call(this))return s=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(s)];if("string"!=typeof t||""===t)throw Error('Invalid parameter: "userId"');if("string"!=typeof r)throw Error('Invalid parameter: "remark"');return p.vF.debug("Call setContactRemark",e),c=this.context,u=c.orgName,l=c.appName,h=c.accessToken,f=c.jid,m="".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/users/").concat(this.context.userId,"/contacts/users/").concat(t,"?resource=").concat(f.clientResource),v={url:m,type:"PUT",data:JSON.stringify({remark:r}),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}},[4,a.RD.call(this,v,d.jz.ROSTER_SET_CONTACT_REMARK)];case 1:return y.sent(),[2]}}))}))}function de(){if(!n.dO.call(this)){var e=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(e)}var t=this.context,r=t.orgName,s=t.appName,c=t.accessToken,u={url:"".concat(this.apiUrl,"/").concat(r,"/").concat(s,"/users/").concat(this.user,"/contacts/users?needReturnRemark=true"),dataType:"json",type:"GET",headers:{Authorization:"Bearer "+c}};return p.vF.debug("Call getAllContacts"),a.RD.call(this,u,d.jz.ROSTER_GET_ALL_CONTACTS_REMARKS).then((function(e){var t=((null==e?void 0:e.entities)||[]).map((function(e){return{userId:e.username,remark:e.remark}}));return{type:e.type,data:t}}))}function he(e){if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}p.vF.debug("Call getContactsWithCursor",e);var r=e||{},s=r.pageSize,c=void 0===s?20:s,u=r.cursor,l=void 0===u?"":u;if(c&&"number"!=typeof c)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));var h=this.context,f=h.orgName,m=h.appName,v=h.accessToken,y={url:"".concat(this.apiUrl,"/").concat(f,"/").concat(m,"/users/").concat(this.user,"/contacts?needReturnRemark=true&limit=").concat(c,"&cursor=").concat(l),dataType:"json",type:"GET",headers:{Authorization:"Bearer "+v}};return a.RD.call(this,y,d.jz.ROSTER_GET_ALL_CONTACTS_REMARKS_FROM_SERVER_BY_PAGE).then((function(e){var t,r,n=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.contacts)||[],o=(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.cursor)||"",i=n.map((function(e){return{userId:e.username,remark:e.remark}}));return{type:e.type,data:{cursor:o,contacts:i}}}))}function fe(e){return y(this,void 0,void 0,(function(){var t,r,c,u,l,f,m,v,y,E,T,R,O,I,S;return g(this,(function(g){switch(g.label){case 0:if(!n.dO.call(this))return t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(p.vF.debug("Call markConversation",e),c=(r=e||{}).conversations,u=void 0===c?[]:c,l=r.mark,f=r.isMarked,!Array.isArray(u))throw Error("Invalid parameter conversations");if(m=u.map((function(e){if(!e.conversationId||!["singleChat","groupChat"].includes(e.conversationType))throw Error("Invalid parameter conversations");return{to:e.conversationId,type:_[e.conversationType]}})),"boolean"!=typeof f)throw Error("Invalid parameter isMarked: ".concat(f));if("number"!=typeof l)throw Error("Invalid parameter mark: ".concat(l));return v=this.context,y=v.orgName,E=v.appName,T=v.accessToken,R=v.userId,O=v.jid,I={mark:s.s[l],targets:m},S={url:"".concat(this.apiUrl,"/").concat(y,"/").concat(E,"/sdk/user/").concat(R,"/user_channels/mark?resource=").concat(O.clientResource),dataType:"json",data:JSON.stringify(I),type:f?"Post":"Delete",headers:{Authorization:"Bearer "+T}},[4,a.RD.call(this,S,d.jz.MARK_CONVERSATION).then((function(e){var t,r=(null===(t=e.data)||void 0===t?void 0:t.ignore)||[];r&&Array.isArray(r)&&r.length>0&&p.vF.debug("markConversation has ignored conversations",r.map((function(e){return{conversationId:e.to,conversationType:h.p[e.type]}})))}))];case 1:return g.sent(),[2]}}))}))}function me(e){return y(this,void 0,void 0,(function(){var t,r;return g(this,(function(n){return p.vF.debug("Call addConversationMark",e),t=e.conversations,r=e.mark,[2,fe.call(this,{conversations:t,mark:r,isMarked:!0})]}))}))}function ve(e){return y(this,void 0,void 0,(function(){var t,r;return g(this,(function(n){return p.vF.debug("Call removeConversationMark",e),t=e.conversations,r=e.mark,[2,fe.call(this,{conversations:t,mark:r,isMarked:!1})]}))}))}function ye(e){var t,r,c=this;if(!n.dO.call(this)){var u=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(u)}if(p.vF.debug("Call getServerConversationsByFilter",e),(null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));if("number"!=typeof(null===(t=null==e?void 0:e.filter)||void 0===t?void 0:t.mark))throw Error("Invalid parameter mark: ".concat(null===(r=null==e?void 0:e.filter)||void 0===r?void 0:r.mark));var l=this.context,h=l.orgName,f=l.appName,m=l.accessToken,v="".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/sdk/user/").concat(this.user,"/user_channels/mark/search?"),y=e.pageSize,g=e.cursor,_=((null==e?void 0:e.filter)||{}).mark,E={url:v,type:"GET",dataType:"json",data:{limit:y||10,cursor:g||"",need_mark:!0,mark:s.s[_]},headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}};return a.RD.call(this,E,d.jz.GET_SESSION_LIST).then((function(e){return ce.call(c,e)}))}function ge(){if(!n.dO.call(this)){var e=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(e)}p.vF.debug("Call getSelfIdsOnOtherPlatform");var t=this.context,r=t.orgName,s=t.appName,c=t.accessToken,u=t.userId,l=t.jid,h={url:"".concat(this.apiUrl,"/").concat(r,"/").concat(s,"/users/").concat(u,"/resources"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"}};return a.RD.call(this,h,d.jz.USER_LOGGEDIN_OTHER_PLATFORM).then((function(e){var t,r=null===(t=e.data)||void 0===t?void 0:t.filter((function(e){return e.res!==l.clientResource})),n=null==r?void 0:r.map((function(e){return"".concat(u,"/").concat(e.res)}));return{type:e.type,data:n}}))}function _e(){var e,t,r,s,c,u;return y(this,void 0,void 0,(function(){var l,h,f,m,v,y,_,E,T;return g(this,(function(g){switch(g.label){case 0:return n.dO.call(this)?(p.vF.debug("Call deleteAllMessagesAndConversations"),h=this.context,f=h.orgName,m=h.appName,v=h.accessToken,y=h.userId,_=h.jid,E="".concat(this.apiUrl,"/").concat(f,"/").concat(m,"/sdk/message/roaming/user/").concat(y,"/delete/all?resource=").concat(_.clientResource),T={url:E,type:"POST",dataType:"json",headers:{Authorization:"Bearer "+v,"Content-Type":"application/json"}},[4,a.RD.call(this,T,d.jz.REST_DELETE_MESSAGES_CONVERSATIONS)]):(l=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(l)]);case 1:return g.sent(),null===(t=null===(e=this._localCache)||void 0===e?void 0:e.getInstance())||void 0===t||t.clearConversationMap(),[4,null===(s=null===(r=this._localCache)||void 0===r?void 0:r.getInstance())||void 0===s?void 0:s.clearStoreData("conversationList")];case 2:return g.sent(),[4,null===(u=null===(c=this._localCache)||void 0===c?void 0:c.getInstance())||void 0===u?void 0:u.clearStoreData("message")];case 3:return g.sent(),[2]}}))}))}function Ee(e){return y(this,void 0,void 0,(function(){var t,r,s,c,u,l,h,f,m,v,y,E,T,R,O;return g(this,(function(g){switch(g.label){case 0:if(!n.dO.call(this))return t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(p.vF.debug("Call setMessagePinStatus",e),s=(r=e||{}).conversationId,c=void 0===s?"":s,u=r.conversationType,l=r.messageId,h=r.isPinned,"string"!=typeof c||""===c)throw Error("Invalid parameter conversationId");if("string"!=typeof l||""===l)throw Error("Invalid parameter messageId");if("boolean"!=typeof h)throw Error("Invalid parameter isPinned");return f=this.context,m=f.orgName,v=f.appName,y=f.accessToken,E=f.userId,T=f.jid,R={to:c,type:_[u],pin_msg_id:l},O={url:"".concat(this.apiUrl,"/").concat(m,"/").concat(v,"/sdk/user/").concat(E,"/user_channel/pin?resource=").concat(T.clientResource),dataType:"json",data:JSON.stringify(R),type:h?"Post":"Delete",headers:{Authorization:"Bearer "+y}},[4,a.RD.call(this,O,d.jz.REST_PIN_MESSAGE)];case 1:return g.sent(),[2]}}))}))}function Te(e){return y(this,void 0,void 0,(function(){var t,r,n,o;return g(this,(function(i){return p.vF.debug("Call pinMessage",e),r=(t=e||{}).conversationType,n=t.conversationId,o=t.messageId,[2,Ee.call(this,{conversationId:n,conversationType:r,messageId:o,isPinned:!0})]}))}))}function Re(e){return y(this,void 0,void 0,(function(){var t,r,n,o;return g(this,(function(i){return p.vF.debug("Call unpinMessage",e),r=(t=e||{}).conversationType,n=t.conversationId,o=t.messageId,[2,Ee.call(this,{conversationId:n,conversationType:r,messageId:o,isPinned:!1})]}))}))}function Oe(e){var t=this;if(!n.dO.call(this)){var r=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}p.vF.debug("Call getServerPinnedMessages",e);var s=e.conversationId,c=e.conversationType,u=e.pageSize,l=e.cursor;if("string"!=typeof s||""===s)throw Error("Invalid parameter conversationId");if(u&&"number"!=typeof u)throw Error("Invalid parameter pageSize: ".concat(u));if(l&&"string"!=typeof l)throw Error("Invalid parameter cursor: ".concat(l));var f=this.context,m=f.orgName,v=f.appName,y=f.accessToken,g={url:"".concat(this.apiUrl,"/").concat(m,"/").concat(v,"/sdk/user/").concat(this.user,"/user_channel/pin"),type:"GET",dataType:"json",data:{to:s,type:_[c],limit:u||10,cursor:l||""},headers:{Authorization:"Bearer "+y,"Content-Type":"application/json"}};return a.RD.call(this,g,d.jz.GET_SESSION_LIST).then((function(e){return{type:0,data:{list:e.data.msg_infos.map((function(e){e.message.payload=JSON.parse(e.message.payload);var r=e.message,n=e.pin_opt_at,o=e.pin_operator;return{message:h.h.call(t,r,{formatChatType:!0}),pinTime:n,operatorId:o}})),cursor:e.data.cursor||""}}}))}},8868:function(e,t,r){"use strict";r.r(t),r.d(t,{getPresenceStatus:function(){return m},getSubscribedPresenceList:function(){return h},getSubscribedPresencelist:function(){return f},publishPresence:function(){return l},subscribePresence:function(){return p},unsubscribePresence:function(){return d}}),r(2675),r(9463),r(2259),r(8706),r(4346),r(3792),r(739),r(6099),r(3362),r(7764),r(2953);var n=r(8678),o=r(1750),i=r(346),a=r(1531),s=r(2056),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function l(e){return c(this,void 0,void 0,(function(){var t,r,c,l,p,d,h,f,m;return u(this,(function(u){switch(u.label){case 0:if("string"!=typeof e.description)throw Error('Invalid parameter: "description"');return o.dO.call(this)?(r=this.context,c=r.accessToken,l=r.orgName,p=r.appName,d=r.userId,h=this.context.jid.clientResource,f={ext:e.description},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(p,"/users/").concat(d,"/presence/").concat(h,"/1"),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error},s.vF.debug("Call publishPresence:",e),[4,n.RD.call(this,m)]):(t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return u.sent(),[2]}}))}))}function p(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if("number"!=typeof e.expiry)throw Error('Invalid parameter: "expiry"');if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.orgName,u=r.appName,l=r.userId,p=r.accessToken,d={usernames:e.usernames},h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/users/").concat(l,"/presence/").concat(e.expiry),type:"POST",dataType:"json",data:JSON.stringify(d),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call subscribePresence:",e),n.RD.call(this,h).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}function d(e){return c(this,void 0,void 0,(function(){var t,r,c,l,p,d,h;return u(this,(function(u){switch(u.label){case 0:if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');return o.dO.call(this)?(r=this.context,c=r.orgName,l=r.appName,p=r.userId,d=r.accessToken,h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(p,"/presence"),type:"DELETE",dataType:"json",data:JSON.stringify(e.usernames),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error},s.vF.debug("Call unsubscribePresence:",e),[4,n.RD.call(this,h)]):(t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return u.sent(),[2]}}))}))}function h(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.orgName,u=r.appName,l=r.userId,p=r.accessToken,d={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/users/").concat(l,"/presence/sublist?pageNum=").concat(e.pageNum,"&pageSize=").concat(e.pageSize),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getSubscribedPresenceList:",e),n.RD.call(this,d).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}var f=h;function m(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={usernames:e.usernames},c=this.context,u=c.orgName,l=c.appName,p=c.userId,d=c.accessToken,h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/users/").concat(p,"/presence"),type:"POST",dataType:"json",data:JSON.stringify(r),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getPresenceStatus:",e),n.RD.call(this,h).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}},8277:function(e,t,r){"use strict";r.r(t),r.d(t,{clearRemindTypeForConversation:function(){return p},getPushPerformLanguage:function(){return m},getSilentModeForAll:function(){return u},getSilentModeForConversation:function(){return d},getSilentModeForConversations:function(){return h},setPushPerformLanguage:function(){return f},setSilentModeForAll:function(){return c},setSilentModeForConversation:function(){return l}}),r(8706),r(1629),r(4346),r(8598),r(739),r(9432),r(6099),r(3362),r(3500);var n=r(8678),o=r(1750),i=r(346),a=r(1531),s=r(2056);function c(e){if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var r=e.options,c=r.startTime,u=r.endTime;if(!(c instanceof Object&&Object.keys(c).length))throw Error('Invalid parameter: "options of startTime"');if(!c.hours||"number"!=typeof c.hours||!c.minutes||"number"!=typeof c.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(u instanceof Object&&Object.keys(u).length))throw Error('Invalid parameter: "options of endTime"');if(!u.hours||"number"!=typeof u.hours||!u.minutes||"number"!=typeof u.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!o.dO.call(this)){var l=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(l)}var p=this.context,d=p.accessToken,h=p.orgName,f=p.appName,m=p.userId,v={};switch(t){case 0:v={type:e.options.remindType};break;case 1:v={ignoreDuration:e.options.duration};break;case 2:var y=e.options;c=y.startTime,u=y.endTime,v={ignoreInterval:"".concat(c.hours,":").concat(c.minutes,"-").concat(u.hours,":").concat(u.minutes)}}var g={url:"".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/users/").concat(m,"/notification/user/").concat(m),type:"PUT",dataType:"json",data:JSON.stringify(v),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call setSilentModeForAll:",e),n.RD.call(this,g)}function u(e){if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.accessToken,u=r.orgName,l=r.appName,p=r.userId,d={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/users/").concat(p,"/notification/user/").concat(p),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return s.vF.debug("Call getSilentModeForAll:",e),n.RD.call(this,d)}function l(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var r=e.options,c=r.startTime,u=r.endTime;if(!(c instanceof Object&&Object.keys(c).length))throw Error('Invalid parameter: "options of startTime"');if(!c.hours||"number"!=typeof c.hours||!c.minutes||"number"!=typeof c.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(u instanceof Object&&Object.keys(u).length))throw Error('Invalid parameter: "options of endTime"');if(!u.hours||"number"!=typeof u.hours||!u.minutes||"number"!=typeof u.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!o.dO.call(this)){var l=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(l)}var p=this.context,d=p.accessToken,h=p.orgName,f=p.appName,m=p.userId,v="chatgroup",y={};switch(t){case 0:y={type:e.options.remindType};break;case 1:y={ignoreDuration:e.options.duration};break;case 2:var g=e.options;c=g.startTime,u=g.endTime,y={ignoreInterval:"".concat(c.hours,":").concat(c.minutes,"-").concat(u.hours,":").concat(u.minutes)}}"singleChat"===e.type&&(v="user");var _={url:"".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/users/").concat(m,"/notification/").concat(v,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify(y),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call setSilentModeForConversation:",e),n.RD.call(this,_)}function p(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.accessToken,u=r.orgName,l=r.appName,p=r.userId,d="chatgroup";"singleChat"===e.type&&(d="user");var h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/users/").concat(p,"/notification/").concat(d,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify({type:"DEFAULT"}),headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call clearRemindTypeForConversation:",e),n.RD.call(this,h)}function d(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.accessToken,u=r.orgName,l=r.appName,p=r.userId,d="chatgroup";"singleChat"===e.type&&(d="user");var h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/users/").concat(p,"/notification/").concat(d,"/").concat(e.conversationId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getSilentModeForConversation:",e),n.RD.call(this,h)}function h(e){if(!Array.isArray(e.conversationList))throw Error('Invalid parameter: "conversationList"');if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.accessToken,u=r.orgName,l=r.appName,p=r.userId,d=[],h=[];e.conversationList.forEach((function(e){"singleChat"===e.type?d.push(e.id):h.push(e.id)}));var f=d.length?d.join(","):"",m=h.length?h.join(","):"",v={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/users/").concat(p,"/notification?user=").concat(f,"&group=").concat(m),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call getSilentModeForConversations:",e),n.RD.call(this,v)}function f(e){if("string"!=typeof e.language||!e.language)throw Error('Invalid parameter: "language"');if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={translationLanguage:e.language},c=this.context,u=c.accessToken,l=c.orgName,p=c.appName,d=c.userId,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(p,"/users/").concat(d,"/notification/language"),type:"PUT",dataType:"json",data:JSON.stringify(r),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return s.vF.debug("Call setPushPerformLanguage:",e),n.RD.call(this,h)}function m(e){if(!o.dO.call(this)){var t=i.A.create({type:a.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.accessToken,u=r.orgName,l=r.appName,p=r.userId,d={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/users/").concat(p,"/notification/language"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return s.vF.debug("Call getPushPerformLanguage:",e),n.RD.call(this,d)}},4667:function(e,t,r){"use strict";r.r(t),r.d(t,{changeChatThreadName:function(){return f},createChatThread:function(){return l},destroyChatThread:function(){return h},getChatThreadDetail:function(){return T},getChatThreadLastMessage:function(){return _},getChatThreadMembers:function(){return m},getChatThreads:function(){return g},getJoinedChatThreads:function(){return y},joinChatThread:function(){return p},leaveChatThread:function(){return d},removeChatThreadMember:function(){return v}}),r(2675),r(9463),r(2259),r(8706),r(1629),r(4346),r(3792),r(739),r(2010),r(6099),r(3362),r(7764),r(3500),r(2953);var n=r(1531),o=r(346),i=r(8678),a=r(1750),s=r(565),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function l(e){if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if("string"!=typeof e.messageId||""===e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=r.jid,p={name:e.name,msg_id:e.messageId,group_id:e.parentId,owner:this.user},d={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/thread?resource=").concat(l.clientResource),type:"POST",dataType:"json",data:JSON.stringify(p),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return i.RD.call(this,d).then((function(e){var t=e.data.thread_id;return e.data={chatThreadId:t},e}))}function p(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=r.jid,p={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/join?resource=").concat(l.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return i.RD.call(this,p).then((function(e){var t=e.data.detail;return t.messageId=t.msgId,t.parentId=t.groupId,delete t.msgId,delete t.groupId,e}))}function d(e){return c(this,void 0,void 0,(function(){var t,r,s,c,l,p,d;return u(this,(function(u){switch(u.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return a.dO.call(this)?(r=this.context,s=r.orgName,c=r.appName,l=r.accessToken,p=r.jid,d={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/quit?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,i.RD.call(this,d)]):(t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return u.sent(),[2]}}))}))}function h(e){return c(this,void 0,void 0,(function(){var t,r,s,c,l,p,d;return u(this,(function(u){switch(u.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return a.dO.call(this)?(r=this.context,s=r.orgName,c=r.appName,l=r.accessToken,p=r.jid,d={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/thread/").concat(e.chatThreadId,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,i.RD.call(this,d)]):(t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return u.sent(),[2]}}))}))}function f(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=r.jid,p={name:e.name},d={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/thread/").concat(e.chatThreadId,"?resource=").concat(l.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(p),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return i.RD.call(this,d)}function m(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l={limit:e.pageSize||20,cursor:e.cursor||""},p={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/thread/").concat(e.chatThreadId,"/users"),type:"GET",dataType:"json",data:l,headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return i.RD.call(this,p)}function v(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.username||""===e.username)throw Error("Invalid parameter username: ".concat(e.username));if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l=r.jid,p={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/thread/").concat(e.chatThreadId,"/users/").concat(e.username,"?resource=").concat(l.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return i.RD.call(this,p)}function y(e){if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l={limit:e.pageSize||20,cursor:e.cursor||""},p={url:e.parentId?"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/threads/chatgroups/").concat(e.parentId,"/user/").concat(this.user):"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/threads/user/").concat(this.user),type:"GET",dataType:"json",data:l,headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return i.RD.call(this,p).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function g(e){if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l={cursor:e.cursor||"",limit:e.pageSize||20},p={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/threads/chatgroups/").concat(e.parentId),type:"GET",dataType:"json",data:l,headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return i.RD.call(this,p).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function _(e){var t=this;if(!Array.isArray(e.chatThreadIds))throw Error("Invalid parameter chatThreadIds: ".concat(e.chatThreadIds));if(!a.dO.call(this)){var r=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var s=this.context,c=s.orgName,u=s.appName,l=s.accessToken,p={threadIds:e.chatThreadIds},d={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/thread/message"),type:"POST",dataType:"json",data:JSON.stringify(p),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return i.RD.call(this,d).then((function(e){return E.call(t,e)}))}function E(e){var t=this,r=e.entities;return null==r||r.forEach((function(e){e.chatThreadId=e.thread_id,e.last_message&&"{}"!==JSON.stringify(e.last_message)?e.lastMessage=s.h.call(t,e.last_message):e.lastMessage=e.last_message,delete e.thread_id,delete e.last_message})),e}function T(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!a.dO.call(this)){var t=o.A.create({type:n.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,s=r.orgName,c=r.appName,u=r.accessToken,l={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/thread/").concat(e.chatThreadId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return i.RD.call(this,l).then((function(e){return e.data.affiliationsCount=e.data.affiliations_count,e.data.messageId=e.data.msgId,e.data.parentId=e.data.groupId,delete e.data.affiliations_count,delete e.data.msgId,delete e.data.groupId,e}))}},6676:function(e,t,r){"use strict";r.r(t),r.d(t,{getSupportedLanguages:function(){return c},translateMessage:function(){return u}}),r(8706),r(4346),r(739),r(6099),r(3362);var n=r(1750),o=r(1531),i=r(346),a=r(2056),s=r(8678);function c(){if(!n.dO.call(this)){var e=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(e)}var t=this.context,r=t.orgName,c=t.appName,u=t.accessToken,l={url:"".concat(this.apiUrl,"/").concat(r,"/").concat(c,"/users/").concat(this.user,"/translate/support/language"),dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u}};return a.vF.debug("Call getSupportedLanguages"),s.RD.call(this,l)}function u(e){if("string"!=typeof e.text||""===e.text)throw Error('Invalid parameter: "text"');if(!Array.isArray(e.languages))throw Error('Invalid parameter: "language"');if(!n.dO.call(this)){var t=i.A.create({type:o.C.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,c=r.orgName,u=r.appName,l=r.accessToken,p="".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/users/").concat(this.user,"/translate"),d={text:e.text,to:e.languages},h={url:p,dataType:"json",type:"POST",data:JSON.stringify(d),headers:{Authorization:"Bearer "+l}};return a.vF.debug("Call translateMessage"),s.RD.call(this,h)}},1750:function(e,t,r){"use strict";r.d(t,{A4:function(){return u},dO:function(){return s},fu:function(){return c}}),r(1629),r(4423),r(9432),r(6099),r(1699),r(3500);var n=r(1531),o=r(346);function i(){var e=this.context.appName,t=this.context.orgName;return!(!e||!t)||(this.onError&&this.onError({type:n.C.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"}),!1)}function a(){var e;if(!this.context.accessToken){var t=o.A.create({type:n.C.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"});return this.onError&&this.onError(t),null===(e=this.eventHandler)||void 0===e||e.dispatch("onError",t),!1}return!0}function s(){return a.call(this)&&i.call(this)}function c(e){var t=e.data,r=e.type;return{data:{status:Object.keys(t.errorKeys).length>0?"fail":"success",errorKeys:t.errorKeys,successKeys:t.successKeys},type:r}}function u(e){var t=e.data,r=void 0;return Object.keys(t.errorKeys).length>0&&Object.keys(t.errorKeys).forEach((function(e){var i=t.errorKeys[e];r=i.includes("is not part of you")?o.A.create({type:n.C.NO_PERMISSION,message:i}):i.includes("size of metadata for this single chatroom exceeds the user defined limit")||i.includes("total size of chatroom metadata for this app exceeds the user defined limit")||i.includes("is exceeding maximum limit")?o.A.create({type:n.C.MAX_LIMIT,message:i}):i.includes("is not Legal")?o.A.create({type:n.C.REQUEST_PARAMETER_ERROR,message:i}):i.includes("Failed to update userMetadata. Concurrent updates not allowed")?o.A.create({type:n.C.OPERATION_NOT_ALLOWED,message:i}):o.A.create({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,message:i})})),r}},75:function(e,t,r){"use strict";r.d(t,{Jz:function(){return n},KU:function(){return i},Po:function(){return s},XI:function(){return l},ey:function(){return a},lM:function(){return u},nf:function(){return o},uN:function(){return c}}),r(3792),r(6033),r(6099),r(7764),r(2953);var n=7,o=new Map,i="im",a="32f24ab2ddb74f508aa9286c356cec84",s=1e3,c={INIT:9674,API:9675},u="direct",l=-1},3893:function(e,t,r){"use strict";var n,o,i,a,s,c;r.d(t,{G8:function(){return s},S5:function(){return n},TT:function(){return i},Wz:function(){return c},jz:function(){return o},z1:function(){return a}}),function(e){e[e.UNKNOWOPERATION=-1]="UNKNOWOPERATION",e[e.REST_GET_SESSION_LIST=1]="REST_GET_SESSION_LIST",e[e.REST_DEL_SESSION=2]="REST_DEL_SESSION",e[e.REST_GET_HISTORY_MESSAGE=3]="REST_GET_HISTORY_MESSAGE",e[e.REST_PIN_CONVERSATION=4]="REST_PIN_CONVERSATION",e[e.REST_MARK_CONVERSATION=5]="REST_MARK_CONVERSATION",e[e.REST_UPLOAD_FILE_IN_PARTS=6]="REST_UPLOAD_FILE_IN_PARTS",e[e.REST_DELETE_MESSAGES_CONVERSATIONS=7]="REST_DELETE_MESSAGES_CONVERSATIONS",e[e.REST_PIN_MESSAGE=8]="REST_PIN_MESSAGE",e[e.REST_FETCH_PINMESSAGES=9]="REST_FETCH_PINMESSAGES",e[e.REST_OPERATE=100]="REST_OPERATE",e[e.MSYNC_SENDMESSAGE=101]="MSYNC_SENDMESSAGE",e[e.MSYNC_RECALLMESSAGE=102]="MSYNC_RECALLMESSAGE",e[e.MSYNC_MODIFYMESSAGE=103]="MSYNC_MODIFYMESSAGE",e[e.MSYNC_OPERATE=200]="MSYNC_OPERATE",e[e.ROSTER_ADD=201]="ROSTER_ADD",e[e.ROSTER_REMOVE=202]="ROSTER_REMOVE",e[e.ROSTER_ACCEPT=203]="ROSTER_ACCEPT",e[e.ROSTER_DECLINE=204]="ROSTER_DECLINE",e[e.ROSTER_BAN=205]="ROSTER_BAN",e[e.ROSTER_ALLOW=206]="ROSTER_ALLOW",e[e.ROSTER_BLACKLIST=207]="ROSTER_BLACKLIST",e[e.ROSTER_CONTACTS=208]="ROSTER_CONTACTS",e[e.ROSTER_GET_ALL_CONTACTS_REMARKS=209]="ROSTER_GET_ALL_CONTACTS_REMARKS",e[e.ROSTER_GET_ALL_CONTACTS_REMARKS_FROM_SERVER_BY_PAGE=210]="ROSTER_GET_ALL_CONTACTS_REMARKS_FROM_SERVER_BY_PAGE",e[e.ROSTER_SET_CONTACT_REMARK=211]="ROSTER_SET_CONTACT_REMARK",e[e.ROSTER_OPERATE=300]="ROSTER_OPERATE",e[e.USER_LOGIN=301]="USER_LOGIN",e[e.USER_CREATE=302]="USER_CREATE",e[e.USER_UPDATE_USERINFO=303]="USER_UPDATE_USERINFO",e[e.USER_FETCH_USERINFO=304]="USER_FETCH_USERINFO",e[e.USER_UPDATE_NICK=305]="USER_UPDATE_NICK",e[e.USER_UPLOAD_PUSH_TOKEN=306]="USER_UPLOAD_PUSH_TOKEN",e[e.USER_LOGGEDIN_OTHER_PLATFORM=307]="USER_LOGGEDIN_OTHER_PLATFORM",e[e.USER_OPERATE=400]="USER_OPERATE",e[e.GROUP_CREATEGROUP=401]="GROUP_CREATEGROUP",e[e.GROUP_BLOCK_MESSAGE=402]="GROUP_BLOCK_MESSAGE",e[e.GROUP_FETCH_PUBLICGROUPS_WITHCURSOR=403]="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e[e.GROUP_FETCH_USERS_GROUP=404]="GROUP_FETCH_USERS_GROUP",e[e.GROUP_CHANGE_OWNER=405]="GROUP_CHANGE_OWNER",e[e.GROUP_FETCH_SPECIFICATION=406]="GROUP_FETCH_SPECIFICATION",e[e.GROUP_CHANGE_GROUPATTRIBUTE=407]="GROUP_CHANGE_GROUPATTRIBUTE",e[e.GROUP_FETCH_MEMEBERS=408]="GROUP_FETCH_MEMEBERS",e[e.GROUP_GET_ADMIN=409]="GROUP_GET_ADMIN",e[e.GROUP_SET_ADMIN=410]="GROUP_SET_ADMIN",e[e.GROUP_REMOVE_ADMIN=411]="GROUP_REMOVE_ADMIN",e[e.GROUP_DESTOTYGROUP=412]="GROUP_DESTOTYGROUP",e[e.GROUP_LEAVEGROUP=413]="GROUP_LEAVEGROUP",e[e.GROUP_INVITE_TO_GROUP=414]="GROUP_INVITE_TO_GROUP",e[e.GROUP_JOIN_PUBLICGROUP=415]="GROUP_JOIN_PUBLICGROUP",e[e.GROUP_ACCEPT_JOINPUBLICGROUPAPPL=416]="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e[e.GROUP_DECLINE_JOINPUBLICGROUPAPPL=417]="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e[e.GROUP_ACCEPT_INVITATION=418]="GROUP_ACCEPT_INVITATION",e[e.GROUP_DECLINE_INVITATION=419]="GROUP_DECLINE_INVITATION",e[e.GROUP_REMOVE_MEMBER=420]="GROUP_REMOVE_MEMBER",e[e.GROUP_REMOVE_MEMBERS=421]="GROUP_REMOVE_MEMBERS",e[e.GROUP_MUTE_MEMBERS=422]="GROUP_MUTE_MEMBERS",e[e.GROUP_UNMUTE_MEMBERS=423]="GROUP_UNMUTE_MEMBERS",e[e.GROUP_FETCH_MUTES=424]="GROUP_FETCH_MUTES",e[e.GROUP_BLOCK_MEMBER=425]="GROUP_BLOCK_MEMBER",e[e.GROUP_BLOCK_MEMBERS=426]="GROUP_BLOCK_MEMBERS",e[e.GROUP_UNBLOCK_MEMBER=427]="GROUP_UNBLOCK_MEMBER",e[e.GROUP_UNBLOCK_MEMBERS=428]="GROUP_UNBLOCK_MEMBERS",e[e.GROUP_GET_BLOCK_LIST=429]="GROUP_GET_BLOCK_LIST",e[e.GROUP_MUTE_ALLMEMBERS=430]="GROUP_MUTE_ALLMEMBERS",e[e.GROUP_UNMUTE_ALLMEMBERS=431]="GROUP_UNMUTE_ALLMEMBERS",e[e.GROUP_ADD_WHITELIST=432]="GROUP_ADD_WHITELIST",e[e.GROUP_REMOVE_WHITELIST=433]="GROUP_REMOVE_WHITELIST",e[e.GROUP_FETCH_WHITELIST=434]="GROUP_FETCH_WHITELIST",e[e.GROUP_IS_IN_WHITELIST=435]="GROUP_IS_IN_WHITELIST",e[e.GROUP_GET_READ_USERS=436]="GROUP_GET_READ_USERS",e[e.GROUP_FETCH_ANNOUNCEMENT=437]="GROUP_FETCH_ANNOUNCEMENT",e[e.GROUP_UPDATE_ANNOUNCEMENT=438]="GROUP_UPDATE_ANNOUNCEMENT",e[e.GROUP_UPLOAD_SHAREDFILE=439]="GROUP_UPLOAD_SHAREDFILE",e[e.GROUP_DELETE_SHAREDFILE=440]="GROUP_DELETE_SHAREDFILE",e[e.GROUP_FETCH_SHAREDFILE=441]="GROUP_FETCH_SHAREDFILE",e[e.GROUP_DOWNLOAD_SHAREDFILE=442]="GROUP_DOWNLOAD_SHAREDFILE",e[e.GROUP_MEMBER_SET_META_DATA=443]="GROUP_MEMBER_SET_META_DATA",e[e.GROUP_MEMBER_FETCH_META_DATA=444]="GROUP_MEMBER_FETCH_META_DATA",e[e.GROUP_OPERATE=500]="GROUP_OPERATE",e[e.CHATROOM_FETCH_CHATROOMSWITHPAGE=501]="CHATROOM_FETCH_CHATROOMSWITHPAGE",e[e.CHATROOM_CREATECHATROOM=502]="CHATROOM_CREATECHATROOM",e[e.CHATROOM_DESTORYCHATROOM=503]="CHATROOM_DESTORYCHATROOM",e[e.CHATROOM_FETCH_SPECIFICATION=504]="CHATROOM_FETCH_SPECIFICATION",e[e.CHATROOM_CHANGE_ATTRIBUTE=505]="CHATROOM_CHANGE_ATTRIBUTE",e[e.CHATROOM_REMOVE_MEMBER=506]="CHATROOM_REMOVE_MEMBER",e[e.CHATROOM_REMOVE_MEMBERS=507]="CHATROOM_REMOVE_MEMBERS",e[e.CHATROOM_ADD_MEMBERS=508]="CHATROOM_ADD_MEMBERS",e[e.CHATROOM_JOINCAHTROOM=509]="CHATROOM_JOINCAHTROOM",e[e.CHATROOM_LEAVECAHTROOM=510]="CHATROOM_LEAVECAHTROOM",e[e.CHATROOM_FETCH_MEMBERS=511]="CHATROOM_FETCH_MEMBERS",e[e.CHATROOM_GET_ADMIN=512]="CHATROOM_GET_ADMIN",e[e.CHATROOM_SET_ADMIN=513]="CHATROOM_SET_ADMIN",e[e.CHATROOM_REMOVE_ADMIN=514]="CHATROOM_REMOVE_ADMIN",e[e.CHATROOM_MUTE_USER=515]="CHATROOM_MUTE_USER",e[e.CHATROOM_UNMUTE_USER=516]="CHATROOM_UNMUTE_USER",e[e.CHATROOM_FETCH_MUTES=517]="CHATROOM_FETCH_MUTES",e[e.CHATROOM_BLOCK_USER=518]="CHATROOM_BLOCK_USER",e[e.CHATROOM_BLOCK_USERS=519]="CHATROOM_BLOCK_USERS",e[e.CHATROOM_UNBLOCK_USER=520]="CHATROOM_UNBLOCK_USER",e[e.CHATROOM_UNBLOCK_USERS=521]="CHATROOM_UNBLOCK_USERS",e[e.CHATROOM_FETCH_BANS=522]="CHATROOM_FETCH_BANS",e[e.CHATROOM_MUTE_ALLMEMEBERS=523]="CHATROOM_MUTE_ALLMEMEBERS",e[e.CHATROOM_UNMUTE_ALLMEMEBERS=524]="CHATROOM_UNMUTE_ALLMEMEBERS",e[e.CHATROOM_ADD_WHITELIST=525]="CHATROOM_ADD_WHITELIST",e[e.CHATROOM_REMOVE_WHITELIST=526]="CHATROOM_REMOVE_WHITELIST",e[e.CHATROOM_FETCH_WHITELIST=527]="CHATROOM_FETCH_WHITELIST",e[e.CHATROOM_FETCH_MEMBERIN_WHITELIST=528]="CHATROOM_FETCH_MEMBERIN_WHITELIST",e[e.CHATROOM_FETCH_ANNOUNCEMENT=529]="CHATROOM_FETCH_ANNOUNCEMENT",e[e.CHATROOM_UPDATE_ANNOUNCEMENT=530]="CHATROOM_UPDATE_ANNOUNCEMENT",e[e.CHATROOM_REMOVE_SHARE_FILE=531]="CHATROOM_REMOVE_SHARE_FILE",e[e.CHATROOM_GET_SHARE_FILE_LIST=532]="CHATROOM_GET_SHARE_FILE_LIST",e[e.CHATROOM_UPLOAD_FILE=533]="CHATROOM_UPLOAD_FILE",e[e.CHATROOM_SET_META_DATA=534]="CHATROOM_SET_META_DATA",e[e.CHATROOM_DELETE_META_DATA=535]="CHATROOM_DELETE_META_DATA",e[e.CHATROOM_FETCH_META_DATA=536]="CHATROOM_FETCH_META_DATA",e[e.CHATROOM_OPERATE=600]="CHATROOM_OPERATE"}(n||(n={})),function(e){e.SDK_INTERNAL="SDK_INTERNAL",e.LOGIN="USER_LOGIN",e.REGISTER="USER_CREATE",e.GET_CHATROOM_LIST="CHATROOM_FETCH_CHATROOMSWITHPAGE",e.CREATE_CHATROOM="CHATROOM_CREATECHATROOM",e.DESTROY_CHATROOM="CHATROOM_DESTORYCHATROOM",e.GET_CHATROOM_DETAIL="CHATROOM_FETCH_SPECIFICATION",e.MODIFY_CHATROOM="CHATROOM_CHANGE_ATTRIBUTE",e.REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBER",e.MULTI_REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBERS",e.ADD_USERS_TO_CHATROOM="CHATROOM_ADD_MEMBERS",e.JOIN_CHATROOM="CHATROOM_JOINCAHTROOM",e.QUIT_CHATROOM="CHATROOM_LEAVECAHTROOM",e.LIST_CHATROOM_MEMBERS="CHATROOM_FETCH_MEMBERS",e.GET_CHATROOM_ADMIN="CHATROOM_GET_ADMIN",e.SET_CHATROOM_ADMIN="CHATROOM_SET_ADMIN",e.REMOVE_CHATROOM_ADMIN="CHATROOM_REMOVE_ADMIN",e.MUTE_CHATROOM_MEMBER="CHATROOM_MUTE_USER",e.REMOVE_MUTE_CHATROOM_MEMBER="CHATROOM_UNMUTE_USER",e.GET_MUTE_CHATROOM_MEMBERS="CHATROOM_FETCH_MUTES",e.SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USER",e.MULTI_SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USERS",e.REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USER",e.MULTI_REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USERS",e.GET_CHATROOM_BLOCK_MEMBERS="CHATROOM_FETCH_BANS",e.DISABLED_CHATROOM_SEND_MSG="CHATROOM_MUTE_ALLMEMEBERS",e.ENABLE_CHATROOM_SEND_MSG="CHATROOM_UNMUTE_ALLMEMEBERS",e.ADD_CHATROOM_WHITE_USERS="CHATROOM_ADD_WHITELIST",e.REMOVE_CHATROOM_WHITE_USERS="CHATROOM_REMOVE_WHITELIST",e.GET_CHATROOM_WHITE_USERS="CHATROOM_FETCH_WHITELIST",e.CHECK_CHATROOM_WHITE_USER="CHATROOM_FETCH_MEMBERIN_WHITELIST",e.GET_CHATROOM_ANN="CHATROOM_FETCH_ANNOUNCEMENT",e.UPDATE_CHATROOM_ANN="CHATROOM_UPDATE_ANNOUNCEMENT",e.DELETE_CHATROOM_FILE="CHATROOM_REMOVE_SHARE_FILE",e.GET_CHATROOM_FILES="CHATROOM_GET_SHARE_FILE_LIST",e.UPLOAD_CHATROOM_FILE="CHATROOM_UPLOAD_FILE",e.SET_CHATROOM_ATTR="CHATROOM_SET_META_DATA",e.DELETE_CHATROOM_ATTR="CHATROOM_DELETE_META_DATA",e.GET_CHATROOM_ATTR="CHATROOM_FETCH_META_DATA",e.CREATE_GROUP="GROUP_CREATEGROUP",e.BLOCK_GROUP="GROUP_BLOCK_MESSAGE",e.LIST_GROUP="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e.GET_USER_GROUP="GROUP_FETCH_USERS_GROUP",e.CHANGE_OWNER="GROUP_CHANGE_OWNER",e.GET_GROUP_INFO="GROUP_FETCH_SPECIFICATION",e.MODIFY_GROUP="GROUP_CHANGE_GROUPATTRIBUTE",e.LIST_GROUP_MEMBER="GROUP_FETCH_MEMEBERS",e.GET_GROUP_ADMIN="GROUP_GET_ADMIN",e.SET_GROUP_ADMIN="GROUP_SET_ADMIN",e.REMOVE_GROUP_ADMIN="GROUP_REMOVE_ADMIN",e.DISSOLVE_GROUP="GROUP_DESTOTYGROUP",e.QUIT_GROUP="GROUP_LEAVEGROUP",e.INVITE_TO_GROUP="GROUP_INVITE_TO_GROUP",e.JOIN_GROUP="GROUP_JOIN_PUBLICGROUP",e.AGREE_JOIN_GROUP="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e.REJECT_JOIN_GROUP="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e.AGREE_INVITE_GROUP="GROUP_ACCEPT_INVITATION",e.REJECT_INVITE_GROUP="GROUP_DECLINE_INVITATION",e.REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBER",e.MULTI_REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBERS",e.MUTE_GROUP_MEMBER="GROUP_MUTE_MEMBERS",e.UNMUTE_GROUP_MEMBER="GROUP_UNMUTE_MEMBERS",e.GET_GROUP_MUTE_LIST="GROUP_FETCH_MUTES",e.BLOCK_GROUP_MEMBER="GROUP_BLOCK_MEMBER",e.BLOCK_GROUP_MEMBERS="GROUP_BLOCK_MEMBERS",e.UNBLOCK_GROUP_MEMBER="GROUP_UNBLOCK_MEMBER",e.UNBLOCK_GROUP_MEMBERS="GROUP_UNBLOCK_MEMBERS",e.GET_GROUP_BLACK_LIST="GROUP_GET_BLOCK_LIST",e.DISABLED_SEND_GROUP_MSG="GROUP_MUTE_ALLMEMBERS",e.ENABLE_SEND_GROUP_MSG="GROUP_UNMUTE_ALLMEMBERS",e.ADD_USERS_TO_GROUP_WHITE="GROUP_ADD_WHITELIST",e.REMOVE_GROUP_WHITE_MEMBER="GROUP_REMOVE_WHITELIST",e.GET_GROUP_WHITE_LIST="GROUP_FETCH_WHITELIST",e.IS_IN_GROUP_WHITE_LIST="GROUP_IS_IN_WHITELIST",e.GET_GROUP_MSG_READ_USER="GROUP_GET_READ_USERS",e.GET_GROUP_ANN="GROUP_FETCH_ANNOUNCEMENT",e.UPDATE_GROUP_ANN="GROUP_UPDATE_ANNOUNCEMENT",e.UPLOAD_GROUP_FILE="GROUP_UPLOAD_SHAREDFILE",e.DELETE_GROUP_FILE="GROUP_DELETE_SHAREDFILE",e.GET_GROUP_FILE_LIST="GROUP_FETCH_SHAREDFILE",e.DOWN_GROUP_FILE="GROUP_DOWNLOAD_SHAREDFILE",e.SET_GROUP_MEMBER_ATTRS="GROUP_MEMBER_SET_META_DATA",e.GET_GROUP_MEMBER_ATTR="GROUP_MEMBER_FETCH_META_DATA",e.GET_SESSION_LIST="REST_GET_SESSION_LIST",e.DELETE_SESSION="REST_DEL_SESSION",e.GET_HISTORY_MSG="REST_GET_HISTORY_MESSAGE",e.PIN_CONVERSATION="REST_PIN_CONVERSATION",e.REST_UPLOAD_FILE_IN_PARTS="REST_UPLOAD_FILE_IN_PARTS",e.REST_DELETE_MESSAGES_CONVERSATIONS="REST_DELETE_MESSAGES_CONVERSATIONS",e.MARK_CONVERSATION="REST_MARK_CONVERSATION",e.REST_FETCH_PINMESSAGES="REST_FETCH_PINMESSAGES",e.REST_PIN_MESSAGE="REST_PIN_MESSAGE",e.UPDATE_USER_INFO="USER_UPDATE_USERINFO",e.GET_USER_INFO="USER_FETCH_USERINFO",e.UPDATE_USER_NICK="USER_UPDATE_NICK",e.UPLOAD_PUSH_TOKEN="USER_UPLOAD_PUSH_TOKEN",e.USER_LOGGEDIN_OTHER_PLATFORM="USER_LOGGEDIN_OTHER_PLATFORM",e.GET_BLACK_LIST="ROSTER_BLACKLIST",e.GET_CONTACTS="ROSTER_CONTACTS",e.ROSTER_GET_ALL_CONTACTS_REMARKS="ROSTER_GET_ALL_CONTACTS_REMARKS",e.ROSTER_GET_ALL_CONTACTS_REMARKS_FROM_SERVER_BY_PAGE="ROSTER_GET_ALL_CONTACTS_REMARKS_FROM_SERVER_BY_PAGE",e.ROSTER_SET_CONTACT_REMARK="ROSTER_SET_CONTACT_REMARK",e.ROSTER_ADD="ROSTER_ADD",e.ROSTER_REMOVE="ROSTER_REMOVE",e.ROSTER_ACCEPT="ROSTER_ACCEPT",e.ROSTER_DECLINE="ROSTER_DECLINE",e.ROSTER_BAN="ROSTER_BAN",e.ROSTER_ALLOW="ROSTER_ALLOW",e.SEND_MSG="MSYNC_SENDMESSAGE",e.UPLOAD_MSG_ATTACH="UPLOAD_MSG_ATTACH",e.SEND_RECALL_MSG="MSYNC_RECALLMESSAGE",e.MODIFY_MESSAGE="MSYNC_MODIFYMESSAGE"}(o||(o={})),function(e){e.GET_DNS="REST_DNSLIST",e.LOGIN_BY_AGORA_TOKEN="LOGIN_BY_AGORA_TOKEN",e.LOGIN_BY_PWD="LOGIN_BY_PWD",e.RESISTER="REGISTER",e.REST_INIT_UPLOAD_TASK_IN_PARTS="REST_INIT_UPLOAD_TASK_IN_PARTS",e.REST_UPLOAD_PART="REST_UPLOAD_PART",e.REST_COMPLETE_UPLOAD_PART="REST_COMPLETE_UPLOAD_PART",e.REST_ABORT_UPLOAD_PART="REST_ABORT_UPLOAD_PART"}(i||(i={})),function(e){e[e["5G"]=7]="5G",e[e["4G"]=7]="4G",e[e["3G"]=7]="3G",e[e["2G"]=7]="2G",e[e["SLOW-2G"]=7]="SLOW-2G",e[e.WIFI=2]="WIFI",e[e.LAN=1]="LAN",e[e.DISCONNECTED=0]="DISCONNECTED",e[e.NONE=0]="NONE",e[e.UNKNOWN=-1]="UNKNOWN",e[e["WEBIM UNABLE TO GET"]=-2]="WEBIM UNABLE TO GET"}(a||(a={})),function(e){e[e.success=200]="success",e[e.failed=500]="failed"}(s||(s={})),function(e){e[e.web=0]="web",e[e.native=1]="native"}(c||(c={}))},8434:function(e,t,r){"use strict";r.d(t,{u:function(){return U},A:function(){return _e}}),r(2675),r(9463),r(2259),r(8706),r(2008),r(1629),r(3418),r(4423),r(5276),r(4346),r(3792),r(2062),r(4782),r(5086),r(4554),r(4743),r(1745),r(8309),r(9089),r(739),r(907),r(4170),r(2010),r(2892),r(5018),r(9085),r(9432),r(6099),r(3362),r(8781),r(1699),r(7764),r(1489),r(1630),r(2170),r(5044),r(1920),r(1694),r(9955),r(3206),r(8345),r(4496),r(6651),r(2887),r(9369),r(6812),r(8995),r(1575),r(6072),r(8747),r(8845),r(9423),r(7301),r(373),r(6614),r(1405),r(3684),r(3500),r(2953),r(6031),r(3296),r(7208),r(8408);var n=r(3887),o=r.n(n),i=r(8570),a=r.n(i),s=r(1531),c=r(8801),u=r(2056),l=["public","members_only","allow_user_invites","invite_need_confirm"],p={name:"name",title:"name",description:"description",public:"public",members_only:"approval",allow_user_invites:"allowInvites",max_users:"maxUsers",invite_need_confirm:"inviteNeedConfirm",custom:"ext",last_modified:"lastModified"};function d(e,t){var r,n,o,i,a,s,c=this,u=this.context,d=u.userId,h=u.jid,f=t.from.name===d&&h.clientResource!==t.from.clientResource;return t.isThread?(o={id:t.mucId.name,name:t.mucName,operation:"",parentId:t.mucParentId.name,operator:t.from.name,userName:t.to.length?t.to[0].name:""},i={chatThreadId:t.mucId.name,chatThreadName:t.mucName,operation:"",parentId:t.mucParentId.name}):(n={type:"",owner:t.from.name,gid:t.mucId.name,from:t.from.name,fromJid:t.from,to:t.to.length?t.to[0].name:"",toJid:t.to,chatroom:t.isChatroom,status:t.status},a={operation:"",id:t.mucId.name,from:t.from.name},t.isChatroom&&(null===(r=null==t?void 0:t.eventInfo)||void 0===r?void 0:r.ext)&&(s=JSON.parse(t.eventInfo.ext))),({45:function(){var e,r,n;a.operation="memberAttributesUpdate";var o=JSON.parse(null===(e=null==t?void 0:t.eventInfo)||void 0===e?void 0:e.ext)||{};a.attributes=o.properties||{},a.userId=o.username||"",f?null===(r=c.eventHandler)||void 0===r||r.dispatch("onMultiDeviceEvent",a):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupEvent",a)},44:function(){var e;a.operation="removeChatRoomAttributes",a.attributes=s.result.successKeys,s.result.successKeys.length>0&&(null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",a))},43:function(){var e;a.operation="updateChatRoomAttributes";var t={};s.result.successKeys.forEach((function(e){t[e]=s.properties[e]})),a.attributes=t,s.result.successKeys.length>0&&(null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",a))},42:function(){},41:function(){},40:function(){},39:function(){},38:function(){var e;i.operation="chatThreadNameUpdate",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",i)},37:function(){var e;o.operation="userRemove",null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatThreadChange",o)},36:function(){var e;i.operation="chatThreadLeave",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",i)},35:function(){var e;i.operation="chatThreadJoin",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",i)},34:function(){var e;i.operation="chatThreadDestroy",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",i)},33:function(){var e;i.operation="chatThreadCreate",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",i)},32:function(){var e,r,o,i;n.type=t.isChatroom?"rmChatRoomMute":"rmGroupMute",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="unmuteAllMembers",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},31:function(){var e,r,o,i;n.type=t.isChatroom?"muteChatRoom":"muteGroup",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="muteAllMembers",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},30:function(){var e,r,o,i;n.type=t.isChatroom?"rmUserFromChatRoomWhiteList":"rmUserFromGroupWhiteList",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="removeAllowlistMember",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},29:function(){var e,r,o,i;n.type=t.isChatroom?"addUserToChatRoomWhiteList":"addUserToGroupWhiteList",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="addUserToAllowlist",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},28:function(){var e,r,o,i;n.type="deleteFile",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="deleteFile",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},27:function(){var e,r,o,i;n.type="uploadFile",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="uploadFile",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},26:function(){var e,r,o,i;n.type="deleteAnnouncement",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="deleteAnnouncement",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},25:function(){var e,r,o,i;n.type="updateAnnouncement",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="updateAnnouncement",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},24:function(){var e,r,o,i;n.type="removeMute",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="unmuteMember",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},23:function(){var e,r,o,i;n.type="addMute",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="muteMember",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},22:function(){var e,r,o,i;n.type="removeAdmin",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="removeAdmin",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},21:function(){var e,r,o,i;n.type="addAdmin",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="setAdmin",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},20:function(){var e,r,o,i;n.type="changeOwner",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="changeOwner",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},19:function(){var e,r,o,i;n.type="direct_joined",n.groupName=t.mucName,c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="directJoined",a.name=t.mucName,t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},18:function(){var e,r,o,i;n.type=t.isChatroom?"leaveChatRoom":"leaveGroup",c.onPresence&&c.onPresence(n);var s=t.mucMemberCount;s&&(a.memberCount=s),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="memberAbsence",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},17:function(){var e,r,o,i;n.type=t.isChatroom?"memberJoinChatRoomSuccess":"memberJoinPublicGroupSuccess",c.onPresence&&c.onPresence(n);var s=t.mucMemberCount;t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="memberPresence",s&&(a.memberCount=s),t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},16:function(){var e,r;n.type="unblock",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n)},15:function(){var e,r;n.type="block",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n)},14:function(){var e,r,o,i,s,u=t.isChatroom;if(!u){var d=JSON.parse((null===(e=null==t?void 0:t.eventInfo)||void 0===e?void 0:e.ext)||"{}",(function(e,t){return"last_modified"===e?Number(t):l.includes(e)?"true"===t||!0===t:t}));a.detail=n.detail={},Object.keys(d).forEach((function(e){var t=p[e];if(t){var r=d[e];a.detail&&(a.detail[t]=r),n.detail&&(n.detail[t]=r)}}))}n.type="update",c.onPresence&&c.onPresence(n),u?null===(r=c.eventHandler)||void 0===r||r.dispatch("onChatroomChange",n):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupChange",n),a.operation="updateInfo",u?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",a):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",a)},13:function(){var e,r,o,i;n.type="allow",n.reason=t.reason,c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="unblockMember",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},12:function(){var e,r;n.type="ban",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n)},11:function(){var e,r;n.type="getBlackList",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n)},10:function(){var e,r,o,i;n.type="removedFromGroup",n.kicked=n.to,c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="removeMember",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},9:function(){var e,r,o,i;n.type="invite_decline",n.kicked=n.to,c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="rejectInvite",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},8:function(){var e,r,o,i;n.type="invite_accept",n.kicked=n.to,c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="acceptInvite",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},7:function(){var e,r,o,i;n.type="invite",n.kicked=n.to,n.groupName=t.mucName,c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="inviteToJoin",a.name=t.mucName,t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},6:function(){var e,r,o,i;n.type="joinPublicGroupDeclined",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="joinPublicGroupDeclined",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):(a.userId=t.to.length?t.to[0].name:"",null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a))},5:function(){var e,r,o,i;n.type="joinPublicGroupSuccess",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="acceptRequest",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},4:function(){var e,r,o,i;n.type="joinGroupNotifications",n.reason=t.reason,c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="requestToJoin",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},3:function(){var e,r;n.type="leave",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n)},2:function(){var e,r;n.type="join",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n)},1:function(){var e,r,o,i;n.type="deleteGroupChat",c.onPresence&&c.onPresence(n),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",n):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupChange",n),a.operation="destroy",t.isChatroom?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",a):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupEvent",a)},0:function(){var e,r;a.operation="create",t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",a):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupEvent",a)}}[e]||function(){console.error("No match operation ".concat(e))})()}var h=function(e){var t=this.root.lookup("easemob.pb.MUCBody").decode(e.payload),r=t.operation;u.vF.debug("onMucMessage",t),d.call(this,r,t)},f={handleRosterMsg:function(e){var t,r,n,o,i,a,s=this.root.lookup("easemob.pb.RosterBody").decode(e.payload),c={type:"",to:s.to[0].name,from:s.from.name,status:s.reason};switch(s.operation){case 2:c.type="subscribe",this.onContactInvited&&this.onContactInvited(c),null===(t=this.eventHandler)||void 0===t||t.dispatch("onContactInvited",c);break;case 3:c.type="unsubscribed",this.onContactDeleted&&this.onContactDeleted(c),null===(r=this.eventHandler)||void 0===r||r.dispatch("onContactDeleted",c);break;case 4:c.type="subscribed",this.onContactAdded&&this.onContactAdded(c),null===(n=this.eventHandler)||void 0===n||n.dispatch("onContactAdded",c);break;case 5:c.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(c),null===(o=this.eventHandler)||void 0===o||o.dispatch("onContactRefuse",c);break;case 6:case 7:break;case 8:c.type="subscribed",this.onContactAgreed&&this.onContactAgreed(c),null===(i=this.eventHandler)||void 0===i||i.dispatch("onContactAgreed",c);break;case 9:c.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(c),null===(a=this.eventHandler)||void 0===a||a.dispatch("onContactRefuse",c);break;default:u.vF.error("handleRosterMsg:",s)}this.onPresence&&c.type&&this.onPresence(c)}},m=r(346),v=function(e){var t,r,n,o,i,a,c=this.root.lookup("easemob.pb.StatisticsBody").decode(e.payload);switch(c.operation){case 0:this.onStatisticMessage&&this.onStatisticMessage(c),null===(t=this.eventHandler)||void 0===t||t.dispatch("onStatisticMessage",c);break;case 1:a=m.A.create({type:s.C.WEBIM_CONNCTION_USER_REMOVED,message:"user has been removed"}),this.logOut=!0,this.onError&&this.onError(a),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",a);break;case 2:a=m.A.create({type:s.C.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE,message:"the user is already logged on another device"}),this.logOut=!0,this.onError&&this.onError(a),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",a);break;case 3:a=m.A.create({type:s.C.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD,message:"the user was kicked by changing password"}),this.logOut=!0,this.onError&&this.onError(a),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",a);break;case 4:a=m.A.create({type:s.C.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE,message:"the user was kicked by other device"}),this.logOut=!0,this.onError&&this.onError(a),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",a);break;default:u.vF.error("handleStatisticsMsg:",c)}},y=(r(5506),r(8678)),g=r(565),_=r(4723);function E(e){var t,r=[],n=[],o=e.data;o&&o.values&&o.values.forEach((function(e){Object.entries(e.status).forEach((function(e){n.push({device:e[0],status:Number(e[1])})})),r.push({userId:e.uid,lastTime:Number(e.last_time),expire:Number(e.expiry),ext:e.ext,statusDetails:n})})),this.onPresenceStatusChange&&this.onPresenceStatusChange(r),null===(t=this.eventHandler)||void 0===t||t.dispatch("onPresenceStatusChange",r)}function T(e){var t=this;e.data.forEach((function(e){var r,n={from:e.from,to:e.to,chatType:"chat"===e.channel_type?"singleChat":"groupChat",messageId:e.messageId,reactions:e.reactions,ts:e.ts};null===(r=t.eventHandler)||void 0===r||r.dispatch("onReactionChange",n)}))}function R(e){var t,r,n,o;if(e.data){var i=e.data,a={id:i.id||"",name:i.name||"",parentId:i.muc_parent_id||"",messageId:i.msg_parent_id||"",timestamp:i.timestamp||0,operator:i.from||"",operation:""};switch(i.operation){case"create":a.operation="create",a.createTimestamp=a.timestamp,a.messageCount=0,null===(t=this.eventHandler)||void 0===t||t.dispatch("onChatThreadChange",a);break;case"update_msg":a.operation="update",a.messageCount=i.message_count,i.last_message&&"{}"!==JSON.stringify(i.last_message)?a.lastMessage=g.h.call(this,i.last_message):"{}"===JSON.stringify(i.last_message)&&(a.lastMessage={}),null===(r=this.eventHandler)||void 0===r||r.dispatch("onChatThreadChange",a);break;case"update":a.operation="update",a.messageCount=i.message_count,null===(n=this.eventHandler)||void 0===n||n.dispatch("onChatThreadChange",a);break;case"delete":a.operation="destroy",null===(o=this.eventHandler)||void 0===o||o.dispatch("onChatThreadChange",a)}}}function O(e){var t,r=e.data;if(r.resource!==this.clientResource){var n={operation:"deleteRoaming",conversationId:r.to,chatType:"chat"===r.chatType?"singleChat":"groupChat",resource:r.resource};null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",n)}}function I(e){var t,r,n=e.data,o="";if(this.clientResource!==n.res){switch(n.op){case"del":o="deleteConversation";break;case"top":o="pinnedConversation";break;case"not_top":o="unpinnedConversation";break;case"mark":o="markConversation";break;case"mark_delete":o="unMarkConversation";break;case"pin":o="pin";break;case"pin_delete":o="unpin";break;default:return void u.vF.error("unexpected conversation op:",n.op)}if("pin"!==o&&"unpin"!==o){var i={operation:o,conversationId:n.id,conversationType:"chat"===n.type?"singleChat":"groupChat",timestamp:n.ts};"markConversation"!==i.operation&&"unMarkConversation"!==i.operation||n.ext&&(i.conversationMark=_.s[n.ext]),null===(r=this.eventHandler)||void 0===r||r.dispatch("onMultiDeviceEvent",i)}else{var a=n.ext,s=n.from,c=n.id,l=n.type,p=n.ts,d={messageId:a||"",conversationId:c,conversationType:g.p[l],operation:o,operatorId:s,time:p};null===(t=this.eventHandler)||void 0===t||t.dispatch("onMessagePinEvent",d)}}}var S=function(e){var t=y.Wp.parseNotify(e.payload);switch(t.type){case"presence":E.call(this,t);break;case"reaction":T.call(this,t);break;case"thread":R.call(this,t);break;case"roaming_delete":O.call(this,t);break;case"conv":I.call(this,t);break;default:u.vF.error("unexpected notify type: ".concat(t.type))}},C=r(8232),A=r(564),b=2,N=r(75),M=r(3893);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}var U,k,P=function(){return P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)},x=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},L=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},D=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.NORMAL=0]="NORMAL",e[e.SINGLECHAT=1]="SINGLECHAT",e[e.GROUPCHAT=2]="GROUPCHAT",e[e.CHATROOM=3]="CHATROOM",e[e.READ_ACK=4]="READ_ACK",e[e.DELIVER_ACK=5]="DELIVER_ACK",e[e.RECALL=6]="RECALL",e[e.CHANNEL_ACK=7]="CHANNEL_ACK",e[e.EDIT=8]="EDIT"}(U||(U={})),function(e){e[e.OK=0]="OK",e[e.FAIL=1]="FAIL",e[e.UNAUTHORIZED=2]="UNAUTHORIZED",e[e.MISSING_PARAMETER=3]="MISSING_PARAMETER",e[e.WRONG_PARAMETER=4]="WRONG_PARAMETER",e[e.REDIRECT=5]="REDIRECT",e[e.TOKEN_EXPIRED=6]="TOKEN_EXPIRED",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.NO_ROUTE=8]="NO_ROUTE",e[e.UNKNOWN_COMMAND=9]="UNKNOWN_COMMAND",e[e.PB_PARSER_ERROR=10]="PB_PARSER_ERROR",e[e.BIND_ANOTHER_DEVICE=11]="BIND_ANOTHER_DEVICE",e[e.IM_FORBIDDEN=12]="IM_FORBIDDEN",e[e.TOO_MANY_DEVICES=13]="TOO_MANY_DEVICES",e[e.PLATFORM_LIMIT=14]="PLATFORM_LIMIT",e[e.USER_MUTED=15]="USER_MUTED",e[e.ENCRYPT_DISABLE=16]="ENCRYPT_DISABLE",e[e.ENCRYPT_ENABLE=17]="ENCRYPT_ENABLE",e[e.DECRYPT_FAILURE=18]="DECRYPT_FAILURE",e[e.PERMISSION_DENIED_EXTERNAL=19]="PERMISSION_DENIED_EXTERNAL"}(k||(k={}));var j=["txt","img","video","audio","file","loc","custom","cmd","combine"],G=y.Wp.getEnvInfo();function B(){var e="webim",t="",r="",n=[],o=(new Date).valueOf();"webim"===this.deviceId?(r="random_"+o.toString(),e=this.deviceId+"_"+r,t=this.deviceId):e=t=r="webim_"+this.deviceId,this.context.jid&&(this.context.jid.clientResource=e);var i=this.root.lookup("easemob.pb.Provision"),a=i.decode(n);a.compressType=this.compressType,a.encryptType=this.encryptType,a.osType=this.osType,a.version=this.version,a.deviceName=t,a.resource=e,a.deviceUuid=r,a.authToken='{"token":"$t$'+this.token+'"}',a.actionVersion="v3.0",a=i.encode(a).finish();var s=this.root.lookup("easemob.pb.MSync"),c=s.decode(n);return c.version=this.version,c.guid=this.context.jid,c.auth="$t$"+this.token,c.command=3,c.deviceId=t,c.serviceId=this.dataReport.getServiceId(),c.encryptType=this.encryptType,c.payload=a,s.encode(c).finish()}function F(e,t){var r=this,n=y.Wp.getEnvInfo();if("web"===n.platform||"zfb"===n.platform||"dd"===n.platform){for(var i="",a=0;a<e.length;a++)i+=String.fromCharCode(e[a]);return i=o().btoa(i),"web"===n.platform?i:{data:i,isBuffer:!1,complete:function(){},fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||(u.vF.debug("send message fail and reconnect"),r.reconnecting||r.reconnect()),t&&r._msgHash&&r._msgHash[t]&&r._msgHash[t].fail({id:t})}}}var s=e;return{data:s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength),fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||r.reconnecting||r.reconnect(),t&&r._msgHash&&r._msgHash[t]&&r._msgHash[t].fail({id:t})}}}function H(e,t){var r;return x(this,void 0,void 0,(function(){var n,o,i,s,l,p;return L(this,(function(d){switch(d.label){case 0:for(n=[],o=function(r){var o=e[r],s=new(a())(o.id.low,o.id.high,o.id.unsigned).toString(),l=o.from.name,p=o.to?o.to.name:"",d=!!o.to&&-1!==o.to.domain.indexOf("conference");if(i._load_msg_cache.some((function(e){return e.msgId===s})))return"continue";switch(i._load_msg_cache.length<=i.max_cache_length||i._load_msg_cache.shift(),i._load_msg_cache.push({msgId:s,from:l,to:p,isGroup:d}),o.ns){case 0:v.call(i,o);break;case 1:n.push(c.A.call(i,o,t,!1,!0));break;case 2:h.call(i,o);break;case 3:f.handleRosterMsg.call(i,o);break;case 4:i.registerConfrIQHandler&&i.registerConfrIQHandler(o,t,i);break;case 5:S.call(i,o);break;default:u.vF.error("distributeMeta",o)}},i=this,s=0;s<e.length;s++)o(s);return[4,Promise.all(n)];case 1:return l=d.sent(),(p=l.filter((function(e){return e&&"cmd"!==e.type}))).length>0&&(null===(r=this.eventHandler)||void 0===r||r.dispatch("onMessage",p)),[2]}}))}))}function W(e,t){H.call(this,e,t)}function z(e){var t=this.root.lookup("easemob.pb.CommUnreadDL");t=t.decode(e.payload);var r=new(a())(t.timestamp.low,t.timestamp.high,t.timestamp.unsigned).toString();if(this.expirationTime&&this.compareTokenExpireTime(Number(r),this.expirationTime),0===t.unread.length)Z.call(this);else{u.vF.debug("pull unread message",t.unread);for(var n=0;n<t.unread.length;n++){var o=oe(this._queues,t.unread[n].queue),i=oe(this.unSyncQueue,t.unread[n].queue);o||i||this.unSyncQueue.push(t.unread[n].queue)}for(n=0;n<this.unSyncQueue.length;n++)this.unSyncQueue[n].hasSync||V.call(this,this.unSyncQueue[n]),this.unSyncQueue[n].hasSync=!0}Z.call(this)}function q(){var e=[],t=this.root.lookup("easemob.pb.StatisticsBody"),r=t.decode(e);r.operation=0,r=t.encode(r).finish();var n=this.root.lookup("easemob.pb.Meta").decode(e);n.id=(new Date).valueOf(),n.ns=0,n.payload=r;var o=this.root.lookup("easemob.pb.CommSyncUL"),i=o.decode(e);i.meta=n,i=o.encode(i).finish();var a=this.root.lookup("easemob.pb.MSync"),s=a.decode(e);return s.version=this.version,s.encryptType=[0],s.command=0,s.payload=i,a.encode(s).finish()}function K(e){var t=[],r=this.root.lookup("easemob.pb.CommSyncUL"),n=r.decode(t);n.queue=e,n=r.encode(n).finish();var o=this.root.lookup("easemob.pb.MSync"),i=o.decode(t);return i.version=this.version,i.encryptType=this.encryptType,i.command=0,i.payload=n,o.encode(i).finish()}function V(e){u.vF.debug("sendBackqueue");var t=K.call(this,e);ge.call(this,t)}function J(e,t){var r=[],n=this.root.lookup("easemob.pb.CommSyncUL"),o=n.decode(r);o.queue=t,o.key=new(a())(e.low,e.high,e.unsigned).toString(),o=n.encode(o).finish();var i=this.root.lookup("easemob.pb.MSync"),s=i.decode(r);return s.version=this.version,s.encryptType=this.encryptType,s.command=0,s.payload=o,i.encode(s).finish()}function X(){var e;this.times=1,this.autoReconnectNumTotal=0,this.onOpened&&this.onOpened(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onConnected"),$.call(this),te.call(this),ee.call(this),Z.call(this)}function Y(e,t){u.vF.debug("sendLastSession",e);var r=J.call(this,e,t);ge.call(this,r)}function Q(e){var t,r,n,o,i,a,c,l=this,p=this.root.lookup("easemob.pb.Provision").decode(e.payload);if(this.context.jid&&(this.context.jid.clientResource=p.resource),this.clientResource=p.resource,p.status.errorCode===k.OK){if(p.authToken){var d=JSON.parse(p.authToken).expires_in;if(!this.tokenExpiredTimer&&!this.tokenWillExpireTimer){var h=Date.now();this.expirationTime=d;var f=this.expirationTime-h;this.expiresIn=f<0?0:f,this.tokenExpireTimeCountDown(this.expiresIn)}}this.reconnecting=!1,this.logOut=!1,"zfb"!==G.platform&&"dd"!==G.platform||(this.sock.readyState=1),this._localCache?(null===(t=this._localCache)||void 0===t?void 0:t.getInstance())?X.call(this):this._localCache&&new this._localCache({user:this.user,dbName:"cache_".concat(Math.abs((0,A.s5)(this.appKey)),"_").concat(this.user),version:b,onInit:function(){return x(l,void 0,void 0,(function(){return L(this,(function(e){return u.vF.debug("localCache init success"),X.call(this),[2]}))}))}}):X.call(this)}else{var v=void 0,y=p.status,g=y.reason,_=y.errorCode;switch(u.vF.debug("provision errorCode: ",_),u.vF.debug("provision reason: ",g),_){case k.FAIL:v="Sorry, user register limit"===g?m.A.create({type:s.C.MAX_LIMIT,message:"Sorry, the number of user registrations limit has been reached"}):"Sorry, user register rate limit"===g?m.A.create({type:s.C.MAX_LIMIT,message:"Sorry, user register rate limit"}):"Sorry, token expired"===g?m.A.create({type:s.C.WEBIM_TOKEN_EXPIRED,message:"Sorry, token expired"}):"Sorry, token or password does not match login info"===g?m.A.create({type:s.C.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"INVALID_TOKEN"}):"Sorry, user not found"===g?m.A.create({type:s.C.USER_NOT_FOUND,message:"User not found"}):m.A.create({type:s.C.WEBIM_CONNCTION_AUTH_ERROR,message:"Auth failed"}),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",v);break;case k.WRONG_PARAMETER:v=m.A.create({type:s.C.REQUEST_PARAMETER_ERROR,message:"Invalid parameter"}),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",v);break;case k.UNAUTHORIZED:v=m.A.create({type:s.C.WEBIM_CONNCTION_AUTH_ERROR,message:"Auth failed"}),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",v);break;case k.IM_FORBIDDEN:v=m.A.create({type:s.C.WEBIM_SERVER_SERVING_DISABLED,message:"Server serving disabled."}),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",v);break;case k.PERMISSION_DENIED:v="Sorry, the app month live count limit"===g?m.A.create({type:s.C.MAX_LIMIT,message:"Sorry, the monthly active user limit for this app has been reached"}):"Sorry, the app day live count limit"===g?m.A.create({type:s.C.MAX_LIMIT,message:"Sorry, the daily active user limit for this app has been reached"}):"Sorry, the app online count limit"===g?m.A.create({type:s.C.MAX_LIMIT,message:"Sorry, the maximum number limit of online users for this app has been reached"}):m.A.create({type:s.C.WEBIM_CONNCTION_AUTH_ERROR,message:"Auth failed"}),null===(a=this.eventHandler)||void 0===a||a.dispatch("onError",v);break;default:v=m.A.create({type:s.C.WEBIM_CONNCTION_AUTH_ERROR,message:g}),null===(c=this.eventHandler)||void 0===c||c.dispatch("onError",v)}}}function $(){var e,t;if((null===(e=this.unMSyncSendMsgMap)||void 0===e?void 0:e.size)>0){for(var r=Array.from(this.unMSyncSendMsgMap.keys()),n=0;n<r.length;n++){var o=this.unMSyncSendMsgMap.get(r[n]);ge.call(this,o,r[n])}null===(t=this.unMSyncSendMsgMap)||void 0===t||t.clear()}}function Z(){var e=q.call(this);ge.call(this,e)}function ee(){u.vF.debug("sendUnreadDeal");var e=ne.call(this);ge.call(this,e)}function te(){var e=this;re.call(this),this.heartBeatID=setInterval((function(){(Date.now()-e.lastHeartbeat)/1e3>=30&&(u.vF.debug("send heart beat"),ee.call(e),e.lastHeartbeat=Date.now())}),this.heartBeatWait)}function re(){clearInterval(this.heartBeatID)}function ne(){var e=this.root.lookup("easemob.pb.MSync"),t=e.decode([]);return t.version=this.version,t.encryptType=this.encryptType,t.command=1,e.encode(t).finish()}function oe(e,t){return e.some((function(e){return e.name===t.name}))}function ie(e){var t=this.root.lookup("easemob.pb.CommNotice"),r=t.decode(e.payload),n=oe(this._queues,r.queue);u.vF.debug("receive notice",t,this._queues);var o=oe(this.unSyncQueue,r.queue);n||o||this.clientResource===r.queue.clientResource&&r.queue.name===this.context.userId||(this._queues.push(r.queue),1===this._queues.length&&V.call(this,r.queue))}function ae(e){if("string"==typeof e){var t=JSON.parse(e);if(Array.isArray(t)){var r=t[0],n=t[1];this.closeInfo={code:r,reason:n}}}}function se(e){return x(this,void 0,void 0,(function(){var t,r,n,i,a,s,c,l;return L(this,(function(p){if(t=y.Wp.getEnvInfo(),r=this.root.lookup("easemob.pb.MSync"),"miniCore"===this.name){try{e.data instanceof ArrayBuffer||(u.vF.debug("received message: ".concat(e.data)),ae.call(this,e.data)),i=new Uint8Array(e.data),n=r.decode(i)}catch(e){throw new Error("decode message fail.")}return[2,n]}if("web"===t.platform||"zfb"===t.platform||"dd"===t.platform){for('[401,"normal closed"]'===e.data&&(u.vF.debug("received message: ".concat(e.data)),ae.call(this,e.data)),a=o().atob(e.data),s=[],c=0,l=a.length;c<l;++c)s.push(a.charCodeAt(c));return[2,r.decode(s)]}try{e.data instanceof ArrayBuffer||(u.vF.debug("received message: ".concat(e.data)),ae.call(this,e.data)),n=r.decode(e.data)}catch(e){throw new Error("decode message fail.")}return[2,n]}))}))}function ce(e){var t=this;this.lastHeartbeat=Date.now(),e.then((function(e){if(e)switch(e.command){case 0:ue.call(t,e);break;case 1:z.call(t,e);break;case 2:ie.call(t,e);break;case 3:Q.call(t,e);break;default:u.vF.error("unexpected msync command: ".concat(e.command))}else u.vF.error("unexpected msync result: ".concat(e))}))}function ue(e){var t,r,n,o,i,l,p,d,h,f,v,g,_,E,T,R,O,I,S,A,b,w,U,k,D,j,G,B,F,H,z,q,K,J,X,Q,$,Z,ee,te,re,ne,oe,ie,ae;return x(this,void 0,void 0,(function(){var x,se,ce,ue,le,pe,de,he,fe,me,ve,ye,ge,_e,Ee,Te,Re,Oe,Ie,Se,Ce,Ae,be,Ne,Me,we,Ue,ke,Pe,xe,Le,De,je,Ge,Be,Fe,He,We=this;return L(this,(function(L){switch(L.label){case 0:if(x=(x=this.root.lookup("easemob.pb.CommSyncDL")).decode(e.payload),se=new(a())(x.serverId.low,x.serverId.high,x.serverId.unsigned).toString(),ce=new(a())(x.metaId.low,x.metaId.high,x.metaId.unsigned).toString(),!(Number(ce)>0))return[3,23];if(!x.status)return[3,22];if(0!==x.status.errorCode)return[3,21];if(null==(ue=this._msgHash[ce])?void 0:ue.isHandleChatroom){try{le="join"===(null===(t=this._msgHash[ce])||void 0===t?void 0:t.operation),(null===(r=this._msgHash[ce])||void 0===r?void 0:r.resolve)instanceof Function&&le&&this._msgHash[ce].resolve({type:0,data:{action:"apply",id:this._msgHash[ce].roomId,result:!0,user:this.context.userId}}),(null===(n=this._msgHash[ce])||void 0===n?void 0:n.success)instanceof Function&&le&&this._msgHash[ce].success({type:0,data:{action:"apply",id:this._msgHash[ce].roomId,result:!0,user:this.context.userId}}),(null===(o=this._msgHash[ce])||void 0===o?void 0:o.resolve)instanceof Function&&!le&&this._msgHash[ce].resolve({type:0,data:{result:!0}}),(null===(i=this._msgHash[ce])||void 0===i?void 0:i.success)instanceof Function&&!le&&this._msgHash[ce].success({type:0,data:{result:!0}})}catch(e){De=m.A.create({type:s.C.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:e}),this.onError&&this.onError(De),null===(l=this.eventHandler)||void 0===l||l.dispatch("onError",De)}delete this._msgHash[ce]}return!ue||ue.isHandleChatroom?[3,20]:(pe=null,de="",he=0,fe=null,this._msgHash[ce].thirdMessage?(this._msgHash[ce].thirdMessage.id=x.serverId,this._msgHash[ce].thirdMessage.timestamp=x.timestamp,[4,c.A.call(this,this._msgHash[ce].thirdMessage,x.status,!0,!0)]):[3,2]);case 1:fe=L.sent(),L.label=2;case 2:if(0===x.metas.length)return[3,13];L.label=3;case 3:switch(L.trys.push([3,12,,13]),me=x.metas[0],ve=x.status,me.ns){case 1:return[3,4];case 5:return[3,9]}return[3,10];case 4:return this.useReplacedMessageContents?[4,c.A.call(this,me,ve,!0,!0)]:[3,8];case 5:return fe=L.sent(),[4,null===(d=null===(p=this._localCache)||void 0===p?void 0:p.getInstance())||void 0===d?void 0:d.getMessageByServerMsgId(ce)];case 6:return(ye=L.sent())?[4,null===(f=null===(h=this._localCache)||void 0===h?void 0:h.getInstance())||void 0===f?void 0:f.putMessageToDB(P(P(P({},ye),fe),{id:ce}))]:[3,8];case 7:L.sent(),L.label=8;case 8:return[3,11];case 9:return(ge=y.Wp.parseNotify(x.metas[0].payload)).edit_msg&&(_e=ge.edit_msg,Ee=_e.count,Te=_e.operator,Re=_e.edit_time,Oe=_e.sender,Ie=_e.send_time,pe={operationTime:Re,operatorId:Te,operationCount:Ee},de=Oe,he=Number(Ie)),[3,11];case 10:return u.vF.error("decode local meta error",me),[3,11];case 11:return[3,13];case 12:return Se=L.sent(),De=m.A.create({type:s.C.WEBIM_LOAD_MSG_ERROR,message:"decode local meta message error",data:Se}),this.onError&&this.onError(De),null===(v=this.eventHandler)||void 0===v||v.dispatch("onError",De),[3,13];case 13:N.nf.has(ce)&&(N.nf.get(ce).rpt({isEndApi:!0,data:{isSuccess:1,requestMethod:"WEBSOCKET",requestUrl:this.url,code:M.G8.success,msgId:se}}),N.nf.delete(ce)),L.label=14;case 14:return L.trys.push([14,18,,19]),Ce={localMsgId:ce,serverMsgId:se},pe&&(this._msgHash[ce].modifiedInfo=pe,Ae=this._msgHash[ce],be=Ae.editMessageId,xe=Ae.type,Ne=Ae.chatType,Me=Ae.msg,we=Ae.to,Ue=Ae.translations,ke={id:be,type:xe,chatType:Ne,msg:Me,modifiedInfo:pe,to:we,from:de,time:Number(he)},Ue&&(ke.translations=Ue),Ce.message=ke,null===(E=null===(_=null===(g=this._localCache)||void 0===g?void 0:g.getInstance())||void 0===_?void 0:_.getMessageByServerMsgId(be))||void 0===E||E.then((function(e){var t,r;e&&"txt"===e.type&&(null===(r=null===(t=We._localCache)||void 0===t?void 0:t.getInstance())||void 0===r||r.putMessageToDB(P(P({},e),{msg:ke.msg,modifiedInfo:ke.modifiedInfo,translations:ke.translations})))}))),fe&&(Ce.message=fe),[4,null===(R=null===(T=this._localCache)||void 0===T?void 0:T.getInstance())||void 0===R?void 0:R.updateLocalMessage(ce,{serverMsgId:se,status:C.q.SUCCESS})];case 15:return L.sent(),(null===(O=this._msgHash[ce])||void 0===O?void 0:O.success)instanceof Function?[4,this._msgHash[ce].success(ce,se)]:[3,17];case 16:L.sent(),L.label=17;case 17:return(null===(I=this._msgHash[ce])||void 0===I?void 0:I.resolve)instanceof Function&&this._msgHash[ce].resolve(Ce),[3,19];case 18:return Pe=L.sent(),De=m.A.create({type:s.C.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:Pe}),this.onError&&this.onError(De),null===(S=this.eventHandler)||void 0===S||S.dispatch("onError",De),[3,19];case 19:this.onReceivedMessage&&this.onReceivedMessage({id:ce,mid:se,to:this._msgHash[ce].to,time:0}),null===(A=this.eventHandler)||void 0===A||A.dispatch("onReceivedMessage",{id:ce,mid:se,to:this._msgHash[ce].to}),delete this._msgHash[ce],L.label=20;case 20:return[3,22];case 21:if(15===x.status.errorCode)(null===(b=this._msgHash[ce])||void 0===b?void 0:b.fail)instanceof Function&&this._msgHash[ce].fail({type:s.C.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject({type:s.C.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),null===(U=null===(w=this._localCache)||void 0===w?void 0:w.getInstance())||void 0===U||U.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL});else if(1===x.status.errorCode){switch(xe=void 0,x.status.reason){case"blocked":xe=s.C.PERMISSION_DENIED;break;case"group not found":xe=s.C.GROUP_NOT_EXIST;break;case"not in group or chatroom":xe=s.C.GROUP_NOT_JOINED;break;case"exceed recall time limit":xe=s.C.MESSAGE_RECALL_TIME_LIMIT;break;case"message recall disabled":xe=s.C.SERVICE_NOT_ENABLED;break;case"not in group or chatroom white list":xe=s.C.SERVICE_NOT_ALLOW_MESSAGING;break;case"nonroster":xe=s.C.USER_NOT_FRIEND,x.status.reason="not contact";break;case"group is disabled":xe=s.C.GROUP_IS_DISABLED,x.status.reason="group is disabled";break;case"limit directed users":xe=s.C.MAX_LIMIT;break;case"Sorry, edit limit reached":xe=s.C.MAX_LIMIT,x.status.reason="Modify message limit reached";break;case"Sorry, message does not exist":xe=s.C.MODIFY_MESSAGE_NOT_EXIST,x.status.reason="The message does not exist.";break;case"Sorry, You do not have permission":xe=s.C.PERMISSION_DENIED,x.status.reason="You do not have the modified permission.";break;case"Sorry, format is incorrect":xe=s.C.MODIFY_MESSAGE_FORMAT_ERROR,x.status.reason="The modify messaged format error.";break;case"Sorry, edit is not available":xe=s.C.SERVICE_NOT_ENABLED,x.status.reason="The message modify function is not activated.";break;case"Sorry, edit fail":xe=s.C.MODIFY_MESSAGE_FAILED,x.status.reason="Modify message failed.";break;default:x.status.reason.includes("grpID")&&x.status.reason.includes("does not exist!")?(xe=s.C.CHATROOM_NOT_EXIST,x.status.reason="The chat room dose not exist."):x.status.reason.includes("username")&&x.status.reason.includes("doesn't exist!")?xe=s.C.USER_NOT_FOUND:"group member list is full!"===x.status.reason?xe=s.C.CHATROOM_MEMBERS_FULL:x.status.reason.includes("can not join this group")&&x.status.reason.includes("is in the blacklist")?(xe=s.C.PERMISSION_DENIED,x.status.reason="permission denied"):"can not operate this group, reason: group is disabled"===x.status.reason?xe=s.C.GROUP_IS_DISABLED:x.status.reason.includes("moderation")?xe=s.C.MESSAGE_MODERATION_BLOCKED:x.status.reason.includes("group ID illegal, please check it")?(xe=s.C.REQUEST_PARAMETER_ERROR,x.status.reason="Invalid parameter"):xe=x.status.reason.includes("has create too many chatrooms")||x.status.reason.includes("has joined too many chatrooms")?s.C.MAX_LIMIT:x.status.reason.includes("auto create failed")?s.C.SERVER_BUSY:s.C.SERVER_UNKNOWN_ERROR}this._msgHash[ce]&&((null===(k=this._msgHash[ce])||void 0===k?void 0:k.isHandleChatroom)?(Le=m.A.create({type:xe,message:x.status.reason||"",data:""}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),this._msgHash[ce].error instanceof Function&&this._msgHash[ce].error(Le)):(Le=m.A.create({type:xe,message:x.status.reason||"",data:{id:ce,mid:se}}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),this._msgHash[ce].fail instanceof Function&&this._msgHash[ce].fail({type:xe,reason:x.status.reason?x.status.reason:"",data:{id:ce,mid:se}}),null===(j=null===(D=this._localCache)||void 0===D?void 0:D.getInstance())||void 0===j||j.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL})),delete this._msgHash[ce])}else if(7===x.status.errorCode)"sensitive words"===x.status.reason&&this._msgHash[ce]?(Le=m.A.create({type:s.C.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"sensitive words",data:{id:ce,mid:se}}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),this._msgHash[ce].fail instanceof Function&&this._msgHash[ce].fail({type:s.C.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:ce,mid:se,reason:"sensitive words"}}),null===(B=null===(G=this._localCache)||void 0===G?void 0:G.getInstance())||void 0===B||B.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL})):"blocked by mod_antispam"===x.status.reason&&this._msgHash[ce]?(Le=m.A.create({type:s.C.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"blocked by mod_antispam",data:{id:ce,mid:se}}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),this._msgHash[ce].fail instanceof Function&&this._msgHash[ce].fail({type:s.C.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:ce,mid:se,reason:"blocked by mod_antispam"}}),null===(H=null===(F=this._localCache)||void 0===F?void 0:F.getInstance())||void 0===H||H.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL})):"user is mute"===x.status.reason&&this._msgHash[ce]?(Le=m.A.create({type:s.C.USER_MUTED_BY_ADMIN,message:"user is mute",data:{id:ce,mid:se}}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),this._msgHash[ce].fail instanceof Function&&this._msgHash[ce].fail(Le),null===(q=null===(z=this._localCache)||void 0===z?void 0:z.getInstance())||void 0===q||q.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL})):"traffic limit"===x.status.reason&&this._msgHash[ce]?(Le=m.A.create({type:s.C.MESSAGE_CURRENT_LIMITING,message:"traffic limit",data:{id:ce,mid:se}}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),this._msgHash[ce].fail instanceof Function&&this._msgHash[ce].fail(Le),null===(J=null===(K=this._localCache)||void 0===K?void 0:K.getInstance())||void 0===J||J.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL})):"Sorry, data is too large"===x.status.reason&&this._msgHash[ce]&&(Le=m.A.create({type:s.C.MESSAGE_SIZE_LIMIT,message:"Sorry, data is too large",data:{id:ce,mid:se}}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),this._msgHash[ce].fail instanceof Function&&this._msgHash[ce].fail(Le),null===(Q=null===(X=this._localCache)||void 0===X?void 0:X.getInstance())||void 0===Q||Q.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL}));else if(19===x.status.errorCode)this._msgHash[ce]&&(N.nf.has(ce)&&(N.nf.get(ce).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:s.C.MESSAGE_EXTERNAL_LOGIC_BLOCKED,codeDesc:x.status.reason||"",msgId:se}}),N.nf.delete(ce)),Le=m.A.create({type:s.C.MESSAGE_EXTERNAL_LOGIC_BLOCKED,message:x.status.reason||"",data:{id:ce,mid:se}}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),this._msgHash[ce].fail instanceof Function&&this._msgHash[ce].fail({type:s.C.MESSAGE_EXTERNAL_LOGIC_BLOCKED,data:{id:ce,mid:se,reason:x.status.reason}}),null===(Z=null===($=this._localCache)||void 0===$?void 0:$.getInstance())||void 0===Z||Z.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL}));else if(this._msgHash[ce]){N.nf.has(ce)&&(N.nf.get(ce).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:s.C.WEBIM_LOAD_MSG_ERROR,codeDesc:(null===(ee=x.status)||void 0===ee?void 0:ee.reason)||"",msgId:se}}),N.nf.delete(ce));try{Le=m.A.create({type:s.C.WEBIM_LOAD_MSG_ERROR,message:(null===(te=x.status)||void 0===te?void 0:te.reason)||"",data:{id:ce,mid:se,reason:x.status&&x.status.reason}}),this._msgHash[ce].reject instanceof Function&&this._msgHash[ce].reject(Le),null===(ne=null===(re=this._localCache)||void 0===re?void 0:re.getInstance())||void 0===ne||ne.updateLocalMessage(ce,{serverMsgId:se,status:C.q.FAIL}),this._msgHash[ce].fail instanceof Function&&this._msgHash[ce].fail({type:s.C.WEBIM_LOAD_MSG_ERROR,data:{errorCode:x.status&&x.status.errorCode,reason:x.status&&x.status.reason}})}catch(e){De=m.A.create({type:s.C.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing fail function error",data:e}),this.onError&&this.onError(De),null===(oe=this.eventHandler)||void 0===oe||oe.dispatch("onError",De)}delete this._msgHash[ce]}else N.nf.has(ce)&&(N.nf.get(ce).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:s.C.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,codeDesc:"on message error",msgId:se}}),N.nf.delete(ce)),De=m.A.create({type:s.C.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"on message error"}),this.onError&&this.onError(De),null===(ie=this.eventHandler)||void 0===ie||ie.dispatch("onError",De);L.label=22;case 22:return[2];case 23:if(x.metas&&0!==x.metas.length)try{W.call(this,x.metas,x.status)}catch(e){De=m.A.create({type:s.C.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e}),this.onError&&this.onError(De),null===(ae=this.eventHandler)||void 0===ae||ae.dispatch("onError",De)}finally{x.isLast?(je=-1,this._queues.some((function(e,t){return e.name===x.name&&(je=t,!0)}))&&je>0&&this._queues.splice(je,1),this._queues.length>0&&V.call(this,this._queues[0]),Ge=-1,this.unSyncQueue.some((function(e,t){return e.name===x.queue.name&&(Ge=t,!0)}))&&this.unSyncQueue.splice(Ge,1)):x.nextKey&&(Be=new(a())(x.nextKey.low,x.nextKey.high,x.nextKey.unsigned).toString(),u.vF.debug("nexKey",Be),Be!==this.nexKey&&(this.nexKey=Be,Y.call(this,x.nextKey,x.queue)))}else x.isLast&&(Fe=-1,this._queues.some((function(e,t){return e.name===x.queue.name&&(Fe=t,!0)}))&&this._queues.splice(Fe,1),this._queues.length>0&&V.call(this,this._queues[0]),He=-1,this.unSyncQueue.some((function(e,t){return e.name===x.queue.name&&(He=t,!0)}))&&this.unSyncQueue.splice(He,1));return[2]}}))}))}function le(e){var t=[],r=this.root.lookup("easemob.pb.KeyValue"),n=[];for(var o in e){var i=r.decode(t);i.key=o,void 0!==e[o]&&("object"===w(e[o])?(i.type=8,i.stringValue=JSON.stringify(e[o])):"string"==typeof e[o]?(i.type=7,i.stringValue=e[o]):"boolean"==typeof e[o]?(i.type=1,i.varintValue=!0===e[o]?1:0):Number.isInteger(e[o])?(i.type=2,i.varintValue=e[o]):(i.type=6,i.doubleValue=e[o]),n.push(i))}return n}function pe(e){var t,r,n,o=[];if(this.root){var i,c=this.root.lookup("easemob.pb.MessageBody.Content").decode(o);switch(i=!e.group&&"groupchat"!==(null===(t=null==e?void 0:e.chatType)||void 0===t?void 0:t.toLowerCase())||e.roomType?e.group&&e.roomType||"chatroom"===(null===(r=null==e?void 0:e.chatType)||void 0===r?void 0:r.toLowerCase())?"chatRoom":"singleChat":"groupChat",e.type){case"txt":c.type=0,c.text=e.msg;break;case"img":c.type=1,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.size=e.body.size,c.thumbnailDisplayName=e.body.filename):e.file?(c.displayName=e.file.filename,c.remotePath=e.file.url,c.secretKey=e.file.secret,c.fileLength=e.file.file_length,c.size=e.file.size,c.thumbnailDisplayName=e.file.filename):(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.size=e.size,c.thumbnailDisplayName=e.filename),e.isBuildCombinedMsg&&(c.remotePath=e.url,c.secretKey=e.secret,c.size={height:e.height,width:e.width});break;case"video":c.type=2,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.duration=e.body.length,c.thumbnailDisplayName=e.body.filename,c.thumbnailRemotePath=this.useOwnUploadFun?"":"".concat(e.body.url,"?vframe=true"),c.thumbnailSecretKey=this.useOwnUploadFun?"":e.body.secret):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.duration=e.length,c.thumbnailDisplayName=e.filename,c.thumbnailRemotePath=e.thumb,c.thumbnailSecretKey=e.thumb_secret);break;case"loc":c.type=3,c.latitude=e.lat,c.longitude=e.lng,c.address=e.addr,c.buildingName=e.buildingName,c.latitude=e.lat;break;case"audio":c.type=4,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.duration=e.body.length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.duration=e.length,c.thumbnailDisplayName=e.filename);break;case"file":c.type=5,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.thumbnailDisplayName=e.filename);break;case"cmd":c.type=6,c.action=e.action;break;case"custom":c.type=7,c.customEvent=e.customEvent,c.customExts=le.call(this,e.customExts);break;case"combine":c.type=0,c.subType=0,c.text=e.compatibleText,c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.title=e.title,c.summary=e.summary,c.combineLevel=e.combineLevel}var u=[];e.ext&&(u=le.call(this,e.ext));var l=this.root.lookup("easemob.pb.MessageBody"),p=l.decode(o),d=e.from||this.context.jid.name;p.from={name:e.isBuildCombinedMsg?d:this.context.jid.name};var h=e.to.indexOf("/"),f=h>-1?e.to.substring(0,h):e.to;p.to={name:f},"channel"===e.type?p.type=U.CHANNEL_ACK:"recall"===e.type?(p.type=U.RECALL,p.ackMessageId=e.ackId):"delivery"===e.type?(p.type=U.DELIVER_ACK,p.ackMessageId=e.ackId):"read"===e.type?(p.type=U.READ_ACK,p.ackMessageId=e.ackId,"groupChat"===i&&(p.msgConfig={allowGroupAck:!0},p.ackContent=e.ackContent)):"chatRoom"===i?p.type=U.CHATROOM:"groupChat"===i?(p.type=U.GROUPCHAT,e.msgConfig&&(p.msgConfig={allowGroupAck:!0})):"singleChat"===i&&(p.type=U.SINGLECHAT),e.editMessageId&&(p.type=U.EDIT,p.editMessageId=e.editMessageId),p.contents=[c],p.ext=u;var m=function(e){var t={};return"translations"in e&&(t.translations=e.translations),"isChatThread"in e&&e.isChatThread&&(t.thread={}),Object.keys(t).length>0?JSON.stringify(t):""}(e);m&&(p.meta=m),p=l.encode(p).finish();var v=this.root.lookup("easemob.pb.Meta"),y=v.decode(o);y.id=e.id;var g="easemob.com";if("chatRoom"!==i&&"groupChat"!==i||(g="conference.easemob.com"),y.to={appKey:this.appKey,name:f,domain:g},h>-1&&(y.to.clientResource=e.to.substring(h+1,e.to.length)),"chatRoom"===i&&(y.ext=le.call(this,function(e){return{chatroom_msg_tag:"high"===e.priority?0:"low"===e.priority?2:1}}(e))),y.ns=1,y.payload=p,y.routetype=e.deliverOnlineOnly?1:0,"singleChat"!==i&&Array.isArray(e.receiverList)&&(null===(n=e.receiverList)||void 0===n?void 0:n.length)>0&&(y.directedUsers=e.receiverList,y.routetype=2),e.isBuildCombinedMsg)return y.timestamp=a().fromValue(e.time),v.encode(y).finish();var _=this.root.lookup("easemob.pb.CommSyncUL"),E=_.decode(o);E.meta=y,he.call(this,e,y),E=_.encode(E).finish();var T=this.root.lookup("easemob.pb.MSync"),R=T.decode(o);return R.version=this.version,R.encryptType=this.encryptType,R.command=0,R.payload=E,T.encode(R).finish()}e.fail&&e.fail({type:s.C.WEBIM_CONNCTION_CLIENT_OFFLINE,message:"Not logged in"})}function de(e){var t,r,n=this,o=P({},e);if(e.file)return o.accessToken=this.token,o.appKey=this.appKey,o.apiUrl=this.apiUrl,o.body&&o.body.url?pe.call(this,o):new Promise((function(t,r){var i=o.onFileUploadComplete;o.onFileUploadComplete=function(t){var r,a,s,c,u,l;if(t.entities[0]["file-metadata"]){var p=t.entities[0]["file-metadata"]["content-length"];o.file_length=p,o.filetype=t.entities[0]["file-metadata"]["content-type"],p>204800&&(o.thumbnail=!0)}var d="".concat(n.apiUrl,"/").concat(n.orgName,"/").concat(n.appName,"/chatfiles/").concat(t.entities[0].uuid);o.body={type:o.type||"file",secret:t.entities[0]["share-secret"],filename:o.file.filename||o.filename,url:d,length:o.length||0,filetype:o.filetype||o.file.filetype,file_length:(null===(a=null===(r=o.file)||void 0===r?void 0:r.data)||void 0===a?void 0:a.size)||0,size:{width:o.width||0,height:o.height||0}},o.file.url=t.uri,e.secret=t.entities[0]["share-secret"],t.url=e.url="".concat(d,"?em-redirect=true&share-secret=").concat(t.entities[0]["share-secret"]),e.file_length=o.file_length=(null===(c=null===(s=o.file)||void 0===s?void 0:s.data)||void 0===c?void 0:c.size)||0,"img"===o.type&&(e.thumb="".concat(e.url,"&thumbnail=true"),t.thumb="".concat(t.url,"&thumbnail=true")),"video"===o.type&&(e.thumb="".concat(e.url,"&vframe=true"),e.thumb_secret=t.entities[0]["share-secret"],t.thumb="".concat(t.url,"&vframe=true")),i instanceof Function&&i(t,o.id);var h=pe.call(n,o);N.nf.size<=N.Po&&N.nf.set(o.id,{rpt:n.dataReport.geOperateFun({operationName:M.jz.SEND_MSG})}),null===(l=null===(u=n._localCache)||void 0===u?void 0:u.getInstance())||void 0===l||l.storeMessage(e,C.q.INPROGRESS),ge.call(n,h)},y.Wp.uploadFile.call(n,o,M.jz.UPLOAD_MSG_ATTACH)}));if("combine"===e.type){o.accessToken=this.token,o.appKey=this.appKey,o.apiUrl=this.apiUrl;var i=o.onFileUploadComplete,a=o.onFileUploadError;return new Promise((function(t,r){var c,l,p,d;if((null===(c=e.messageList)||void 0===c?void 0:c.length)>300||0===(null===(l=e.messageList)||void 0===l?void 0:l.length))return n._msgHash[o.id].reject({type:s.C.MAX_LIMIT,message:"The number of combined messages exceeded the limit."});var h=D([],e.messageList,!0),f=0;if(h.forEach((function(e){(null==e?void 0:e.combineLevel)>f&&(f=null==e?void 0:e.combineLevel)})),o.combineLevel=f+1,o.combineLevel>10)return n._msgHash[o.id].reject({type:s.C.MAX_LIMIT,message:"The level of the merged message exceeded the limit."});var m=fe.call(n,h),v=function(t,r){var a,s,c,u,l,p,d="".concat(n.apiUrl,"/").concat(n.orgName,"/").concat(n.appName,"/chatfiles/").concat(t.entities[0].uuid),h=null===(a=t.entities[0])||void 0===a?void 0:a["share-secret"],f=d+"?em-redirect=true";h&&(f="".concat(f,"&share-secret=").concat(h)),i instanceof Function&&i({url:f,secret:h}),e.url=f,e.secret=h,o.url=f,o.secret=t.entities[0]["share-secret"],o.filename=(null===(s=o.file)||void 0===s?void 0:s.filename)||(null==r?void 0:r.fileName),o.file_length=(null===(u=null===(c=o.file)||void 0===c?void 0:c.data)||void 0===u?void 0:u.size)||(null==r?void 0:r.fileLength)||0,null===(p=null===(l=n._localCache)||void 0===l?void 0:l.getInstance())||void 0===p||p.storeMessage(e,C.q.INPROGRESS);var m=pe.call(n,o);ge.call(n,m)},g=y.Wp.getEnvInfo();if("web"!==g.platform&&"node"!==g.platform&&"quick_app"!==g.platform&&(null===(d=null===(p=g.global)||void 0===p?void 0:p.canIUse)||void 0===d?void 0:d.call(p,"getFileSystemManager"))){var _=g.global.getFileSystemManager(),E="".concat(n.apiUrl,"/").concat(n.orgName,"/").concat(n.appName,"/chatfiles");_.writeFile({filePath:"".concat(g.global.env.USER_DATA_PATH,"/combine"),data:m.buffer,encoding:"binary",success:function(e){g.global.uploadFile({url:E,filePath:"".concat(g.global.env.USER_DATA_PATH,"/combine"),name:"file",header:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+o.accessToken},success:function(e){if(200===e.statusCode){u.vF.debug("upload success",e);var t=JSON.parse(e.data);v(t,{fileName:"combine",fileLength:m.length})}else u.vF.debug("upload fail"),o.onFileUploadError instanceof Function&&o.onFileUploadError(e),this._msgHash[o.id].reject({type:s.C.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})},fail:function(t){u.vF.debug("upload fail"),o.onFileUploadError instanceof Function&&o.onFileUploadError(e),this._msgHash[o.id].reject({type:s.C.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:t})}})},fail:function(e){u.vF.debug("write file fail",e),this._msgHash[o.id].reject({type:s.C.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})}})}else{var T=new File([m],"combine",{type:"application/octet-stream"}),R={url:URL.createObjectURL(T),filename:o.id,data:T};o.file=R,o.onFileUploadComplete=function(e){v(e)},o.onFileUploadError=function(e){a instanceof Function&&a(e),n._msgHash[o.id].reject({type:s.C.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})},y.Wp.uploadFile.call(n,o,M.jz.UPLOAD_MSG_ATTACH)}}))}"img"===e.type&&(o.body||(o.body=P(P({},o),{size:{width:o.width||0,height:o.height||0}}))),null===(r=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===r||r.storeMessage(e,C.q.INPROGRESS);var c=pe.call(this,o);ge.call(this,c)}function he(e,t){e.editMessageId||j.includes(e.type)&&(this._msgHash[e.id].thirdMessage=t)}function fe(e){for(var t=Uint8Array.from("cm",(function(e){return e.charCodeAt(0)})),r=0;r<e.length;r++){for(var n=e[r],o=P(P({},n),{isBuildCombinedMsg:!0}),i=this.mSync.encodeChatMsg.call(this,o),a=i.length,s=new Uint8Array(4),c=0;c<4;c++)s[c]=a>>8*(3-c)&255;u.vF.debug("message length:",s);var l=new Uint8Array(t.length+s.length+i.length);l.set(t),l.set(s,t.length),l.set(i,t.length+s.length),t=l}var p=new Uint8Array(t.length+1),d=0;for(r=2;r<t.length;r++)r%2==1&&(d^=t[r]);return p.set(t),u.vF.debug("checkResult:",d),p[t.length]=d,p}function me(e,t,r){var n=[],o=this.root.lookup("easemob.pb.MUCBody"),i=o.decode(n);i.mucId={appKey:this.appKey,name:e,domain:"conference.easemob.com"},i.operation="join"===r?2:3,i.from={name:this.context.userId},i.isChatroom=!0,i=o.encode(i).finish();var a=this.root.lookup("easemob.pb.Meta").decode(n);a.id=t,a.from={appKey:this.appKey,name:this.context.userId,domain:"easemob.com",client_resource:this.context.jid.clientResource},a.to={domain:"easemob.com"},a.ns=2,a.payload=i;var s=this.root.lookup("easemob.pb.CommSyncUL"),c=s.decode(n);c.meta=a,c=s.encode(c).finish();var u=this.root.lookup("easemob.pb.MSync"),l=u.decode(n);return l.version=this.version,l.encryptType=this.encryptType,l.command=0,l.payload=c,u.encode(l).finish()}function ve(e,t){var r=y.Wp.getUniqueId(),n=me.call(this,e.roomId,r,t);return ge.call(this,P(P({},e),{isHandleChatroom:!0,joinMsg:n,id:r,operation:t}),r)}function ye(e){var t=this;return new Promise((function(r,n){var o,i,a,c,u,l;if(t.logOut)return n({type:s.C.WEBIM_CONNECTION_CLOSED,message:"not login"});if(!e.id||"string"!=typeof e.id||""===e.id)return n({type:s.C.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "id"'});if(!e.to||"string"!=typeof e.to||""===e.to)return n({type:s.C.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "to"'});var p="file"===e.type||"img"===e.type||"audio"===e.type||"video"===e.type,d="delivery"===e.type||"read"===e.type||"channel"===e.type,h="cmd"===e.type,f="recall"===e.type,m=null==e?void 0:e.editMessageId,v=!(d||f||h||m);if(e.id){if(!p&&!d||p&&t.useOwnUploadFun){var y="recall"===e.type?M.jz.SEND_RECALL_MSG:M.jz.SEND_MSG;m&&(y=M.jz.MODIFY_MESSAGE),N.nf.size<=N.Po&&N.nf.set(e.id,{rpt:t.dataReport.geOperateFun({operationName:y})})}v&&(null===(i=null===(o=t._localCache)||void 0===o?void 0:o.getInstance())||void 0===i||i.storeMessage(e,C.q.CREATE)),t._msgHash[e.id]=P(P({},e),{resolve:r,reject:n})}if(p||"combine"===e.type)return de.call(t,e);if("txt"===e.type&&(null===(a=e.msgConfig)||void 0===a?void 0:a.languages)&&Array.isArray(null===(c=e.msgConfig)||void 0===c?void 0:c.languages)&&e.msgConfig.languages.length>0){var g=t.translateMessage||t.translation.translateMessage;if(!g)throw new Error("there is no method to translate message");g.call(t,{text:e.msg,languages:e.msgConfig.languages}).then((function(r){var n,o,i,a=null===(n=r.data[0])||void 0===n?void 0:n.translations;a=a.map((function(e){return{code:e.to,text:e.text}})),e.translations=a,t._msgHash[e.id].translations=a,null===(i=null===(o=t._localCache)||void 0===o?void 0:o.getInstance())||void 0===i||i.storeMessage(e,C.q.INPROGRESS);var s=pe.call(t,e);ge.call(t,s,e.id)})).catch((function(e){n(e)}))}else{v&&(null===(l=null===(u=t._localCache)||void 0===u?void 0:u.getInstance())||void 0===l||l.storeMessage(e,C.q.INPROGRESS));var _=pe.call(t,e);ge.call(t,_,e.id)}}))}function ge(e,t){var r,n,o=this;if(e.isHandleChatroom){if(!this.isOpened()){var i={data:"",type:s.C.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};return Promise.reject(i)}return new Promise((function(r,n){var i;o._msgHash[e.id]=P(P({},e),{resolve:r,reject:n}),i="miniCore"===o.name?e.joinMsg:F.call(o,e.joinMsg,t),o.sock.send(i)}))}if(!this.isOpened())return null===(r=this.unMSyncSendMsgMap)||void 0===r||r.set(t,e),!this.logOut&&this.autoReconnectNumTotal<this.autoReconnectNumMax&&(this.autoReconnectNumTotal<=this.socketHost.length&&this.isHttpDNS||!this.isHttpDNS)&&(u.vF.debug("need to reconnect",this.autoReconnectNumTotal,this.autoReconnectNumMax),this.offLineSendConnecting=!0,this.reconnecting||this.reconnect()),void(this.onError&&this.onError({type:s.C.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"}));n="miniCore"===this.name?e:F.call(this,e,t),this.sock.send(n)}var _e=function(e,t){return e.send=ye,e.sendMsg=ye,u.vF.debug("init Msync by ".concat(e.name)),{generateProvision:B.bind(e),base64transform:F.bind(e),distributeMeta:H.bind(e),decodeMeta:W.bind(e),decodeUnreadDL:z.bind(e),_rebuild:q.bind(e),_lastsession:J.bind(e),receiveProvision:Q.bind(e),isInQueue:oe.bind(e),decodeNotice:ie.bind(e),decodeMSync:se.bind(e),distributeMSync:ce.bind(e),encodeChatMsg:pe.bind(e),upLoadFile:de.bind(e),send:ye.bind(e),stopHeartBeat:re.bind(e),handleChatRoom:ve.bind(e)}}},346:function(e,t){"use strict";var r=function(){function e(e){this.type=e.type,this.message=e.message,this.data=e.data}return e.create=function(t){return new e(t)},e}();t.A=r},8801:function(e,t,r){"use strict";r.d(t,{z:function(){return y}}),r(2675),r(9463),r(2259),r(8706),r(1629),r(4423),r(5276),r(3792),r(739),r(907),r(2010),r(2892),r(9085),r(9432),r(6099),r(3362),r(8781),r(1699),r(7764),r(3500),r(2953);var n=r(8570),o=r.n(n),i=r(565),a=r(8678),s=r(8434),c=r(564),u=r(2056),l=r(7517),p=r(8232),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)},h=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},f=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},m={0:"TEXT",1:"IMAGE",2:"VIDEO",3:"LOCATION",4:"VOICE",5:"FILE",6:"COMMAND",7:"CUSTOM",8:"COMBINE"};function v(e){for(var t={},r=0;r<e.length;r++)if(8===e[r].type)t[e[r].key]=JSON.parse(e[r].stringValue);else if(7===e[r].type)t[e[r].key]=e[r].stringValue;else if(6===e[r].type)t[e[r].key]=e[r].doubleValue;else if(5===e[r].type)t[e[r].key]=e[r].floatValue;else if(1===e[r].type){var n=e[r].varintValue,i=new(o())(n.low,n.high,n.unsigned).toString();t[e[r].key]=0!==Number(i)}else 2!==e[r].type&&3!==e[r].type&&4!==e[r].type||(n=e[r].varintValue,i=new(o())(n.low,n.high,n.unsigned).toString(),t[e[r].key]=Number(i));return t}function y(e){var t="";return e.remotePath&&(t=a.Wp.formatAttachUrl.call(this,e.remotePath),e.remotePath.includes("?em-redirect")||(t="".concat(t,"?em-redirect=true"),e.secretKey&&(t="".concat(t,"&share-secret=").concat(e.secretKey)))),t}function g(e,t){var r,n,o=t.from&&t.from.name;if(o===this.context.userId){var i=null===(r=null==e?void 0:e.from)||void 0===r?void 0:r.clientResource;o===(null===(n=null==t?void 0:t.to)||void 0===n?void 0:n.name)&&i&&i!==this.clientResource&&(o="".concat(o,"/").concat(i))}return o}function _(e,t){var r,n=t.to&&t.to.name;return(null===(r=null==e?void 0:e.to)||void 0===r?void 0:r.clientResource)&&(n="".concat(n,"/").concat(e.to.clientResource)),n}function E(e){var t,r,n,o,c,l,d,g,_,E,T,R,O,I,S,C,A,b,N,M,w,U,k,P,x,L,D;return h(this,void 0,void 0,(function(){var h,j,G,B,F,H,W,z,q,K,V,J,X,Y,Q,$,Z,ee,te,re,ne,oe,ie,ae,se,ce,ue,le,pe,de,he,fe,me,ve,ye,ge,_e,Ee,Te,Re,Oe,Ie,Se,Ce,Ae,be,Ne,Me,we,Ue,ke,Pe;return f(this,(function(f){switch(f.label){case 0:switch(h=e.status,j=e.thirdMessage,G=e.msgBody,B=e.msgId,F=e.type,H=e.from,W=e.to,z=e.time,q=e.onlineState,K=e.chatType,V=e.ignoreCallback,J=e.priority,X=e.format,Y=e.broadcast,Q=void 0!==Y&&Y,$=e.isContentReplaced,Z=void 0!==$&&$,ee={},te={},re=h.errorCode>0,ne=h.errorCode,oe=h.reason,ie={},ae=[],se=[],ce={},ue="",le=0,pe=null,de=null,j.ext&&(ie=v(j.ext)),j.meta&&"string"==typeof j.meta&&((fe=JSON.parse(j.meta)).reaction&&(ae=fe.reaction).forEach((function(e){e.isAddedBySelf=e.state,delete e.state})),fe.translations&&(se=fe.translations),fe.edit_msg&&(me=fe.edit_msg,ve=me.count,ye=me.operator,ge=me.edit_time,_e=me.sender,Ee=me.send_time,ce={operationTime:ge,operatorId:ye,operationCount:ve},ue=_e,le=Ee),fe.thread&&"{}"!==JSON.stringify(fe.thread)&&(pe={messageId:fe.thread.msg_parent_id,parentId:fe.thread.muc_parent_id,chatThreadName:fe.thread.thread_name}),fe.thread_overview&&"{}"!==JSON.stringify(fe.thread_overview)&&(de={id:fe.thread_overview.id,parentId:fe.thread_overview.muc_parent_id,name:fe.thread_overview.name,lastMessage:fe.thread_overview.last_message&&"{}"!==JSON.stringify(fe.thread_overview.last_message)?i.h.call(this,fe.thread_overview.last_message):null,createTimestamp:fe.thread_overview.create_timestamp,updateTimestamp:fe.thread_overview.update_timestamp,messageCount:fe.thread_overview.message_count||0})),G.type){case 0:return[3,1];case 1:return[3,7];case 2:return[3,10];case 3:return[3,13];case 4:return[3,16];case 5:return[3,19];case 6:return[3,22];case 7:return[3,23];case 8:return[3,26]}return[3,27];case 1:return Object.prototype.hasOwnProperty.call(G,"subType")&&0===G.subType?(he=y.call(this,G),Te={id:B,type:"combine",chatType:K,to:W,from:H,ext:ie,time:Number(z),onlineState:q,title:G.title||"",summary:G.summary||"",url:he||"",secret:G.secretKey||"",file_length:G.fileLength||0,filename:G.displayName||"",compatibleText:G.text,combineLevel:G.combineLevel||0},ee.msgConfig&&(Te.msgConfig=ee.msgConfig),ae.length>0&&(Te.reactions=ae),pe&&(Te.chatThread=pe),de&&(Te.chatThreadOverview=de),"chatRoom"===K&&(Te.priority=J,Te.broadcast=Q),Z&&(Te.isContentReplaced=Z),te=Te,V?[3,3]:[4,null===(r=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===r?void 0:r.storeMessage(Te,p.q.SUCCESS)]):[3,4];case 2:f.sent(),null===(n=this.eventHandler)||void 0===n||n.dispatch("onCombineMessage",Te),f.label=3;case 3:return[3,28];case 4:return!(ee={id:B,type:F,contentsType:m[G.type],from:H,to:W,data:G.text,ext:ie,sourceMsg:G.text,time:z,msgConfig:j.msgConfig,onlineState:q}).msgConfig&&delete j.msgConfig,ee.error=re,ee.errorText=oe,ee.errorCode=ne,!V&&this.onTextMessage&&this.onTextMessage(ee),Re={id:B,type:"txt",chatType:K,msg:G.text,to:W,from:H,ext:ie,time:Number(z),onlineState:q},ee.msgConfig&&(Re.msgConfig=ee.msgConfig),ae.length>0&&(Re.reactions=ae),pe&&(Re.chatThread=pe),de&&(Re.chatThreadOverview=de),se.length>0&&(Re.translations=se),ce.operationCount>0&&(Re.modifiedInfo=ce,j.type===s.u.EDIT&&(Re.from=ue,Re.time=le)),"chatRoom"===K&&(Re.priority=J,Re.broadcast=Q),Z&&(Re.isContentReplaced=Z),te=Re,V?[3,6]:[4,null===(c=null===(o=this._localCache)||void 0===o?void 0:o.getInstance())||void 0===c?void 0:c.storeMessage(Re,p.q.SUCCESS)];case 5:f.sent(),null===(l=this.eventHandler)||void 0===l||l.dispatch("onTextMessage",Re),f.label=6;case 6:return[3,28];case 7:return Oe=(null===(d=null==G?void 0:G.size)||void 0===d?void 0:d.width)||0,Ie=(null===(g=null==G?void 0:G.size)||void 0===g?void 0:g.height)||0,he=this.useOwnUploadFun?G.remotePath:y.call(this,G),!(ee={id:B,type:F,contentsType:m[G.type],from:H,to:W,url:he,secret:G.secretKey,filename:G.displayName,thumb:this.useOwnUploadFun?"":"".concat(he,"&thumbnail=true"),thumb_secret:G.secretKey,file_length:G.fileLength||"",width:Oe,height:Ie,filetype:G.filetype||"",accessToken:this.token,ext:ie,time:z,msgConfig:j.msgConfig,onlineState:q}).delay&&delete ee.delay,!ee.msgConfig&&delete j.msgConfig,ee.error=re,ee.errorText=oe,ee.errorCode=ne,!V&&this.onPictureMessage&&this.onPictureMessage(ee),Se={id:B,type:"img",chatType:K,from:H,to:W,url:he||"",width:Oe,height:Ie,secret:G.secretKey||"",thumb:this.useOwnUploadFun?"":"".concat(he,"&thumbnail=true"),thumb_secret:G.secretKey,file_length:G.fileLength||0,ext:ie,time:Number(z),onlineState:q},ee.msgConfig&&(Se.msgConfig=ee.msgConfig),ae.length>0&&(Se.reactions=ae),pe&&(Se.chatThread=pe),de&&(Se.chatThreadOverview=de),"chatRoom"===K&&(Se.priority=J,Se.broadcast=Q),Z&&(Se.isContentReplaced=Z),te=Se,V?[3,9]:[4,null===(E=null===(_=this._localCache)||void 0===_?void 0:_.getInstance())||void 0===E?void 0:E.storeMessage(Se,p.q.SUCCESS)];case 8:f.sent(),null===(T=this.eventHandler)||void 0===T||T.dispatch("onImageMessage",Se),f.label=9;case 9:return[3,28];case 10:return he=this.useOwnUploadFun?G.remotePath:y.call(this,G),!(ee={id:B,type:F,contentsType:m[G.type],from:H,to:W,url:he,secret:G.secretKey,filename:G.displayName,length:G.duration||"",file_length:G.fileLength||"",filetype:G.filetype||"",accessToken:this.token||"",ext:ie,time:z,msgConfig:j.msgConfig,onlineState:q}).delay&&delete ee.delay,!ee.msgConfig&&delete j.msgConfig,ee.error=re,ee.errorText=oe,ee.errorCode=ne,!V&&this.onVideoMessage&&this.onVideoMessage(ee),Ce={id:B,type:"video",chatType:K,from:H,to:W,url:he,secret:G.secretKey,thumb:a.Wp.formatAttachUrl.call(this,G.thumbnailRemotePath),thumb_secret:G.thumbnailSecretKey,filename:G.displayName,length:G.duration||0,file:{},file_length:G.fileLength||0,filetype:G.filetype||"",accessToken:this.token||"",ext:ie,time:Number(z),onlineState:q},ee.msgConfig&&(Ce.msgConfig=ee.msgConfig),ae.length>0&&(Ce.reactions=ae),pe&&(Ce.chatThread=pe),de&&(Ce.chatThreadOverview=de),"chatRoom"===K&&(Ce.priority=J,Ce.broadcast=Q),Z&&(Ce.isContentReplaced=Z),te=Ce,V?[3,12]:[4,null===(O=null===(R=this._localCache)||void 0===R?void 0:R.getInstance())||void 0===O?void 0:O.storeMessage(Ce,p.q.SUCCESS)];case 11:f.sent(),null===(I=this.eventHandler)||void 0===I||I.dispatch("onVideoMessage",Ce),f.label=12;case 12:return[3,28];case 13:return!(ee={id:B,type:F,contentsType:m[G.type],from:H,to:W,addr:G.address,buildingName:G.buildingName,lat:G.latitude,lng:G.longitude,ext:ie,time:z,msgConfig:j.msgConfig,onlineState:q}).delay&&delete ee.delay,!ee.msgConfig&&delete j.msgConfig,ee.error=re,ee.errorText=oe,ee.errorCode=ne,!V&&this.onLocationMessage&&this.onLocationMessage(ee),Ae={id:B,type:"loc",chatType:K,from:H,to:W,buildingName:G.buildingName,addr:G.address,lat:G.latitude,lng:G.longitude,ext:ie,time:Number(z),onlineState:q},ee.msgConfig&&(Ae.msgConfig=ee.msgConfig),ae.length>0&&(Ae.reactions=ae),pe&&(Ae.chatThread=pe),de&&(Ae.chatThreadOverview=de),"chatRoom"===K&&(Ae.priority=J,Ae.broadcast=Q),Z&&(Ae.isContentReplaced=Z),te=Ae,V?[3,15]:[4,null===(C=null===(S=this._localCache)||void 0===S?void 0:S.getInstance())||void 0===C?void 0:C.storeMessage(Ae,p.q.SUCCESS)];case 14:f.sent(),null===(A=this.eventHandler)||void 0===A||A.dispatch("onLocationMessage",Ae),f.label=15;case 15:return[3,28];case 16:return he=this.useOwnUploadFun?G.remotePath:y.call(this,G),!(ee={id:B,type:F,contentsType:m[G.type],from:H,to:W,url:he,secret:G.secretKey,filename:G.displayName,file_length:G.fileLength||"",accessToken:this.token||"",ext:ie,length:G.duration,time:z,msgConfig:j.msgConfig,onlineState:q}).delay&&delete ee.delay,!ee.msgConfig&&delete j.msgConfig,ee.error=re,ee.errorText=oe,ee.errorCode=ne,!V&&this.onAudioMessage&&this.onAudioMessage(ee),be={id:B,type:"audio",chatType:K,from:H,to:W,url:he,secret:G.secretKey,file:{},filename:G.displayName,length:G.duration||0,file_length:G.fileLength||0,filetype:G.filetype||"",accessToken:this.token||"",ext:ie,time:Number(z),onlineState:q},ee.msgConfig&&(be.msgConfig=ee.msgConfig),ae.length>0&&(be.reactions=ae),pe&&(be.chatThread=pe),de&&(be.chatThreadOverview=de),"chatRoom"===K&&(be.priority=J,be.broadcast=Q),Z&&(be.isContentReplaced=Z),te=be,V?[3,18]:[4,null===(N=null===(b=this._localCache)||void 0===b?void 0:b.getInstance())||void 0===N?void 0:N.storeMessage(be,p.q.SUCCESS)];case 17:f.sent(),null===(M=this.eventHandler)||void 0===M||M.dispatch("onAudioMessage",be),f.label=18;case 18:return[3,28];case 19:return he=this.useOwnUploadFun?G.remotePath:y.call(this,G),!(ee={id:B,type:F,contentsType:m[G.type],from:H,to:W,url:he,secret:G.secretKey,filename:G.displayName,file_length:G.fileLength,accessToken:this.token||"",ext:ie,time:z,msgConfig:j.msgConfig,onlineState:q}).delay&&delete ee.delay,!ee.msgConfig&&delete j.msgConfig,ee.error=re,ee.errorText=oe,ee.errorCode=ne,!V&&this.onFileMessage&&this.onFileMessage(ee),Ne={id:B,type:"file",chatType:K,from:H,to:W,url:he,secret:G.secretKey,file:{},filename:G.displayName,length:G.duration||0,file_length:G.fileLength||0,filetype:G.filetype||"",accessToken:this.token||"",ext:ie,time:Number(z),onlineState:q},ee.msgConfig&&(Ne.msgConfig=ee.msgConfig),ae.length>0&&(Ne.reactions=ae),pe&&(Ne.chatThread=pe),de&&(Ne.chatThreadOverview=de),"chatRoom"===K&&(Ne.priority=J,Ne.broadcast=Q),Z&&(Ne.isContentReplaced=Z),te=Ne,V?[3,21]:[4,null===(U=null===(w=this._localCache)||void 0===w?void 0:w.getInstance())||void 0===U?void 0:U.storeMessage(Ne,p.q.SUCCESS)];case 20:f.sent(),null===(k=this.eventHandler)||void 0===k||k.dispatch("onFileMessage",Ne),f.label=21;case 21:return[3,28];case 22:return!(ee={id:B,type:F,contentsType:m[G.type],from:H,to:W,action:G.action,ext:ie,time:z,msgConfig:j.msgConfig,onlineState:q}).msgConfig&&delete j.msgConfig,ee.error=re,ee.errorText=oe,ee.errorCode=ne,!V&&this.onCmdMessage&&this.onCmdMessage(ee),Me={id:B,type:"cmd",chatType:K,from:H,to:W,action:G.action,ext:ie,time:Number(z),onlineState:q},ee.msgConfig&&(Me.msgConfig=ee.msgConfig),ae.length>0&&(Me.reactions=ae),pe&&(Me.chatThread=pe),de&&(Me.chatThreadOverview=de),"chatRoom"===K&&(Me.priority=J,Me.broadcast=Q),Z&&(Me.isContentReplaced=Z),te=Me,V||null===(P=this.eventHandler)||void 0===P||P.dispatch("onCmdMessage",Me),[3,28];case 23:return we={},Ue={},j.contents[0].customExts&&(we=v(j.contents[0].customExts)),j.contents[0].params&&(Ue=v(j.contents[0].params)),ee={id:B,type:F,contentsType:m[G.type],from:H,to:W,customEvent:G.customEvent,params:Ue,customExts:we,ext:ie,time:z,onlineState:q},!V&&this.onCustomMessage&&this.onCustomMessage(ee),ke={id:B,type:"custom",chatType:K,from:H,to:W,customEvent:G.customEvent,params:Ue,customExts:we,ext:ie,time:Number(z),onlineState:q},ee.msgConfig&&(ke.msgConfig=ee.msgConfig),ae.length>0&&(ke.reactions=ae),pe&&(ke.chatThread=pe),de&&(ke.chatThreadOverview=de),ce.operationCount>0&&(ke.modifiedInfo=ce,j.type===s.u.EDIT&&(ke.from=ue,ke.time=le)),"chatRoom"===K&&(ke.priority=J,ke.broadcast=Q),Z&&(ke.isContentReplaced=Z),te=ke,V?[3,25]:[4,null===(L=null===(x=this._localCache)||void 0===x?void 0:x.getInstance())||void 0===L?void 0:L.storeMessage(ke,p.q.SUCCESS)];case 24:f.sent(),null===(D=this.eventHandler)||void 0===D||D.dispatch("onCustomMessage",ke),f.label=25;case 25:return[3,28];case 26:return he=y.call(this,G),Pe={id:B,type:"combine",chatType:K,to:W,from:H,ext:ie,time:Number(z),onlineState:q,title:G.title||"",summary:G.summary||"",url:he||"",secret:G.secretKey||"",file_length:G.fileLength||0,filename:G.displayName||"",compatibleText:G.text,combineLevel:G.combineLevel||0},ee.msgConfig&&(Pe.msgConfig=ee.msgConfig),ae.length>0&&(Pe.reactions=ae),pe&&(Pe.chatThread=pe),de&&(Pe.chatThreadOverview=de),"chatRoom"===K&&(Pe.priority=J,Pe.broadcast=Q),Z&&(Pe.isContentReplaced=Z),te=Pe,!V&&this.eventHandler&&this.eventHandler.dispatch("onCombineMessage",Pe),[3,28];case 27:return u.vF.error("Unknow message type, message:",G),[3,28];case 28:return X?[2,te]:[2,ee]}}))}))}function T(e,t,r){if(this.delivery&&e!==t){var n=this.getUniqueId(),o=new l.Message("delivery",n);o.set({ackId:r,to:e}),u.vF.debug("send delivery ack"),this.send(o.body)}}t.A=function(e,t,r,n){var i,l,p,m,y,R,O,I,S,C,A,b,N,M,w,U,k,P,x,L,D,j;return h(this,void 0,void 0,(function(){var h,G,B,F,H,W,z,q,K,V,J,X,Y,Q,$,Z,ee,te,re,ne,oe,ie,ae,se,ce,ue,le,pe,de,he,fe,me,ve,ye,ge,_e,Ee,Te,Re;return f(this,(function(f){switch(f.label){case 0:if(h=new(o())(e.timestamp.low,e.timestamp.high,e.timestamp.unsigned).toString(),G=this.root.lookup("easemob.pb.MessageBody"),B=G.decode(e.payload),F=3,H=!1,e.meta&&e.meta.length){if(W=a.Wp.parseNotify(e.meta),z=W.is_online,q=W.callback_replace,this.useReplacedMessageContents&&q&&(H=!0),z||0===z)switch(z){case 0:F=0;break;case 1:F=1;break;default:F=2}}else F=3;switch(K=new(o())(e.id.low,e.id.high,e.id.unsigned).toString(),V=B.ackMessageId?new(o())(B.ackMessageId.low,B.ackMessageId.high,B.ackMessageId.unsigned).toString():"",J="",X=g.call(this,e,B),Y=_.call(this,e,B),u.vF.debug("thirdMessage:",B),B.type){case s.u.SINGLECHAT:return[3,1];case s.u.GROUPCHAT:return[3,2];case s.u.CHATROOM:return[3,3];case s.u.READ_ACK:return[3,4];case s.u.DELIVER_ACK:return[3,5];case s.u.RECALL:return[3,6];case s.u.CHANNEL_ACK:return[3,15];case s.u.EDIT:return[3,16]}return[3,20];case 1:return J="chat","agoraToken"===this.grantType&&(J="singleChat"),this.delivery&&!r&&X!==this.context.userId&&T.call(this,X,Y,K),[3,21];case 2:return J="groupchat","agoraToken"===this.grantType&&(J="groupChat"),[3,21];case 3:return J="chatroom","agoraToken"===this.grantType&&(J="chatRoom"),F=1,[3,21];case 4:return J="read_ack",Q=void 0,B.ext[0]&&JSON.parse(B.ext[0].stringValue)?(Q={id:K,type:"read",from:X,to:Y,mid:V,groupReadCount:B.ext[0]&&JSON.parse(B.ext[0].stringValue),ackContent:B.ackContent,onlineState:F},this.onReadMessage&&this.onReadMessage(Q),null===(i=this.eventHandler)||void 0===i||i.dispatch("onReadMessage",Q),[2]):(Q={id:K,type:"read",from:X,to:Y,mid:V,onlineState:F},this.onReadMessage&&this.onReadMessage(Q),null===(l=this.eventHandler)||void 0===l||l.dispatch("onReadMessage",Q),[2]);case 5:return J="deliver_ack",this.onDeliveredMessage&&this.onDeliveredMessage({id:K,type:"delivery",from:X,to:Y,mid:V,onlineState:F}),$={id:K,type:"delivery",from:X,to:Y,mid:V,onlineState:F},null===(p=this.eventHandler)||void 0===p||p.dispatch("onDeliveredMessage",$),[2];case 6:return J="recall",Z={id:K,from:X||"admin",to:Y,mid:V,onlineState:F},ee=Y===this.user?X:Y,[4,null===(y=null===(m=this._localCache)||void 0===m?void 0:m.getInstance())||void 0===y?void 0:y.getMessageByServerMsgId(Z.mid)];case 7:return(te=f.sent())?[4,null===(O=null===(R=this._localCache)||void 0===R?void 0:R.getInstance())||void 0===O?void 0:O.removeMsgByServerMsgId(Z.mid)]:[3,9];case 8:f.sent(),f.label=9;case 9:return"singleChat"!==(null==te?void 0:te.chatType)&&"groupChat"!==(null==te?void 0:te.chatType)?[3,14]:(re=(null==te?void 0:te.from)===this.user||""===(null==te?void 0:te.from),[4,null===(S=null===(I=this._localCache)||void 0===I?void 0:I.getInstance())||void 0===S?void 0:S.getConversationLastMessage(ee,te.chatType)]);case 10:return ne=f.sent(),[4,null===(A=null===(C=this._localCache)||void 0===C?void 0:C.getInstance())||void 0===A?void 0:A.getConversationBySessionId((0,c.u0)({conversationId:ee,conversationType:te.chatType}))];case 11:return(oe=f.sent())?[4,null===(N=null===(b=this._localCache)||void 0===b?void 0:b.getInstance())||void 0===N?void 0:N.updateLocalConversation((0,c.u0)({conversationId:ee,conversationType:te.chatType}),{lastMessageId:null==ne?void 0:ne.serverMsgId,unReadCount:(0,c.rH)({conversation:oe,isRecallSelfMsg:re,recalledMsgTime:te.time})})]:[3,13];case 12:f.sent(),f.label=13;case 13:f.label=14;case 14:return this.onRecallMessage&&this.onRecallMessage(Z),null===(M=this.eventHandler)||void 0===M||M.dispatch("onRecallMessage",Z),[2];case 15:return this.onChannelMessage&&this.onChannelMessage({id:K,type:"channel",chatType:"singleChat",from:X,to:Y,time:Number(h),onlineState:F}),ie={id:K,type:"channel",chatType:"singleChat",from:X,to:Y,time:Number(h),onlineState:F},null===(w=this.eventHandler)||void 0===w||w.dispatch("onChannelMessage",ie),[2];case 16:return ae={errorCode:0,reason:""},[4,E.call(this,{status:ae,thirdMessage:B,msgBody:B.contents[0],msgId:K,type:J,from:X,to:Y,time:h,onlineState:F,ignoreCallback:!0,format:!0,isContentReplaced:H})];case 17:return se=f.sent(),ce=!!e.to&&-1!==e.to.domain.indexOf("conference"),se.chatType=ce?"groupChat":"singleChat",ue=B.editMessageId&&new(o())(B.editMessageId.low,B.editMessageId.high,B.editMessageId.unsigned).toString(),le={},"txt"===se.type?(pe=se.type,de=se.chatType,he=se.to,fe=se.from,me=se.time,ve=se.modifiedInfo,le={id:ue,type:pe,chatType:de,to:he,from:fe,time:me,modifiedInfo:ve,msg:se.msg},se.translations&&(le.translations=se.translations)):"custom"===se.type&&((le=se).id=ue,delete le.onlineState),le?[4,null===(k=null===(U=this._localCache)||void 0===U?void 0:U.getInstance())||void 0===k?void 0:k.getMessageByServerMsgId(ue)]:[3,19];case 18:"txt"===(null==(ye=f.sent())?void 0:ye.type)&&"txt"===le.type?null===(x=null===(P=this._localCache)||void 0===P?void 0:P.getInstance())||void 0===x||x.putMessageToDB(d(d({},ye),{msg:le.msg,modifiedInfo:le.modifiedInfo,translations:le.translations})):"custom"===(null==ye?void 0:ye.type)&&"custom"===le.type&&(null===(D=null===(L=this._localCache)||void 0===L?void 0:L.getInstance())||void 0===D||D.putMessageToDB(d(d({},ye),{modifiedInfo:le.modifiedInfo,customEvent:le.customEvent,customExts:le.customExts,ext:le.ext}))),f.label=19;case 19:return"txt"!==se.type&&"custom"!==se.type||null===(j=this.eventHandler)||void 0===j||j.dispatch("onModifiedMessage",le),[2];case 20:return u.vF.error("unexpected message type: ".concat(B.type)),[2];case 21:ge="normal",Ee=!1,"chat"===J.toLowerCase()||"singleChat"===J?_e="singleChat":"groupchat"===J.toLowerCase()||"groupChat"===J?_e="groupChat":(_e="chatRoom",F=1,e.ext&&(Te=v(e.ext),Ee=!!(null==Te?void 0:Te.is_broadcast),ge=0===Te.chatroom_msg_tag?"high":2===Te.chatroom_msg_tag?"low":"normal")),Re=0,f.label=22;case 22:return Re<B.contents.length?[4,E.call(this,{status:t,thirdMessage:B,msgBody:B.contents[Re],msgId:K,type:J,from:X,to:Y,time:h,onlineState:F,chatType:_e,ignoreCallback:r,priority:ge,format:n,broadcast:Ee,isContentReplaced:H})]:[3,25];case 23:return[2,f.sent()];case 24:return Re++,[3,22];case 25:return[2]}}))}))}},8232:function(e,t,r){"use strict";var n;r.d(t,{q:function(){return n}}),function(e){e[e.CREATE=0]="CREATE",e[e.FAIL=1]="FAIL",e[e.INPROGRESS=2]="INPROGRESS",e[e.SUCCESS=3]="SUCCESS"}(n||(n={}))},564:function(e,t,r){"use strict";r.d(t,{rH:function(){return o},s5:function(){return i},u0:function(){return n}}),r(8706);var n=function(e){return"".concat(e.conversationType,"-").concat(e.conversationId)},o=function(e){var t=e.isRecallSelfMsg,r=e.conversation,n=e.recalledMsgTime,o=r.unReadCount,i=void 0===o?0:o,a=r.unreadCountClearTimestamp;return t||(void 0===a?0:a)>n?i:i&&i>0?i-1:0},i=function(e){var t,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r}},2056:function(e,t,r){"use strict";function n(){console.log&&(console.log.apply?console.log.apply(console,Array.prototype.slice.call(arguments)):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}r.d(t,{vF:function(){return h}}),r(2675),r(9463),r(2259),r(8706),r(1629),r(5276),r(3792),r(8598),r(4782),r(739),r(907),r(4170),r(2010),r(6099),r(7495),r(7764),r(2953),r(3296),r(7208),r(8408);var o="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var a,s=function(){},c={};!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(a||(a={}));var u=function(){function e(e,t,r){this.name=e||"defaultLogger",this.currentLevel=0,this.useCookiePersist=!1,this.storageLogLevelKey="loglevel",this.levels=a,this.logMethods=["trace","debug","info","warn","error"],this.methodFactory=r||this.defaultMethodFactory;var n=this._getPersistedLevel();null==n&&(n=null===t?"WARN":t),this.logs=[],this.config={useCache:!1,maxCache:3145728,color:"",background:""},this.logBytes=0,this.setLevel(n,!1,"")}return e.prototype.setConfig=function(e){this.config=e},e.prototype.getLevel=function(){return this.currentLevel},e.prototype.setLevel=function(e,t,r){if("string"==typeof e&&(e=a[e]),void 0===e&&(e=0),!("number"==typeof e&&e>=0&&e<=this.levels.SILENT))throw Error("log.setLevel() called with invalid level: "+e);if(this.currentLevel=e,!1!==t&&this._persistLevel(e),this.replaceLoggingMethods(e,r||""),"undefined"==typeof console&&e<a.SILENT)throw Error("No console available for logging")},e.prototype.setDefaultLevel=function(e){this._getPersistedLevel()||this.setLevel(e,!1,"")},e.prototype.enableAll=function(e){this.setLevel(this.levels.TRACE,!0,"")},e.prototype.disableAll=function(e){this.setLevel(this.levels.SILENT,!0,"")},e.prototype.getLogs=function(){return this.logs},e.prototype.download=function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=this.getLogs().join("\n"),t=new Blob([e],{type:"text/plain;charset=UTF-8"}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=r,n.setAttribute("download","sdklog"),document.body.appendChild(n),n.click()}},e.prototype._bindMethod=function(e,t,r){var n=this,o=e[t],i=this.getTime();if(r)return this._cacheLog;if("function"==typeof o.bind)return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=n.getTime();o.call.apply(o,function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}([e,"".concat(a," IM SDK [").concat("log"===t?"debug":t,"]: ")],r,!1)),n.onLog&&n.onLog({time:a,level:"log"===t?"debug":t,logs:r})};try{return Function.prototype.bind.call(o,e,"".concat(i," IM SDK [").concat("log"===t?"debug":t,"]: "))}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}},e.prototype.getTime=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()},e.prototype._cacheLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(new Date).toLocaleString()+": ",n="";e.forEach((function(e){"object"===i(e)?n+=JSON.stringify(e)+" ":n+=e+" "})),this._cacheLogCall(r+n)},e.prototype._cacheLogCall=function(e){var t=l(e),r=this.logBytes+t,n=this.config.maxCache;if(!(t>=n)){if(r<n)this.logBytes+=t;else for(var o=r-n,i=0;i<o;){var a=this.logs.shift();void 0!==a&&(i+=l(a))}this.logs.push(e)}},e.prototype._getPersistedLevel=function(){var e;if("undefined"==typeof window)return 5;if("undefined"===(e=window&&window.localStorage&&window.localStorage[this.storageLogLevelKey])){var t=window.document.cookie,r=t.indexOf(encodeURIComponent(this.storageLogLevelKey));-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}return e||5},e.prototype._persistLevel=function(e){var t=this.logMethods[e]||"SILENT";"undefined"!=typeof window&&(window.localStorage&&(window.localStorage[this.storageLogLevelKey]=t),this.useCookiePersist&&(window.document.cookie=encodeURIComponent(this.storageLogLevelKey)+"="+t+";"))},e.prototype.replaceLoggingMethods=function(e,t){for(var r=0;r<this.logMethods.length;r++){var n=this.logMethods[r];this[n]=r<e?s:this.methodFactory(n,e,t)}this.log=this.debug},e.prototype.defaultMethodFactory=function(e,t,r){return this.realMethod(e)||this.enableLoggingWhenConsoleArrives.apply(this,[e,t,r])},e.prototype.realMethod=function(e){return"debug"===e&&(e="log"),"undefined"!=typeof console&&("trace"===e&&o?n:void 0!==console[e]?this._bindMethod(console,e,this.config.useCache):void 0!==console.log?this._bindMethod(console,"log",this.config.useCache):s)},e.prototype.enableLoggingWhenConsoleArrives=function(e,t,r){return function(){"undefined"!=typeof console&&(this.replaceLoggingMethods.call(this,t,r),this[e].apply(this,arguments))}.bind(this)},e}();function l(e){for(var t=e.length,r=0;r<e.length;r++)e.charCodeAt(r)>255&&t++;return t}var p=new u;p.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return this};var d="undefined"!=typeof window?window.log:void 0;p.noConflict=function(){return"undefined"!=typeof window&&window.log===p&&(window.log=d),p},p.getLoggers=function(){return c};var h=p},7517:function(e,t,r){"use strict";r.d(t,{Message:function(){return v}});var n=r(8678),o=function(){function e(e){var t=e.id;this.id=t,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.id,type:"read",to:e.to,from:e.from||"",chatType:e.chatType}},e.create=function(e){return{id:n.Wp.getUniqueId(),chatType:e.chatType,ackId:e.id,type:"read",to:e.to,from:e.from||"",ackContent:e.ackContent,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),i=function(){function e(e){this.id=e.id,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.ackId,type:"delivery",to:e.to,from:e.from||""}},e.create=function(e){return{id:n.Wp.getUniqueId(),ackId:e.ackId,type:"delivery",to:e.to,from:e.from||"",isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),a=(r(9089),function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"channel",to:e.to,from:e.from||"",time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:n.Wp.getUniqueId(),type:"channel",chatType:e.chatType||"singleChat",to:e.to,from:e.from||"",time:Date.now(),isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}()),s=(r(4346),function(){function e(e){var t=e.type,r=e.id||n.Wp.getUniqueId();this.id=r,this.type=t,this.value=""}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"txt",to:e.to,msg:e.msg,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),isChatThread:e.isChatThread},this.value=e.msg},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){var t,r;return(null===(t=e.msgConfig)||void 0===t?void 0:t.languages)&&Array.isArray(null===(r=e.msgConfig)||void 0===r?void 0:r.languages),{type:"txt",id:n.Wp.getUniqueId(),msg:e.msg,to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}()),c=function(){function e(e){var t=e.type,r=e.id;this.id=r||n.Wp.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"cmd",to:e.to,action:e.action,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:n.Wp.getUniqueId(),type:"cmd",to:e.to,from:e.from||"",chatType:e.chatType||"singleChat",action:e.action,time:Date.now(),ext:e.ext,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),u=function(){function e(e){var t=e.type,r=e.id||n.Wp.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:n.Wp.getUniqueId(),chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),l=function(){function e(e){var t=e.type,r=e.id;this.id=r||n.Wp.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:n.Wp.getUniqueId(),chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),p=function(){function e(e){var t=e.type,r=e.id||n.Wp.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&n.Wp.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"img",file:e.file,width:e.width,height:e.height,to:e.to,from:e.from||"",roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:n.Wp.getUniqueId(),chatType:e.chatType,type:"img",url:e.url,width:e.width,height:e.height,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,file_length:e.file_length,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,thumbnailWidth:e.thumbnailWidth,thumbnailHeight:e.thumbnailHeight}},e}(),d=function(){function e(e){var t=e.type,r=e.id||n.Wp.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&n.Wp.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"audio",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:n.Wp.getUniqueId(),chatType:e.chatType,type:"audio",filename:e.filename,length:e.length,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,file_length:e.file_length,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),h=function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&n.Wp.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),apiUrl:e.apiUrl,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:n.Wp.getUniqueId(),chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),f=function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&n.Wp.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:n.Wp.getUniqueId(),chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,file_length:e.file_length,to:e.to,from:e.from||"",ext:e.ext,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),m=function(){function e(e){var t=e.type,r=e.id||n.Wp.getUniqueId();this.id=r,this.type=t,this.value=""}return e.create=function(e){return{type:"combine",id:n.Wp.getUniqueId(),to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,compatibleText:e.compatibleText,title:e.title,summary:e.summary,messageList:e.messageList,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete}},e}(),v=function(){function e(t,r){return this.type=t,this.id=r||n.Wp.getUniqueId(),e.createOldMsg({type:t,id:this.id})}return e.createOldMsg=function(e){switch(e.type){case"read":return new o({type:"read",id:e.id});case"delivery":return new i({type:"delivery",id:e.id});case"channel":return new a({type:"channel",id:e.id});case"txt":return new s({type:"txt",id:e.id});case"cmd":return new c({type:"cmd",id:e.id});case"custom":return new u({type:"custom",id:e.id});case"loc":return new l({type:"loc",id:e.id});case"img":return new p({type:"img",id:e.id});case"audio":return new d({type:"audio",id:e.id});case"video":return new h({type:"video",id:e.id});case"file":return new f({type:"file",id:e.id})}},e.create=function(e){return"txt"!==(t=e).type||"version"in t?function(e){return"img"===e.type&&!("version"in e)}(e)?p.create(e):function(e){return"cmd"===e.type&&!("version"in e)}(e)?c.create(e):function(e){return"file"===e.type&&!("version"in e)}(e)?f.create(e):function(e){return"audio"===e.type&&!("version"in e)}(e)?d.create(e):function(e){return"video"===e.type&&!("version"in e)}(e)?h.create(e):function(e){return"custom"===e.type&&!("version"in e)}(e)?u.create(e):function(e){return"loc"===e.type&&!("version"in e)}(e)?l.create(e):function(e){return"channel"===e.type&&!("version"in e)}(e)?a.create(e):function(e){return"delivery"===e.type&&!("version"in e)}(e)?i.create(e):function(e){return"read"===e.type&&!("version"in e)}(e)?o.create(e):function(e){return"combine"===e.type&&!("version"in e)}(e)?m.create(e):{}:s.create(e);var t},e.prototype.set=function(e){},e}()},1531:function(e,t,r){"use strict";var n;r.d(t,{C:function(){return n}}),function(e){e[e.REQUEST_SUCCESS=0]="REQUEST_SUCCESS",e[e.REQUEST_TIMEOUT=-1]="REQUEST_TIMEOUT",e[e.REQUEST_UNKNOWN=-2]="REQUEST_UNKNOWN",e[e.REQUEST_PARAMETER_ERROR=-3]="REQUEST_PARAMETER_ERROR",e[e.REQUEST_ABORT=-4]="REQUEST_ABORT",e[e.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR=0]="WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_OPEN_ERROR=1]="WEBIM_CONNCTION_OPEN_ERROR",e[e.WEBIM_CONNCTION_AUTH_ERROR=2]="WEBIM_CONNCTION_AUTH_ERROR",e[e.WEBIM_CONNCTION_OPEN_USERGRID_ERROR=3]="WEBIM_CONNCTION_OPEN_USERGRID_ERROR",e[e.WEBIM_CONNCTION_ATTACH_ERROR=4]="WEBIM_CONNCTION_ATTACH_ERROR",e[e.WEBIM_CONNCTION_ATTACH_USERGRID_ERROR=5]="WEBIM_CONNCTION_ATTACH_USERGRID_ERROR",e[e.WEBIM_CONNCTION_REOPEN_ERROR=6]="WEBIM_CONNCTION_REOPEN_ERROR",e[e.WEBIM_CONNCTION_SERVER_CLOSE_ERROR=7]="WEBIM_CONNCTION_SERVER_CLOSE_ERROR",e[e.WEBIM_CONNCTION_SERVER_ERROR=8]="WEBIM_CONNCTION_SERVER_ERROR",e[e.WEBIM_CONNCTION_IQ_ERROR=9]="WEBIM_CONNCTION_IQ_ERROR",e[e.WEBIM_CONNCTION_PING_ERROR=10]="WEBIM_CONNCTION_PING_ERROR",e[e.WEBIM_CONNCTION_NOTIFYVERSION_ERROR=11]="WEBIM_CONNCTION_NOTIFYVERSION_ERROR",e[e.WEBIM_CONNCTION_GETROSTER_ERROR=12]="WEBIM_CONNCTION_GETROSTER_ERROR",e[e.WEBIM_CONNCTION_CROSSDOMAIN_ERROR=13]="WEBIM_CONNCTION_CROSSDOMAIN_ERROR",e[e.WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES=14]="WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES",e[e.WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR=15]="WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR",e[e.WEBIM_CONNCTION_DISCONNECTED=16]="WEBIM_CONNCTION_DISCONNECTED",e[e.WEBIM_CONNCTION_AJAX_ERROR=17]="WEBIM_CONNCTION_AJAX_ERROR",e[e.WEBIM_CONNCTION_JOINROOM_ERROR=18]="WEBIM_CONNCTION_JOINROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOM_ERROR=19]="WEBIM_CONNCTION_GETROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOMINFO_ERROR=20]="WEBIM_CONNCTION_GETROOMINFO_ERROR",e[e.WEBIM_CONNCTION_GETROOMMEMBER_ERROR=21]="WEBIM_CONNCTION_GETROOMMEMBER_ERROR",e[e.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR=22]="WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR",e[e.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR=23]="WEBIM_CONNCTION_LOAD_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR=24]="WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_JOINCHATROOM_ERROR=25]="WEBIM_CONNCTION_JOINCHATROOM_ERROR",e[e.WEBIM_CONNCTION_QUITCHATROOM_ERROR=26]="WEBIM_CONNCTION_QUITCHATROOM_ERROR",e[e.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR=27]="WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR=28]="WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR=29]="WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR=30]="WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_CALLBACK_INNER_ERROR=31]="WEBIM_CONNCTION_CALLBACK_INNER_ERROR",e[e.WEBIM_CONNCTION_CLIENT_OFFLINE=32]="WEBIM_CONNCTION_CLIENT_OFFLINE",e[e.WEBIM_CONNCTION_CLIENT_LOGOUT=33]="WEBIM_CONNCTION_CLIENT_LOGOUT",e[e.WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR=34]="WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR",e[e.WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP=35]="WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP=36]="WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_ACCEPT_JOIN_GROUP=37]="WEBIM_CONNECTION_ACCEPT_JOIN_GROUP",e[e.WEBIM_CONNECTION_DECLINE_JOIN_GROUP=38]="WEBIM_CONNECTION_DECLINE_JOIN_GROUP",e[e.WEBIM_CONNECTION_CLOSED=39]="WEBIM_CONNECTION_CLOSED",e[e.WEBIM_CONNECTION_ERROR=40]="WEBIM_CONNECTION_ERROR",e[e.MAX_LIMIT=50]="MAX_LIMIT",e[e.MESSAGE_NOT_FOUND=51]="MESSAGE_NOT_FOUND",e[e.NO_PERMISSION=52]="NO_PERMISSION",e[e.OPERATION_UNSUPPORTED=53]="OPERATION_UNSUPPORTED",e[e.OPERATION_NOT_ALLOWED=54]="OPERATION_NOT_ALLOWED",e[e.LOCAL_DB_OPERATION_FAILED=55]="LOCAL_DB_OPERATION_FAILED",e[e.WEBIM_TOKEN_EXPIRED=56]="WEBIM_TOKEN_EXPIRED",e[e.WEBIM_SERVER_SERVING_DISABLED=57]="WEBIM_SERVER_SERVING_DISABLED",e[e.WEBIM_UPLOADFILE_BROWSER_ERROR=100]="WEBIM_UPLOADFILE_BROWSER_ERROR",e[e.WEBIM_UPLOADFILE_ERROR=101]="WEBIM_UPLOADFILE_ERROR",e[e.WEBIM_UPLOADFILE_NO_LOGIN=102]="WEBIM_UPLOADFILE_NO_LOGIN",e[e.WEBIM_UPLOADFILE_NO_FILE=103]="WEBIM_UPLOADFILE_NO_FILE",e[e.WEBIM_DOWNLOADFILE_ERROR=200]="WEBIM_DOWNLOADFILE_ERROR",e[e.WEBIM_DOWNLOADFILE_NO_LOGIN=201]="WEBIM_DOWNLOADFILE_NO_LOGIN",e[e.WEBIM_DOWNLOADFILE_BROWSER_ERROR=202]="WEBIM_DOWNLOADFILE_BROWSER_ERROR",e[e.PARSE_FILE_ERROR=203]="PARSE_FILE_ERROR",e[e.USER_NOT_FOUND=204]="USER_NOT_FOUND",e[e.MESSAGE_PARAMETER_ERROR=205]="MESSAGE_PARAMETER_ERROR",e[e.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE=206]="WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE",e[e.WEBIM_CONNCTION_USER_REMOVED=207]="WEBIM_CONNCTION_USER_REMOVED",e[e.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD=216]="WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD",e[e.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE=217]="WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE",e[e.USER_MUTED_BY_ADMIN=219]="USER_MUTED_BY_ADMIN",e[e.USER_NOT_FRIEND=221]="USER_NOT_FRIEND",e[e.WEBIM_MESSAGE_REC_TEXT=300]="WEBIM_MESSAGE_REC_TEXT",e[e.WEBIM_MESSAGE_REC_TEXT_ERROR=301]="WEBIM_MESSAGE_REC_TEXT_ERROR",e[e.WEBIM_MESSAGE_REC_EMOTION=302]="WEBIM_MESSAGE_REC_EMOTION",e[e.WEBIM_MESSAGE_REC_PHOTO=303]="WEBIM_MESSAGE_REC_PHOTO",e[e.WEBIM_MESSAGE_REC_AUDIO=304]="WEBIM_MESSAGE_REC_AUDIO",e[e.WEBIM_MESSAGE_REC_AUDIO_FILE=305]="WEBIM_MESSAGE_REC_AUDIO_FILE",e[e.WEBIM_MESSAGE_REC_VEDIO=306]="WEBIM_MESSAGE_REC_VEDIO",e[e.WEBIM_MESSAGE_REC_VEDIO_FILE=307]="WEBIM_MESSAGE_REC_VEDIO_FILE",e[e.WEBIM_MESSAGE_REC_FILE=308]="WEBIM_MESSAGE_REC_FILE",e[e.WEBIM_MESSAGE_SED_TEXT=309]="WEBIM_MESSAGE_SED_TEXT",e[e.WEBIM_MESSAGE_SED_EMOTION=310]="WEBIM_MESSAGE_SED_EMOTION",e[e.WEBIM_MESSAGE_SED_PHOTO=311]="WEBIM_MESSAGE_SED_PHOTO",e[e.WEBIM_MESSAGE_SED_AUDIO=312]="WEBIM_MESSAGE_SED_AUDIO",e[e.WEBIM_MESSAGE_SED_AUDIO_FILE=313]="WEBIM_MESSAGE_SED_AUDIO_FILE",e[e.WEBIM_MESSAGE_SED_VEDIO=314]="WEBIM_MESSAGE_SED_VEDIO",e[e.WEBIM_MESSAGE_SED_VEDIO_FILE=315]="WEBIM_MESSAGE_SED_VEDIO_FILE",e[e.WEBIM_MESSAGE_SED_FILE=316]="WEBIM_MESSAGE_SED_FILE",e[e.WEBIM_MESSAGE_SED_ERROR=317]="WEBIM_MESSAGE_SED_ERROR",e[e.STATUS_INIT=400]="STATUS_INIT",e[e.STATUS_DOLOGIN_USERGRID=401]="STATUS_DOLOGIN_USERGRID",e[e.STATUS_DOLOGIN_IM=402]="STATUS_DOLOGIN_IM",e[e.STATUS_OPENED=403]="STATUS_OPENED",e[e.STATUS_CLOSING=404]="STATUS_CLOSING",e[e.STATUS_CLOSED=405]="STATUS_CLOSED",e[e.STATUS_ERROR=406]="STATUS_ERROR",e[e.SERVER_BUSY=500]="SERVER_BUSY",e[e.MESSAGE_INCLUDE_ILLEGAL_CONTENT=501]="MESSAGE_INCLUDE_ILLEGAL_CONTENT",e[e.MESSAGE_EXTERNAL_LOGIC_BLOCKED=502]="MESSAGE_EXTERNAL_LOGIC_BLOCKED",e[e.SERVER_UNKNOWN_ERROR=503]="SERVER_UNKNOWN_ERROR",e[e.MESSAGE_RECALL_TIME_LIMIT=504]="MESSAGE_RECALL_TIME_LIMIT",e[e.SERVICE_NOT_ENABLED=505]="SERVICE_NOT_ENABLED",e[e.SERVICE_NOT_ALLOW_MESSAGING=506]="SERVICE_NOT_ALLOW_MESSAGING",e[e.SERVICE_NOT_ALLOW_MESSAGING_MUTE=507]="SERVICE_NOT_ALLOW_MESSAGING_MUTE",e[e.MESSAGE_MODERATION_BLOCKED=508]="MESSAGE_MODERATION_BLOCKED",e[e.MESSAGE_CURRENT_LIMITING=509]="MESSAGE_CURRENT_LIMITING",e[e.MESSAGE_WEBSOCKET_DISCONNECTED=510]="MESSAGE_WEBSOCKET_DISCONNECTED",e[e.MESSAGE_SIZE_LIMIT=511]="MESSAGE_SIZE_LIMIT",e[e.GROUP_NOT_EXIST=605]="GROUP_NOT_EXIST",e[e.GROUP_NOT_JOINED=602]="GROUP_NOT_JOINED",e[e.GROUP_MEMBERS_FULL=606]="GROUP_MEMBERS_FULL",e[e.PERMISSION_DENIED=603]="PERMISSION_DENIED",e[e.WEBIM_LOAD_MSG_ERROR=604]="WEBIM_LOAD_MSG_ERROR",e[e.GROUP_ALREADY_JOINED=601]="GROUP_ALREADY_JOINED",e[e.GROUP_MEMBERS_LIMIT=607]="GROUP_MEMBERS_LIMIT",e[e.GROUP_IS_DISABLED=608]="GROUP_IS_DISABLED",e[e.GROUP_MEMBER_ATTRIBUTES_SET_FAILED=609]="GROUP_MEMBER_ATTRIBUTES_SET_FAILED",e[e.REST_PARAMS_STATUS=700]="REST_PARAMS_STATUS",e[e.CHATROOM_NOT_JOINED=702]="CHATROOM_NOT_JOINED",e[e.CHATROOM_MEMBERS_FULL=704]="CHATROOM_MEMBERS_FULL",e[e.CHATROOM_NOT_EXIST=705]="CHATROOM_NOT_EXIST",e[e.SDK_RUNTIME_ERROR=999]="SDK_RUNTIME_ERROR",e[e.PRESENCE_PARAM_EXCEED=1100]="PRESENCE_PARAM_EXCEED",e[e.REACTION_ALREADY_ADDED=1101]="REACTION_ALREADY_ADDED",e[e.REACTION_CREATING=1102]="REACTION_CREATING",e[e.REACTION_OPERATION_IS_ILLEGAL=1103]="REACTION_OPERATION_IS_ILLEGAL",e[e.TRANSLATION_NOT_VALID=1200]="TRANSLATION_NOT_VALID",e[e.TRANSLATION_TEXT_TOO_LONG=1201]="TRANSLATION_TEXT_TOO_LONG",e[e.TRANSLATION_FAILED=1204]="TRANSLATION_FAILED",e[e.THREAD_NOT_EXIST=1300]="THREAD_NOT_EXIST",e[e.THREAD_ALREADY_EXIST=1301]="THREAD_ALREADY_EXIST",e[e.MODIFY_MESSAGE_NOT_EXIST=1302]="MODIFY_MESSAGE_NOT_EXIST",e[e.MODIFY_MESSAGE_FORMAT_ERROR=1303]="MODIFY_MESSAGE_FORMAT_ERROR",e[e.MODIFY_MESSAGE_FAILED=1304]="MODIFY_MESSAGE_FAILED",e[e.CONVERSATION_NOT_EXIST=1400]="CONVERSATION_NOT_EXIST"}(n||(n={}))},4723:function(e,t,r){"use strict";var n;r.d(t,{s:function(){return n}}),function(e){e[e.mark_0=0]="mark_0",e[e.mark_1=1]="mark_1",e[e.mark_2=2]="mark_2",e[e.mark_3=3]="mark_3",e[e.mark_4=4]="mark_4",e[e.mark_5=5]="mark_5",e[e.mark_6=6]="mark_6",e[e.mark_7=7]="mark_7",e[e.mark_8=8]="mark_8",e[e.mark_9=9]="mark_9",e[e.mark_10=10]="mark_10",e[e.mark_11=11]="mark_11",e[e.mark_12=12]="mark_12",e[e.mark_13=13]="mark_13",e[e.mark_14=14]="mark_14",e[e.mark_15=15]="mark_15",e[e.mark_16=16]="mark_16",e[e.mark_17=17]="mark_17",e[e.mark_18=18]="mark_18",e[e.mark_19=19]="mark_19"}(n||(n={}))},8678:function(e,t,r){"use strict";r.d(t,{om:function(){return O},i9:function(){return N},RD:function(){return I},RG:function(){return P},QM:function(){return k},Wp:function(){return L}}),r(8706),r(4423),r(5276),r(3792),r(8921),r(4782),r(907),r(2010),r(2892),r(9085),r(9432),r(6099),r(3362),r(8781),r(7764),r(2953),r(3296),r(7208),r(8408);var n=r(1531),o=(r(1699),function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)}),i=function(e,t,r,i){var a,s,c,u,l,p,d,h,f,m,v,y,g,_,E,T,R,O,I,S,C,A,b,N=e.response;N&&"string"==typeof N&&(N=JSON.parse(N));var M=e.status,w={elapse:i,httpCode:M,errDesc:null==N?void 0:N.error_description};if(400===M){if(40002===N.error_code)return void t({type:n.C.THREAD_ALREADY_EXIST,message:null==N?void 0:N.error_description,extraInfo:w});if(40009===N.error_code)return void t({type:n.C.OPERATION_UNSUPPORTED,message:null==N?void 0:N.error_description,extraInfo:w});if(60005===N.error_code)return void t({type:n.C.GROUP_MEMBER_ATTRIBUTES_SET_FAILED,message:(null==N?void 0:N.desc)||(null==N?void 0:N.error_description),extraInfo:w});if(60010===N.error_code)return void((null==N?void 0:N.error_description.includes("exceeds chatgroup user metadata single value limit"))?t({type:n.C.MAX_LIMIT,message:(null==N?void 0:N.desc)||N.error_description,extraInfo:w}):t({type:n.C.NO_PERMISSION,message:(null==N?void 0:N.desc)||N.error_description,extraInfo:w}));if(60011===N.error_code)return void t({type:n.C.CHATROOM_NOT_JOINED,message:null==N?void 0:N.desc,extraInfo:w});if(14403===N.error_code)return void t({type:n.C.WEBIM_UPLOADFILE_ERROR,message:null==N?void 0:N.error_description,data:N,extraInfo:w});if(60006===N.error_code||60007===N.error_code||60009===N.error_code||60012===N.error_code)return void t({type:n.C.MAX_LIMIT,message:(null==N?void 0:N.desc)||(null==N?void 0:N.error_description),extraInfo:w});if(91104===N.error_code)return void t({type:n.C.NO_PERMISSION,message:null==N?void 0:N.error_description,extraInfo:w});if(null===(a=N.error_description)||void 0===a?void 0:a.includes("are not members of this group"))return(null===(s=e.responseURL)||void 0===s?void 0:s.includes("chatgroups"))?t({type:n.C.GROUP_NOT_JOINED,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):t({type:n.C.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:N.error_description,extraInfo:w}),void r({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,message:null==N?void 0:N.error_description,data:e.responseText,extraInfo:w});if("the app not open presence"===(null==N?void 0:N.result))return void t({type:n.C.SERVICE_NOT_ENABLED,message:null==N?void 0:N.result,extraInfo:w});if(null==N?void 0:N.error_description.includes("remark length must less"))return void t({type:n.C.MAX_LIMIT,message:null==N?void 0:N.error_description,extraInfo:w});switch(null==N?void 0:N.error_description){case"the user is already operation this message":t({type:n.C.REACTION_ALREADY_ADDED,message:null==N?void 0:N.error_description,extraInfo:w});break;case"The quantity has exceeded the limit!":t({type:n.C.MAX_LIMIT,message:null==N?void 0:N.error_description,extraInfo:w});break;case"The user not in this group!":t({type:n.C.GROUP_NOT_JOINED,message:null==N?void 0:N.error_description,extraInfo:w});break;case"the user operation is illegal!":t({type:n.C.REACTION_OPERATION_IS_ILLEGAL,message:null==N?void 0:N.error_description,extraInfo:w});break;case"this appKey is not open reaction service!":case"this appKey not open message roaming":t({type:n.C.SERVICE_NOT_ENABLED,message:null==N?void 0:N.error_description,extraInfo:w});break;case"this message is creating reaction, please try again.":t({type:n.C.REACTION_CREATING,message:null==N?void 0:N.error_description,extraInfo:w});break;case"groupId can not be null!":t({type:n.C.GROUP_NOT_EXIST,message:null==N?void 0:N.error_description,extraInfo:w});break;case"The input text is too long.":t({type:n.C.TRANSLATION_TEXT_TOO_LONG,message:null==N?void 0:N.error_description,extraInfo:w});break;case"The target language is not valid.":t({type:n.C.TRANSLATION_NOT_VALID,message:null==N?void 0:N.error_description,extraInfo:w});break;case"report failed, get message by id failed":t({type:n.C.MESSAGE_NOT_FOUND,message:null==N?void 0:N.error_description,extraInfo:w});break;case"ext is too big ":t({type:n.C.PRESENCE_PARAM_EXCEED,message:null==N?void 0:N.error_description,extraInfo:w});break;case"Request body not readable.Please check content type is correct!":case"param mark must be not empty, please check!":case"param mark illegal, please check it!":case"param pin_msg_id illegal, please check it!":case"param type only allow [groupchat,chatroom]!, please check!":t({type:n.C.REQUEST_PARAMETER_ERROR,message:null==N?void 0:N.error_description,extraInfo:w});break;case"updateRemark | they are not friends, please add as a friend first.":t({type:n.C.USER_NOT_FRIEND,message:null==N?void 0:N.error_description,extraInfo:w});break;default:t({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,message:null==N?void 0:N.error_description,data:e.responseText,extraInfo:w}),r({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,message:null==N?void 0:N.error_description,data:e.responseText,extraInfo:w})}}else if(401===M)40001===N.error_code||60001===N.error_code||"Unable to authenticate (OAuth)"===N.error_description?t({type:n.C.NO_PERMISSION,message:null==N?void 0:N.error_description,extraInfo:w}):(r({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:w}),t({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:w}));else if(403===M)4e4===N.error_code||60004===N.error_code||15002===N.error_code?t({type:n.C.SERVICE_NOT_ENABLED,message:null==N?void 0:N.error_description,extraInfo:w}):40003===N.error_code||40004===N.error_code?t({type:n.C.THREAD_ALREADY_EXIST,message:null==N?void 0:N.error_description,extraInfo:w}):40005===N.error_code||40007===N.error_code||91002===N.error_code?t({type:n.C.MAX_LIMIT,message:null==N?void 0:N.error_description,extraInfo:w}):60002===N.error_code?t({type:n.C.PERMISSION_DENIED,message:null==N?void 0:N.error_description,extraInfo:w}):91101===N.error_code?t({type:n.C.MAX_LIMIT,message:null==N?void 0:N.error_description,extraInfo:w}):91102===N.error_code&&t({type:n.C.REQUEST_PARAMETER_ERROR,message:N.error_description,extraInfo:w}),"group member list is full!"===N.error_description?(null===(c=e.responseURL)||void 0===c?void 0:c.includes("chatgroups"))?t({type:n.C.GROUP_MEMBERS_FULL,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):t({type:n.C.CHATROOM_MEMBERS_FULL,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):(null===(u=N.error_description)||void 0===u?void 0:u.includes(N.error_description.includes("already in group")))?(null===(l=e.responseURL)||void 0===l?void 0:l.includes("chatgroups"))&&t({type:n.C.GROUP_ALREADY_JOINED,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):(null===(p=N.error_description)||void 0===p?void 0:p.includes("are not members of this group"))?(null===(d=e.responseURL)||void 0===d?void 0:d.includes("chatgroups"))?t({type:n.C.GROUP_NOT_JOINED,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):t({type:n.C.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):(null===(h=N.error_description)||void 0===h?void 0:h.includes("service not open!"))||(null===(f=N.error_description)||void 0===f?void 0:f.includes("message report not open"))||(null===(m=N.error_description)||void 0===m?void 0:m.includes("messageroaming function not open"))?t({type:n.C.SERVICE_NOT_ENABLED,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):(null===(v=N.error_description)||void 0===v?void 0:v.includes("members size is greater than max user size !"))?t({type:n.C.GROUP_MEMBERS_LIMIT,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):(null===(y=N.error_description)||void 0===y?void 0:y.includes("can not operate this group, reason: group is disabled"))?t({type:n.C.GROUP_IS_DISABLED,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):(null===(g=N.error_description)||void 0===g?void 0:g.includes("Invitee's contact max count"))||(null===(_=N.error_description)||void 0===_?void 0:_.includes("Inviter's contact max count"))?t({type:n.C.MAX_LIMIT,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):t({type:n.C.PERMISSION_DENIED,data:e.response||e.responseText,message:"permission denied",extraInfo:o(o({},w),{errDesc:"permission denied"})}),r({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:w});else if(404===M)40011===N.error_code?t({type:n.C.THREAD_NOT_EXIST,message:null==N?void 0:N.error_description,extraInfo:w}):40012===N.error_code?t({type:n.C.NO_PERMISSION,message:null==N?void 0:N.error_description,extraInfo:w}):60003===N.error_code||20004===N.error_code?t({type:n.C.GROUP_NOT_JOINED,message:null==N?void 0:N.error_description,extraInfo:w}):91001===N.error_code&&t({type:n.C.CONVERSATION_NOT_EXIST,message:null==N?void 0:N.error_description,extraInfo:w}),(null===(E=N.error_description)||void 0===E?void 0:E.includes("do not find this group"))||(null===(T=N.error_description)||void 0===T?void 0:T.includes("does not exist"))?(null===(R=e.responseURL)||void 0===R?void 0:R.includes("chatgroups"))?t({type:n.C.GROUP_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:o(o({},w),{errDesc:"The chat room dose not exist."})}):t({type:n.C.CHATROOM_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:o(o({},w),{errDesc:"The chat room dose not exist."})}):(null===(O=N.error_description)||void 0===O?void 0:O.includes("username"))&&(null===(I=N.error_description)||void 0===I?void 0:I.includes("doesn't exist!'"))||(null===(S=N.error_description)||void 0===S?void 0:S.includes("user not found"))||(null===(C=N.error_description)||void 0===C?void 0:C.includes("Service resource not found"))&&"UserNotFoundException"===(null==N?void 0:N.exception)?t({type:n.C.USER_NOT_FOUND,data:e.response||e.responseText,message:N.error_description,extraInfo:w}):N.error_description.includes("user session pin message not exist")?t({type:n.C.MESSAGE_NOT_FOUND,message:N.error_description,extraInfo:w}):t({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:w}),r({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:w});else if(406===M)90004===N.error_code&&t({type:n.C.OPERATION_NOT_ALLOWED,message:null==N?void 0:N.error_description,extraInfo:w});else if(429===M||503===M){if(null===(A=N.error_description)||void 0===A?void 0:A.includes("The request has reached the maximum limit"))return void t({type:n.C.MAX_LIMIT,message:e.responseText,extraInfo:w});t({type:n.C.SERVER_BUSY,data:e.response||e.responseText,message:"Server is busy.",extraInfo:o(o({},w),{errDesc:"Server is busy."})}),r({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"Server is busy.",extraInfo:o(o({},w),{errDesc:"Server is busy."})})}else if(500===M){if(40006===N.error_code||40008===N.error_code||40010===N.error_code)return void t({type:n.C.SERVER_UNKNOWN_ERROR,message:null==N?void 0:N.error_description,extraInfo:w});if(90005===N.error_code||99999===N.error_code)return void t({type:n.C.REQUEST_UNKNOWN,message:null==N?void 0:N.error_description,extraInfo:w});if(null===(b=N.error_description)||void 0===b?void 0:b.includes("translte failed!"))return void t({type:n.C.TRANSLATION_FAILED,message:e.responseText,extraInfo:w});t({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:w}),r({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:w})}else t({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:o(o({},w),{errDesc:"ajax error"})}),r({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:o(o({},w),{errDesc:"ajax error"})})},a=r(3893),s=r(75),c=r(2056),u=5242880,l=5242880,p={size:0},d=(r(2675),r(9463),r(2259),r(8980),r(2712),r(4554),function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)});function h(){var e=this.context,t=e.orgName,r=e.appName,n=e.accessToken,o={url:"".concat(this.apiUrl,"/").concat(t,"/").concat(r,"/sdk/chatfiles/part-upload"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+n}};return c.vF.debug("Call multipartInit"),I.call(this,o,a.jz.SDK_INTERNAL).then((function(e){var t=e.entities[0];return{data:{fileMaxSize:t.file_upper_limit,partMinSize:t.part_lower_limit,uuid:t.uuid},extraInfo:e.extraInfo,type:e.type}}))}function f(e){var t=this;return new Promise((function(r,o){var i=(new Date).getTime(),a=t.context,s=a.orgName,u=a.appName,l=a.accessToken,p=e.uuid,h=e.partNumber,f=e.part,m=e.onProgress,v="".concat(t.apiUrl,"/").concat(s,"/").concat(u,"/sdk/chatfiles/part-upload/").concat(p),y=new XMLHttpRequest;c.vF.debug("Call multipartUpload"),y.upload&&y.upload.addEventListener("progress",(function(e){null==m||m(e)}),!1),y.addEventListener("abort",(function(){o({type:n.C.REQUEST_ABORT,message:"Request Abort",errorType:"onabort",xhr:y,extraInfo:{elapse:(new Date).getTime()-i,httpCode:y.status||-1,errDesc:"Request Abort",url:v}})}),!1),y.addEventListener("error",(function(){o({type:n.C.WEBIM_UPLOADFILE_ERROR,data:y,extraInfo:{elapse:(new Date).getTime()-i,httpCode:y.status||-1,errDesc:"request error",url:v}})}),!1),y.addEventListener("load",(function(){try{var e=JSON.parse(y.responseText);if(200!==y.status)return o({type:n.C.WEBIM_UPLOADFILE_ERROR,data:e,extraInfo:{elapse:(new Date).getTime()-i,httpCode:y.status||-1,errDesc:"part upload failed",url:v}}),!1;try{r(d(d({},e),{extraInfo:{elapse:(new Date).getTime()-i,httpCode:y.status||-1,url:v}}))}catch(e){o({type:n.C.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:e,extraInfo:{elapse:(new Date).getTime()-i,httpCode:y.status||-1,errDesc:"part upload failed",url:v}})}}catch(e){o({type:n.C.WEBIM_UPLOADFILE_ERROR,data:y.responseText,extraInfo:{elapse:(new Date).getTime()-i,httpCode:y.status||-1,errDesc:"part upload failed",url:v}})}}),!1);var g=new FormData;g.append("part_file",f),g.append("part_number",h),y.open("PUT",v),y.setRequestHeader("restrict-access","true"),y.setRequestHeader("Accept","*/*"),y.setRequestHeader("Authorization","Bearer "+l),y.send(g)}))}function m(e){var t=e.uuid,r=e.thumbnailHeight,n=e.thumbnailWidth,o=this.context,i=o.orgName,s=o.appName,u=o.accessToken,l="".concat(this.apiUrl,"/").concat(i,"/").concat(s,"/sdk/chatfiles/part-upload/").concat(t,"?restrict-access=true");n&&(l+="&thumbnail-width=".concat(n)),r&&(l+="&thumbnail-height=".concat(r));var p={url:l,dataType:"json",type:"POST",headers:{Authorization:"Bearer "+u}};return c.vF.debug("Call multipartComplete"),I.call(this,p,a.jz.SDK_INTERNAL)}function v(e){var t=e.uuid,r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/sdk/chatfiles/part-upload/").concat(t),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+i}};return c.vF.debug("Call multipartAbort"),I.call(this,s,a.jz.SDK_INTERNAL)}var y=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},g=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},_=function(){function e(e,t){var r=this;this.handleUploadProgress=function(e,t){var n,o;if(e.total){r.progressArr[t]=e.loaded;var i=r.progressArr.reduce((function(e,t){return e+t}),0);null===(o=(n=r.options).onFileUploadProgress)||void 0===o||o.call(n,{isTrusted:e.isTrusted,type:e.type,loaded:i>r.file.size?r.file.size:i,total:r.file.size,lengthComputable:e.lengthComputable})}},this.uuid="",this.pool=[],this.progressArr=[],this.connection=e,this.options=t,this.partSize=u,this.file=t.file,this.init(),this.rpt=this.connection.dataReport.geOperateFun({operationName:a.jz.REST_UPLOAD_FILE_IN_PARTS})}return e.prototype.init=function(){var e,t,r,o;return y(this,void 0,void 0,(function(){var i,s,l,d,f,m,v,y,_,E,T,R,O,I,S;return g(this,(function(g){switch(g.label){case 0:return g.trys.push([0,4,,6]),[4,h.call(this.connection)];case 1:return i=g.sent(),s=i.data||{},l=s.fileMaxSize,d=void 0===l?0:l,f=s.partMinSize,m=void 0===f?u:f,v=s.uuid,y=void 0===v?"":v,_=i.extraInfo,R=_.elapse,O=_.httpCode,S=_.url,this.partSize=m,this.uuid=y,p.size=m,c.vF.debug("multipartInit success","uuid: ".concat(y),"fileMaxSize: ".concat(d),"partMinSize: ".concat(m)),this.file.size>d?[4,this.multipartAbort()]:[3,3];case 2:return g.sent(),null===(t=(e=this.options).onFileUploadError)||void 0===t||t.call(e,{code:n.C.WEBIM_UPLOADFILE_ERROR,message:"The file size exceeds the maximum limit"}),[2];case 3:return this.rpt({data:{requestUrl:S,requestName:a.TT.REST_INIT_UPLOAD_TASK_IN_PARTS,requestElapse:R,requestMethod:"POST",isSuccess:1,code:O}}),this.upload(),[3,6];case 4:return E=g.sent(),T=(null==E?void 0:E.extraInfo)||{},R=T.elapse,O=T.httpCode,I=T.errDesc,S=T.url,this.rpt({data:{requestUrl:S,requestName:a.TT.REST_INIT_UPLOAD_TASK_IN_PARTS,requestElapse:R,requestMethod:"POST",isSuccess:0,codeDesc:I,code:O}}),[4,this.multipartAbort()];case 5:return g.sent(),null===(o=null===(r=this.options)||void 0===r?void 0:r.onInitFail)||void 0===o||o.call(r),[3,6];case 6:return[2]}}))}))},e.prototype.upload=function(){var e,t,r;return y(this,void 0,void 0,(function(){var n,o,i,s,c,u,l=this;return g(this,(function(p){switch(p.label){case 0:(new FileReader).readAsArrayBuffer(this.file),n=this.file.size,o=Math.ceil(n/this.partSize),p.label=1;case 1:p.trys.push([1,7,,9]),i=function(t){var r,o,i,c;return g(this,(function(u){switch(u.label){case 0:return r=t*s.partSize,o=Math.min(n,r+s.partSize),i=null===(e=s.file)||void 0===e?void 0:e.slice(r,o),(c=f.call(s.connection,{uuid:s.uuid,partNumber:"".concat(t+1),part:i,onProgress:function(e){l.handleUploadProgress(e,t)}})).then((function(e){var t=(null==e?void 0:e.extraInfo)||{},r=t.elapse,n=t.httpCode,o=t.url;l.rpt({data:{requestUrl:o,requestName:a.TT.REST_UPLOAD_PART,requestElapse:r,isSuccess:1,requestMethod:"PUT",code:n}}),l.handleTask(c)})),c.catch((function(e){var t=(null==e?void 0:e.extraInfo)||{},r=t.elapse,n=t.httpCode,o=t.url,i=t.errDesc;l.rpt({data:{requestUrl:o,requestName:a.TT.REST_UPLOAD_PART,requestElapse:r,isSuccess:0,requestMethod:"PUT",code:n,codeDesc:i}}),delete e.extraInfo})),s.pool.push(c),4!==s.pool.length?[3,2]:[4,Promise.race(s.pool)];case 1:u.sent(),u.label=2;case 2:return[2]}}))},s=this,c=0,p.label=2;case 2:return c<o?[5,i(c)]:[3,5];case 3:p.sent(),p.label=4;case 4:return c++,[3,2];case 5:return[4,Promise.all(this.pool)];case 6:return p.sent(),this.multipartComplete(),[3,9];case 7:return u=p.sent(),[4,this.multipartAbort()];case 8:return p.sent(),this.rpt({data:{isLastApi:1,isSuccess:0}}),null===(r=(t=this.options).onFileUploadError)||void 0===r||r.call(t,u),[3,9];case 9:return[2]}}))}))},e.prototype.multipartComplete=function(){var e,t,r,n;return y(this,void 0,void 0,(function(){var o,i,s,c,u,l,p,d,h,f,v;return g(this,(function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),o=this.options.thumbnailInfo||{},i=o.width,s=o.height,[4,m.call(this.connection,{uuid:this.uuid,thumbnailHeight:s,thumbnailWidth:i})];case 1:return c=y.sent(),u=(null==c?void 0:c.extraInfo)||{},d=u.elapse,h=u.httpCode,v=u.url,this.rpt({data:{requestUrl:v,requestName:a.TT.REST_COMPLETE_UPLOAD_PART,requestElapse:d,requestMethod:"POST",isSuccess:1,code:h}}),this.rpt({data:{isLastApi:1,isSuccess:1}}),null===(t=(e=this.options).onFileUploadComplete)||void 0===t||t.call(e,c),[3,3];case 2:return l=y.sent(),p=(null==l?void 0:l.extraInfo)||{},d=p.elapse,h=p.httpCode,f=p.errDesc,v=p.url,this.rpt({data:{requestUrl:v,requestName:a.TT.REST_COMPLETE_UPLOAD_PART,requestElapse:d,requestMethod:"POST",isSuccess:0,codeDesc:f,code:h}}),this.rpt({data:{isLastApi:1,isSuccess:0}}),null===(n=(r=this.options).onFileUploadError)||void 0===n||n.call(r,l),[3,3];case 3:return[2]}}))}))},e.prototype.multipartAbort=function(){return y(this,void 0,void 0,(function(){var e,t,r,n,o,i,s,c;return g(this,(function(u){switch(u.label){case 0:if(!this.uuid)return[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,v.call(this.connection,{uuid:this.uuid})];case 2:return e=u.sent(),t=(null==e?void 0:e.extraInfo)||{},o=t.elapse,i=t.httpCode,c=t.url,this.rpt({data:{requestUrl:c,requestName:a.TT.REST_ABORT_UPLOAD_PART,requestElapse:o,requestMethod:"DELETE",isSuccess:1,code:i}}),[3,4];case 3:return r=u.sent(),n=(null==r?void 0:r.extraInfo)||{},o=n.elapse,i=n.httpCode,s=n.errDesc,c=n.url,this.rpt({data:{requestUrl:c,requestName:a.TT.REST_ABORT_UPLOAD_PART,requestElapse:o,requestMethod:"DELETE",isSuccess:0,codeDesc:s,code:i}}),[3,4];case 4:return[2]}}))}))},e.prototype.handleTask=function(e){var t=this.pool.findIndex((function(t){return t===e}));this.pool.splice(t,1)},e}(),E=_,T=function(e){var t=this,r=(new Date).getTime(),o=e.apiUrl,i=e.orgName,s=e.appName,c=e.operateName,u=e.accessToken,l=e.uploadUrl||"".concat(o,"/").concat(i,"/").concat(s,"/chatfiles"),p=function(n){var o=(new Date).getTime()-r;t.dataReport&&c&&[a.jz.UPLOAD_MSG_ATTACH,a.jz.UPLOAD_CHATROOM_FILE,a.jz.UPLOAD_GROUP_FILE].includes(c)&&t.dataReport.geOperateFun({operationName:c})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:c,requestElapse:o,requestUrl:l,code:(null==d?void 0:d.status)||0,codeDesc:"upload file error"}}),e.onFileUploadError&&e.onFileUploadError(n)},d=new XMLHttpRequest;d.upload&&d.upload.addEventListener("progress",e.onFileUploadProgress||O,!1),d.addEventListener("abort",e.onFileUploadCanceled||O,!1),d.addEventListener("error",(function(e){p({type:n.C.WEBIM_UPLOADFILE_ERROR,data:d})}),!1),d.addEventListener("load",(function(o){try{var i=JSON.parse(d.responseText);if(400===d.status)return p({type:n.C.WEBIM_UPLOADFILE_ERROR,data:i}),!1;try{!function(n){var o=(new Date).getTime()-r;t.dataReport&&c&&[a.jz.UPLOAD_MSG_ATTACH,a.jz.UPLOAD_CHATROOM_FILE,a.jz.UPLOAD_GROUP_FILE].includes(c)&&t.dataReport.geOperateFun({operationName:c})({isEndApi:!0,data:{isSuccess:(null==n?void 0:n.error)?0:1,requestMethod:"POST",requestName:c,requestElapse:o,requestUrl:l,code:d.status,codeDesc:(null==n?void 0:n.error_description)||""}}),e.onFileUploadComplete&&e.onFileUploadComplete(n)}(i)}catch(o){p({type:n.C.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:o})}}catch(o){p({type:n.C.WEBIM_UPLOADFILE_ERROR,data:d.responseText})}}),!1),d.open("POST",l),d.setRequestHeader("restrict-access","true"),d.setRequestHeader("Accept","*/*"),d.setRequestHeader("Authorization","Bearer "+u);var h=new FormData;h.append("file",e.file.data),e.thumbnailWidth&&h.append("thumbnail-width",e.thumbnailWidth+""),e.thumbnailHeight&&h.append("thumbnail-height",e.thumbnailHeight+""),d.send(h)},R=function(){return R=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)},O=function(){};function I(e,t){var r,o=this;return w().platform===N.WEB?new Promise((function(t,o){var a=e.dataType||"text",s=e.success||O,u=e.error||O,l=new XMLHttpRequest;l.ontimeout=function(){o({type:n.C.REQUEST_TIMEOUT,message:"Request Timeout",errorType:"timeout_error",xhr:l})},l.onerror=function(){o({type:n.C.REQUEST_UNKNOWN,message:"Request Unknow Error",errorType:"onerror",xhr:l})},l.onabort=function(){o({type:n.C.REQUEST_ABORT,message:"Request Abort",errorType:"onabort",xhr:l})},l.onreadystatechange=function(){if(4===l.readyState){var e=(new Date).getTime()-r,p=l.status||0,d={elapse:e,httpCode:p};if(200===p){L.ajaxUnconventionalErrorTimes=0;try{switch(a){case"text":return s(l.responseText),void t(l.responseText);case"json":var h=JSON.parse(l.responseText);return h.extraInfo=d,s(h),void t(h);case"xml":return l.responseXML&&l.responseXML.documentElement?(s(l.responseXML.documentElement),void t(l.responseXML.documentElement)):(u({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:l.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}),void o({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:l.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}));default:u({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:l.responseText,message:"Invalid dataType"}),o({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:l.responseText,message:"Invalid dataType"})}return t(l.response||l.responseText),void s(l.response||l.responseText,l)}catch(e){o(e)}return}[400,401,403,404,429,500,503].includes(p)||(c.vF.debug("rest api request fail status:",p),L.ajaxUnconventionalErrorTimes++),i(l,o,u,e)}0===l.readyState&&(u({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:l.responseText,message:"Request not initialized"}),o({type:n.C.WEBIM_CONNCTION_AJAX_ERROR,data:l.responseText,message:"Request not initialized"}))},e.responseType&&l.responseType&&(l.responseType=e.responseType),e.mimeType&&l.overrideMimeType(e.mimeType);var p=e.type||"POST",d=e.data||null,h="";if("get"===p.toLowerCase()&&d){for(var f in d)d.hasOwnProperty(f)&&(h+=f+"="+d[f]+"&");h=h?h.slice(0,-1):h,e.url+=(e.url.indexOf("?")>0?"&":"?")+(h?h+"&":h)+"_v="+(new Date).getTime(),d=null,h=""}r=(new Date).getTime(),l.open(p,e.url);var m=e.headers||{};for(var v in m["Content-Type"]||(m["Content-Type"]="application/json"),m)m.hasOwnProperty(v)&&l.setRequestHeader(v,m[v]);l.send(d)})).then((function(r){return o.dataReport&&t&&t!==a.jz.SDK_INTERNAL&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:R({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},x(r.extraInfo))}),t===a.jz.SDK_INTERNAL&&(r.extraInfo.url=e.url),t!==a.jz.SDK_INTERNAL&&delete r.extraInfo,"Object"===S(r)?R(R({},r),{type:n.C.REQUEST_SUCCESS}):{data:r,type:n.C.REQUEST_SUCCESS}})).catch((function(r){throw o.dataReport&&t&&t!==a.jz.SDK_INTERNAL&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:R({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},x(r.extraInfo))}),t===a.jz.SDK_INTERNAL&&(r.extraInfo.url=e.url),t!==a.jz.SDK_INTERNAL&&delete r.extraInfo,r})):C.call(this,e,t)}function S(e){return Object.prototype.toString.call(e).slice(8,-1)}function C(e,t){var r=this;return new Promise((function(t,r){var n=e.success||O,o=e.error||O,i=e.type||"POST",a=e.data||null,c="",u=(new Date).getTime(),l=L.getEnvInfo();if("get"===i.toLowerCase()&&a){for(var p in a)a.hasOwnProperty(p)&&(c+=p+"="+a[p]+"&");c=c?c.slice(0,-1):c,e.url+=(e.url.indexOf("?")>0?"&":"?")+(c?c+"&":c)+"_v="+(new Date).getTime(),a=null,c=""}var d={url:e.url,data:e.data,method:i,headers:{},success:function(e){var i,a,s,c,l,p={elapse:(new Date).getTime()-u,httpCode:Number((null===(i=e.statusCode)||void 0===i?void 0:i.toString())||(null===(a=e.status)||void 0===a?void 0:a.toString())),errDesc:(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.error_description)||""};if("200"===(null===(c=e.statusCode)||void 0===c?void 0:c.toString())||"200"===(null===(l=e.status)||void 0===l?void 0:l.toString())){e.data.extraInfo=p;var d=e.data;n(d),t(d)}else e.extraInfo=p,o(d=e),r(d)},complete:function(){},fail:function(e){var t={elapse:(new Date).getTime()-u,httpCode:s.XI,errDesc:"request:fail"};e.extraInfo=t,e.data={error:"request:fail",error_description:"request:fail"},o(e),r(e)}};if("zfb"===l.platform||"dd"===l.platform?d.headers=e.headers:d.header=e.headers,"dd"===l.platform)return dd.httpRequest(d);l.global.request(d)})).then((function(o){return r.dataReport&&t&&t!==a.jz.SDK_INTERNAL&&r.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:R({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},x(o.extraInfo))}),t!==a.jz.SDK_INTERNAL&&delete o.extraInfo,"Object"===S(o)?R(R({},o),{type:n.C.REQUEST_SUCCESS}):{data:o,type:n.C.REQUEST_SUCCESS}})).catch((function(n){throw r.dataReport&&t&&t!==a.jz.SDK_INTERNAL&&r.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:R({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},x(n.extraInfo))}),t!==a.jz.SDK_INTERNAL&&delete n.extraInfo,n}))}var A,b,N,M=(A=function(e,t){var r=w();if(r.platform!==N.WEB){var n=r.global,o=function(r){r.isConnected?e():t()};n.offNetworkStatusChange&&n.offNetworkStatusChange(o),n.onNetworkStatusChange&&n.onNetworkStatusChange(o)}else"undefined"!=typeof addEventListener&&(window.addEventListener("online",e),window.addEventListener("offline",t))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!A)return b;b=A.apply(void 0,e),A=null});function w(){return"undefined"!=typeof swan&&U(swan)?{platform:N.BAIDU,global:swan}:"undefined"!=typeof tt&&U(tt)?{platform:N.TT,global:tt}:"undefined"!=typeof dd&&U(dd)?{platform:N.DD,global:dd}:"undefined"!=typeof my&&U(my)?{platform:N.ZFB,global:my}:"undefined"!=typeof wx&&U(wx)?{platform:N.WX,global:wx}:"undefined"!=typeof qq&&U(qq)?{platform:N.QQ,global:qq}:"undefined"!=typeof uni&&U(uni)?{platform:N.UNI,global:uni}:"undefined"!=typeof window&&window.WebSocket?{platform:N.WEB,global:window}:{platform:N.NODE,global:r.g||{}}}function U(e){for(var t=["canIUse","getSystemInfo"],r=0,n=t.length;r<n;r++)if(!e[t[r]])return!1;return!0}function k(e,t){var r,o,i,a=this,s=e.accessToken,c=e.appKey,u=null===(o=null===(r=null==e?void 0:e.file)||void 0===r?void 0:r.data)||void 0===o?void 0:o.size,d=[],h="",f="";if(s)if(c&&(d=c.split("#"),h=d[0],f=d[1]),h||f)if(u<=0)e.onFileUploadError&&e.onFileUploadError({type:n.C.WEBIM_UPLOADFILE_ERROR,message:"fileSize must be greater than 0"});else if(e.uploadUrl)T.call(this,R(R({},e),{orgName:h,appName:f,operateName:t}));else{var m=p.size||l;this.uploadPartEnable&&u>1.5*m?new E(this,{file:null===(i=null==e?void 0:e.file)||void 0===i?void 0:i.data,onFileUploadProgress:e.onFileUploadProgress||O,onFileUploadComplete:e.onFileUploadComplete||O,onFileUploadError:e.onFileUploadError||O,onFileUploadCanceled:e.onFileUploadCanceled||O,onInitFail:function(){T.call(a,R(R({},e),{orgName:h,appName:f,operateName:t}))},thumbnailInfo:{width:e.thumbnailWidth,height:e.thumbnailHeight}}):T.call(this,R(R({},e),{orgName:h,appName:f,operateName:t}))}else e.onFileUploadError&&e.onFileUploadError({type:n.C.WEBIM_UPLOADFILE_ERROR,message:"AppKey illegal"});else e.onFileUploadError&&e.onFileUploadError({type:n.C.WEBIM_UPLOADFILE_NO_LOGIN,message:"AccessToken cannot be empty"})}function P(e,t){e.onFileDownloadComplete=e.onFileDownloadComplete||O,e.onFileDownloadError=e.onFileDownloadError||O;var r=(new Date).getTime(),o=new XMLHttpRequest,i=this;o.addEventListener("load",(function(n){var s=(new Date).getTime()-r;i.dataReport&&t&&t===a.jz.DOWN_GROUP_FILE&&i.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:200===o.status?1:0,requestMethod:"POST",requestName:t,requestElapse:s,requestUrl:null==e?void 0:e.url,code:o.status,codeDesc:200===o.status?"":"download file error"}}),e.onFileDownloadComplete&&e.onFileDownloadComplete(o.response)}),!1),o.addEventListener("error",(function(s){var c=(new Date).getTime()-r;i.dataReport&&t&&t===a.jz.DOWN_GROUP_FILE&&i.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:c,requestUrl:null==e?void 0:e.url,code:(null==o?void 0:o.status)||0,codeDesc:"download file error"}}),e.onFileDownloadError&&e.onFileDownloadError({type:n.C.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:o})}),!1);var s=e.method||"GET",c=e.responseType||"blob",u=e.mimeType||"text/plain; charset=x-user-defined";o.open(s,e.url),"undefined"!=typeof Blob?o.responseType=c:o.overrideMimeType(u);var l={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":e.secret,Authorization:"Bearer "+this.context.accessToken},p=e.headers||{};for(var d in p)l[d]=p[d];for(var d in l)l[d]&&o.setRequestHeader(d,l[d]);o.send(null)}function x(e){void 0===e&&(e={});var t=e.elapse,r=void 0===t?0:t,n=e.httpCode,o=void 0===n?0:n,i=e.errDesc;return{requestElapse:r,code:o,codeDesc:void 0===i?"":i}}!function(e){e.WEB="web",e.WX="wx",e.QQ="qq",e.ZFB="zfb",e.DD="dd",e.TT="tt",e.BAIDU="baidu",e.QUICK_APP="quick_app",e.UNI="uni",e.NODE="node"}(N||(N={}));var L={autoIncrement:0,ajaxUnconventionalErrorTimes:0,ajax:I,getUniqueId:function(){this.autoIncrement?this.autoIncrement++:this.autoIncrement=1;var e=new Date,t=new Date(2010,1,1);return(e.getTime()-t.getTime()+this.autoIncrement).toString()},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:{}},r="string"==typeof e?document.getElementById(e):e;if(window.URL.createObjectURL){if(!r.files)throw Error("this is not HTMLInputElement");var n=r.files;if(n.length>0){var o=n.item(0);t.data=o,t.url=window.URL.createObjectURL(o),t.filename=(null==o?void 0:o.name)||""}}else{if("string"!=typeof e)throw Error("in IE fileInputId must be string");o=document.getElementById(e).value,t.url=o;var i=o.lastIndexOf("/"),a=o.lastIndexOf("\\"),s=Math.max(i,a);t.filename=s<0?o:o.substring(s+1)}var c=t.filename.lastIndexOf(".");return-1!==c&&(t.filetype=t.filename.substring(c+1).toLowerCase()),t},uploadFile:k,flow:function(e){for(var t=e.length,r=t;r--;)if("function"!=typeof e[r])throw new TypeError("Expected a function");return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var o=0,i=t?e[o].apply(this,r):r[0];++o<t;)i=e[o].call(this,i);return i}},listenNetwork:M,getEnvInfo:w,wxRequest:C,parseDownloadResponse:function(e){if(!window||!window.URL)throw Error("parseDownloadResponse can be used in broswer only");return e&&e.type&&"application/json"===e.type||0>Object.prototype.toString.call(e).indexOf("Blob")?this.url+"?token=":window.URL.createObjectURL(e)},download:P,parseNotify:function(e){for(var t="",r=0;r<e.length;r++)t+="%"+e[r].toString(16);return JSON.parse(decodeURIComponent(t))},getExtraData:x,formatAttachUrl:function(e){return e&&"string"==typeof e?"".concat(this.apiUrl).concat(e.substr(e.indexOf("/",9))):""},Uint8ArrayToString:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}}},6698:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},8570:function(e){e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var o={},i={};function a(e,t){var r,n,a;return t?(a=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(r=c(e,(0|e)<0?-1:0,!0),a&&(i[e]=r),r):(a=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=c(e,e<0?-1:0,!1),a&&(o[e]=r),r)}function s(e,t){if(isNaN(e))return t?y:v;if(t){if(e<0)return y;if(e>=h)return R}else{if(e<=-f)return O;if(e+1>=f)return T}return e<0?s(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=s,r.fromBits=c;var u=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var o=s(u(r,8)),i=v,a=0;a<e.length;a+=8){var c=Math.min(8,e.length-a),p=parseInt(e.substring(a,a+c),r);if(c<8){var d=s(u(r,c));i=i.mul(d).add(s(p))}else i=(i=i.mul(o)).add(s(p))}return i.unsigned=t,i}function p(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=l,r.fromValue=p;var d=4294967296,h=d*d,f=h/2,m=a(1<<24),v=a(0);r.ZERO=v;var y=a(0,!0);r.UZERO=y;var g=a(1);r.ONE=g;var _=a(1,!0);r.UONE=_;var E=a(-1);r.NEG_ONE=E;var T=c(-1,2147483647,!1);r.MAX_VALUE=T;var R=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=R;var O=c(0,-2147483648,!1);r.MIN_VALUE=O;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var t=s(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=s(u(e,6),this.unsigned),i=this,a="";;){var c=i.div(o),l=(i.sub(c.mul(o)).toInt()>>>0).toString(e);if((i=c).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return!(1&~this.low)},I.isEven=function(){return!(1&this.low)},I.equals=function(e){return n(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(n(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(g)},I.neg=I.negate,I.add=function(e){n(e)||(e=p(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,d=0,h=0,f=0;return h+=(f+=i+(65535&e.low))>>>16,d+=(h+=o+u)>>>16,l+=(d+=r+s)>>>16,l+=t+a,c((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return n(e)||(e=p(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return v;if(n(e)||(e=p(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(O))return e.isOdd()?O:v;if(e.eq(O))return this.isOdd()?O:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,i=this.low>>>16,a=65535&this.low,u=e.high>>>16,l=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,y=0,g=0,_=0;return g+=(_+=a*h)>>>16,y+=(g+=i*h)>>>16,g&=65535,y+=(g+=a*d)>>>16,f+=(y+=o*h)>>>16,y&=65535,f+=(y+=i*d)>>>16,y&=65535,f+=(y+=a*l)>>>16,f+=r*h+o*d+i*l+a*u,c((g&=65535)<<16|(_&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(n(e)||(e=p(e)),e.isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return _;i=y}else{if(this.eq(O))return e.eq(g)||e.eq(E)?O:e.eq(O)?g:(r=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?g:E:(o=this.sub(e.mul(r)),i=r.add(o.div(e)));if(e.eq(O))return this.unsigned?y:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:u(2,a-48),d=s(r),h=d.mul(e);h.isNegative()||h.gt(o);)h=(d=s(r-=l,this.unsigned)).mul(e);d.isZero()&&(d=g),i=i.add(d),o=o.sub(h)}return i},I.div=I.divide,I.modulo=function(e){return n(e)||(e=p(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return n(e)||(e=p(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return n(e)||(e=p(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return n(e)||(e=p(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},2549:function(e,t,r){"use strict";e.exports=r(9100)},5095:function(e){"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},744:function(e,t,r){"use strict";var n=t,o=r(5643),i=r(3262);function a(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof o){e("switch(d%s){",n);for(var i=t.resolvedType.values,a=Object.keys(i),s=0;s<a.length;++s)t.repeated&&i[a[s]]===t.typeDefault&&e("default:"),e("case%j:",a[s])("case %i:",i[a[s]])("m%s=%j",n,i[a[s]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function s(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof o?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var s=t[n].resolve(),c=i.safeProp(s.name);s.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),a(r,s,n,c+"[ks[i]]")("}")("}")):s.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),a(r,s,n,c+"[i]")("}")("}")):(s.resolvedType instanceof o||r("if(d%s!=null){",c),a(r,s,n,c),s.resolvedType instanceof o||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],a=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?a:c).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",i.safeProp(n[u].name));r("}")}if(a.length){for(r("if(o.objects||o.defaults){"),u=0;u<a.length;++u)r("d%s={}",i.safeProp(a[u].name));r("}")}if(c.length){for(r("if(o.defaults){"),u=0;u<c.length;++u){var l=c[u],p=i.safeProp(l.name);if(l.resolvedType instanceof o)r("d%s=o.enums===String?%j:%j",p,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",p)("}else")("d%s=o.longs===String?%j:%i",p,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var d="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",p,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",p,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",p,p)("}")}else r("d%s=%j",p,l.typeDefault)}r("}")}var h=!1;for(u=0;u<t.length;++u){l=t[u];var f=e._fieldsArray.indexOf(l);p=i.safeProp(l.name),l.map?(h||(h=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",p,p)("d%s={}",p)("for(var j=0;j<ks2.length;++j){"),s(r,l,f,p+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",p,p)("d%s=[]",p)("for(var j=0;j<m%s.length;++j){",p),s(r,l,f,p+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",p,l.name),s(r,l,f,p),l.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}},7728:function(e,t,r){"use strict";e.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var s=e._fieldsArray[r].resolve(),c=s.resolvedType instanceof n?"int32":s.type,u="m"+i.safeProp(s.name);t("case %i:",s.id),s.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==o.defaults[s.keyType]?t("k=%j",o.defaults[s.keyType]):t("k=null"),void 0!==o.defaults[c]?t("value=%j",o.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",s.keyType)("case 2:"),void 0===o.basic[c]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==o.long[s.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):s.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==o.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===o.basic[c]?t(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,c)):void 0===o.basic[c]?t(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var l=e._fieldsArray[r];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",a(l))}return t("return m")};var n=r(5643),o=r(361),i=r(3262);function a(e){return"missing required '"+e.name+"'"}},1080:function(e,t,r){"use strict";e.exports=function(e){for(var t,r=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),s=e.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<s.length;++c){var u=s[c].resolve(),l=e._fieldsArray.indexOf(u),p=u.resolvedType instanceof n?"int32":u.type,d=o.basic[p];t="m"+i.safeProp(u.name),u.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|o.mapKey[u.keyType],u.keyType),void 0===d?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,p,t),r("}")("}")):u.repeated?(r("if(%s!=null&&%s.length){",t,t),u.packed&&void 0!==o.packed[p]?r("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",p,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===d?a(r,u,l,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(u.id<<3|d)>>>0,p,t)),r("}")):(u.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,u.name),void 0===d?a(r,u,l,t):r("w.uint32(%i).%s(%s)",(u.id<<3|d)>>>0,p,t))}return r("return w")};var n=r(5643),o=r(361),i=r(3262);function a(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},5643:function(e,t,r){"use strict";e.exports=a;var n=r(7209);((a.prototype=Object.create(n.prototype)).constructor=a).className="Enum";var o=r(8923),i=r(3262);function a(e,t,r,o,i){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=o,this.comments=i||{},this.reserved=void 0,t)for(var a=Object.keys(t),s=0;s<a.length;++s)"number"==typeof t[a[s]]&&(this.valuesById[this.values[a[s]]=t[a[s]]]=a[s])}a.fromJSON=function(e,t){var r=new a(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,r){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},a.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},a.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)}},1344:function(e,t,r){"use strict";e.exports=u;var n=r(7209);((u.prototype=Object.create(n.prototype)).constructor=u).className="Field";var o,i=r(5643),a=r(361),s=r(3262),c=/^required|optional|repeated$/;function u(e,t,r,o,i,u,l){if(s.isObject(o)?(l=i,u=o,o=i=void 0):s.isObject(i)&&(l=u,u=i,i=void 0),n.call(this,e,u),!s.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!s.isString(r))throw TypeError("type must be a string");if(void 0!==o&&!c.test(o=o.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!s.isString(i))throw TypeError("extend must be a string");"proto3_optional"===o&&(o="optional"),this.rule=o&&"optional"!==o?o:void 0,this.type=r,this.id=t,this.extend=i||void 0,this.required="required"===o,this.optional=!this.required,this.repeated="repeated"===o,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!s.Long&&void 0!==a.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof o?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=s.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;s.base64.test(this.typeDefault)?s.base64.decode(this.typeDefault,e=s.newBuffer(s.base64.length(this.typeDefault)),0):s.utf8.write(this.typeDefault,e=s.newBuffer(s.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=s.emptyObject:this.repeated?this.defaultValue=s.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof o&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"==typeof t?t=s.decorateType(t).name:t&&"object"==typeof t&&(t=s.decorateEnum(t).name),function(o,i){s.decorateType(o.constructor).add(new u(i,e,t,r,{default:n}))}},u._configure=function(e){o=e}},5325:function(e,t,r){"use strict";var n=e.exports=r(4394);n.build="light",n.load=function(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=r(1080),n.decoder=r(7728),n.verifier=r(420),n.converter=r(744),n.ReflectionObject=r(7209),n.Namespace=r(8923),n.Root=r(5330),n.Enum=r(5643),n.Type=r(7882),n.Field=r(1344),n.OneOf=r(1457),n.MapField=r(8252),n.Service=r(9687),n.Method=r(8811),n.Message=r(2551),n.wrappers=r(6434),n.types=r(361),n.util=r(3262),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},4394:function(e,t,r){"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(3449),n.BufferWriter=r(818),n.Reader=r(6237),n.BufferReader=r(3158),n.util=r(3610),n.rpc=r(5047),n.roots=r(4529),n.configure=o,o()},9100:function(e,t,r){"use strict";var n=e.exports=r(5325);n.build="full",n.tokenize=r(527),n.parse=r(4863),n.common=r(5095),n.Root._configure(n.Type,n.parse,n.common)},8252:function(e,t,r){"use strict";e.exports=a;var n=r(1344);((a.prototype=Object.create(n.prototype)).constructor=a).className="MapField";var o=r(361),i=r(3262);function a(e,t,r,o,a,s){if(n.call(this,e,t,o,void 0,void 0,a,s),!i.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===o.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=i.decorateType(r).name:r&&"object"==typeof r&&(r=i.decorateEnum(r).name),function(n,o){i.decorateType(n.constructor).add(new a(o,e,t,r))}}},2551:function(e,t,r){"use strict";e.exports=o;var n=r(3610);function o(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}o.create=function(e){return this.$type.create(e)},o.encode=function(e,t){return this.$type.encode(e,t)},o.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},o.decode=function(e){return this.$type.decode(e)},o.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},o.verify=function(e){return this.$type.verify(e)},o.fromObject=function(e){return this.$type.fromObject(e)},o.toObject=function(e,t){return this.$type.toObject(e,t)},o.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},8811:function(e,t,r){"use strict";e.exports=i;var n=r(7209);((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var o=r(3262);function i(e,t,r,i,a,s,c,u,l){if(o.isObject(a)?(c=a,a=s=void 0):o.isObject(s)&&(c=s,s=void 0),void 0!==t&&!o.isString(t))throw TypeError("type must be a string");if(!o.isString(r))throw TypeError("requestType must be a string");if(!o.isString(i))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=i,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=l}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},8923:function(e,t,r){"use strict";e.exports=p;var n=r(7209);((p.prototype=Object.create(n.prototype)).constructor=p).className="Namespace";var o,i,a,s=r(1344),c=r(1457),u=r(3262);function l(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function p(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function d(e){return e._nestedArray=null,e}p.fromJSON=function(e,t){return new p(e,t.options).addJSON(t.nested)},p.arrayToJSON=l,p.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},p.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(p.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),p.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},p.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?o.fromJSON:void 0!==t.values?a.fromJSON:void 0!==t.methods?i.fromJSON:void 0!==t.id?s.fromJSON:p.fromJSON)(r[n],t));return this},p.prototype.get=function(e){return this.nested&&this.nested[e]||null},p.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof a)return this.nested[e].values;throw Error("no such enum: "+e)},p.prototype.add=function(e){if(!(e instanceof s&&void 0!==e.extend||e instanceof o||e instanceof a||e instanceof i||e instanceof p||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof p&&e instanceof p)||t instanceof o||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},p.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),d(this)},p.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof p))throw Error("path conflicts with non-namespace objects")}else r.add(r=new p(n))}return t&&r.addJSON(t),r},p.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof p?e[t++].resolveAll():e[t++].resolve();return this.resolve()},p.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof p&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof p&&(n=this._nestedArray[o].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},p.prototype.lookupType=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such type: "+e);return t},p.prototype.lookupEnum=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},p.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[o,a]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},p.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},p._configure=function(e,t,r){o=e,i=t,a=r}},7209:function(e,t,r){"use strict";e.exports=i,i.className="ReflectionObject";var n,o=r(3262);function i(e,t){if(!o.isString(e))throw TypeError("name must be a string");if(t&&!o.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},i.prototype.getOption=function(e){if(this.options)return this.options[e]},i.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var i=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(i){var a=i[e];o.setProperty(a,r,t)}else(i={})[e]=o.setProperty({},r,t),n.push(i)}else{var s={};s[e]=t,n.push(s)}return this},i.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){n=e}},1457:function(e,t,r){"use strict";e.exports=a;var n=r(7209);((a.prototype=Object.create(n.prototype)).constructor=a).className="OneOf";var o=r(1344),i=r(3262);function a(e,t,r,o){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=o}function s(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,s(this),this},a.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}s(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},a.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},4863:function(e,t,r){"use strict";e.exports=I,I.filename=null,I.defaults={keepCase:!1};var n=r(527),o=r(5330),i=r(7882),a=r(1344),s=r(8252),c=r(1457),u=r(5643),l=r(9687),p=r(8811),d=r(361),h=r(3262),f=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,v=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,g=/^0[0-7]+$/,_=/^-?0[0-7]+$/,E=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,T=/^[a-zA-Z_][a-zA-Z_0-9]*$/,R=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,O=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function I(e,t,r){t instanceof o||(r=t,t=new o),r||(r=I.defaults);var S,C,A,b,N,M=r.preferTrailingComment||!1,w=n(e,r.alternateCommentMode||!1),U=w.next,k=w.push,P=w.peek,x=w.skip,L=w.cmnt,D=!0,j=!1,G=t,B=r.keepCase?function(e){return e}:h.camelCase;function F(e,t,r){var n=I.filename;return r||(I.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+w.line+")")}function H(){var e,t=[];do{if('"'!==(e=U())&&"'"!==e)throw F(e);t.push(U()),x(e),e=P()}while('"'===e||"'"===e);return t.join("")}function W(e){var t=U();switch(t){case"'":case'"':return k(t),H();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return r*parseInt(e,10);if(v.test(e))return r*parseInt(e,16);if(g.test(e))return r*parseInt(e,8);if(E.test(e))return r*parseFloat(e);throw F(e,"number",!0)}(t)}catch(r){if(e&&R.test(t))return t;throw F(t,"value")}}function z(e,t){var r,n;do{!t||'"'!==(r=P())&&"'"!==r?e.push([n=q(U()),x("to",!0)?q(U()):n]):e.push(H())}while(x(",",!0));x(";")}function q(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw F(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(_.test(e))return parseInt(e,8);throw F(e,"id")}function K(){if(void 0!==S)throw F("package");if(S=U(),!R.test(S))throw F(S,"name");G=G.define(S),x(";")}function V(){var e,t=P();switch(t){case"weak":e=A||(A=[]),U();break;case"public":U();default:e=C||(C=[])}t=H(),x(";"),e.push(t)}function J(){if(x("="),b=H(),!(j="proto3"===b)&&"proto2"!==b)throw F(b,"syntax");x(";")}function X(e,t){switch(t){case"option":return $(e,t),x(";"),!0;case"message":return function(e,t){if(!T.test(t=U()))throw F(t,"type name");var r=new i(t);Y(r,(function(e){if(!X(r,e))switch(e){case"map":!function(e){x("<");var t=U();if(void 0===d.mapKey[t])throw F(t,"type");x(",");var r=U();if(!R.test(r))throw F(r,"type");x(">");var n=U();if(!T.test(n))throw F(n,"name");x("=");var o=new s(B(n),q(U()),t,r);Y(o,(function(e){if("option"!==e)throw F(e);$(o,e),x(";")}),(function(){te(o)})),e.add(o)}(r);break;case"required":case"repeated":Q(r,e);break;case"optional":Q(r,j?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!T.test(t=U()))throw F(t,"name");var r=new c(B(t));Y(r,(function(e){"option"===e?($(r,e),x(";")):(k(e),Q(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":z(r.extensions||(r.extensions=[]));break;case"reserved":z(r.reserved||(r.reserved=[]),!0);break;default:if(!j||!R.test(e))throw F(e);k(e),Q(r,"optional")}})),e.add(r)}(e,t),!0;case"enum":return function(e,t){if(!T.test(t=U()))throw F(t,"name");var r=new u(t);Y(r,(function(e){switch(e){case"option":$(r,e),x(";");break;case"reserved":z(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!T.test(t))throw F(t,"name");x("=");var r=q(U(),!0),n={};Y(n,(function(e){if("option"!==e)throw F(e);$(n,e),x(";")}),(function(){te(n)})),e.add(t,r,n.comment)}(r,e)}})),e.add(r)}(e,t),!0;case"service":return function(e,t){if(!T.test(t=U()))throw F(t,"service name");var r=new l(t);Y(r,(function(e){if(!X(r,e)){if("rpc"!==e)throw F(e);!function(e,t){var r=L(),n=t;if(!T.test(t=U()))throw F(t,"name");var o,i,a,s,c=t;if(x("("),x("stream",!0)&&(i=!0),!R.test(t=U()))throw F(t);if(o=t,x(")"),x("returns"),x("("),x("stream",!0)&&(s=!0),!R.test(t=U()))throw F(t);a=t,x(")");var u=new p(c,n,o,a,i,s);u.comment=r,Y(u,(function(e){if("option"!==e)throw F(e);$(u,e),x(";")})),e.add(u)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!R.test(t=U()))throw F(t,"reference");var r=t;Y(null,(function(t){switch(t){case"required":case"repeated":Q(e,t,r);break;case"optional":Q(e,j?"proto3_optional":"optional",r);break;default:if(!j||!R.test(t))throw F(t);k(t),Q(e,"optional",r)}}))}(e,t),!0}return!1}function Y(e,t,r){var n=w.line;if(e&&("string"!=typeof e.comment&&(e.comment=L()),e.filename=I.filename),x("{",!0)){for(var o;"}"!==(o=U());)t(o);x(";",!0)}else r&&r(),x(";"),e&&("string"!=typeof e.comment||M)&&(e.comment=L(n)||e.comment)}function Q(e,t,r){var n=U();if("group"!==n){if(!R.test(n))throw F(n,"type");var o=U();if(!T.test(o))throw F(o,"name");o=B(o),x("=");var s=new a(o,q(U()),n,t,r);if(Y(s,(function(e){if("option"!==e)throw F(e);$(s,e),x(";")}),(function(){te(s)})),"proto3_optional"===t){var u=new c("_"+o);s.setOption("proto3_optional",!0),u.add(s),e.add(u)}else e.add(s);j||!s.repeated||void 0===d.packed[n]&&void 0!==d.basic[n]||s.setOption("packed",!1,!0)}else!function(e,t){var r=U();if(!T.test(r))throw F(r,"name");var n=h.lcFirst(r);r===n&&(r=h.ucFirst(r)),x("=");var o=q(U()),s=new i(r);s.group=!0;var c=new a(n,o,r,t);c.filename=I.filename,Y(s,(function(e){switch(e){case"option":$(s,e),x(";");break;case"required":case"repeated":Q(s,e);break;case"optional":Q(s,j?"proto3_optional":"optional");break;default:throw F(e)}})),e.add(s).add(c)}(e,t)}function $(e,t){var r=x("(",!0);if(!R.test(t=U()))throw F(t,"name");var n,o=t,i=o;r&&(x(")"),i=o="("+o+")",t=P(),O.test(t)&&(n=t.substr(1),o+=t,U())),x("="),function(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}(e,i,Z(e,o),n)}function Z(e,t){if(x("{",!0)){for(var r={};!x("}",!0);){if(!T.test(N=U()))throw F(N,"name");var n,o=N;"{"===P()?n=Z(e,t+"."+N):(x(":"),"{"===P()?n=Z(e,t+"."+N):(n=W(!0),ee(e,t+"."+N,n)));var i=r[o];i&&(n=[].concat(i).concat(n)),r[o]=n,x(",",!0)}return r}var a=W(!0);return ee(e,t,a),a}function ee(e,t,r){e.setOption&&e.setOption(t,r)}function te(e){if(x("[",!0)){do{$(e,"option")}while(x(",",!0));x("]")}return e}for(;null!==(N=U());)switch(N){case"package":if(!D)throw F(N);K();break;case"import":if(!D)throw F(N);V();break;case"syntax":if(!D)throw F(N);J();break;case"option":$(G,N),x(";");break;default:if(X(G,N)){D=!1;continue}throw F(N)}return I.filename=null,{package:S,imports:C,weakImports:A,syntax:b,root:t}}},6237:function(e,t,r){"use strict";e.exports=c;var n,o=r(3610),i=o.LongBits,a=o.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},p=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l};function d(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new i(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=p(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=p(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},3158:function(e,t,r){"use strict";e.exports=i;var n=r(6237);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(3610);function i(e){n.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},5330:function(e,t,r){"use strict";e.exports=p;var n=r(8923);((p.prototype=Object.create(n.prototype)).constructor=p).className="Root";var o,i,a,s=r(1344),c=r(5643),u=r(1457),l=r(3262);function p(e){n.call(this,"",e),this.deferred=[],this.files=[]}function d(){}p.fromJSON=function(e,t){return t||(t=new p),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},p.prototype.resolvePath=l.path.resolve,p.prototype.fetch=l.fetch,p.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var o=this;if(!n)return l.asPromise(e,o,t,r);var s=n===d;function c(e,t){if(n){var r=n;if(n=null,s)throw e;r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in a)return r}return null}function p(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){i.filename=e;var n,a=i(t,o,r),p=0;if(a.imports)for(;p<a.imports.length;++p)(n=u(a.imports[p])||o.resolvePath(e,a.imports[p]))&&h(n);if(a.weakImports)for(p=0;p<a.weakImports.length;++p)(n=u(a.weakImports[p])||o.resolvePath(e,a.weakImports[p]))&&h(n,!0)}else o.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}s||f||c(null,o)}function h(e,t){if(!(o.files.indexOf(e)>-1))if(o.files.push(e),e in a)s?p(e,a[e]):(++f,setTimeout((function(){--f,p(e,a[e])})));else if(s){var r;try{r=l.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}p(e,r)}else++f,o.fetch(e,(function(r,i){--f,n&&(r?t?f||c(null,o):c(r):p(e,i))}))}var f=0;l.isString(t)&&(t=[t]);for(var m,v=0;v<t.length;++v)(m=o.resolvePath("",t[v]))&&h(m);if(s)return o;f||c(null,o)},p.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,d)},p.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new s(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}p.prototype._handleAdd=function(e){if(e instanceof s)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)h.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof o)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);h.test(e.name)&&(e.parent[e.name]=e)}},p.prototype._handleRemove=function(e){if(e instanceof s){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)h.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);h.test(e.name)&&delete e.parent[e.name]}},p._configure=function(e,t,r){o=e,i=t,a=r}},4529:function(e){"use strict";e.exports={}},5047:function(e,t,r){"use strict";t.Service=r(7595)},7595:function(e,t,r){"use strict";e.exports=o;var n=r(3610);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return n.asPromise(e,s,t,r,o,i);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof o))try{r=o[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},9687:function(e,t,r){"use strict";e.exports=s;var n=r(8923);((s.prototype=Object.create(n.prototype)).constructor=s).className="Service";var o=r(8811),i=r(3262),a=r(5047);function s(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}s.fromJSON=function(e,t){var r=new s(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),i=0;i<n.length;++i)r.add(o.fromJSON(n[i],t.methods[n[i]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},s.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof o?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof o){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},s.prototype.create=function(e,t,r){for(var n,o=new a.Service(e,t,r),s=0;s<this.methodsArray.length;++s){var c=i.lcFirst((n=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");o[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return o}},527:function(e){"use strict";e.exports=p;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,o=/^ *[*/]+ */,i=/^\s*\*?\/*/,a=/\n/g,s=/\s/,c=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"\t"};function l(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}}))}function p(e,c){e=e.toString();var u=0,p=e.length,d=1,h=null,f=null,m=0,v=!1,y=!1,g=[],_=null;function E(e){return Error("illegal "+e+" (line "+d+")")}function T(t){return e.charAt(t)}function R(t,r,n){h=e.charAt(t++),m=d,v=!1,y=n;var s,u=t-(c?2:3);do{if(--u<0||"\n"===(s=e.charAt(u))){v=!0;break}}while(" "===s||"\t"===s);for(var l=e.substring(t,r).split(a),p=0;p<l.length;++p)l[p]=l[p].replace(c?i:o,"").trim();f=l.join("\n").trim()}function O(t){var r=I(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function I(e){for(var t=e;t<p&&"\n"!==T(t);)t++;return t}function S(){if(g.length>0)return g.shift();if(_)return function(){var t="'"===_?n:r;t.lastIndex=u-1;var o=t.exec(e);if(!o)throw E("string");return u=t.lastIndex,C(_),_=null,l(o[1])}();var o,i,a,h,f,m=0===u;do{if(u===p)return null;for(o=!1;s.test(a=T(u));)if("\n"===a&&(m=!0,++d),++u===p)return null;if("/"===T(u)){if(++u===p)throw E("comment");if("/"===T(u))if(c){if(h=u,f=!1,O(u)){f=!0;do{if((u=I(u))===p)break;u++}while(O(u))}else u=Math.min(p,I(u)+1);f&&R(h,u,m),d++,o=!0}else{for(f="/"===T(h=u+1);"\n"!==T(++u);)if(u===p)return null;++u,f&&R(h,u-1,m),++d,o=!0}else{if("*"!==(a=T(u)))return"/";h=u+1,f=c||"*"===T(h);do{if("\n"===a&&++d,++u===p)throw E("comment");i=a,a=T(u)}while("*"!==i||"/"!==a);++u,f&&R(h,u-2,m),o=!0}}}while(o);var v=u;if(t.lastIndex=0,!t.test(T(v++)))for(;v<p&&!t.test(T(v));)++v;var y=e.substring(u,u=v);return'"'!==y&&"'"!==y||(_=y),y}function C(e){g.push(e)}function A(){if(!g.length){var e=S();if(null===e)return null;C(e)}return g[0]}return Object.defineProperty({next:S,peek:A,push:C,skip:function(e,t){var r=A();if(r===e)return S(),!0;if(!t)throw E("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t=null;return void 0===e?m===d-1&&(c||"*"===h||v)&&(t=y?f:null):(m<e&&A(),m!==e||v||!c&&"/"!==h||(t=y?null:f)),t}},"line",{get:function(){return d}})}p.unescape=l},7882:function(e,t,r){"use strict";e.exports=g;var n=r(8923);((g.prototype=Object.create(n.prototype)).constructor=g).className="Type";var o=r(5643),i=r(1457),a=r(1344),s=r(8252),c=r(9687),u=r(2551),l=r(6237),p=r(3449),d=r(3262),h=r(1080),f=r(7728),m=r(420),v=r(744),y=r(6434);function g(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=g.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:d.oneOfGetter(this._oneofsArray[r].oneof),set:d.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),g.generateConstructor=function(e){for(var t,r=d.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",d.safeProp(t.name)):t.repeated&&r("this%s=[]",d.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},g.fromJSON=function(e,t){var r=new g(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),l=0;l<u.length;++l)r.add((void 0!==t.fields[u[l]].keyType?s.fromJSON:a.fromJSON)(u[l],t.fields[u[l]]));if(t.oneofs)for(u=Object.keys(t.oneofs),l=0;l<u.length;++l)r.add(i.fromJSON(u[l],t.oneofs[u[l]]));if(t.nested)for(u=Object.keys(t.nested),l=0;l<u.length;++l){var p=t.nested[u[l]];r.add((void 0!==p.id?a.fromJSON:void 0!==p.fields?g.fromJSON:void 0!==p.values?o.fromJSON:void 0!==p.methods?c.fromJSON:n.fromJSON)(u[l],p))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},g.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},g.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},g.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},g.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),_(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),_(this)):n.prototype.add.call(this,e)},g.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return n.prototype.remove.call(this,e)},g.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},g.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},g.prototype.create=function(e){return new this.ctor(e)},g.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=h(this)({Writer:p,types:t,util:d}),this.decode=f(this)({Reader:l,types:t,util:d}),this.verify=m(this)({types:t,util:d}),this.fromObject=v.fromObject(this)({types:t,util:d}),this.toObject=v.toObject(this)({types:t,util:d});var n=y[e];if(n){var o=Object.create(this);o.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(o),o.toObject=this.toObject,this.toObject=n.toObject.bind(o)}return this},g.prototype.encode=function(e,t){return this.setup().encode(e,t)},g.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},g.prototype.decode=function(e,t){return this.setup().decode(e,t)},g.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},g.prototype.verify=function(e){return this.setup().verify(e)},g.prototype.fromObject=function(e){return this.setup().fromObject(e)},g.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},g.d=function(e){return function(t){d.decorateType(t,e)}}},361:function(e,t,r){"use strict";var n=t,o=r(3262),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",o.emptyArray,null]),n.long=a([0,0,0,1,1],7),n.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},3262:function(e,t,r){"use strict";var n,o,i=e.exports=r(3610),a=r(4529);i.codegen=r(8561),i.fetch=r(5212),i.path=r(9207),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],o=e[r++];void 0!==o&&(t[n]=o)}return t};var s=/\\/g,c=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(s,"\\\\").replace(c,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type;n||(n=r(7882));var o=new n(t||e.name);return i.decorateRoot.add(o),o.ctor=e,Object.defineProperty(e,"$type",{value:o,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:o,enumerable:!1}),o};var l=0;i.decorateEnum=function(e){if(e.$type)return e.$type;o||(o=r(5643));var t=new o("Enum"+l++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},i.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var o=r.shift();if("__proto__"===o||"prototype"===o)return t;if(r.length>0)t[o]=e(t[o]||{},r,n);else{var i=t[o];i&&(n=[].concat(i).concat(n)),t[o]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(i,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(r(5330)))}})},2239:function(e,t,r){"use strict";e.exports=o;var n=r(3610);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;o.fromHash=function(e){return e===a?i:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},3610:function(e,t,r){"use strict";var n=t;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(8045),n.base64=r(8839),n.EventEmitter=r(4358),n.float=r(9410),n.inquire=r(4153),n.utf8=r(1447),n.pool=r(9390),n.LongBits=r(2239),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},420:function(e,t,r){"use strict";e.exports=function(e){var t=o.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r={};e.oneofsArray.length&&t("var p={}");for(var n=0;n<e.fieldsArray.length;++n){var c=e._fieldsArray[n].resolve(),u="m"+o.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,c.name),c.map)t("if(!util.isObject(%s))",u)("return%j",i(c,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),s(t,c,"k[i]"),a(t,c,n,u+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",u)("return%j",i(c,"array"))("for(var i=0;i<%s.length;++i){",u),a(t,c,n,u+"[i]")("}");else{if(c.partOf){var l=o.safeProp(c.partOf.name);1===r[c.partOf.name]&&t("if(p%s===1)",l)("return%j",c.partOf.name+": multiple values"),r[c.partOf.name]=1,t("p%s=1",l)}a(t,c,n,u)}c.optional&&t("}")}return t("return null")};var n=r(5643),o=r(3262);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,o){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",o)("default:")("return%j",i(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),s=0;s<a.length;++s)e("case %i:",t.resolvedType.values[a[s]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,o)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",o)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",o,o,o,o)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',o)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',o)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",o)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',o,o,o)("return%j",i(t,"buffer"))}return e}function s(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",i(t,"boolean key"))}return e}},6434:function(e,t,r){"use strict";var n=t,o=r(2551);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof o){var a=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),a["@type"]=n,a}return this.toObject(e,t)}}},3449:function(e,t,r){"use strict";e.exports=p;var n,o=r(3610),i=o.LongBits,a=o.base64,s=o.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return o.Buffer?function(){return(p.create=function(){return new n})()}:function(){return new p}};function h(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function v(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}p.create=d(),p.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(p.alloc=o.pool(p.alloc,o.Array.prototype.subarray)),p.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(m,10,i.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.uint64=function(e){var t=i.from(e);return this._push(m,t.length(),t)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(m,t.length(),t)},p.prototype.bool=function(e){return this._push(h,1,e?1:0)},p.prototype.fixed32=function(e){return this._push(v,4,e>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(e){var t=i.from(e);return this._push(v,4,t.lo)._push(v,4,t.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var y=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(o.isString(e)){var r=p.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(y,t,e)},p.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(h,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},p._configure=function(e){n=e,p.create=d(),n._configure()}},818:function(e,t,r){"use strict";e.exports=i;var n=r(3449);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(3610);function i(){n.call(this)}function a(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},i._configure()},3992:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)if(r.call(e,i)){if((n=e[i])||null!=n&&!isNaN(n)||(n=""),i=o(i),n=o(n),null===i||null===n)continue;a.push(i+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var i=n(t[1]),a=n(t[2]);null===i||null===a||i in o||(o[i]=a)}return o}},2063:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},162:function(e,t,r){"use strict";var n=r(3288);e.exports=r(4361)(n),"_sockjs_onload"in r.g&&setTimeout(r.g._sockjs_onload,1)},8053:function(e,t,r){"use strict";var n=r(6698),o=r(3157);function i(){o.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}n(i,o),e.exports=i},2795:function(e,t,r){"use strict";var n=r(6698),o=r(6616);function i(){o.call(this)}n(i,o),i.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},i.prototype.once=function(e,t){var r=this,n=!1;this.on(e,(function o(){r.removeListener(e,o),n||(n=!0,t.apply(this,arguments))}))},i.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var r=arguments.length,n=new Array(r-1),o=1;o<r;o++)n[o-1]=arguments[o];for(var i=0;i<t.length;i++)t[i].apply(this,n)}},i.prototype.on=i.prototype.addListener=o.prototype.addEventListener,i.prototype.removeListener=o.prototype.removeEventListener,e.exports.b=i},3157:function(e){"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,r){return this.type=e,this.bubbles=t,this.cancelable=r,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},6616:function(e){"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===r.indexOf(t)&&(r=r.concat([t])),this._listeners[e]=r},t.prototype.removeEventListener=function(e,t){var r=this._listeners[e];if(r){var n=r.indexOf(t);-1===n||(r.length>1?this._listeners[e]=r.slice(0,n).concat(r.slice(n+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,r=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,r),t in this._listeners)for(var n=this._listeners[t],o=0;o<n.length;o++)n[o].apply(this,r)},e.exports=t},2521:function(e,t,r){"use strict";var n=r(6698),o=r(3157);function i(e){o.call(this),this.initEvent("message",!1,!1),this.data=e}n(i,o),e.exports=i},2014:function(e,t,r){"use strict";var n=r(4642);function o(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}o.prototype._transportClose=function(e,t){n.postMessage("c",JSON.stringify([e,t]))},o.prototype._transportMessage=function(e){n.postMessage("t",e)},o.prototype._send=function(e){this._transport.send(e)},o.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=o},623:function(e,t,r){"use strict";var n=r(7393),o=r(4892),i=r(2014),a=r(4839),s=r(4642),c=r(8735);e.exports=function(e,t){var r,u={};t.forEach((function(e){e.facadeTransport&&(u[e.facadeTransport.transportName]=e.facadeTransport)})),u[a.transportName]=a,e.bootstrap_iframe=function(){var t;s.currentWindowId=c.hash.slice(1),o.attachEvent("message",(function(o){if(o.source===parent&&(void 0===r&&(r=o.origin),o.origin===r)){var a;try{a=JSON.parse(o.data)}catch(e){return void o.data}if(a.windowId===s.currentWindowId)switch(a.type){case"s":var l;try{l=JSON.parse(a.data)}catch(e){a.data;break}var p=l[0],d=l[1],h=l[2],f=l[3];if(p!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+p+'", the iframe: "'+e.version+'".');if(!n.isOriginEqual(h,c.href)||!n.isOriginEqual(f,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+h+", "+f+")");t=new i(new u[d](h,f));break;case"m":t._send(a.data);break;case"c":t&&t._close(),t=null}}})),s.postMessage("s")}}},1111:function(e,t,r){"use strict";var n=r(2795).b,o=r(6698),i=r(3285);function a(e,t){n.call(this);var r=this,o=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var n,a;if(200===e){if(a=+new Date-o,t)try{n=JSON.parse(t)}catch(e){}i.isObject(n)||(n={})}r.emit("finish",n,a),r.removeAllListeners()}))}o(a,n),a.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=a},4839:function(e,t,r){"use strict";var n=r(6698),o=r(2795).b,i=r(6960),a=r(1111);function s(e){var t=this;o.call(this),this.ir=new a(e,i),this.ir.once("finish",(function(e,r){t.ir=null,t.emit("message",JSON.stringify([e,r]))}))}n(s,o),s.transportName="iframe-info-receiver",s.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=s},4597:function(e,t,r){"use strict";var n=r(2795).b,o=r(6698),i=r(4892),a=r(9134),s=r(4839);function c(e,t){var o=this;n.call(this);var c=function(){var r=o.ifr=new a(s.transportName,t,e);r.once("message",(function(e){if(e){var t;try{t=JSON.parse(e)}catch(e){return o.emit("finish"),void o.close()}var r=t[0],n=t[1];o.emit("finish",r,n)}o.close()})),r.once("close",(function(){o.emit("finish"),o.close()}))};r.g.document.body?c():i.attachEvent("load",c)}o(c,n),c.enabled=function(){return a.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=c},3860:function(e,t,r){"use strict";var n=r(2795).b,o=r(6698),i=r(7393),a=r(6306),s=r(1834),c=r(6960),u=r(8850),l=r(4597),p=r(1111);function d(e,t){var r=this;n.call(this),setTimeout((function(){r.doXhr(e,t)}),0)}o(d,n),d._getReceiver=function(e,t,r){return r.sameOrigin?new p(t,c):s.enabled?new p(t,s):a.enabled&&r.sameScheme?new p(t,a):l.enabled()?new l(e,t):new p(t,u)},d.prototype.doXhr=function(e,t){var r=this,n=i.addPath(e,"/info");this.xo=d._getReceiver(e,n,t),this.timeoutRef=setTimeout((function(){r._cleanup(!1),r.emit("finish")}),d.timeout),this.xo.once("finish",(function(e,t){r._cleanup(!0),r.emit("finish",e,t)}))},d.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},d.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},d.timeout=8e3,e.exports=d},8735:function(e,t,r){"use strict";e.exports=r.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},4361:function(e,t,r){"use strict";r(9316);var n,o=r(1160),i=r(6698),a=r(7861),s=r(321),c=r(7393),u=r(4892),l=r(3117),p=r(3285),d=r(7452),h=r(9306),f=r(3157),m=r(6616),v=r(8735),y=r(8053),g=r(2521),_=r(3860);function E(e,t,r){if(!(this instanceof E))return new E(e,t,r);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=E.CONNECTING,this.extensions="",this.protocol="",(r=r||{}).protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=r.transports,this._transportOptions=r.transportOptions||{},this._timeout=r.timeout||0;var n=r.sessionId||8;if("function"==typeof n)this._generateSessionId=n;else{if("number"!=typeof n)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return a.string(n)}}this._server=r.server||a.numberString(1e3);var i=new o(e);if(!i.host||!i.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(i.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==i.protocol&&"https:"!==i.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+i.protocol+"' is not allowed.");var s="https:"===i.protocol;if("https:"===v.protocol&&!s&&!c.isLoopbackAddr(i.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var u=t.sort();u.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<u.length-1&&e===u[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var l=c.getOrigin(v.href);this._origin=l?l.toLowerCase():null,i.set("pathname",i.pathname.replace(/\/+$/,"")),this.url=i.href,this.url,this._urlInfo={nullOrigin:!d.hasDomain(),sameOrigin:c.isOriginEqual(this.url,v.href),sameScheme:c.isSchemeEqual(this.url,v.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function T(e){return 1e3===e||e>=3e3&&e<=4999}i(E,m),E.prototype.close=function(e,t){if(e&&!T(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==E.CLOSING&&this.readyState!==E.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},E.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===E.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===E.OPEN&&this._transport.send(s.quote(e))},E.version=r(7778),E.CONNECTING=0,E.OPEN=1,E.CLOSING=2,E.CLOSED=3,E.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=p.extend(e,this._urlInfo);var r=n.filterToEnabled(this._transportsWhitelist,e);this._transports=r.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},E.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!r.g.document.body||void 0!==r.g.document.readyState&&"complete"!==r.g.document.readyState&&"interactive"!==r.g.document.readyState))return this._transports.unshift(e),void u.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var n=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[e.transportName],i=new e(n,this._transUrl,o);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},E.prototype._transportTimeout=function(){this.readyState===E.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},E.prototype._transportMessage=function(e){var t,r=this,n=e.slice(0,1),o=e.slice(1);switch(n){case"o":return void this._open();case"h":return this.dispatchEvent(new f("heartbeat")),void this.transport}if(o)try{t=JSON.parse(o)}catch(e){}if(void 0!==t)switch(n){case"a":Array.isArray(t)&&t.forEach((function(e){r.transport,r.dispatchEvent(new g(e))}));break;case"m":this.transport,this.dispatchEvent(new g(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},E.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),T(e)||2e3===e||this.readyState!==E.CONNECTING?this._close(e,t):this._connect()},E.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===E.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=E.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),this.transport):this._close(1006,"Server lost session")},E.prototype._close=function(e,t,r){this.transport,this.readyState;var n=!1;if(this._ir&&(n=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===E.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=E.CLOSING,setTimeout(function(){this.readyState=E.CLOSED,n&&this.dispatchEvent(new f("error"));var o=new y("close");o.wasClean=r||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},E.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return n=l(e),r(623)(E,e),E}},9316:function(){"use strict";var e,t=Array.prototype,r=Object.prototype,n=Function.prototype,o=String.prototype,i=t.slice,a=r.toString,s=function(e){return"[object Function]"===r.toString.call(e)},c=function(e){return"[object String]"===a.call(e)},u=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=u?function(e,t,r,n){!n&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}:function(e,t,r,n){!n&&t in e||(e[t]=r)};var l=function(t,n,o){for(var i in n)r.hasOwnProperty.call(n,i)&&e(t,i,n[i],o)},p=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function d(){}l(n,{bind:function(e){var t=this;if(!s(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r=i.call(arguments,1),n=Math.max(0,t.length-r.length),o=[],a=0;a<n;a++)o.push("$"+a);var c=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof c){var n=t.apply(this,r.concat(i.call(arguments)));return Object(n)===n?n:this}return t.apply(e,r.concat(i.call(arguments)))}));return t.prototype&&(d.prototype=t.prototype,c.prototype=new d,d.prototype=null),c}}),l(Array,{isArray:function(e){return"[object Array]"===a.call(e)}});var h,f,m,v=Object("a"),y="a"!==v[0]||!(0 in v);l(t,{forEach:function(e){var t=p(this),r=y&&c(this)?this.split(""):t,n=arguments[1],o=-1,i=r.length>>>0;if(!s(e))throw new TypeError;for(;++o<i;)o in r&&e.call(n,r[o],o,t)}},(h=t.forEach,f=!0,m=!0,h&&(h.call("foo",(function(e,t,r){"object"!=typeof r&&(f=!1)})),h.call([1],(function(){m="string"==typeof this}),"x")),!(h&&f&&m)));var g=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);l(t,{indexOf:function(e){var t=y&&c(this)?this.split(""):p(this),r=t.length>>>0;if(!r)return-1;var n,o=0;for(arguments.length>1&&((n=+arguments[1])!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),o=n),o=o>=0?o:Math.max(0,r+o);o<r;o++)if(o in t&&t[o]===e)return o;return-1}},g);var _,E=o.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(_=void 0===/()??/.exec("")[1],o.split=function(e,r){var n=this;if(void 0===e&&0===r)return[];if("[object RegExp]"!==a.call(e))return E.call(this,e,r);var o,i,s,c,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),p=0;for(e=new RegExp(e.source,l+"g"),n+="",_||(o=new RegExp("^"+e.source+"$(?!\\s)",l)),r=void 0===r?-1>>>0:r>>>0;(i=e.exec(n))&&!((s=i.index+i[0].length)>p&&(u.push(n.slice(p,i.index)),!_&&i.length>1&&i[0].replace(o,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(i[e]=void 0)})),i.length>1&&i.index<n.length&&t.push.apply(u,i.slice(1)),c=i[0].length,p=s,u.length>=r));)e.lastIndex===i.index&&e.lastIndex++;return p===n.length?!c&&e.test("")||u.push(""):u.push(n.slice(p)),u.length>r?u.slice(0,r):u}):"0".split(void 0,0).length&&(o.split=function(e,t){return void 0===e&&0===t?[]:E.call(this,e,t)});var T=o.substr;l(o,{substr:function(e,t){return T.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},"".substr&&"b"!=="0b".substr(-1))},3288:function(e,t,r){"use strict";e.exports=[r(1987),r(731),r(5959),r(9745),r(3903)(r(9745)),r(6677),r(3903)(r(6677)),r(9884),r(9448),r(3903)(r(9884)),r(9920)]},7726:function(e,t,r){"use strict";var n=r(2795).b,o=r(6698),i=r(4892),a=r(7393),s=r.g.XMLHttpRequest;function c(e,t,r,o){var i=this;n.call(this),setTimeout((function(){i._start(e,t,r,o)}),0)}o(c,n),c.prototype._start=function(e,t,r,n){var o=this;try{this.xhr=new s}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=a.addQuery(t,"t="+ +new Date),this.unloadRef=i.unloadAdd((function(){o._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o.emit("finish",0,""),o._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(n&&n.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),n&&n.headers)for(var u in n.headers)this.xhr.setRequestHeader(u,n.headers[u]);this.xhr.onreadystatechange=function(){if(o.xhr){var e,t,r=o.xhr;switch(r.readyState,r.readyState){case 3:try{t=r.status,e=r.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&o.emit("chunk",t,e);break;case 4:1223===(t=r.status)&&(t=204),12005!==t&&12029!==t||(t=0),r.responseText,o.emit("finish",t,r.responseText),o._cleanup(!1)}}};try{o.xhr.send(r)}catch(e){o.emit("finish",0,""),o._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),i.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!s;var u=["Active"].concat("Object").join("X");!c.enabled&&u in r.g&&(s=function(){try{return new r.g[u]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new s);var l=!1;try{l="withCredentials"in new s}catch(e){}c.supportsCORS=l,e.exports=c},3682:function(e,t,r){e.exports=r.g.EventSource},3816:function(e,t,r){"use strict";var n=r.g.WebSocket||r.g.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0},9745:function(e,t,r){"use strict";var n=r(6698),o=r(218),i=r(4185),a=r(1834),s=r(3682);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/eventsource",i,a)}n(c,o),c.enabled=function(){return!!s},c.transportName="eventsource",c.roundTrips=2,e.exports=c},6677:function(e,t,r){"use strict";var n=r(6698),o=r(2637),i=r(6960),a=r(218);function s(e){if(!o.enabled)throw new Error("Transport created when disabled");a.call(this,e,"/htmlfile",o,i)}n(s,a),s.enabled=function(e){return o.enabled&&e.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,e.exports=s},9134:function(e,t,r){"use strict";var n=r(6698),o=r(2795).b,i=r(7778),a=r(7393),s=r(4642),c=r(4892),u=r(7861);function l(e,t,r){if(!l.enabled())throw new Error("Transport created when disabled");o.call(this);var n=this;this.origin=a.getOrigin(r),this.baseUrl=r,this.transUrl=t,this.transport=e,this.windowId=u.string(8);var i=a.addPath(r,"/iframe.html")+"#"+this.windowId;this.iframeObj=s.createIframe(i,(function(e){n.emit("close",1006,"Unable to load an iframe ("+e+")"),n.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}n(l,o),l.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},l.prototype._message=function(e){if(e.data,!a.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=JSON.parse(e.data)}catch(t){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([i,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var r;try{r=JSON.parse(t.data)}catch(e){return void t.data}this.emit("close",r[0],r[1]),this.close()}},l.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},l.prototype.send=function(e){this.postMessage("m",e)},l.enabled=function(){return s.iframeEnabled},l.transportName="iframe",l.roundTrips=2,e.exports=l},9920:function(e,t,r){"use strict";var n=r(6698),o=r(7785),i=r(558),a=r(2434);function s(e){if(!s.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/jsonp",a,i)}n(s,o),s.enabled=function(){return!!r.g.document},s.transportName="jsonp-polling",s.roundTrips=1,s.needBody=!0,e.exports=s},218:function(e,t,r){"use strict";var n=r(6698),o=r(7393),i=r(7785);function a(e,t,r,n){i.call(this,e,t,function(e){return function(t,r,n){var i={};"string"==typeof r&&(i.headers={"Content-type":"text/plain"});var a=o.addPath(t,"/xhr_send"),s=new e("POST",a,r,i);return s.once("finish",(function(e){if(s=null,200!==e&&204!==e)return n(new Error("http status "+e));n()})),function(){s.close(),s=null;var e=new Error("Aborted");e.code=1e3,n(e)}}}(n),r,n)}n(a,i),e.exports=a},2011:function(e,t,r){"use strict";var n=r(6698),o=r(2795).b;function i(e,t){o.call(this),this.sendBuffer=[],this.sender=t,this.url=e}n(i,o),i.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},i.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},i.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=i},3903:function(e,t,r){"use strict";var n=r(6698),o=r(9134),i=r(3285);e.exports=function(e){function t(t,r){o.call(this,e.transportName,t,r)}return n(t,o),t.enabled=function(t,n){if(!r.g.document)return!1;var a=i.extend({},n);return a.sameOrigin=!0,e.enabled(a)&&o.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=o.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},7423:function(e,t,r){"use strict";var n=r(6698),o=r(2795).b;function i(e,t,r){o.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=r,this._scheduleReceiver()}n(i,o),i.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(r,n){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===n?e._scheduleReceiver():(e.emit("close",r||1006,n),e.removeAllListeners()))}))},i.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=i},7785:function(e,t,r){"use strict";var n=r(6698),o=r(7393),i=r(2011),a=r(7423);function s(e,t,r,n,s){var c=o.addPath(e,t),u=this;i.call(this,e,r),this.poll=new a(n,c,s),this.poll.on("message",(function(e){u.emit("message",e)})),this.poll.once("close",(function(e,t){u.poll=null,u.emit("close",e,t),u.close()}))}n(s,i),s.prototype.close=function(){i.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=s},4185:function(e,t,r){"use strict";var n=r(6698),o=r(2795).b,i=r(3682);function a(e){o.call(this);var t=this,r=this.es=new i(e);r.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},r.onerror=function(e){r.readyState;var n=2!==r.readyState?"network":"permanent";t._cleanup(),t._close(n)}}n(a,o),a.prototype.abort=function(){this._cleanup(),this._close("user")},a.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},a.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=a},2637:function(e,t,r){"use strict";var n=r(6698),o=r(4642),i=r(7393),a=r(2795).b,s=r(7861);function c(e){a.call(this);var t=this;o.polluteGlobalNamespace(),this.id="a"+s.string(6),e=i.addQuery(e,"c="+decodeURIComponent(o.WPrefix+"."+this.id)),c.htmlfileEnabled;var n=c.htmlfileEnabled?o.createHtmlfile:o.createIframe;r.g[o.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=n(e,(function(){t._cleanup(),t._close("permanent")}))}n(c,a),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete r.g[o.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in r.g)try{c.htmlfileEnabled=!!new r.g[u]("htmlfile")}catch(e){}c.enabled=c.htmlfileEnabled||o.iframeEnabled,e.exports=c},558:function(e,t,r){"use strict";var n=r(4642),o=r(7861),i=r(7452),a=r(7393),s=r(6698),c=r(2795).b;function u(e){var t=this;c.call(this),n.polluteGlobalNamespace(),this.id="a"+o.string(6);var i=a.addQuery(e,"c="+encodeURIComponent(n.WPrefix+"."+this.id));r.g[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(i),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),u.timeout)}s(u,c),u.prototype.abort=function(){if(r.g[n.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete r.g[n.WPrefix][this.id]},u.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),u.scriptErrorTimeout))},u.prototype._createScript=function(e){var t,n=this,a=this.script=r.g.document.createElement("script");if(a.id="a"+o.string(8),a.src=e,a.type="text/javascript",a.charset="UTF-8",a.onerror=this._scriptError.bind(this),a.onload=function(){n._abort(new Error("JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(a.readyState,/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){n.loadedOkay=!0;try{a.onclick()}catch(e){}}a&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===a.async&&r.g.document.attachEvent)if(i.isOpera())(t=this.script2=r.g.document.createElement("script")).text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=t.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(e){}a.async=!0}void 0!==a.async&&(a.async=!0);var s=r.g.document.getElementsByTagName("head")[0];s.insertBefore(a,s.firstChild),t&&s.insertBefore(t,s.firstChild)},e.exports=u},6298:function(e,t,r){"use strict";var n=r(6698),o=r(2795).b;function i(e,t){o.call(this);var r=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){r._chunkHandler(e,t),r.xo=null;var n=200===e?"network":"permanent";r.emit("close",null,n),r._cleanup()}))}n(i,o),i.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var r=-1;;this.bufferPosition+=r+1){var n=t.slice(this.bufferPosition);if(-1===(r=n.indexOf("\n")))break;var o=n.slice(0,r);o&&this.emit("message",o)}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=i},2434:function(e,t,r){"use strict";var n,o,i=r(7861),a=r(7393);e.exports=function(e,t,s){n||((n=r.g.document.createElement("form")).style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",(o=r.g.document.createElement("textarea")).name="d",n.appendChild(o),r.g.document.body.appendChild(n));var c="a"+i.string(8);n.target=c,n.action=a.addQuery(a.addPath(e,"/jsonp_send"),"i="+c);var u=function(e){try{return r.g.document.createElement('<iframe name="'+e+'">')}catch(n){var t=r.g.document.createElement("iframe");return t.name=e,t}}(c);u.id=c,u.style.display="none",n.appendChild(u);try{o.value=t}catch(e){}n.submit();var l=function(e){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,setTimeout((function(){u.parentNode.removeChild(u),u=null}),500),o.value="",s(e))};return u.onerror=function(){l()},u.onload=function(){l()},u.onreadystatechange=function(e){u.readyState,"complete"===u.readyState&&l()},function(){l(new Error("Aborted"))}}},6306:function(e,t,r){"use strict";var n=r(2795).b,o=r(6698),i=r(4892),a=r(7452),s=r(7393);function c(e,t,r){var o=this;n.call(this),setTimeout((function(){o._start(e,t,r)}),0)}o(c,n),c.prototype._start=function(e,t,n){var o=this,a=new r.g.XDomainRequest;t=s.addQuery(t,"t="+ +new Date),a.onerror=function(){o._error()},a.ontimeout=function(){o._error()},a.onprogress=function(){a.responseText,o.emit("chunk",200,a.responseText)},a.onload=function(){o.emit("finish",200,a.responseText),o._cleanup(!1)},this.xdr=a,this.unloadRef=i.unloadAdd((function(){o._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(e){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),i.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!r.g.XDomainRequest||!a.hasDomain()),e.exports=c},1834:function(e,t,r){"use strict";var n=r(6698),o=r(7726);function i(e,t,r,n){o.call(this,e,t,r,n)}n(i,o),i.enabled=o.enabled&&o.supportsCORS,e.exports=i},8850:function(e,t,r){"use strict";var n=r(2795).b;function o(){var e=this;n.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),o.timeout)}r(6698)(o,n),o.prototype.close=function(){clearTimeout(this.to)},o.timeout=2e3,e.exports=o},6960:function(e,t,r){"use strict";var n=r(6698),o=r(7726);function i(e,t,r){o.call(this,e,t,r,{noCredentials:!0})}n(i,o),i.enabled=o.enabled,e.exports=i},1987:function(e,t,r){"use strict";var n=r(4892),o=r(7393),i=r(6698),a=r(2795).b,s=r(3816);function c(e,t,r){if(!c.enabled())throw new Error("Transport created when disabled");a.call(this);var i=this,u=o.addPath(e,"/websocket");u="https"===u.slice(0,5)?"wss"+u.slice(5):"ws"+u.slice(4),this.url=u,this.ws=new s(this.url,[],r),this.ws.onmessage=function(e){e.data,i.emit("message",e.data)},this.unloadRef=n.unloadAdd((function(){i.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,i.emit("close",e.code,e.reason),i._cleanup()},this.ws.onerror=function(e){i.emit("close",1006,"WebSocket connection broken"),i._cleanup()}}i(c,a),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),n.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!s},c.transportName="websocket",c.roundTrips=2,e.exports=c},9448:function(e,t,r){"use strict";var n=r(6698),o=r(218),i=r(5959),a=r(6298),s=r(6306);function c(e){if(!s.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",a,s)}n(c,o),c.enabled=i.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},5959:function(e,t,r){"use strict";var n=r(6698),o=r(218),i=r(6298),a=r(6306);function s(e){if(!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",i,a)}n(s,o),s.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&a.enabled&&e.sameScheme},s.transportName="xdr-streaming",s.roundTrips=2,e.exports=s},9884:function(e,t,r){"use strict";var n=r(6698),o=r(218),i=r(6298),a=r(1834),s=r(6960);function c(e){if(!s.enabled&&!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",i,a)}n(c,o),c.enabled=function(e){return!e.nullOrigin&&(!(!s.enabled||!e.sameOrigin)||a.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},731:function(e,t,r){"use strict";var n=r(6698),o=r(218),i=r(6298),a=r(1834),s=r(6960),c=r(7452);function u(e){if(!s.enabled&&!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",i,a)}n(u,o),u.enabled=function(e){return!e.nullOrigin&&!c.isOpera()&&a.enabled},u.transportName="xhr-streaming",u.roundTrips=2,u.needBody=!!r.g.document,e.exports=u},4616:function(e,t,r){"use strict";r.g.crypto&&r.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return r.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(256*Math.random());return t}},7452:function(e,t,r){"use strict";e.exports={isOpera:function(){return r.g.navigator&&/opera/i.test(r.g.navigator.userAgent)},isKonqueror:function(){return r.g.navigator&&/konqueror/i.test(r.g.navigator.userAgent)},hasDomain:function(){if(!r.g.document)return!0;try{return!!r.g.document.domain}catch(e){return!1}}}},321:function(e){"use strict";var t,r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var n=JSON.stringify(e);return r.lastIndex=0,r.test(n)?(t||(t=function(e){var t,r={},n=[];for(t=0;t<65536;t++)n.push(String.fromCharCode(t));return e.lastIndex=0,n.join("").replace(e,(function(e){return r[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,r}(r)),n.replace(r,(function(e){return t[e]}))):n}}},4892:function(e,t,r){"use strict";var n=r(7861),o={},i=!1,a=r.g.chrome&&r.g.chrome.app&&r.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==r.g.addEventListener?r.g.addEventListener(e,t,!1):r.g.document&&r.g.attachEvent&&(r.g.document.attachEvent("on"+e,t),r.g.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==r.g.addEventListener?r.g.removeEventListener(e,t,!1):r.g.document&&r.g.detachEvent&&(r.g.document.detachEvent("on"+e,t),r.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(a)return null;var t=n.string(8);return o[t]=e,i&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in o&&delete o[e]},triggerUnloadCallbacks:function(){for(var e in o)o[e](),delete o[e]}},a||e.exports.attachEvent("unload",(function(){i||(i=!0,e.exports.triggerUnloadCallbacks())}))},4642:function(e,t,r){"use strict";var n=r(4892),o=r(7452);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in r.g||(r.g[e.exports.WPrefix]={})},postMessage:function(t,n){r.g.parent!==r.g&&r.g.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:n||""}),"*")},createIframe:function(e,t){var o,i,a=r.g.document.createElement("iframe"),s=function(){clearTimeout(o);try{a.onload=null}catch(e){}a.onerror=null},c=function(){a&&(s(),setTimeout((function(){a&&a.parentNode.removeChild(a),a=null}),0),n.unloadDel(i))},u=function(e){a&&(c(),t(e))};return a.src=e,a.style.display="none",a.style.position="absolute",a.onerror=function(){u("onerror")},a.onload=function(){clearTimeout(o),o=setTimeout((function(){u("onload timeout")}),2e3)},r.g.document.body.appendChild(a),o=setTimeout((function(){u("timeout")}),15e3),i=n.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:c,loaded:s}},createHtmlfile:function(t,o){var i,a,s,c=["Active"].concat("Object").join("X"),u=new r.g[c]("htmlfile"),l=function(){clearTimeout(i),s.onerror=null},p=function(){u&&(l(),n.unloadDel(a),s.parentNode.removeChild(s),s=u=null,CollectGarbage())},d=function(e){u&&(p(),o(e))};u.open(),u.write('<html><script>document.domain="'+r.g.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=r.g[e.exports.WPrefix];var h=u.createElement("div");return u.body.appendChild(h),s=u.createElement("iframe"),h.appendChild(s),s.src=t,s.onerror=function(){d("onerror")},i=setTimeout((function(){d("timeout")}),15e3),a=n.unloadAdd(p),{post:function(e,t){try{setTimeout((function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:p,loaded:l}}},e.exports.iframeEnabled=!1,r.g.document&&(e.exports.iframeEnabled=("function"==typeof r.g.postMessage||"object"==typeof r.g.postMessage)&&!o.isKonqueror())},9306:function(e,t,r){"use strict";var n={};["log","debug","warn"].forEach((function(e){var t;try{t=r.g.console&&r.g.console[e]&&r.g.console[e].apply}catch(e){}n[e]=t?function(){return r.g.console[e].apply(r.g.console,arguments)}:"log"===e?function(){}:n.log})),e.exports=n},3285:function(e){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,n=1,o=arguments.length;n<o;n++)for(r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}}},7861:function(e,t,r){"use strict";var n=r(4616);e.exports={string:function(e){for(var t=n.randomBytes(e),r=[],o=0;o<e;o++)r.push("abcdefghijklmnopqrstuvwxyz012345".substr(t[o]%32,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},3117:function(e){"use strict";e.exports=function(e){return{filterToEnabled:function(t,r){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===r.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(r)?(e.transportName,n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)):e.transportName))})),n}}}},7393:function(e,t,r){"use strict";var n=r(1160);e.exports={getOrigin:function(e){if(!e)return null;var t=new n(e);if("file:"===t.protocol)return null;var r=t.port;return r||(r="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+r},isOriginEqual:function(e,t){return this.getOrigin(e)===this.getOrigin(t)},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var r=e.split("?");return r[0]+t+(r[1]?"?"+r[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},7778:function(e){e.exports="1.6.1"},1160:function(e,t,r){"use strict";var n=r(2063),o=r(3992),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(i,"")}var d=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function f(e){var t,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},o={},i=typeof(e=e||n);if("blob:"===e.protocol)o=new y(unescape(e.pathname),{});else if("string"===i)for(t in o=new y(e,{}),h)delete o[t];else if("object"===i){for(t in e)t in h||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function v(e,t){e=(e=p(e)).replace(a,""),t=t||{};var r,n=u.exec(e),o=n[1]?n[1].toLowerCase():"",i=!!n[2],s=!!n[3],c=0;return i?s?(r=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(r=n[2]+n[4],c=n[2].length):s?(r=n[3]+n[4],c=n[3].length):r=n[4],"file:"===o?c>=2&&(r=r.slice(2)):m(o)?r=n[4]:o?i&&(r=r.slice(2)):c>=2&&m(t.protocol)&&(r=n[4]),{protocol:o,slashes:i||m(o),slashesCount:c,rest:r}}function y(e,t,r){if(e=(e=p(e)).replace(a,""),!(this instanceof y))return new y(e,t,r);var i,s,c,u,h,g,_=d.slice(),E=typeof t,T=this,R=0;for("object"!==E&&"string"!==E&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),i=!(s=v(e||"",t=f(t))).protocol&&!s.slashes,T.slashes=s.slashes||i&&t.slashes,T.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||l.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(T.protocol)))&&(_[3]=[/(.*)/,"pathname"]);R<_.length;R++)"function"!=typeof(u=_[R])?(c=u[0],g=u[1],c!=c?T[g]=e:"string"==typeof c?~(h="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof u[2]?(T[g]=e.slice(0,h),e=e.slice(h+u[2])):(T[g]=e.slice(h),e=e.slice(0,h))):(h=c.exec(e))&&(T[g]=h[1],e=e.slice(0,h.index)),T[g]=T[g]||i&&u[3]&&t[g]||"",u[4]&&(T[g]=T[g].toLowerCase())):e=u(e,T);r&&(T.query=r(T.query)),i&&t.slashes&&"/"!==T.pathname.charAt(0)&&(""!==T.pathname||""!==t.pathname)&&(T.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],i=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(i=!0),r.splice(n,1),a--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(T.pathname,t.pathname)),"/"!==T.pathname.charAt(0)&&m(T.protocol)&&(T.pathname="/"+T.pathname),n(T.port,T.protocol)||(T.host=T.hostname,T.port=""),T.username=T.password="",T.auth&&(~(h=T.auth.indexOf(":"))?(T.username=T.auth.slice(0,h),T.username=encodeURIComponent(decodeURIComponent(T.username)),T.password=T.auth.slice(h+1),T.password=encodeURIComponent(decodeURIComponent(T.password))):T.username=encodeURIComponent(decodeURIComponent(T.auth)),T.auth=T.password?T.username+":"+T.password:T.username),T.origin="file:"!==T.protocol&&m(T.protocol)&&T.host?T.protocol+"//"+T.host:"null",T.href=T.toString()}y.prototype={set:function(e,t,r){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),i[e]=t;break;case"port":i[e]=t,n(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,c.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!r;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";i[e]=t.charAt(0)!==a?a+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(i.username=t.slice(0,s),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(s+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<d.length;u++){var l=d[u];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&m(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,i=r.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var a=i+(r.protocol&&r.slashes||m(r.protocol)?"//":"");return r.username?(a+=r.username,r.password&&(a+=":"+r.password),a+="@"):r.password?(a+=":"+r.password,a+="@"):"file:"!==r.protocol&&m(r.protocol)&&!n&&"/"!==r.pathname&&(a+="@"),(":"===n[n.length-1]||c.test(r.hostname)&&!r.port)&&(n+=":"),a+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(a+=r.hash),a}},y.extractProtocol=v,y.location=f,y.trimLeft=p,y.qs=o,e.exports=y},6925:function(e,t,r){"use strict";var n=r(4901),o=r(6823),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a function")}},5548:function(e,t,r){"use strict";var n=r(3517),o=r(6823),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a constructor")}},3506:function(e,t,r){"use strict";var n=r(3925),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},6469:function(e,t,r){"use strict";var n=r(8227),o=r(2360),i=r(4913).f,a=n("unscopables"),s=Array.prototype;void 0===s[a]&&i(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},679:function(e,t,r){"use strict";var n=r(1625),o=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new o("Incorrect invocation")}},8551:function(e,t,r){"use strict";var n=r(34),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not an object")}},7811:function(e){"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},5652:function(e,t,r){"use strict";var n=r(9039);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},4644:function(e,t,r){"use strict";var n,o,i,a=r(7811),s=r(3724),c=r(4475),u=r(4901),l=r(34),p=r(9297),d=r(6955),h=r(6823),f=r(6699),m=r(6840),v=r(2106),y=r(1625),g=r(2787),_=r(2967),E=r(8227),T=r(3392),R=r(1181),O=R.enforce,I=R.get,S=c.Int8Array,C=S&&S.prototype,A=c.Uint8ClampedArray,b=A&&A.prototype,N=S&&g(S),M=C&&g(C),w=Object.prototype,U=c.TypeError,k=E("toStringTag"),P=T("TYPED_ARRAY_TAG"),x="TypedArrayConstructor",L=a&&!!_&&"Opera"!==d(c.opera),D=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},G={BigInt64Array:8,BigUint64Array:8},B=function(e){var t=g(e);if(l(t)){var r=I(t);return r&&p(r,x)?r[x]:B(t)}},F=function(e){if(!l(e))return!1;var t=d(e);return p(j,t)||p(G,t)};for(n in j)(i=(o=c[n])&&o.prototype)?O(i)[x]=o:L=!1;for(n in G)(i=(o=c[n])&&o.prototype)&&(O(i)[x]=o);if((!L||!u(N)||N===Function.prototype)&&(N=function(){throw new U("Incorrect invocation")},L))for(n in j)c[n]&&_(c[n],N);if((!L||!M||M===w)&&(M=N.prototype,L))for(n in j)c[n]&&_(c[n].prototype,M);if(L&&g(b)!==M&&_(b,M),s&&!p(M,k))for(n in D=!0,v(M,k,{configurable:!0,get:function(){return l(this)?this[P]:void 0}}),j)c[n]&&f(c[n],P,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:D&&P,aTypedArray:function(e){if(F(e))return e;throw new U("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!_||y(N,e)))return e;throw new U(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(s){if(r)for(var o in j){var i=c[o];if(i&&p(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(e){}}}M[e]&&!r||m(M,e,r?t:L&&C[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(s){if(_){if(r)for(n in j)if((o=c[n])&&p(o,e))try{delete o[e]}catch(e){}if(N[e]&&!r)return;try{return m(N,e,r?t:L&&N[e]||t)}catch(e){}}for(n in j)!(o=c[n])||o[e]&&!r||m(o,e,t)}},getTypedArrayConstructor:B,isView:function(e){if(!l(e))return!1;var t=d(e);return"DataView"===t||p(j,t)||p(G,t)},isTypedArray:F,TypedArray:N,TypedArrayPrototype:M}},6346:function(e,t,r){"use strict";var n=r(4475),o=r(9504),i=r(3724),a=r(7811),s=r(350),c=r(6699),u=r(2106),l=r(6279),p=r(9039),d=r(679),h=r(1291),f=r(8014),m=r(7696),v=r(5617),y=r(8490),g=r(2787),_=r(2967),E=r(4373),T=r(7680),R=r(3167),O=r(7740),I=r(687),S=r(1181),C=s.PROPER,A=s.CONFIGURABLE,b="ArrayBuffer",N="DataView",M="prototype",w="Wrong index",U=S.getterFor(b),k=S.getterFor(N),P=S.set,x=n[b],L=x,D=L&&L[M],j=n[N],G=j&&j[M],B=Object.prototype,F=n.Array,H=n.RangeError,W=o(E),z=o([].reverse),q=y.pack,K=y.unpack,V=function(e){return[255&e]},J=function(e){return[255&e,e>>8&255]},X=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Y=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Q=function(e){return q(v(e),23,4)},$=function(e){return q(e,52,8)},Z=function(e,t,r){u(e[M],t,{configurable:!0,get:function(){return r(this)[t]}})},ee=function(e,t,r,n){var o=k(e),i=m(r),a=!!n;if(i+t>o.byteLength)throw new H(w);var s=o.bytes,c=i+o.byteOffset,u=T(s,c,c+t);return a?u:z(u)},te=function(e,t,r,n,o,i){var a=k(e),s=m(r),c=n(+o),u=!!i;if(s+t>a.byteLength)throw new H(w);for(var l=a.bytes,p=s+a.byteOffset,d=0;d<t;d++)l[p+d]=c[u?d:t-d-1]};if(a){var re=C&&x.name!==b;p((function(){x(1)}))&&p((function(){new x(-1)}))&&!p((function(){return new x,new x(1.5),new x(NaN),1!==x.length||re&&!A}))?re&&A&&c(x,"name",b):((L=function(e){return d(this,D),R(new x(m(e)),this,L)})[M]=D,D.constructor=L,O(L,x)),_&&g(G)!==B&&_(G,B);var ne=new j(new L(2)),oe=o(G.setInt8);ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||l(G,{setInt8:function(e,t){oe(this,e,t<<24>>24)},setUint8:function(e,t){oe(this,e,t<<24>>24)}},{unsafe:!0})}else D=(L=function(e){d(this,D);var t=m(e);P(this,{type:b,bytes:W(F(t),0),byteLength:t}),i||(this.byteLength=t,this.detached=!1)})[M],G=(j=function(e,t,r){d(this,G),d(e,D);var n=U(e),o=n.byteLength,a=h(t);if(a<0||a>o)throw new H("Wrong offset");if(a+(r=void 0===r?o-a:f(r))>o)throw new H("Wrong length");P(this,{type:N,buffer:e,byteLength:r,byteOffset:a,bytes:n.bytes}),i||(this.buffer=e,this.byteLength=r,this.byteOffset=a)})[M],i&&(Z(L,"byteLength",U),Z(j,"buffer",k),Z(j,"byteLength",k),Z(j,"byteOffset",k)),l(G,{getInt8:function(e){return ee(this,1,e)[0]<<24>>24},getUint8:function(e){return ee(this,1,e)[0]},getInt16:function(e){var t=ee(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=ee(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return Y(ee(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return Y(ee(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return K(ee(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return K(ee(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){te(this,1,e,V,t)},setUint8:function(e,t){te(this,1,e,V,t)},setInt16:function(e,t){te(this,2,e,J,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){te(this,2,e,J,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){te(this,4,e,X,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){te(this,4,e,X,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){te(this,4,e,Q,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){te(this,8,e,$,t,arguments.length>2&&arguments[2])}});I(L,b),I(j,N),e.exports={ArrayBuffer:L,DataView:j}},7029:function(e,t,r){"use strict";var n=r(8981),o=r(5610),i=r(6198),a=r(4606),s=Math.min;e.exports=[].copyWithin||function(e,t){var r=n(this),c=i(r),u=o(e,c),l=o(t,c),p=arguments.length>2?arguments[2]:void 0,d=s((void 0===p?c:o(p,c))-l,c-u),h=1;for(l<u&&u<l+d&&(h=-1,l+=d-1,u+=d-1);d-- >0;)l in r?r[u]=r[l]:a(r,u),u+=h,l+=h;return r}},4373:function(e,t,r){"use strict";var n=r(8981),o=r(5610),i=r(6198);e.exports=function(e){for(var t=n(this),r=i(t),a=arguments.length,s=o(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,u=void 0===c?r:o(c,r);u>s;)t[s++]=e;return t}},235:function(e,t,r){"use strict";var n=r(9213).forEach,o=r(4598)("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},5370:function(e,t,r){"use strict";var n=r(6198);e.exports=function(e,t,r){for(var o=0,i=arguments.length>2?r:n(t),a=new e(i);i>o;)a[o]=t[o++];return a}},7916:function(e,t,r){"use strict";var n=r(6080),o=r(9565),i=r(8981),a=r(6319),s=r(4209),c=r(3517),u=r(6198),l=r(4659),p=r(81),d=r(851),h=Array;e.exports=function(e){var t=i(e),r=c(this),f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m;v&&(m=n(m,f>2?arguments[2]:void 0));var y,g,_,E,T,R,O=d(t),I=0;if(!O||this===h&&s(O))for(y=u(t),g=r?new this(y):h(y);y>I;I++)R=v?m(t[I],I):t[I],l(g,I,R);else for(g=r?new this:[],T=(E=p(t,O)).next;!(_=o(T,E)).done;I++)R=v?a(E,m,[_.value,I],!0):_.value,l(g,I,R);return g.length=I,g}},9617:function(e,t,r){"use strict";var n=r(5397),o=r(5610),i=r(6198),a=function(e){return function(t,r,a){var s=n(t),c=i(s);if(0===c)return!e&&-1;var u,l=o(a,c);if(e&&r!=r){for(;c>l;)if((u=s[l++])!=u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9213:function(e,t,r){"use strict";var n=r(6080),o=r(9504),i=r(7055),a=r(8981),s=r(6198),c=r(1469),u=o([].push),l=function(e){var t=1===e,r=2===e,o=3===e,l=4===e,p=6===e,d=7===e,h=5===e||p;return function(f,m,v,y){for(var g,_,E=a(f),T=i(E),R=s(T),O=n(m,v),I=0,S=y||c,C=t?S(f,R):r||d?S(f,0):void 0;R>I;I++)if((h||I in T)&&(_=O(g=T[I],I,E),e))if(t)C[I]=_;else if(_)switch(e){case 3:return!0;case 5:return g;case 6:return I;case 2:u(C,g)}else switch(e){case 4:return!1;case 7:u(C,g)}return p?-1:o||l?l:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},8379:function(e,t,r){"use strict";var n=r(8745),o=r(5397),i=r(1291),a=r(6198),s=r(4598),c=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,p=s("lastIndexOf"),d=l||!p;e.exports=d?function(e){if(l)return n(u,this,arguments)||0;var t=o(this),r=a(t);if(0===r)return-1;var s=r-1;for(arguments.length>1&&(s=c(s,i(arguments[1]))),s<0&&(s=r+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:u},597:function(e,t,r){"use strict";var n=r(9039),o=r(8227),i=r(7388),a=o("species");e.exports=function(e){return i>=51||!n((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4598:function(e,t,r){"use strict";var n=r(9039);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},926:function(e,t,r){"use strict";var n=r(6925),o=r(8981),i=r(7055),a=r(6198),s=TypeError,c="Reduce of empty array with no initial value",u=function(e){return function(t,r,u,l){var p=o(t),d=i(p),h=a(p);if(n(r),0===h&&u<2)throw new s(c);var f=e?h-1:0,m=e?-1:1;if(u<2)for(;;){if(f in d){l=d[f],f+=m;break}if(f+=m,e?f<0:h<=f)throw new s(c)}for(;e?f>=0:h>f;f+=m)f in d&&(l=r(l,d[f],f,p));return l}};e.exports={left:u(!1),right:u(!0)}},4527:function(e,t,r){"use strict";var n=r(3724),o=r(4376),i=TypeError,a=Object.getOwnPropertyDescriptor,s=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(o(e)&&!a(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},7680:function(e,t,r){"use strict";var n=r(9504);e.exports=n([].slice)},4488:function(e,t,r){"use strict";var n=r(7680),o=Math.floor,i=function(e,t){var r=e.length;if(r<8)for(var a,s,c=1;c<r;){for(s=c,a=e[c];s&&t(e[s-1],a)>0;)e[s]=e[--s];s!==c++&&(e[s]=a)}else for(var u=o(r/2),l=i(n(e,0,u),t),p=i(n(e,u),t),d=l.length,h=p.length,f=0,m=0;f<d||m<h;)e[f+m]=f<d&&m<h?t(l[f],p[m])<=0?l[f++]:p[m++]:f<d?l[f++]:p[m++];return e};e.exports=i},7433:function(e,t,r){"use strict";var n=r(4376),o=r(3517),i=r(34),a=r(8227)("species"),s=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(o(t)&&(t===s||n(t.prototype))||i(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},1469:function(e,t,r){"use strict";var n=r(7433);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},6319:function(e,t,r){"use strict";var n=r(8551),o=r(9539);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){o(e,"throw",t)}}},4428:function(e,t,r){"use strict";var n=r(8227)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!o)return!1}catch(e){return!1}var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},4576:function(e,t,r){"use strict";var n=r(9504),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},6955:function(e,t,r){"use strict";var n=r(2140),o=r(4901),i=r(4576),a=r(8227)("toStringTag"),s=Object,c="Arguments"===i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=s(e),a))?r:c?i(t):"Object"===(n=i(t))&&o(t.callee)?"Arguments":n}},6938:function(e,t,r){"use strict";var n=r(2360),o=r(2106),i=r(6279),a=r(6080),s=r(679),c=r(4117),u=r(2652),l=r(1088),p=r(2529),d=r(7633),h=r(3724),f=r(3451).fastKey,m=r(1181),v=m.set,y=m.getterFor;e.exports={getConstructor:function(e,t,r,l){var p=e((function(e,o){s(e,d),v(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),h||(e.size=0),c(o)||u(o,e[l],{that:e,AS_ENTRIES:r})})),d=p.prototype,m=y(t),g=function(e,t,r){var n,o,i=m(e),a=_(e,t);return a?a.value=r:(i.last=a={index:o=f(t,!0),key:t,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),h?i.size++:e.size++,"F"!==o&&(i.index[o]=a)),e},_=function(e,t){var r,n=m(e),o=f(t);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key===t)return r};return i(d,{clear:function(){for(var e=m(this),t=e.first;t;)t.removed=!0,t.previous&&(t.previous=t.previous.next=void 0),t=t.next;e.first=e.last=void 0,e.index=n(null),h?e.size=0:this.size=0},delete:function(e){var t=this,r=m(t),n=_(t,e);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first===n&&(r.first=o),r.last===n&&(r.last=i),h?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=m(this),n=a(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!_(this,e)}}),i(d,r?{get:function(e){var t=_(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),h&&o(d,"size",{configurable:!0,get:function(){return m(this).size}}),p},setStrong:function(e,t,r){var n=t+" Iterator",o=y(t),i=y(n);l(e,t,(function(e,t){v(this,{type:n,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?p("keys"===t?r.key:"values"===t?r.value:[r.key,r.value],!1):(e.target=void 0,p(void 0,!0))}),r?"entries":"values",!r,!0),d(t)}}},6468:function(e,t,r){"use strict";var n=r(6518),o=r(4475),i=r(9504),a=r(2796),s=r(6840),c=r(3451),u=r(2652),l=r(679),p=r(4901),d=r(4117),h=r(34),f=r(9039),m=r(4428),v=r(687),y=r(3167);e.exports=function(e,t,r){var g=-1!==e.indexOf("Map"),_=-1!==e.indexOf("Weak"),E=g?"set":"add",T=o[e],R=T&&T.prototype,O=T,I={},S=function(e){var t=i(R[e]);s(R,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(_&&!h(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return _&&!h(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(_&&!h(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(a(e,!p(T)||!(_||R.forEach&&!f((function(){(new T).entries().next()})))))O=r.getConstructor(t,e,g,E),c.enable();else if(a(e,!0)){var C=new O,A=C[E](_?{}:-0,1)!==C,b=f((function(){C.has(1)})),N=m((function(e){new T(e)})),M=!_&&f((function(){for(var e=new T,t=5;t--;)e[E](t,t);return!e.has(-0)}));N||((O=t((function(e,t){l(e,R);var r=y(new T,e,O);return d(t)||u(t,r[E],{that:r,AS_ENTRIES:g}),r}))).prototype=R,R.constructor=O),(b||M)&&(S("delete"),S("has"),g&&S("get")),(M||A)&&S(E),_&&R.clear&&delete R.clear}return I[e]=O,n({global:!0,constructor:!0,forced:O!==T},I),v(O,e),_||r.setStrong(O,e,g),O}},7740:function(e,t,r){"use strict";var n=r(9297),o=r(5031),i=r(7347),a=r(4913);e.exports=function(e,t,r){for(var s=o(t),c=a.f,u=i.f,l=0;l<s.length;l++){var p=s[l];n(e,p)||r&&n(r,p)||c(e,p,u(t,p))}}},1436:function(e,t,r){"use strict";var n=r(8227)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},2211:function(e,t,r){"use strict";var n=r(9039);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},2529:function(e){"use strict";e.exports=function(e,t){return{value:e,done:t}}},6699:function(e,t,r){"use strict";var n=r(3724),o=r(4913),i=r(6980);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},6980:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4659:function(e,t,r){"use strict";var n=r(3724),o=r(4913),i=r(6980);e.exports=function(e,t,r){n?o.f(e,t,i(0,r)):e[t]=r}},2106:function(e,t,r){"use strict";var n=r(283),o=r(4913);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},6840:function(e,t,r){"use strict";var n=r(4901),o=r(4913),i=r(283),a=r(9433);e.exports=function(e,t,r,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:t;if(n(r)&&i(r,u,s),s.global)c?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},6279:function(e,t,r){"use strict";var n=r(6840);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},9433:function(e,t,r){"use strict";var n=r(4475),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},4606:function(e,t,r){"use strict";var n=r(6823),o=TypeError;e.exports=function(e,t){if(!delete e[t])throw new o("Cannot delete property "+n(t)+" of "+n(e))}},3724:function(e,t,r){"use strict";var n=r(9039);e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4055:function(e,t,r){"use strict";var n=r(4475),o=r(34),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},6837:function(e){"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},7400:function(e){"use strict";e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9296:function(e,t,r){"use strict";var n=r(4055)("span").classList,o=n&&n.constructor&&n.constructor.prototype;e.exports=o===Object.prototype?void 0:o},8834:function(e,t,r){"use strict";var n=r(9392).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},7290:function(e,t,r){"use strict";var n=r(516),o=r(9088);e.exports=!n&&!o&&"object"==typeof window&&"object"==typeof document},6763:function(e){"use strict";e.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},516:function(e){"use strict";e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},3202:function(e,t,r){"use strict";var n=r(9392);e.exports=/MSIE|Trident/.test(n)},28:function(e,t,r){"use strict";var n=r(9392);e.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},8119:function(e,t,r){"use strict";var n=r(9392);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},9088:function(e,t,r){"use strict";var n=r(4475),o=r(4576);e.exports="process"===o(n.process)},6765:function(e,t,r){"use strict";var n=r(9392);e.exports=/web0s(?!.*chrome)/i.test(n)},9392:function(e){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7388:function(e,t,r){"use strict";var n,o,i=r(4475),a=r(9392),s=i.process,c=i.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},9160:function(e,t,r){"use strict";var n=r(9392).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},8727:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(e,t,r){"use strict";var n=r(4475),o=r(7347).f,i=r(6699),a=r(6840),s=r(9433),c=r(7740),u=r(2796);e.exports=function(e,t){var r,l,p,d,h,f=e.target,m=e.global,v=e.stat;if(r=m?n:v?n[f]||s(f,{}):n[f]&&n[f].prototype)for(l in t){if(d=t[l],p=e.dontCallGetSet?(h=o(r,l))&&h.value:r[l],!u(m?l:f+(v?".":"#")+l,e.forced)&&void 0!==p){if(typeof d==typeof p)continue;c(d,p)}(e.sham||p&&p.sham)&&i(d,"sham",!0),a(r,l,d,e)}}},9039:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},2744:function(e,t,r){"use strict";var n=r(9039);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},8745:function(e,t,r){"use strict";var n=r(616),o=Function.prototype,i=o.apply,a=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(i):function(){return a.apply(i,arguments)})},6080:function(e,t,r){"use strict";var n=r(7476),o=r(6925),i=r(616),a=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},616:function(e,t,r){"use strict";var n=r(9039);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},566:function(e,t,r){"use strict";var n=r(9504),o=r(6925),i=r(34),a=r(9297),s=r(7680),c=r(616),u=Function,l=n([].concat),p=n([].join),d={};e.exports=c?u.bind:function(e){var t=o(this),r=t.prototype,n=s(arguments,1),c=function(){var r=l(n,s(arguments));return this instanceof c?function(e,t,r){if(!a(d,t)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";d[t]=u("C,a","return new C("+p(n,",")+")")}return d[t](e,r)}(t,r.length,r):t.apply(e,r)};return i(r)&&(c.prototype=r),c}},9565:function(e,t,r){"use strict";var n=r(616),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},350:function(e,t,r){"use strict";var n=r(3724),o=r(9297),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,u=s&&(!n||n&&a(i,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},6706:function(e,t,r){"use strict";var n=r(9504),o=r(6925);e.exports=function(e,t,r){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},7476:function(e,t,r){"use strict";var n=r(4576),o=r(9504);e.exports=function(e){if("Function"===n(e))return o(e)}},9504:function(e,t,r){"use strict";var n=r(616),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);e.exports=n?a:function(e){return function(){return i.apply(e,arguments)}}},7751:function(e,t,r){"use strict";var n=r(4475),o=r(4901);e.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},851:function(e,t,r){"use strict";var n=r(6955),o=r(5966),i=r(4117),a=r(6269),s=r(8227)("iterator");e.exports=function(e){if(!i(e))return o(e,s)||o(e,"@@iterator")||a[n(e)]}},81:function(e,t,r){"use strict";var n=r(9565),o=r(6925),i=r(8551),a=r(6823),s=r(851),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(o(r))return i(n(r,e));throw new c(a(e)+" is not iterable")}},6933:function(e,t,r){"use strict";var n=r(9504),o=r(4376),i=r(4901),a=r(4576),s=r(655),c=n([].push);e.exports=function(e){if(i(e))return e;if(o(e)){for(var t=e.length,r=[],n=0;n<t;n++){var u=e[n];"string"==typeof u?c(r,u):"number"!=typeof u&&"Number"!==a(u)&&"String"!==a(u)||c(r,s(u))}var l=r.length,p=!0;return function(e,t){if(p)return p=!1,t;if(o(this))return t;for(var n=0;n<l;n++)if(r[n]===e)return t}}}},5966:function(e,t,r){"use strict";var n=r(6925),o=r(4117);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},4475:function(e,t,r){"use strict";var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:function(e,t,r){"use strict";var n=r(9504),o=r(8981),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},421:function(e){"use strict";e.exports={}},3138:function(e){"use strict";e.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}},397:function(e,t,r){"use strict";var n=r(7751);e.exports=n("document","documentElement")},5917:function(e,t,r){"use strict";var n=r(3724),o=r(9039),i=r(4055);e.exports=!n&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8490:function(e){"use strict";var t=Array,r=Math.abs,n=Math.pow,o=Math.floor,i=Math.log,a=Math.LN2;e.exports={pack:function(e,s,c){var u,l,p,d=t(c),h=8*c-s-1,f=(1<<h)-1,m=f>>1,v=23===s?n(2,-24)-n(2,-77):0,y=e<0||0===e&&1/e<0?1:0,g=0;for((e=r(e))!=e||e===1/0?(l=e!=e?1:0,u=f):(u=o(i(e)/a),e*(p=n(2,-u))<1&&(u--,p*=2),(e+=u+m>=1?v/p:v*n(2,1-m))*p>=2&&(u++,p/=2),u+m>=f?(l=0,u=f):u+m>=1?(l=(e*p-1)*n(2,s),u+=m):(l=e*n(2,m-1)*n(2,s),u=0));s>=8;)d[g++]=255&l,l/=256,s-=8;for(u=u<<s|l,h+=s;h>0;)d[g++]=255&u,u/=256,h-=8;return d[--g]|=128*y,d},unpack:function(e,t){var r,o=e.length,i=8*o-t-1,a=(1<<i)-1,s=a>>1,c=i-7,u=o-1,l=e[u--],p=127&l;for(l>>=7;c>0;)p=256*p+e[u--],c-=8;for(r=p&(1<<-c)-1,p>>=-c,c+=t;c>0;)r=256*r+e[u--],c-=8;if(0===p)p=1-s;else{if(p===a)return r?NaN:l?-1/0:1/0;r+=n(2,t),p-=s}return(l?-1:1)*r*n(2,p-t)}}},7055:function(e,t,r){"use strict";var n=r(9504),o=r(9039),i=r(4576),a=Object,s=n("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?s(e,""):a(e)}:a},3167:function(e,t,r){"use strict";var n=r(4901),o=r(34),i=r(2967);e.exports=function(e,t,r){var a,s;return i&&n(a=t.constructor)&&a!==r&&o(s=a.prototype)&&s!==r.prototype&&i(e,s),e}},3706:function(e,t,r){"use strict";var n=r(9504),o=r(4901),i=r(7629),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),e.exports=i.inspectSource},3451:function(e,t,r){"use strict";var n=r(6518),o=r(9504),i=r(421),a=r(34),s=r(9297),c=r(4913).f,u=r(8480),l=r(298),p=r(4124),d=r(3392),h=r(2744),f=!1,m=d("meta"),v=0,y=function(e){c(e,m,{value:{objectID:"O"+v++,weakData:{}}})},g=e.exports={enable:function(){g.enable=function(){},f=!0;var e=u.f,t=o([].splice),r={};r[m]=1,e(r).length&&(u.f=function(r){for(var n=e(r),o=0,i=n.length;o<i;o++)if(n[o]===m){t(n,o,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,m)){if(!p(e))return"F";if(!t)return"E";y(e)}return e[m].objectID},getWeakData:function(e,t){if(!s(e,m)){if(!p(e))return!0;if(!t)return!1;y(e)}return e[m].weakData},onFreeze:function(e){return h&&f&&p(e)&&!s(e,m)&&y(e),e}};i[m]=!0},1181:function(e,t,r){"use strict";var n,o,i,a=r(8622),s=r(4475),c=r(34),u=r(6699),l=r(9297),p=r(7629),d=r(6119),h=r(421),f="Object already initialized",m=s.TypeError,v=s.WeakMap;if(a||p.state){var y=p.state||(p.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,n=function(e,t){if(y.has(e))throw new m(f);return t.facade=e,y.set(e,t),t},o=function(e){return y.get(e)||{}},i=function(e){return y.has(e)}}else{var g=d("state");h[g]=!0,n=function(e,t){if(l(e,g))throw new m(f);return t.facade=e,u(e,g,t),t},o=function(e){return l(e,g)?e[g]:{}},i=function(e){return l(e,g)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return r}}}},4209:function(e,t,r){"use strict";var n=r(8227),o=r(6269),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},4376:function(e,t,r){"use strict";var n=r(4576);e.exports=Array.isArray||function(e){return"Array"===n(e)}},1108:function(e,t,r){"use strict";var n=r(6955);e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},4901:function(e){"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},3517:function(e,t,r){"use strict";var n=r(9504),o=r(9039),i=r(4901),a=r(6955),s=r(7751),c=r(3706),u=function(){},l=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,d=n(p.exec),h=!p.test(u),f=function(e){if(!i(e))return!1;try{return l(u,[],e),!0}catch(e){return!1}},m=function(e){if(!i(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!d(p,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!l||o((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?m:f},2796:function(e,t,r){"use strict";var n=r(9039),o=r(4901),i=/#|\.prototype\./,a=function(e,t){var r=c[s(e)];return r===l||r!==u&&(o(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},2087:function(e,t,r){"use strict";var n=r(34),o=Math.floor;e.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&o(e)===e}},4117:function(e){"use strict";e.exports=function(e){return null==e}},34:function(e,t,r){"use strict";var n=r(4901);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},3925:function(e,t,r){"use strict";var n=r(34);e.exports=function(e){return n(e)||null===e}},6395:function(e){"use strict";e.exports=!1},788:function(e,t,r){"use strict";var n=r(34),o=r(4576),i=r(8227)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"===o(e))}},757:function(e,t,r){"use strict";var n=r(7751),o=r(4901),i=r(1625),a=r(7040),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,s(e))}},2652:function(e,t,r){"use strict";var n=r(6080),o=r(9565),i=r(8551),a=r(6823),s=r(4209),c=r(6198),u=r(1625),l=r(81),p=r(851),d=r(9539),h=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,r){var v,y,g,_,E,T,R,O=r&&r.that,I=!(!r||!r.AS_ENTRIES),S=!(!r||!r.IS_RECORD),C=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),b=n(t,O),N=function(e){return v&&d(v,"normal",e),new f(!0,e)},M=function(e){return I?(i(e),A?b(e[0],e[1],N):b(e[0],e[1])):A?b(e,N):b(e)};if(S)v=e.iterator;else if(C)v=e;else{if(!(y=p(e)))throw new h(a(e)+" is not iterable");if(s(y)){for(g=0,_=c(e);_>g;g++)if((E=M(e[g]))&&u(m,E))return E;return new f(!1)}v=l(e,y)}for(T=S?e.next:v.next;!(R=o(T,v)).done;){try{E=M(R.value)}catch(e){d(v,"throw",e)}if("object"==typeof E&&E&&u(m,E))return E}return new f(!1)}},9539:function(e,t,r){"use strict";var n=r(9565),o=r(8551),i=r(5966);e.exports=function(e,t,r){var a,s;o(e);try{if(!(a=i(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw r;if(s)throw a;return o(a),r}},3994:function(e,t,r){"use strict";var n=r(7657).IteratorPrototype,o=r(2360),i=r(6980),a=r(687),s=r(6269),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=o(n,{next:i(+!u,r)}),a(e,l,!1,!0),s[l]=c,e}},1088:function(e,t,r){"use strict";var n=r(6518),o=r(9565),i=r(6395),a=r(350),s=r(4901),c=r(3994),u=r(2787),l=r(2967),p=r(687),d=r(6699),h=r(6840),f=r(8227),m=r(6269),v=r(7657),y=a.PROPER,g=a.CONFIGURABLE,_=v.IteratorPrototype,E=v.BUGGY_SAFARI_ITERATORS,T=f("iterator"),R="keys",O="values",I="entries",S=function(){return this};e.exports=function(e,t,r,a,f,v,C){c(r,t,a);var A,b,N,M=function(e){if(e===f&&x)return x;if(!E&&e&&e in k)return k[e];switch(e){case R:case O:case I:return function(){return new r(this,e)}}return function(){return new r(this)}},w=t+" Iterator",U=!1,k=e.prototype,P=k[T]||k["@@iterator"]||f&&k[f],x=!E&&P||M(f),L="Array"===t&&k.entries||P;if(L&&(A=u(L.call(new e)))!==Object.prototype&&A.next&&(i||u(A)===_||(l?l(A,_):s(A[T])||h(A,T,S)),p(A,w,!0,!0),i&&(m[w]=S)),y&&f===O&&P&&P.name!==O&&(!i&&g?d(k,"name",O):(U=!0,x=function(){return o(P,this)})),f)if(b={values:M(O),keys:v?x:M(R),entries:M(I)},C)for(N in b)(E||U||!(N in k))&&h(k,N,b[N]);else n({target:t,proto:!0,forced:E||U},b);return i&&!C||k[T]===x||h(k,T,x,{name:f}),m[t]=x,b}},7657:function(e,t,r){"use strict";var n,o,i,a=r(9039),s=r(4901),c=r(34),u=r(2360),l=r(2787),p=r(6840),d=r(8227),h=r(6395),f=d("iterator"),m=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(n=o):m=!0),!c(n)||a((function(){var e={};return n[f].call(e)!==e}))?n={}:h&&(n=u(n)),s(n[f])||p(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},6269:function(e){"use strict";e.exports={}},6198:function(e,t,r){"use strict";var n=r(8014);e.exports=function(e){return n(e.length)}},283:function(e,t,r){"use strict";var n=r(9504),o=r(9039),i=r(4901),a=r(9297),s=r(3724),c=r(350).CONFIGURABLE,u=r(3706),l=r(1181),p=l.enforce,d=l.get,h=String,f=Object.defineProperty,m=n("".slice),v=n("".replace),y=n([].join),g=s&&!o((function(){return 8!==f((function(){}),"length",{value:8}).length})),_=String(String).split("String"),E=e.exports=function(e,t,r){"Symbol("===m(h(t),0,7)&&(t="["+v(h(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||c&&e.name!==t)&&(s?f(e,"name",{value:t,configurable:!0}):e.name=t),g&&r&&a(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=p(e);return a(n,"source")||(n.source=y(_,"string"==typeof t?t:"")),e};Function.prototype.toString=E((function(){return i(this)&&d(this).source||u(this)}),"toString")},3164:function(e,t,r){"use strict";var n=r(7782),o=Math.abs,i=2220446049250313e-31,a=1/i;e.exports=function(e,t,r,s){var c=+e,u=o(c),l=n(c);if(u<s)return l*function(e){return e+a-a}(u/s/t)*s*t;var p=(1+t/i)*u,d=p-(p-u);return d>r||d!=d?l*(1/0):l*d}},5617:function(e,t,r){"use strict";var n=r(3164);e.exports=Math.fround||function(e){return n(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},7782:function(e){"use strict";e.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},741:function(e){"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},1955:function(e,t,r){"use strict";var n,o,i,a,s,c=r(4475),u=r(3389),l=r(6080),p=r(9225).set,d=r(8265),h=r(8119),f=r(28),m=r(6765),v=r(9088),y=c.MutationObserver||c.WebKitMutationObserver,g=c.document,_=c.process,E=c.Promise,T=u("queueMicrotask");if(!T){var R=new d,O=function(){var e,t;for(v&&(e=_.domain)&&e.exit();t=R.get();)try{t()}catch(e){throw R.head&&n(),e}e&&e.enter()};h||v||m||!y||!g?!f&&E&&E.resolve?((a=E.resolve(void 0)).constructor=E,s=l(a.then,a),n=function(){s(O)}):v?n=function(){_.nextTick(O)}:(p=l(p,c),n=function(){p(O)}):(o=!0,i=g.createTextNode(""),new y(O).observe(i,{characterData:!0}),n=function(){i.data=o=!o}),T=function(e){R.head||n(),R.add(e)}}e.exports=T},6043:function(e,t,r){"use strict";var n=r(6925),o=TypeError,i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw new o("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},5749:function(e,t,r){"use strict";var n=r(788),o=TypeError;e.exports=function(e){if(n(e))throw new o("The method doesn't accept regular expressions");return e}},4213:function(e,t,r){"use strict";var n=r(3724),o=r(9504),i=r(9565),a=r(9039),s=r(1072),c=r(3717),u=r(8773),l=r(8981),p=r(7055),d=Object.assign,h=Object.defineProperty,f=o([].concat);e.exports=!d||a((function(){if(n&&1!==d({b:1},d(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach((function(e){t[e]=e})),7!==d({},e)[r]||s(d({},t)).join("")!==o}))?function(e,t){for(var r=l(e),o=arguments.length,a=1,d=c.f,h=u.f;o>a;)for(var m,v=p(arguments[a++]),y=d?f(s(v),d(v)):s(v),g=y.length,_=0;g>_;)m=y[_++],n&&!i(h,v,m)||(r[m]=v[m]);return r}:d},2360:function(e,t,r){"use strict";var n,o=r(8551),i=r(6801),a=r(8727),s=r(421),c=r(397),u=r(4055),l=r(6119),p="prototype",d="script",h=l("IE_PROTO"),f=function(){},m=function(e){return"<"+d+">"+e+"</"+d+">"},v=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;y="undefined"!=typeof document?document.domain&&n?v(n):(t=u("iframe"),r="java"+d+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):v(n);for(var o=a.length;o--;)delete y[p][a[o]];return y()};s[h]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[p]=o(e),r=new f,f[p]=null,r[h]=e):r=y(),void 0===t?r:i.f(r,t)}},6801:function(e,t,r){"use strict";var n=r(3724),o=r(8686),i=r(4913),a=r(8551),s=r(5397),c=r(1072);t.f=n&&!o?Object.defineProperties:function(e,t){a(e);for(var r,n=s(t),o=c(t),u=o.length,l=0;u>l;)i.f(e,r=o[l++],n[r]);return e}},4913:function(e,t,r){"use strict";var n=r(3724),o=r(5917),i=r(8686),a=r(8551),s=r(6969),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,p="enumerable",d="configurable",h="writable";t.f=n?i?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var n=l(e,t);n&&n[h]&&(e[t]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:p in r?r[p]:n[p],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(a(e),t=s(t),a(r),o)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7347:function(e,t,r){"use strict";var n=r(3724),o=r(9565),i=r(8773),a=r(6980),s=r(5397),c=r(6969),u=r(9297),l=r(5917),p=Object.getOwnPropertyDescriptor;t.f=n?p:function(e,t){if(e=s(e),t=c(t),l)try{return p(e,t)}catch(e){}if(u(e,t))return a(!o(i.f,e,t),e[t])}},298:function(e,t,r){"use strict";var n=r(4576),o=r(5397),i=r(8480).f,a=r(7680),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"===n(e)?function(e){try{return i(e)}catch(e){return a(s)}}(e):i(o(e))}},8480:function(e,t,r){"use strict";var n=r(1828),o=r(8727).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},3717:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},2787:function(e,t,r){"use strict";var n=r(9297),o=r(4901),i=r(8981),a=r(6119),s=r(2211),c=a("IE_PROTO"),u=Object,l=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=i(e);if(n(t,c))return t[c];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},4124:function(e,t,r){"use strict";var n=r(9039),o=r(34),i=r(4576),a=r(5652),s=Object.isExtensible,c=n((function(){s(1)}));e.exports=c||a?function(e){return!!o(e)&&(!a||"ArrayBuffer"!==i(e))&&(!s||s(e))}:s},1625:function(e,t,r){"use strict";var n=r(9504);e.exports=n({}.isPrototypeOf)},1828:function(e,t,r){"use strict";var n=r(9504),o=r(9297),i=r(5397),a=r(9617).indexOf,s=r(421),c=n([].push);e.exports=function(e,t){var r,n=i(e),u=0,l=[];for(r in n)!o(s,r)&&o(n,r)&&c(l,r);for(;t.length>u;)o(n,r=t[u++])&&(~a(l,r)||c(l,r));return l}},1072:function(e,t,r){"use strict";var n=r(1828),o=r(8727);e.exports=Object.keys||function(e){return n(e,o)}},8773:function(e,t){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},2967:function(e,t,r){"use strict";var n=r(6706),o=r(34),i=r(7750),a=r(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),a(n),o(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},2357:function(e,t,r){"use strict";var n=r(3724),o=r(9039),i=r(9504),a=r(2787),s=r(1072),c=r(5397),u=i(r(8773).f),l=i([].push),p=n&&o((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),d=function(e){return function(t){for(var r,o=c(t),i=s(o),d=p&&null===a(o),h=i.length,f=0,m=[];h>f;)r=i[f++],n&&!(d?r in o:u(o,r))||l(m,e?[r,o[r]]:o[r]);return m}};e.exports={entries:d(!0),values:d(!1)}},3179:function(e,t,r){"use strict";var n=r(2140),o=r(6955);e.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},4270:function(e,t,r){"use strict";var n=r(9565),o=r(4901),i=r(34),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&o(r=e.toString)&&!i(s=n(r,e)))return s;if(o(r=e.valueOf)&&!i(s=n(r,e)))return s;if("string"!==t&&o(r=e.toString)&&!i(s=n(r,e)))return s;throw new a("Can't convert object to primitive value")}},5031:function(e,t,r){"use strict";var n=r(7751),o=r(9504),i=r(8480),a=r(3717),s=r(8551),c=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(s(e)),r=a.f;return r?c(t,r(e)):t}},9167:function(e,t,r){"use strict";var n=r(4475);e.exports=n},1103:function(e){"use strict";e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},916:function(e,t,r){"use strict";var n=r(4475),o=r(550),i=r(4901),a=r(2796),s=r(3706),c=r(8227),u=r(7290),l=r(516),p=r(6395),d=r(7388),h=o&&o.prototype,f=c("species"),m=!1,v=i(n.PromiseRejectionEvent),y=a("Promise",(function(){var e=s(o),t=e!==String(o);if(!t&&66===d)return!0;if(p&&(!h.catch||!h.finally))return!0;if(!d||d<51||!/native code/.test(e)){var r=new o((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[f]=n,!(m=r.then((function(){}))instanceof n))return!0}return!t&&(u||l)&&!v}));e.exports={CONSTRUCTOR:y,REJECTION_EVENT:v,SUBCLASSING:m}},550:function(e,t,r){"use strict";var n=r(4475);e.exports=n.Promise},3438:function(e,t,r){"use strict";var n=r(8551),o=r(34),i=r(6043);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},537:function(e,t,r){"use strict";var n=r(550),o=r(4428),i=r(916).CONSTRUCTOR;e.exports=i||!o((function(e){n.all(e).then(void 0,(function(){}))}))},8265:function(e){"use strict";var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},7323:function(e,t,r){"use strict";var n,o,i=r(9565),a=r(9504),s=r(655),c=r(7979),u=r(8429),l=r(5745),p=r(2360),d=r(1181).get,h=r(3635),f=r(8814),m=l("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,y=v,g=a("".charAt),_=a("".indexOf),E=a("".replace),T=a("".slice),R=(o=/b*/g,i(v,n=/a/,"a"),i(v,o,"a"),0!==n.lastIndex||0!==o.lastIndex),O=u.BROKEN_CARET,I=void 0!==/()??/.exec("")[1];(R||I||O||h||f)&&(y=function(e){var t,r,n,o,a,u,l,h=this,f=d(h),S=s(e),C=f.raw;if(C)return C.lastIndex=h.lastIndex,t=i(y,C,S),h.lastIndex=C.lastIndex,t;var A=f.groups,b=O&&h.sticky,N=i(c,h),M=h.source,w=0,U=S;if(b&&(N=E(N,"y",""),-1===_(N,"g")&&(N+="g"),U=T(S,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==g(S,h.lastIndex-1))&&(M="(?: "+M+")",U=" "+U,w++),r=new RegExp("^(?:"+M+")",N)),I&&(r=new RegExp("^"+M+"$(?!\\s)",N)),R&&(n=h.lastIndex),o=i(v,b?r:h,U),b?o?(o.input=T(o.input,w),o[0]=T(o[0],w),o.index=h.lastIndex,h.lastIndex+=o[0].length):h.lastIndex=0:R&&o&&(h.lastIndex=h.global?o.index+o[0].length:n),I&&o&&o.length>1&&i(m,o[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&A)for(o.groups=u=p(null),a=0;a<A.length;a++)u[(l=A[a])[0]]=o[l[1]];return o}),e.exports=y},7979:function(e,t,r){"use strict";var n=r(8551);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},1034:function(e,t,r){"use strict";var n=r(9565),o=r(9297),i=r(1625),a=r(7979),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||o(e,"flags")||!i(s,e)?t:n(a,e)}},8429:function(e,t,r){"use strict";var n=r(9039),o=r(4475).RegExp,i=n((function(){var e=o("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),a=i||n((function(){return!o("a","y").sticky})),s=i||n((function(){var e=o("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},3635:function(e,t,r){"use strict";var n=r(9039),o=r(4475).RegExp;e.exports=n((function(){var e=o(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},8814:function(e,t,r){"use strict";var n=r(9039),o=r(4475).RegExp;e.exports=n((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},7750:function(e,t,r){"use strict";var n=r(4117),o=TypeError;e.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},3389:function(e,t,r){"use strict";var n=r(4475),o=r(3724),i=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!o)return n[e];var t=i(n,e);return t&&t.value}},9472:function(e,t,r){"use strict";var n,o=r(4475),i=r(8745),a=r(4901),s=r(6763),c=r(9392),u=r(7680),l=r(2812),p=o.Function,d=/MSIE .\./.test(c)||s&&((n=o.Bun.version.split(".")).length<3||"0"===n[0]&&(n[1]<3||"3"===n[1]&&"0"===n[2]));e.exports=function(e,t){var r=t?2:1;return d?function(n,o){var s=l(arguments.length,1)>r,c=a(n)?n:p(n),d=s?u(arguments,r):[],h=s?function(){i(c,this,d)}:c;return t?e(h,o):e(h)}:e}},7633:function(e,t,r){"use strict";var n=r(7751),o=r(2106),i=r(8227),a=r(3724),s=i("species");e.exports=function(e){var t=n(e);a&&t&&!t[s]&&o(t,s,{configurable:!0,get:function(){return this}})}},687:function(e,t,r){"use strict";var n=r(4913).f,o=r(9297),i=r(8227)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!o(e,i)&&n(e,i,{configurable:!0,value:t})}},6119:function(e,t,r){"use strict";var n=r(5745),o=r(3392),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},7629:function(e,t,r){"use strict";var n=r(6395),o=r(4475),i=r(9433),a="__core-js_shared__",s=e.exports=o[a]||i(a,{});(s.versions||(s.versions=[])).push({version:"3.36.1",mode:n?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(e,t,r){"use strict";var n=r(7629);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},2293:function(e,t,r){"use strict";var n=r(8551),o=r(5548),i=r(4117),a=r(8227)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||i(r=n(s)[a])?t:o(r)}},8183:function(e,t,r){"use strict";var n=r(9504),o=r(1291),i=r(655),a=r(7750),s=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,p=i(a(t)),d=o(r),h=p.length;return d<0||d>=h?e?"":void 0:(n=c(p,d))<55296||n>56319||d+1===h||(l=c(p,d+1))<56320||l>57343?e?s(p,d):n:e?u(p,d,d+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},6098:function(e,t,r){"use strict";var n=r(9504),o=2147483647,i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",c=RangeError,u=n(a.exec),l=Math.floor,p=String.fromCharCode,d=n("".charCodeAt),h=n([].join),f=n([].push),m=n("".replace),v=n("".split),y=n("".toLowerCase),g=function(e){return e+22+75*(e<26)},_=function(e,t,r){var n=0;for(e=r?l(e/700):e>>1,e+=l(e/t);e>455;)e=l(e/35),n+=36;return l(n+36*e/(e+38))},E=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=d(e,r++);if(o>=55296&&o<=56319&&r<n){var i=d(e,r++);56320==(64512&i)?f(t,((1023&o)<<10)+(1023&i)+65536):(f(t,o),r--)}else f(t,o)}return t}(e);var r,n,i=e.length,a=128,u=0,m=72;for(r=0;r<e.length;r++)(n=e[r])<128&&f(t,p(n));var v=t.length,y=v;for(v&&f(t,"-");y<i;){var E=o;for(r=0;r<e.length;r++)(n=e[r])>=a&&n<E&&(E=n);var T=y+1;if(E-a>l((o-u)/T))throw new c(s);for(u+=(E-a)*T,a=E,r=0;r<e.length;r++){if((n=e[r])<a&&++u>o)throw new c(s);if(n===a){for(var R=u,O=36;;){var I=O<=m?1:O>=m+26?26:O-m;if(R<I)break;var S=R-I,C=36-I;f(t,p(g(I+S%C))),R=l(S/C),O+=36}f(t,p(g(R))),m=_(u,T,y===v),u=0,y++}}u++,a++}return h(t,"")};e.exports=function(e){var t,r,n=[],o=v(m(y(e),a,"."),".");for(t=0;t<o.length;t++)r=o[t],f(n,u(i,r)?"xn--"+E(r):r);return h(n,".")}},3802:function(e,t,r){"use strict";var n=r(9504),o=r(7750),i=r(655),a=r(5071),s=n("".replace),c=RegExp("^["+a+"]+"),u=RegExp("(^|[^"+a+"])["+a+"]+$"),l=function(e){return function(t){var r=i(o(t));return 1&e&&(r=s(r,c,"")),2&e&&(r=s(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},4495:function(e,t,r){"use strict";var n=r(7388),o=r(9039),i=r(4475).String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8242:function(e,t,r){"use strict";var n=r(9565),o=r(7751),i=r(8227),a=r(6840);e.exports=function(){var e=o("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,s=i("toPrimitive");t&&!t[s]&&a(t,s,(function(e){return n(r,this)}),{arity:1})}},1296:function(e,t,r){"use strict";var n=r(4495);e.exports=n&&!!Symbol.for&&!!Symbol.keyFor},9225:function(e,t,r){"use strict";var n,o,i,a,s=r(4475),c=r(8745),u=r(6080),l=r(4901),p=r(9297),d=r(9039),h=r(397),f=r(7680),m=r(4055),v=r(2812),y=r(8119),g=r(9088),_=s.setImmediate,E=s.clearImmediate,T=s.process,R=s.Dispatch,O=s.Function,I=s.MessageChannel,S=s.String,C=0,A={},b="onreadystatechange";d((function(){n=s.location}));var N=function(e){if(p(A,e)){var t=A[e];delete A[e],t()}},M=function(e){return function(){N(e)}},w=function(e){N(e.data)},U=function(e){s.postMessage(S(e),n.protocol+"//"+n.host)};_&&E||(_=function(e){v(arguments.length,1);var t=l(e)?e:O(e),r=f(arguments,1);return A[++C]=function(){c(t,void 0,r)},o(C),C},E=function(e){delete A[e]},g?o=function(e){T.nextTick(M(e))}:R&&R.now?o=function(e){R.now(M(e))}:I&&!y?(a=(i=new I).port2,i.port1.onmessage=w,o=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!d(U)?(o=U,s.addEventListener("message",w,!1)):o=b in m("script")?function(e){h.appendChild(m("script"))[b]=function(){h.removeChild(this),N(e)}}:function(e){setTimeout(M(e),0)}),e.exports={set:_,clear:E}},1240:function(e,t,r){"use strict";var n=r(9504);e.exports=n(1..valueOf)},5610:function(e,t,r){"use strict";var n=r(1291),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},5854:function(e,t,r){"use strict";var n=r(2777),o=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new o("Can't convert number to bigint");return BigInt(t)}},7696:function(e,t,r){"use strict";var n=r(1291),o=r(8014),i=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw new i("Wrong length or index");return r}},5397:function(e,t,r){"use strict";var n=r(7055),o=r(7750);e.exports=function(e){return n(o(e))}},1291:function(e,t,r){"use strict";var n=r(741);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},8014:function(e,t,r){"use strict";var n=r(1291),o=Math.min;e.exports=function(e){var t=n(e);return t>0?o(t,9007199254740991):0}},8981:function(e,t,r){"use strict";var n=r(7750),o=Object;e.exports=function(e){return o(n(e))}},8229:function(e,t,r){"use strict";var n=r(9590),o=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new o("Wrong offset");return r}},9590:function(e,t,r){"use strict";var n=r(1291),o=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new o("The argument can't be less than 0");return t}},2777:function(e,t,r){"use strict";var n=r(9565),o=r(34),i=r(757),a=r(5966),s=r(4270),c=r(8227),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,c=a(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!o(r)||i(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},6969:function(e,t,r){"use strict";var n=r(2777),o=r(757);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},2140:function(e,t,r){"use strict";var n={};n[r(8227)("toStringTag")]="z",e.exports="[object z]"===String(n)},655:function(e,t,r){"use strict";var n=r(6955),o=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},8319:function(e){"use strict";var t=Math.round;e.exports=function(e){var r=t(e);return r<0?0:r>255?255:255&r}},6823:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},5823:function(e,t,r){"use strict";var n=r(6518),o=r(4475),i=r(9565),a=r(3724),s=r(2805),c=r(4644),u=r(6346),l=r(679),p=r(6980),d=r(6699),h=r(2087),f=r(8014),m=r(7696),v=r(8229),y=r(8319),g=r(6969),_=r(9297),E=r(6955),T=r(34),R=r(757),O=r(2360),I=r(1625),S=r(2967),C=r(8480).f,A=r(3251),b=r(9213).forEach,N=r(7633),M=r(2106),w=r(4913),U=r(7347),k=r(5370),P=r(1181),x=r(3167),L=P.get,D=P.set,j=P.enforce,G=w.f,B=U.f,F=o.RangeError,H=u.ArrayBuffer,W=H.prototype,z=u.DataView,q=c.NATIVE_ARRAY_BUFFER_VIEWS,K=c.TYPED_ARRAY_TAG,V=c.TypedArray,J=c.TypedArrayPrototype,X=c.isTypedArray,Y="BYTES_PER_ELEMENT",Q="Wrong length",$=function(e,t){M(e,t,{configurable:!0,get:function(){return L(this)[t]}})},Z=function(e){var t;return I(W,e)||"ArrayBuffer"===(t=E(e))||"SharedArrayBuffer"===t},ee=function(e,t){return X(e)&&!R(t)&&t in e&&h(+t)&&t>=0},te=function(e,t){return t=g(t),ee(e,t)?p(2,e[t]):B(e,t)},re=function(e,t,r){return t=g(t),!(ee(e,t)&&T(r)&&_(r,"value"))||_(r,"get")||_(r,"set")||r.configurable||_(r,"writable")&&!r.writable||_(r,"enumerable")&&!r.enumerable?G(e,t,r):(e[t]=r.value,e)};a?(q||(U.f=te,w.f=re,$(J,"buffer"),$(J,"byteOffset"),$(J,"byteLength"),$(J,"length")),n({target:"Object",stat:!0,forced:!q},{getOwnPropertyDescriptor:te,defineProperty:re}),e.exports=function(e,t,r){var a=e.match(/\d+/)[0]/8,c=e+(r?"Clamped":"")+"Array",u="get"+e,p="set"+e,h=o[c],g=h,_=g&&g.prototype,E={},R=function(e,t){G(e,t,{get:function(){return function(e,t){var r=L(e);return r.view[u](t*a+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=L(e);o.view[p](t*a+o.byteOffset,r?y(n):n,!0)}(this,t,e)},enumerable:!0})};q?s&&(g=t((function(e,t,r,n){return l(e,_),x(T(t)?Z(t)?void 0!==n?new h(t,v(r,a),n):void 0!==r?new h(t,v(r,a)):new h(t):X(t)?k(g,t):i(A,g,t):new h(m(t)),e,g)})),S&&S(g,V),b(C(h),(function(e){e in g||d(g,e,h[e])})),g.prototype=_):(g=t((function(e,t,r,n){l(e,_);var o,s,c,u=0,p=0;if(T(t)){if(!Z(t))return X(t)?k(g,t):i(A,g,t);o=t,p=v(r,a);var d=t.byteLength;if(void 0===n){if(d%a)throw new F(Q);if((s=d-p)<0)throw new F(Q)}else if((s=f(n)*a)+p>d)throw new F(Q);c=s/a}else c=m(t),o=new H(s=c*a);for(D(e,{buffer:o,byteOffset:p,byteLength:s,length:c,view:new z(o)});u<c;)R(e,u++)})),S&&S(g,V),_=g.prototype=O(J)),_.constructor!==g&&d(_,"constructor",g),j(_).TypedArrayConstructor=g,K&&d(_,K,c);var I=g!==h;E[c]=g,n({global:!0,constructor:!0,forced:I,sham:!q},E),Y in g||d(g,Y,a),Y in _||d(_,Y,a),N(c)}):e.exports=function(){}},2805:function(e,t,r){"use strict";var n=r(4475),o=r(9039),i=r(4428),a=r(4644).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,c=n.Int8Array;e.exports=!a||!o((function(){c(1)}))||!o((function(){new c(-1)}))||!i((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||o((function(){return 1!==new c(new s(2),1,void 0).length}))},6357:function(e,t,r){"use strict";var n=r(5370),o=r(1412);e.exports=function(e,t){return n(o(e),t)}},3251:function(e,t,r){"use strict";var n=r(6080),o=r(9565),i=r(5548),a=r(8981),s=r(6198),c=r(81),u=r(851),l=r(4209),p=r(1108),d=r(4644).aTypedArrayConstructor,h=r(5854);e.exports=function(e){var t,r,f,m,v,y,g,_,E=i(this),T=a(e),R=arguments.length,O=R>1?arguments[1]:void 0,I=void 0!==O,S=u(T);if(S&&!l(S))for(_=(g=c(T,S)).next,T=[];!(y=o(_,g)).done;)T.push(y.value);for(I&&R>2&&(O=n(O,arguments[2])),r=s(T),f=new(d(E))(r),m=p(f),t=0;r>t;t++)v=I?O(T[t],t):T[t],f[t]=m?h(v):+v;return f}},1412:function(e,t,r){"use strict";var n=r(4644),o=r(2293),i=n.aTypedArrayConstructor,a=n.getTypedArrayConstructor;e.exports=function(e){return i(o(e,a(e)))}},3392:function(e,t,r){"use strict";var n=r(9504),o=0,i=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},7416:function(e,t,r){"use strict";var n=r(9039),o=r(8227),i=r(3724),a=r(6395),s=o("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),r.delete("a",2),r.delete("b",void 0),a&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(a||!i)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},7040:function(e,t,r){"use strict";var n=r(4495);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:function(e,t,r){"use strict";var n=r(3724),o=r(9039);e.exports=n&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2812:function(e){"use strict";var t=TypeError;e.exports=function(e,r){if(e<r)throw new t("Not enough arguments");return e}},8622:function(e,t,r){"use strict";var n=r(4475),o=r(4901),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},511:function(e,t,r){"use strict";var n=r(9167),o=r(9297),i=r(1951),a=r(4913).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},1951:function(e,t,r){"use strict";var n=r(8227);t.f=n},8227:function(e,t,r){"use strict";var n=r(4475),o=r(5745),i=r(9297),a=r(3392),s=r(4495),c=r(7040),u=n.Symbol,l=o("wks"),p=c?u.for||u:u&&u.withoutSetter||a;e.exports=function(e){return i(l,e)||(l[e]=s&&i(u,e)?u[e]:p("Symbol."+e)),l[e]}},5071:function(e){"use strict";e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},4743:function(e,t,r){"use strict";var n=r(6518),o=r(4475),i=r(6346),a=r(7633),s="ArrayBuffer",c=i[s];n({global:!0,constructor:!0,forced:o[s]!==c},{ArrayBuffer:c}),a(s)},1745:function(e,t,r){"use strict";var n=r(6518),o=r(7476),i=r(9039),a=r(6346),s=r(8551),c=r(5610),u=r(8014),l=r(2293),p=a.ArrayBuffer,d=a.DataView,h=d.prototype,f=o(p.prototype.slice),m=o(h.getUint8),v=o(h.setUint8);n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new p(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(s(this),e);for(var r=s(this).byteLength,n=c(e,r),o=c(void 0===t?r:t,r),i=new(l(this,p))(u(o-n)),a=new d(this),h=new d(i),y=0;n<o;)v(h,y++,m(a,n++));return i}})},8706:function(e,t,r){"use strict";var n=r(6518),o=r(9039),i=r(4376),a=r(34),s=r(8981),c=r(6198),u=r(6837),l=r(4659),p=r(1469),d=r(597),h=r(8227),f=r(7388),m=h("isConcatSpreadable"),v=f>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),y=function(e){if(!a(e))return!1;var t=e[m];return void 0!==t?!!t:i(e)};n({target:"Array",proto:!0,arity:1,forced:!v||!d("concat")},{concat:function(e){var t,r,n,o,i,a=s(this),d=p(a,0),h=0;for(t=-1,n=arguments.length;t<n;t++)if(y(i=-1===t?a:arguments[t]))for(o=c(i),u(h+o),r=0;r<o;r++,h++)r in i&&l(d,h,i[r]);else u(h+1),l(d,h++,i);return d.length=h,d}})},2008:function(e,t,r){"use strict";var n=r(6518),o=r(9213).filter;n({target:"Array",proto:!0,forced:!r(597)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},8980:function(e,t,r){"use strict";var n=r(6518),o=r(9213).findIndex,i=r(6469),a="findIndex",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(a)},1629:function(e,t,r){"use strict";var n=r(6518),o=r(235);n({target:"Array",proto:!0,forced:[].forEach!==o},{forEach:o})},3418:function(e,t,r){"use strict";var n=r(6518),o=r(7916);n({target:"Array",stat:!0,forced:!r(4428)((function(e){Array.from(e)}))},{from:o})},4423:function(e,t,r){"use strict";var n=r(6518),o=r(9617).includes,i=r(9039),a=r(6469);n({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},5276:function(e,t,r){"use strict";var n=r(6518),o=r(7476),i=r(9617).indexOf,a=r(4598),s=o([].indexOf),c=!!s&&1/s([1],1,-0)<0;n({target:"Array",proto:!0,forced:c||!a("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?s(this,e,t)||0:i(this,e,t)}})},4346:function(e,t,r){"use strict";r(6518)({target:"Array",stat:!0},{isArray:r(4376)})},3792:function(e,t,r){"use strict";var n=r(5397),o=r(6469),i=r(6269),a=r(1181),s=r(4913).f,c=r(1088),u=r(2529),l=r(6395),p=r(3724),d="Array Iterator",h=a.set,f=a.getterFor(d);e.exports=c(Array,"Array",(function(e,t){h(this,{type:d,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=void 0,u(void 0,!0);switch(e.kind){case"keys":return u(r,!1);case"values":return u(t[r],!1)}return u([r,t[r]],!1)}),"values");var m=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!l&&p&&"values"!==m.name)try{s(m,"name",{value:"values"})}catch(e){}},8598:function(e,t,r){"use strict";var n=r(6518),o=r(9504),i=r(7055),a=r(5397),s=r(4598),c=o([].join);n({target:"Array",proto:!0,forced:i!==Object||!s("join",",")},{join:function(e){return c(a(this),void 0===e?",":e)}})},8921:function(e,t,r){"use strict";var n=r(6518),o=r(8379);n({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},2062:function(e,t,r){"use strict";var n=r(6518),o=r(9213).map;n({target:"Array",proto:!0,forced:!r(597)("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},2712:function(e,t,r){"use strict";var n=r(6518),o=r(926).left,i=r(4598),a=r(7388);n({target:"Array",proto:!0,forced:!r(9088)&&a>79&&a<83||!i("reduce")},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},4490:function(e,t,r){"use strict";var n=r(6518),o=r(9504),i=r(4376),a=o([].reverse),s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a(this)}})},4782:function(e,t,r){"use strict";var n=r(6518),o=r(4376),i=r(3517),a=r(34),s=r(5610),c=r(6198),u=r(5397),l=r(4659),p=r(8227),d=r(597),h=r(7680),f=d("slice"),m=p("species"),v=Array,y=Math.max;n({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var r,n,p,d=u(this),f=c(d),g=s(e,f),_=s(void 0===t?f:t,f);if(o(d)&&(r=d.constructor,(i(r)&&(r===v||o(r.prototype))||a(r)&&null===(r=r[m]))&&(r=void 0),r===v||void 0===r))return h(d,g,_);for(n=new(void 0===r?v:r)(y(_-g,0)),p=0;g<_;g++,p++)g in d&&l(n,p,d[g]);return n.length=p,n}})},5086:function(e,t,r){"use strict";var n=r(6518),o=r(9213).some;n({target:"Array",proto:!0,forced:!r(4598)("some")},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},4554:function(e,t,r){"use strict";var n=r(6518),o=r(8981),i=r(5610),a=r(1291),s=r(6198),c=r(4527),u=r(6837),l=r(1469),p=r(4659),d=r(4606),h=r(597)("splice"),f=Math.max,m=Math.min;n({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var r,n,h,v,y,g,_=o(this),E=s(_),T=i(e,E),R=arguments.length;for(0===R?r=n=0:1===R?(r=0,n=E-T):(r=R-2,n=m(f(a(t),0),E-T)),u(E+r-n),h=l(_,n),v=0;v<n;v++)(y=T+v)in _&&p(h,v,_[y]);if(h.length=n,r<n){for(v=T;v<E-n;v++)g=v+r,(y=v+n)in _?_[g]=_[y]:d(_,g);for(v=E;v>E-n+r;v--)d(_,v-1)}else if(r>n)for(v=E-n;v>T;v--)g=v+r-1,(y=v+n-1)in _?_[g]=_[y]:d(_,g);for(v=0;v<r;v++)_[v+T]=arguments[v+2];return c(_,E-n+r),h}})},4359:function(e,t,r){"use strict";var n=r(6518),o=r(6346);n({global:!0,constructor:!0,forced:!r(7811)},{DataView:o.DataView})},8309:function(e,t,r){"use strict";r(4359)},9089:function(e,t,r){"use strict";var n=r(6518),o=r(9504),i=Date,a=o(i.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return a(new i)}})},739:function(e,t,r){"use strict";var n=r(6518),o=r(9039),i=r(8981),a=r(2777);n({target:"Date",proto:!0,arity:1,forced:o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=i(this),r=a(t,"number");return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},907:function(e,t,r){"use strict";var n=r(9504),o=r(6840),i=Date.prototype,a="Invalid Date",s="toString",c=n(i[s]),u=n(i.getTime);String(new Date(NaN))!==a&&o(i,s,(function(){var e=u(this);return e==e?c(this):a}))},4170:function(e,t,r){"use strict";var n=r(6518),o=r(566);n({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},2010:function(e,t,r){"use strict";var n=r(3724),o=r(350).EXISTS,i=r(9504),a=r(2106),s=Function.prototype,c=i(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(u.exec);n&&!o&&a(s,"name",{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(e){return""}}})},3110:function(e,t,r){"use strict";var n=r(6518),o=r(7751),i=r(8745),a=r(9565),s=r(9504),c=r(9039),u=r(4901),l=r(757),p=r(7680),d=r(6933),h=r(4495),f=String,m=o("JSON","stringify"),v=s(/./.exec),y=s("".charAt),g=s("".charCodeAt),_=s("".replace),E=s(1..toString),T=/[\uD800-\uDFFF]/g,R=/^[\uD800-\uDBFF]$/,O=/^[\uDC00-\uDFFF]$/,I=!h||c((function(){var e=o("Symbol")("stringify detection");return"[null]"!==m([e])||"{}"!==m({a:e})||"{}"!==m(Object(e))})),S=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),C=function(e,t){var r=p(arguments),n=d(t);if(u(n)||void 0!==e&&!l(e))return r[1]=function(e,t){if(u(n)&&(t=a(n,this,f(e),t)),!l(t))return t},i(m,null,r)},A=function(e,t,r){var n=y(r,t-1),o=y(r,t+1);return v(R,e)&&!v(O,o)||v(O,e)&&!v(R,n)?"\\u"+E(g(e,0),16):e};m&&n({target:"JSON",stat:!0,arity:3,forced:I||S},{stringify:function(e,t,r){var n=p(arguments),o=i(I?C:m,null,n);return S&&"string"==typeof o?_(o,T,A):o}})},8523:function(e,t,r){"use strict";r(6468)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(6938))},6033:function(e,t,r){"use strict";r(8523)},2892:function(e,t,r){"use strict";var n=r(6518),o=r(6395),i=r(3724),a=r(4475),s=r(9167),c=r(9504),u=r(2796),l=r(9297),p=r(3167),d=r(1625),h=r(757),f=r(2777),m=r(9039),v=r(8480).f,y=r(7347).f,g=r(4913).f,_=r(1240),E=r(3802).trim,T="Number",R=a[T],O=s[T],I=R.prototype,S=a.TypeError,C=c("".slice),A=c("".charCodeAt),b=u(T,!R(" 0o1")||!R("0b1")||R("+0x1")),N=function(e){var t,r=arguments.length<1?0:R(function(e){var t=f(e,"number");return"bigint"==typeof t?t:function(e){var t,r,n,o,i,a,s,c,u=f(e,"number");if(h(u))throw new S("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=E(u),43===(t=A(u,0))||45===t){if(88===(r=A(u,2))||120===r)return NaN}else if(48===t){switch(A(u,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+u}for(a=(i=C(u,2)).length,s=0;s<a;s++)if((c=A(i,s))<48||c>o)return NaN;return parseInt(i,n)}return+u}(t)}(e));return d(I,t=this)&&m((function(){_(t)}))?p(Object(r),this,N):r};N.prototype=I,b&&!o&&(I.constructor=N),n({global:!0,constructor:!0,wrap:!0,forced:b},{Number:N});var M=function(e,t){for(var r,n=i?v(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;n.length>o;o++)l(t,r=n[o])&&!l(e,r)&&g(e,r,y(t,r))};o&&O&&M(s[T],O),(b||o)&&M(s[T],R)},5018:function(e,t,r){"use strict";r(6518)({target:"Number",stat:!0},{isInteger:r(2087)})},9085:function(e,t,r){"use strict";var n=r(6518),o=r(4213);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},6566:function(e,t,r){"use strict";var n=r(6518),o=r(3724),i=r(4913).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},5506:function(e,t,r){"use strict";var n=r(6518),o=r(2357).entries;n({target:"Object",stat:!0},{entries:function(e){return o(e)}})},9773:function(e,t,r){"use strict";var n=r(6518),o=r(4495),i=r(9039),a=r(3717),s=r(8981);n({target:"Object",stat:!0,forced:!o||i((function(){a.f(1)}))},{getOwnPropertySymbols:function(e){var t=a.f;return t?t(s(e)):[]}})},9432:function(e,t,r){"use strict";var n=r(6518),o=r(8981),i=r(1072);n({target:"Object",stat:!0,forced:r(9039)((function(){i(1)}))},{keys:function(e){return i(o(e))}})},6099:function(e,t,r){"use strict";var n=r(2140),o=r(6840),i=r(3179);n||o(Object.prototype,"toString",i,{unsafe:!0})},6499:function(e,t,r){"use strict";var n=r(6518),o=r(9565),i=r(6925),a=r(6043),s=r(1103),c=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{all:function(e){var t=this,r=a.f(t),n=r.resolve,u=r.reject,l=s((function(){var r=i(t.resolve),a=[],s=0,l=1;c(e,(function(e){var i=s++,c=!1;l++,o(r,t,e).then((function(e){c||(c=!0,a[i]=e,--l||n(a))}),u)})),--l||n(a)}));return l.error&&u(l.value),r.promise}})},2003:function(e,t,r){"use strict";var n=r(6518),o=r(6395),i=r(916).CONSTRUCTOR,a=r(550),s=r(7751),c=r(4901),u=r(6840),l=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(e){return this.then(void 0,e)}}),!o&&c(a)){var p=s("Promise").prototype.catch;l.catch!==p&&u(l,"catch",p,{unsafe:!0})}},436:function(e,t,r){"use strict";var n,o,i,a=r(6518),s=r(6395),c=r(9088),u=r(4475),l=r(9565),p=r(6840),d=r(2967),h=r(687),f=r(7633),m=r(6925),v=r(4901),y=r(34),g=r(679),_=r(2293),E=r(9225).set,T=r(1955),R=r(3138),O=r(1103),I=r(8265),S=r(1181),C=r(550),A=r(916),b=r(6043),N="Promise",M=A.CONSTRUCTOR,w=A.REJECTION_EVENT,U=A.SUBCLASSING,k=S.getterFor(N),P=S.set,x=C&&C.prototype,L=C,D=x,j=u.TypeError,G=u.document,B=u.process,F=b.f,H=F,W=!!(G&&G.createEvent&&u.dispatchEvent),z="unhandledrejection",q=function(e){var t;return!(!y(e)||!v(t=e.then))&&t},K=function(e,t){var r,n,o,i=t.value,a=1===t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,p=e.domain;try{s?(a||(2===t.rejection&&Q(t),t.rejection=1),!0===s?r=i:(p&&p.enter(),r=s(i),p&&(p.exit(),o=!0)),r===e.promise?u(new j("Promise-chain cycle")):(n=q(r))?l(n,r,c,u):c(r)):u(i)}catch(e){p&&!o&&p.exit(),u(e)}},V=function(e,t){e.notified||(e.notified=!0,T((function(){for(var r,n=e.reactions;r=n.get();)K(r,e);e.notified=!1,t&&!e.rejection&&X(e)})))},J=function(e,t,r){var n,o;W?((n=G.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},!w&&(o=u["on"+e])?o(n):e===z&&R("Unhandled promise rejection",r)},X=function(e){l(E,u,(function(){var t,r=e.facade,n=e.value;if(Y(e)&&(t=O((function(){c?B.emit("unhandledRejection",n,r):J(z,r,n)})),e.rejection=c||Y(e)?2:1,t.error))throw t.value}))},Y=function(e){return 1!==e.rejection&&!e.parent},Q=function(e){l(E,u,(function(){var t=e.facade;c?B.emit("rejectionHandled",t):J("rejectionhandled",t,e.value)}))},$=function(e,t,r){return function(n){e(t,n,r)}},Z=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,V(e,!0))},ee=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new j("Promise can't be resolved itself");var n=q(t);n?T((function(){var r={done:!1};try{l(n,t,$(ee,r,e),$(Z,r,e))}catch(t){Z(r,t,e)}})):(e.value=t,e.state=1,V(e,!1))}catch(t){Z({done:!1},t,e)}}};if(M&&(D=(L=function(e){g(this,D),m(e),l(n,this);var t=k(this);try{e($(ee,t),$(Z,t))}catch(e){Z(t,e)}}).prototype,(n=function(e){P(this,{type:N,done:!1,notified:!1,parent:!1,reactions:new I,rejection:!1,state:0,value:void 0})}).prototype=p(D,"then",(function(e,t){var r=k(this),n=F(_(this,L));return r.parent=!0,n.ok=!v(e)||e,n.fail=v(t)&&t,n.domain=c?B.domain:void 0,0===r.state?r.reactions.add(n):T((function(){K(n,r)})),n.promise})),o=function(){var e=new n,t=k(e);this.promise=e,this.resolve=$(ee,t),this.reject=$(Z,t)},b.f=F=function(e){return e===L||void 0===e?new o(e):H(e)},!s&&v(C)&&x!==Object.prototype)){i=x.then,U||p(x,"then",(function(e,t){var r=this;return new L((function(e,t){l(i,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete x.constructor}catch(e){}d&&d(x,D)}a({global:!0,constructor:!0,wrap:!0,forced:M},{Promise:L}),h(L,N,!1,!0),f(N)},3362:function(e,t,r){"use strict";r(436),r(6499),r(2003),r(7743),r(1481),r(280)},7743:function(e,t,r){"use strict";var n=r(6518),o=r(9565),i=r(6925),a=r(6043),s=r(1103),c=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{race:function(e){var t=this,r=a.f(t),n=r.reject,u=s((function(){var a=i(t.resolve);c(e,(function(e){o(a,t,e).then(r.resolve,n)}))}));return u.error&&n(u.value),r.promise}})},1481:function(e,t,r){"use strict";var n=r(6518),o=r(6043);n({target:"Promise",stat:!0,forced:r(916).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return(0,t.reject)(e),t.promise}})},280:function(e,t,r){"use strict";var n=r(6518),o=r(7751),i=r(6395),a=r(550),s=r(916).CONSTRUCTOR,c=r(3438),u=o("Promise"),l=i&&!s;n({target:"Promise",stat:!0,forced:i||s},{resolve:function(e){return c(l&&this===u?a:this,e)}})},7495:function(e,t,r){"use strict";var n=r(6518),o=r(7323);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},8781:function(e,t,r){"use strict";var n=r(350).PROPER,o=r(6840),i=r(8551),a=r(655),s=r(9039),c=r(1034),u="toString",l=RegExp.prototype,p=l[u],d=s((function(){return"/a/b"!==p.call({source:"a",flags:"b"})})),h=n&&p.name!==u;(d||h)&&o(l,u,(function(){var e=i(this);return"/"+a(e.source)+"/"+a(c(e))}),{unsafe:!0})},1699:function(e,t,r){"use strict";var n=r(6518),o=r(9504),i=r(5749),a=r(7750),s=r(655),c=r(1436),u=o("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(a(this)),s(i(e)),arguments.length>1?arguments[1]:void 0)}})},7764:function(e,t,r){"use strict";var n=r(8183).charAt,o=r(655),i=r(1181),a=r(1088),s=r(2529),c="String Iterator",u=i.set,l=i.getterFor(c);a(String,"String",(function(e){u(this,{type:c,string:o(e),index:0})}),(function(){var e,t=l(this),r=t.string,o=t.index;return o>=r.length?s(void 0,!0):(e=n(r,o),t.index+=e.length,s(e,!1))}))},6761:function(e,t,r){"use strict";var n=r(6518),o=r(4475),i=r(9565),a=r(9504),s=r(6395),c=r(3724),u=r(4495),l=r(9039),p=r(9297),d=r(1625),h=r(8551),f=r(5397),m=r(6969),v=r(655),y=r(6980),g=r(2360),_=r(1072),E=r(8480),T=r(298),R=r(3717),O=r(7347),I=r(4913),S=r(6801),C=r(8773),A=r(6840),b=r(2106),N=r(5745),M=r(6119),w=r(421),U=r(3392),k=r(8227),P=r(1951),x=r(511),L=r(8242),D=r(687),j=r(1181),G=r(9213).forEach,B=M("hidden"),F="Symbol",H="prototype",W=j.set,z=j.getterFor(F),q=Object[H],K=o.Symbol,V=K&&K[H],J=o.RangeError,X=o.TypeError,Y=o.QObject,Q=O.f,$=I.f,Z=T.f,ee=C.f,te=a([].push),re=N("symbols"),ne=N("op-symbols"),oe=N("wks"),ie=!Y||!Y[H]||!Y[H].findChild,ae=function(e,t,r){var n=Q(q,t);n&&delete q[t],$(e,t,r),n&&e!==q&&$(q,t,n)},se=c&&l((function(){return 7!==g($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a}))?ae:$,ce=function(e,t){var r=re[e]=g(V);return W(r,{type:F,tag:e,description:t}),c||(r.description=t),r},ue=function(e,t,r){e===q&&ue(ne,t,r),h(e);var n=m(t);return h(r),p(re,n)?(r.enumerable?(p(e,B)&&e[B][n]&&(e[B][n]=!1),r=g(r,{enumerable:y(0,!1)})):(p(e,B)||$(e,B,y(1,g(null))),e[B][n]=!0),se(e,n,r)):$(e,n,r)},le=function(e,t){h(e);var r=f(t),n=_(r).concat(fe(r));return G(n,(function(t){c&&!i(pe,r,t)||ue(e,t,r[t])})),e},pe=function(e){var t=m(e),r=i(ee,this,t);return!(this===q&&p(re,t)&&!p(ne,t))&&(!(r||!p(this,t)||!p(re,t)||p(this,B)&&this[B][t])||r)},de=function(e,t){var r=f(e),n=m(t);if(r!==q||!p(re,n)||p(ne,n)){var o=Q(r,n);return!o||!p(re,n)||p(r,B)&&r[B][n]||(o.enumerable=!0),o}},he=function(e){var t=Z(f(e)),r=[];return G(t,(function(e){p(re,e)||p(w,e)||te(r,e)})),r},fe=function(e){var t=e===q,r=Z(t?ne:f(e)),n=[];return G(r,(function(e){!p(re,e)||t&&!p(q,e)||te(n,re[e])})),n};u||(K=function(){if(d(V,this))throw new X("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,t=U(e),r=function(e){var n=void 0===this?o:this;n===q&&i(r,ne,e),p(n,B)&&p(n[B],t)&&(n[B][t]=!1);var a=y(1,e);try{se(n,t,a)}catch(e){if(!(e instanceof J))throw e;ae(n,t,a)}};return c&&ie&&se(q,t,{configurable:!0,set:r}),ce(t,e)},A(V=K[H],"toString",(function(){return z(this).tag})),A(K,"withoutSetter",(function(e){return ce(U(e),e)})),C.f=pe,I.f=ue,S.f=le,O.f=de,E.f=T.f=he,R.f=fe,P.f=function(e){return ce(k(e),e)},c&&(b(V,"description",{configurable:!0,get:function(){return z(this).description}}),s||A(q,"propertyIsEnumerable",pe,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:K}),G(_(oe),(function(e){x(e)})),n({target:F,stat:!0,forced:!u},{useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(e,t){return void 0===t?g(e):le(g(e),t)},defineProperty:ue,defineProperties:le,getOwnPropertyDescriptor:de}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:he}),L(),D(K,F),w[B]=!0},9463:function(e,t,r){"use strict";var n=r(6518),o=r(3724),i=r(4475),a=r(9504),s=r(9297),c=r(4901),u=r(1625),l=r(655),p=r(2106),d=r(7740),h=i.Symbol,f=h&&h.prototype;if(o&&c(h)&&(!("description"in f)||void 0!==h().description)){var m={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(f,this)?new h(e):void 0===e?h():h(e);return""===e&&(m[t]=!0),t};d(v,h),v.prototype=f,f.constructor=v;var y="Symbol(description detection)"===String(h("description detection")),g=a(f.valueOf),_=a(f.toString),E=/^Symbol\((.*)\)[^)]+$/,T=a("".replace),R=a("".slice);p(f,"description",{configurable:!0,get:function(){var e=g(this);if(s(m,e))return"";var t=_(e),r=y?R(t,7,-1):T(t,E,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:v})}},1510:function(e,t,r){"use strict";var n=r(6518),o=r(7751),i=r(9297),a=r(655),s=r(5745),c=r(1296),u=s("string-to-symbol-registry"),l=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=a(e);if(i(u,t))return u[t];var r=o("Symbol")(t);return u[t]=r,l[r]=t,r}})},2259:function(e,t,r){"use strict";r(511)("iterator")},2675:function(e,t,r){"use strict";r(6761),r(1510),r(7812),r(3110),r(9773)},7812:function(e,t,r){"use strict";var n=r(6518),o=r(9297),i=r(757),a=r(6823),s=r(5745),c=r(1296),u=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!i(e))throw new TypeError(a(e)+" is not a symbol");if(o(u,e))return u[e]}})},1630:function(e,t,r){"use strict";var n=r(9504),o=r(4644),i=n(r(7029)),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",(function(e,t){return i(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},2170:function(e,t,r){"use strict";var n=r(4644),o=r(9213).every,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},5044:function(e,t,r){"use strict";var n=r(4644),o=r(4373),i=r(5854),a=r(6955),s=r(9565),c=r(9504),u=r(9039),l=n.aTypedArray,p=n.exportTypedArrayMethod,d=c("".slice);p("fill",(function(e){var t=arguments.length;l(this);var r="Big"===d(a(this),0,3)?i(e):+e;return s(o,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),u((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},1920:function(e,t,r){"use strict";var n=r(4644),o=r(9213).filter,i=r(6357),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("filter",(function(e){var t=o(a(this),e,arguments.length>1?arguments[1]:void 0);return i(this,t)}))},9955:function(e,t,r){"use strict";var n=r(4644),o=r(9213).findIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},1694:function(e,t,r){"use strict";var n=r(4644),o=r(9213).find,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},3206:function(e,t,r){"use strict";var n=r(4644),o=r(9213).forEach,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",(function(e){o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},8345:function(e,t,r){"use strict";var n=r(2805);(0,r(4644).exportTypedArrayStaticMethod)("from",r(3251),n)},4496:function(e,t,r){"use strict";var n=r(4644),o=r(9617).includes,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},6651:function(e,t,r){"use strict";var n=r(4644),o=r(9617).indexOf,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},2887:function(e,t,r){"use strict";var n=r(4475),o=r(9039),i=r(9504),a=r(4644),s=r(3792),c=r(8227)("iterator"),u=n.Uint8Array,l=i(s.values),p=i(s.keys),d=i(s.entries),h=a.aTypedArray,f=a.exportTypedArrayMethod,m=u&&u.prototype,v=!o((function(){m[c].call([1])})),y=!!m&&m.values&&m[c]===m.values&&"values"===m.values.name,g=function(){return l(h(this))};f("entries",(function(){return d(h(this))}),v),f("keys",(function(){return p(h(this))}),v),f("values",g,v||!y,{name:"values"}),f(c,g,v||!y,{name:"values"})},9369:function(e,t,r){"use strict";var n=r(4644),o=r(9504),i=n.aTypedArray,a=n.exportTypedArrayMethod,s=o([].join);a("join",(function(e){return s(i(this),e)}))},6812:function(e,t,r){"use strict";var n=r(4644),o=r(8745),i=r(8379),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return o(i,a(this),t>1?[e,arguments[1]]:[e])}))},8995:function(e,t,r){"use strict";var n=r(4644),o=r(9213).map,i=r(1412),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("map",(function(e){return o(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(i(e))(t)}))}))},6072:function(e,t,r){"use strict";var n=r(4644),o=r(926).right,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return o(i(this),e,t,t>1?arguments[1]:void 0)}))},1575:function(e,t,r){"use strict";var n=r(4644),o=r(926).left,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return o(i(this),e,t,t>1?arguments[1]:void 0)}))},8747:function(e,t,r){"use strict";var n=r(4644),o=n.aTypedArray,i=n.exportTypedArrayMethod,a=Math.floor;i("reverse",(function(){for(var e,t=this,r=o(t).length,n=a(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t}))},8845:function(e,t,r){"use strict";var n=r(4475),o=r(9565),i=r(4644),a=r(6198),s=r(8229),c=r(8981),u=r(9039),l=n.RangeError,p=n.Int8Array,d=p&&p.prototype,h=d&&d.set,f=i.aTypedArray,m=i.exportTypedArrayMethod,v=!u((function(){var e=new Uint8ClampedArray(2);return o(h,e,{length:1,0:3},1),3!==e[1]})),y=v&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new p(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){f(this);var t=s(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(v)return o(h,this,r,t);var n=this.length,i=a(r),u=0;if(i+t>n)throw new l("Wrong length");for(;u<i;)this[t+u]=r[u++]}),!v||y)},9423:function(e,t,r){"use strict";var n=r(4644),o=r(1412),i=r(9039),a=r(7680),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("slice",(function(e,t){for(var r=a(s(this),e,t),n=o(this),i=0,c=r.length,u=new n(c);c>i;)u[i]=r[i++];return u}),i((function(){new Int8Array(1).slice()})))},7301:function(e,t,r){"use strict";var n=r(4644),o=r(9213).some,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},373:function(e,t,r){"use strict";var n=r(4475),o=r(7476),i=r(9039),a=r(6925),s=r(4488),c=r(4644),u=r(8834),l=r(3202),p=r(7388),d=r(9160),h=c.aTypedArray,f=c.exportTypedArrayMethod,m=n.Uint16Array,v=m&&o(m.prototype.sort),y=!(!v||i((function(){v(new m(2),null)}))&&i((function(){v(new m(2),{})}))),g=!!v&&!i((function(){if(p)return p<74;if(u)return u<67;if(l)return!0;if(d)return d<602;var e,t,r=new m(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(v(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));f("sort",(function(e){return void 0!==e&&a(e),g?v(this,e):s(h(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!g||y)},6614:function(e,t,r){"use strict";var n=r(4644),o=r(8014),i=r(5610),a=r(1412),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",(function(e,t){var r=s(this),n=r.length,c=i(e,n);return new(a(r))(r.buffer,r.byteOffset+c*r.BYTES_PER_ELEMENT,o((void 0===t?n:i(t,n))-c))}))},1405:function(e,t,r){"use strict";var n=r(4475),o=r(8745),i=r(4644),a=r(9039),s=r(7680),c=n.Int8Array,u=i.aTypedArray,l=i.exportTypedArrayMethod,p=[].toLocaleString,d=!!c&&a((function(){p.call(new c(1))}));l("toLocaleString",(function(){return o(p,d?s(u(this)):u(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!==new c([1,2]).toLocaleString()}))||!a((function(){c.prototype.toLocaleString.call([1,2])})))},3684:function(e,t,r){"use strict";var n=r(4644).exportTypedArrayMethod,o=r(9039),i=r(4475),a=r(9504),s=i.Uint8Array,c=s&&s.prototype||{},u=[].toString,l=a([].join);o((function(){u.call({})}))&&(u=function(){return l(this)});var p=c.toString!==u;n("toString",u,p)},1489:function(e,t,r){"use strict";r(5823)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},3500:function(e,t,r){"use strict";var n=r(4475),o=r(7400),i=r(9296),a=r(235),s=r(6699),c=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var u in o)o[u]&&c(n[u]&&n[u].prototype);c(i)},2953:function(e,t,r){"use strict";var n=r(4475),o=r(7400),i=r(9296),a=r(3792),s=r(6699),c=r(687),u=r(8227)("iterator"),l=a.values,p=function(e,t){if(e){if(e[u]!==l)try{s(e,u,l)}catch(t){e[u]=l}if(c(e,t,!0),o[t])for(var r in a)if(e[r]!==a[r])try{s(e,r,a[r])}catch(t){e[r]=a[r]}}};for(var d in o)p(n[d]&&n[d].prototype,d);p(i,"DOMTokenList")},5575:function(e,t,r){"use strict";var n=r(6518),o=r(4475),i=r(9472)(o.setInterval,!0);n({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},4599:function(e,t,r){"use strict";var n=r(6518),o=r(4475),i=r(9472)(o.setTimeout,!0);n({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},6031:function(e,t,r){"use strict";r(5575),r(4599)},8406:function(e,t,r){"use strict";r(3792);var n=r(6518),o=r(4475),i=r(3389),a=r(9565),s=r(9504),c=r(3724),u=r(7416),l=r(6840),p=r(2106),d=r(6279),h=r(687),f=r(3994),m=r(1181),v=r(679),y=r(4901),g=r(9297),_=r(6080),E=r(6955),T=r(8551),R=r(34),O=r(655),I=r(2360),S=r(6980),C=r(81),A=r(851),b=r(2529),N=r(2812),M=r(8227),w=r(4488),U=M("iterator"),k="URLSearchParams",P=k+"Iterator",x=m.set,L=m.getterFor(k),D=m.getterFor(P),j=i("fetch"),G=i("Request"),B=i("Headers"),F=G&&G.prototype,H=B&&B.prototype,W=o.RegExp,z=o.TypeError,q=o.decodeURIComponent,K=o.encodeURIComponent,V=s("".charAt),J=s([].join),X=s([].push),Y=s("".replace),Q=s([].shift),$=s([].splice),Z=s("".split),ee=s("".slice),te=/\+/g,re=Array(4),ne=function(e){return re[e-1]||(re[e-1]=W("((?:%[\\da-f]{2}){"+e+"})","gi"))},oe=function(e){try{return q(e)}catch(t){return e}},ie=function(e){var t=Y(e,te," "),r=4;try{return q(t)}catch(e){for(;r;)t=Y(t,ne(r--),oe);return t}},ae=/[!'()~]|%20/g,se={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ce=function(e){return se[e]},ue=function(e){return Y(K(e),ae,ce)},le=f((function(e,t){x(this,{type:P,target:L(e).entries,index:0,kind:t})}),k,(function(){var e=D(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=void 0,b(void 0,!0);var n=t[r];switch(e.kind){case"keys":return b(n.key,!1);case"values":return b(n.value,!1)}return b([n.key,n.value],!1)}),!0),pe=function(e){this.entries=[],this.url=null,void 0!==e&&(R(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===V(e,0)?ee(e,1):e:O(e)))};pe.prototype={type:k,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,o,i,s,c,u=this.entries,l=A(e);if(l)for(r=(t=C(e,l)).next;!(n=a(r,t)).done;){if(i=(o=C(T(n.value))).next,(s=a(i,o)).done||(c=a(i,o)).done||!a(i,o).done)throw new z("Expected sequence with length 2");X(u,{key:O(s.value),value:O(c.value)})}else for(var p in e)g(e,p)&&X(u,{key:p,value:O(e[p])})},parseQuery:function(e){if(e)for(var t,r,n=this.entries,o=Z(e,"&"),i=0;i<o.length;)(t=o[i++]).length&&(r=Z(t,"="),X(n,{key:ie(Q(r)),value:ie(J(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],X(r,ue(e.key)+"="+ue(e.value));return J(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var de=function(){v(this,he);var e=x(this,new pe(arguments.length>0?arguments[0]:void 0));c||(this.size=e.entries.length)},he=de.prototype;if(d(he,{append:function(e,t){var r=L(this);N(arguments.length,2),X(r.entries,{key:O(e),value:O(t)}),c||this.length++,r.updateURL()},delete:function(e){for(var t=L(this),r=N(arguments.length,1),n=t.entries,o=O(e),i=r<2?void 0:arguments[1],a=void 0===i?i:O(i),s=0;s<n.length;){var u=n[s];if(u.key!==o||void 0!==a&&u.value!==a)s++;else if($(n,s,1),void 0!==a)break}c||(this.size=n.length),t.updateURL()},get:function(e){var t=L(this).entries;N(arguments.length,1);for(var r=O(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=L(this).entries;N(arguments.length,1);for(var r=O(e),n=[],o=0;o<t.length;o++)t[o].key===r&&X(n,t[o].value);return n},has:function(e){for(var t=L(this).entries,r=N(arguments.length,1),n=O(e),o=r<2?void 0:arguments[1],i=void 0===o?o:O(o),a=0;a<t.length;){var s=t[a++];if(s.key===n&&(void 0===i||s.value===i))return!0}return!1},set:function(e,t){var r=L(this);N(arguments.length,1);for(var n,o=r.entries,i=!1,a=O(e),s=O(t),u=0;u<o.length;u++)(n=o[u]).key===a&&(i?$(o,u--,1):(i=!0,n.value=s));i||X(o,{key:a,value:s}),c||(this.size=o.length),r.updateURL()},sort:function(){var e=L(this);w(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=L(this).entries,n=_(e,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((t=r[o++]).value,t.key,this)},keys:function(){return new le(this,"keys")},values:function(){return new le(this,"values")},entries:function(){return new le(this,"entries")}},{enumerable:!0}),l(he,U,he.entries,{name:"entries"}),l(he,"toString",(function(){return L(this).serialize()}),{enumerable:!0}),c&&p(he,"size",{get:function(){return L(this).entries.length},configurable:!0,enumerable:!0}),h(de,k),n({global:!0,constructor:!0,forced:!u},{URLSearchParams:de}),!u&&y(B)){var fe=s(H.has),me=s(H.set),ve=function(e){if(R(e)){var t,r=e.body;if(E(r)===k)return t=e.headers?new B(e.headers):new B,fe(t,"content-type")||me(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),I(e,{body:S(0,O(r)),headers:S(0,t)})}return e};if(y(j)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return j(e,arguments.length>1?ve(arguments[1]):{})}}),y(G)){var ye=function(e){return v(this,F),new G(e,arguments.length>1?ve(arguments[1]):{})};F.constructor=ye,ye.prototype=F,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ye})}}e.exports={URLSearchParams:de,getState:L}},8408:function(e,t,r){"use strict";r(8406)},5806:function(e,t,r){"use strict";r(7764);var n,o=r(6518),i=r(3724),a=r(7416),s=r(4475),c=r(6080),u=r(9504),l=r(6840),p=r(2106),d=r(679),h=r(9297),f=r(4213),m=r(7916),v=r(7680),y=r(8183).codeAt,g=r(6098),_=r(655),E=r(687),T=r(2812),R=r(8406),O=r(1181),I=O.set,S=O.getterFor("URL"),C=R.URLSearchParams,A=R.getState,b=s.URL,N=s.TypeError,M=s.parseInt,w=Math.floor,U=Math.pow,k=u("".charAt),P=u(/./.exec),x=u([].join),L=u(1..toString),D=u([].pop),j=u([].push),G=u("".replace),B=u([].shift),F=u("".split),H=u("".slice),W=u("".toLowerCase),z=u([].unshift),q="Invalid scheme",K="Invalid host",V="Invalid port",J=/[a-z]/i,X=/[\d+-.a-z]/i,Y=/\d/,Q=/^0x/i,$=/^[0-7]+$/,Z=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,re=/[\0\t\n\r #/:<>?@[\\\]^|]/,ne=/^[\u0000-\u0020]+/,oe=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ie=/[\t\n\r]/g,ae=function(e){var t,r,n,o;if("number"==typeof e){for(t=[],r=0;r<4;r++)z(t,e%256),e=w(e/256);return x(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(o>r&&(t=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r&&(t=n,r=o),t}(e),r=0;r<8;r++)o&&0===e[r]||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=L(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},se={},ce=f({},se,{" ":1,'"':1,"<":1,">":1,"`":1}),ue=f({},ce,{"#":1,"?":1,"{":1,"}":1}),le=f({},ue,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),pe=function(e,t){var r=y(e,0);return r>32&&r<127&&!h(t,e)?e:encodeURIComponent(e)},de={ftp:21,file:null,http:80,https:443,ws:80,wss:443},he=function(e,t){var r;return 2===e.length&&P(J,k(e,0))&&(":"===(r=k(e,1))||!t&&"|"===r)},fe=function(e){var t;return e.length>1&&he(H(e,0,2))&&(2===e.length||"/"===(t=k(e,2))||"\\"===t||"?"===t||"#"===t)},me=function(e){return"."===e||"%2e"===W(e)},ve={},ye={},ge={},_e={},Ee={},Te={},Re={},Oe={},Ie={},Se={},Ce={},Ae={},be={},Ne={},Me={},we={},Ue={},ke={},Pe={},xe={},Le={},De=function(e,t,r){var n,o,i,a=_(e);if(t){if(o=this.parse(a))throw new N(o);this.searchParams=null}else{if(void 0!==r&&(n=new De(r,!0)),o=this.parse(a,null,n))throw new N(o);(i=A(new C)).bindURL(this),this.searchParams=i}};De.prototype={type:"URL",parse:function(e,t,r){var o,i,a,s,c,u=this,l=t||ve,p=0,d="",f=!1,y=!1,g=!1;for(e=_(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=G(e,ne,""),e=G(e,oe,"$1")),e=G(e,ie,""),o=m(e);p<=o.length;){switch(i=o[p],l){case ve:if(!i||!P(J,i)){if(t)return q;l=ge;continue}d+=W(i),l=ye;break;case ye:if(i&&(P(X,i)||"+"===i||"-"===i||"."===i))d+=W(i);else{if(":"!==i){if(t)return q;d="",l=ge,p=0;continue}if(t&&(u.isSpecial()!==h(de,d)||"file"===d&&(u.includesCredentials()||null!==u.port)||"file"===u.scheme&&!u.host))return;if(u.scheme=d,t)return void(u.isSpecial()&&de[u.scheme]===u.port&&(u.port=null));d="","file"===u.scheme?l=Ne:u.isSpecial()&&r&&r.scheme===u.scheme?l=_e:u.isSpecial()?l=Oe:"/"===o[p+1]?(l=Ee,p++):(u.cannotBeABaseURL=!0,j(u.path,""),l=Pe)}break;case ge:if(!r||r.cannotBeABaseURL&&"#"!==i)return q;if(r.cannotBeABaseURL&&"#"===i){u.scheme=r.scheme,u.path=v(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,l=Le;break}l="file"===r.scheme?Ne:Te;continue;case _e:if("/"!==i||"/"!==o[p+1]){l=Te;continue}l=Ie,p++;break;case Ee:if("/"===i){l=Se;break}l=ke;continue;case Te:if(u.scheme=r.scheme,i===n)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=v(r.path),u.query=r.query;else if("/"===i||"\\"===i&&u.isSpecial())l=Re;else if("?"===i)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=v(r.path),u.query="",l=xe;else{if("#"!==i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=v(r.path),u.path.length--,l=ke;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=v(r.path),u.query=r.query,u.fragment="",l=Le}break;case Re:if(!u.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,l=ke;continue}l=Se}else l=Ie;break;case Oe:if(l=Ie,"/"!==i||"/"!==k(d,p+1))continue;p++;break;case Ie:if("/"!==i&&"\\"!==i){l=Se;continue}break;case Se:if("@"===i){f&&(d="%40"+d),f=!0,a=m(d);for(var E=0;E<a.length;E++){var T=a[E];if(":"!==T||g){var R=pe(T,le);g?u.password+=R:u.username+=R}else g=!0}d=""}else if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()){if(f&&""===d)return"Invalid authority";p-=m(d).length+1,d="",l=Ce}else d+=i;break;case Ce:case Ae:if(t&&"file"===u.scheme){l=we;continue}if(":"!==i||y){if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()){if(u.isSpecial()&&""===d)return K;if(t&&""===d&&(u.includesCredentials()||null!==u.port))return;if(s=u.parseHost(d))return s;if(d="",l=Ue,t)return;continue}"["===i?y=!0:"]"===i&&(y=!1),d+=i}else{if(""===d)return K;if(s=u.parseHost(d))return s;if(d="",l=be,t===Ae)return}break;case be:if(!P(Y,i)){if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()||t){if(""!==d){var O=M(d,10);if(O>65535)return V;u.port=u.isSpecial()&&O===de[u.scheme]?null:O,d=""}if(t)return;l=Ue;continue}return V}d+=i;break;case Ne:if(u.scheme="file","/"===i||"\\"===i)l=Me;else{if(!r||"file"!==r.scheme){l=ke;continue}switch(i){case n:u.host=r.host,u.path=v(r.path),u.query=r.query;break;case"?":u.host=r.host,u.path=v(r.path),u.query="",l=xe;break;case"#":u.host=r.host,u.path=v(r.path),u.query=r.query,u.fragment="",l=Le;break;default:fe(x(v(o,p),""))||(u.host=r.host,u.path=v(r.path),u.shortenPath()),l=ke;continue}}break;case Me:if("/"===i||"\\"===i){l=we;break}r&&"file"===r.scheme&&!fe(x(v(o,p),""))&&(he(r.path[0],!0)?j(u.path,r.path[0]):u.host=r.host),l=ke;continue;case we:if(i===n||"/"===i||"\\"===i||"?"===i||"#"===i){if(!t&&he(d))l=ke;else if(""===d){if(u.host="",t)return;l=Ue}else{if(s=u.parseHost(d))return s;if("localhost"===u.host&&(u.host=""),t)return;d="",l=Ue}continue}d+=i;break;case Ue:if(u.isSpecial()){if(l=ke,"/"!==i&&"\\"!==i)continue}else if(t||"?"!==i)if(t||"#"!==i){if(i!==n&&(l=ke,"/"!==i))continue}else u.fragment="",l=Le;else u.query="",l=xe;break;case ke:if(i===n||"/"===i||"\\"===i&&u.isSpecial()||!t&&("?"===i||"#"===i)){if(".."===(c=W(c=d))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"===i||"\\"===i&&u.isSpecial()||j(u.path,"")):me(d)?"/"===i||"\\"===i&&u.isSpecial()||j(u.path,""):("file"===u.scheme&&!u.path.length&&he(d)&&(u.host&&(u.host=""),d=k(d,0)+":"),j(u.path,d)),d="","file"===u.scheme&&(i===n||"?"===i||"#"===i))for(;u.path.length>1&&""===u.path[0];)B(u.path);"?"===i?(u.query="",l=xe):"#"===i&&(u.fragment="",l=Le)}else d+=pe(i,ue);break;case Pe:"?"===i?(u.query="",l=xe):"#"===i?(u.fragment="",l=Le):i!==n&&(u.path[0]+=pe(i,se));break;case xe:t||"#"!==i?i!==n&&("'"===i&&u.isSpecial()?u.query+="%27":u.query+="#"===i?"%23":pe(i,se)):(u.fragment="",l=Le);break;case Le:i!==n&&(u.fragment+=pe(i,ce))}p++}},parseHost:function(e){var t,r,n;if("["===k(e,0)){if("]"!==k(e,e.length-1))return K;if(t=function(e){var t,r,n,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,p=0,d=function(){return k(e,p)};if(":"===d()){if(":"!==k(e,1))return;p+=2,l=++u}for(;d();){if(8===u)return;if(":"!==d()){for(t=r=0;r<4&&P(ee,d());)t=16*t+M(d(),16),p++,r++;if("."===d()){if(0===r)return;if(p-=r,u>6)return;for(n=0;d();){if(o=null,n>0){if(!("."===d()&&n<4))return;p++}if(!P(Y,d()))return;for(;P(Y,d());){if(i=M(d(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;p++}c[u]=256*c[u]+o,2!=++n&&4!==n||u++}if(4!==n)return;break}if(":"===d()){if(p++,!d())return}else if(d())return;c[u++]=t}else{if(null!==l)return;p++,l=++u}}if(null!==l)for(a=u-l,u=7;0!==u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!==u)return;return c}(H(e,1,-1)),!t)return K;this.host=t}else if(this.isSpecial()){if(e=g(e),P(te,e))return K;if(t=function(e){var t,r,n,o,i,a,s,c=F(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(r=[],n=0;n<t;n++){if(""===(o=c[n]))return e;if(i=10,o.length>1&&"0"===k(o,0)&&(i=P(Q,o)?16:8,o=H(o,8===i?1:2)),""===o)a=0;else{if(!P(10===i?Z:8===i?$:ee,o))return e;a=M(o,i)}j(r,a)}for(n=0;n<t;n++)if(a=r[n],n===t-1){if(a>=U(256,5-t))return null}else if(a>255)return null;for(s=D(r),n=0;n<r.length;n++)s+=r[n]*U(256,3-n);return s}(e),null===t)return K;this.host=t}else{if(P(re,e))return K;for(t="",r=m(e),n=0;n<r.length;n++)t+=pe(r[n],se);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return h(de,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&he(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==o?(u+="//",e.includesCredentials()&&(u+=r+(n?":"+n:"")+"@"),u+=ae(o),null!==i&&(u+=":"+i)):"file"===t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+x(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw new N(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new je(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+ae(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(_(e)+":",ve)},getUsername:function(){return this.username},setUsername:function(e){var t=m(_(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=pe(t[r],le)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(_(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=pe(t[r],le)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ae(e):ae(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ce)},getHostname:function(){var e=this.host;return null===e?"":ae(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Ae)},getPort:function(){var e=this.port;return null===e?"":_(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=_(e))?this.port=null:this.parse(e,be))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+x(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Ue))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=_(e))?this.query=null:("?"===k(e,0)&&(e=H(e,1)),this.query="",this.parse(e,xe)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=_(e))?("#"===k(e,0)&&(e=H(e,1)),this.fragment="",this.parse(e,Le)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var je=function(e){var t=d(this,Ge),r=T(arguments.length,1)>1?arguments[1]:void 0,n=I(t,new De(e,!1,r));i||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},Ge=je.prototype,Be=function(e,t){return{get:function(){return S(this)[e]()},set:t&&function(e){return S(this)[t](e)},configurable:!0,enumerable:!0}};if(i&&(p(Ge,"href",Be("serialize","setHref")),p(Ge,"origin",Be("getOrigin")),p(Ge,"protocol",Be("getProtocol","setProtocol")),p(Ge,"username",Be("getUsername","setUsername")),p(Ge,"password",Be("getPassword","setPassword")),p(Ge,"host",Be("getHost","setHost")),p(Ge,"hostname",Be("getHostname","setHostname")),p(Ge,"port",Be("getPort","setPort")),p(Ge,"pathname",Be("getPathname","setPathname")),p(Ge,"search",Be("getSearch","setSearch")),p(Ge,"searchParams",Be("getSearchParams")),p(Ge,"hash",Be("getHash","setHash"))),l(Ge,"toJSON",(function(){return S(this).serialize()}),{enumerable:!0}),l(Ge,"toString",(function(){return S(this).serialize()}),{enumerable:!0}),b){var Fe=b.createObjectURL,He=b.revokeObjectURL;Fe&&l(je,"createObjectURL",c(Fe,b)),He&&l(je,"revokeObjectURL",c(He,b))}E(je,"URL"),o({global:!0,constructor:!0,forced:!a,sham:!i},{URL:je})},3296:function(e,t,r){"use strict";r(5806)},7208:function(e,t,r){"use strict";var n=r(6518),o=r(9565);n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return o(URL.prototype.toString,this)}})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.amdO={},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return function(){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return se}});var e=__webpack_require__(162),t=__webpack_require__.n(e),r=__webpack_require__(2549),n=__webpack_require__.n(r),o=__webpack_require__(8570),i=__webpack_require__.n(o),a=(__webpack_require__(2675),__webpack_require__(9463),__webpack_require__(2259),__webpack_require__(2008),__webpack_require__(1629),__webpack_require__(3792),__webpack_require__(2712),__webpack_require__(4554),__webpack_require__(1745),__webpack_require__(8309),__webpack_require__(9089),__webpack_require__(739),__webpack_require__(907),__webpack_require__(4170),__webpack_require__(2010),__webpack_require__(6033),__webpack_require__(2892),__webpack_require__(9085),__webpack_require__(6566),__webpack_require__(9432),__webpack_require__(6099),__webpack_require__(3362),__webpack_require__(7764),__webpack_require__(1489),__webpack_require__(1630),__webpack_require__(2170),__webpack_require__(5044),__webpack_require__(1920),__webpack_require__(1694),__webpack_require__(9955),__webpack_require__(3206),__webpack_require__(4496),__webpack_require__(6651),__webpack_require__(2887),__webpack_require__(9369),__webpack_require__(6812),__webpack_require__(8995),__webpack_require__(1575),__webpack_require__(6072),__webpack_require__(8747),__webpack_require__(8845),__webpack_require__(9423),__webpack_require__(7301),__webpack_require__(373),__webpack_require__(6614),__webpack_require__(1405),__webpack_require__(3684),__webpack_require__(3500),__webpack_require__(2953),__webpack_require__(6031),__webpack_require__(346)),s=__webpack_require__(8678),c=__webpack_require__(1531),u=__webpack_require__(8434),l=__webpack_require__(2056),p=function(){function e(e,t,r){this.handlerData={},this.handlerData={},e.addEventHandler=this.addEventHandler.bind(this),e.removeEventHandler=this.removeEventHandler.bind(this)}return e.prototype.addEventHandler=function(e,t){this.handlerData[e]=t},e.prototype.removeEventHandler=function(e){delete this.handlerData[e]},e.prototype.dispatch=function(e,t){for(var r in l.vF.debug("dispatch event: "+e,t||""),this.handlerData){var n=this.handlerData[r][e];n&&n(t)}},e}(),d=function(){};function h(e){this.onOpened=e.onOpened||d,this.onPresence=e.onPresence||d,this.onTextMessage=e.onTextMessage||d,this.onPictureMessage=e.onPictureMessage||d,this.onAudioMessage=e.onAudioMessage||d,this.onVideoMessage=e.onVideoMessage||d,this.onFileMessage=e.onFileMessage||d,this.onLocationMessage=e.onLocationMessage||d,this.onCmdMessage=e.onCmdMessage||d,this.onCustomMessage=e.onCustomMessage||d,this.onReceivedMessage=e.onReceivedMessage||d,this.onDeliveredMessage=e.onDeliveredMessage||d,this.onReadMessage=e.onReadMessage||d,this.onRecallMessage=e.onRecallMessage||d,this.onChannelMessage=e.onChannelMessage||d,this.onError=e.onError||d,this.onOffline=e.onOffline||d,this.onOnline=e.onOnline||d,this.onStatisticMessage=e.onStatisticMessage||d,this.onContactInvited=e.onContactInvited||d,this.onContactAgreed=e.onContactAgreed||d,this.onContactRefuse=e.onContactRefuse||d,this.onContactDeleted=e.onContactDeleted||d,this.onContactAdded=e.onContactAdded||d,this.onTokenWillExpire=e.onTokenWillExpire||d,this.onTokenExpired=e.onTokenExpired||d,this.onClosed=e.onClosed||d,this.onPresenceStatusChange=e.onPresenceStatusChange||d}__webpack_require__(8706),__webpack_require__(5276);var f={biz:"",debug:!1,token:""},m="https://data-reporting.agora.io/report",v="https://data-reporting.sh.agoralab.co/report",y=(__webpack_require__(4423),__webpack_require__(1699),__webpack_require__(75)),g=__webpack_require__(3893),_=function(e){var t=Number(g.S5[e]);return t===g.S5.USER_LOGIN?"MANUALLOGIN":t===g.S5.MSYNC_SENDMESSAGE?"SENDMESSAGE":t>g.S5.UNKNOWOPERATION&&t<g.S5.REST_OPERATE?"REST":t>g.S5.REST_OPERATE&&t<g.S5.MSYNC_OPERATE?"MESSAGE":t>g.S5.MSYNC_OPERATE&&t<g.S5.ROSTER_OPERATE?"ROSTER":t>g.S5.ROSTER_OPERATE&&t<g.S5.USER_OPERATE?"USER":t>g.S5.USER_OPERATE&&t<g.S5.GROUP_OPERATE?"GROUP":t>g.S5.GROUP_OPERATE&&t<g.S5.CHATROOM_OPERATE?"CHATROOM":"OPERATION"},E=function(){return(new Date).getTime()},T=function(e){return[s.i9.BAIDU,s.i9.WX,s.i9.DD,s.i9.ZFB,s.i9.TT,s.i9.QUICK_APP,s.i9.UNI].includes(e.platform)},R=function(){return e=1,t=99999,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e;var e,t},O={},I=(__webpack_require__(2062),function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}),S=1e3,C=function(){function e(e){this.eventQueue=[],this.stock=S,this.config=e,this.governor()}return e.prototype.add=function(e){this.stock<=0?console.warn("Event Report limit ".concat(S," per minute")):(this.eventQueue.push(e),this.consume(),this.stock-=1)},e.prototype.consume=function(){var e=this;0!==this.eventQueue.length&&(this.timer&&this.eventQueue.length<=10&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t,r=e.eventQueue.splice(0,10),n=r.filter((function(e){return e.appId===r[0].appId})),o=r.filter((function(e){return e.appId!==r[0].appId}));(t=e.eventQueue).unshift.apply(t,o),e.batchSend(n)}),1e3))},e.prototype.governor=function(){var e=this,t=setInterval((function(){e.stock=S}),6e4);"undefined"!=typeof addEventListener&&addEventListener("beforeunload",(function(){clearInterval(t)}))},e.prototype.batchSend=function(e){var t,r;if(void 0===e&&(e=[]),0!==e.length)try{var n=e.map((function(e){e.biz,e.appId;var t=e.eventId,r=I(e,["biz","appId","eventId"]);return{eventId:Number(t),body:r}}));!function(e,t){try{var r=t.biz,n=t.appId,o=t.data,i=t.debug,a=t.onSuccess;if(!r)throw new Error("biz is not defined");O.global||(O=s.Wp.getEnvInfo());var c=O;if(T(c)){var u={url:i?v:m,data:o,method:"POST",success:function(){null==a||a()},fail:function(){},complete:function(){}},l={token:e,appid:null!=n?n:"",sendts:"".concat(Math.floor((new Date).getTime()/1e3)),biz:r,debug:"".concat(i)};if("zfb"===c.platform||"dd"===c.platform?u.headers=l:u.header=l,"dd"===c.platform)return c.global.httpRequest(u);c.global.request(u)}else{var p=new XMLHttpRequest;p.onreadystatechange=function(){2===p.readyState&&(null==a||a())},p.open("POST",i?v:m),p.setRequestHeader("Content-Type","application/json"),p.setRequestHeader("token",e),p.setRequestHeader("appid",null!=n?n:""),p.setRequestHeader("sendts","".concat(Math.floor((new Date).getTime()/1e3))),p.setRequestHeader("biz",r),p.setRequestHeader("debug","".concat(i)),p.send(JSON.stringify(o))}}catch(e){console.error(e)}}(this.config.token,{biz:null===(t=e[0])||void 0===t?void 0:t.biz,appId:null===(r=e[0])||void 0===r?void 0:r.appId,data:n,debug:this.config.debug,onSuccess:this.consume.bind(this)})}catch(e){console.error(e)}},e}(),A=function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},b=new(function(){function e(e){this.inited=!1,this.appId="",this.biz="",this.eventQueue={},this.config=f,e&&this.init(e)}return e.prototype.init=function(e){var t;if(void 0===e&&(e={}),!e.biz||!e.token)throw new Error("Event Report: biz or token is not defined");try{this.appId=null!==(t=e.appId)&&void 0!==t?t:"",this.biz=e.biz,this.config=A(A({},f),e),this.eventQueue=new C(this.config),this.log(e),this.inited=!0}catch(e){console.error(e)}},e.prototype.send=function(e,t,r){var n;if(void 0===t&&(t={}),this.inited){var o=A(A({},t),{eventId:Number(e),biz:this.biz,appId:null!==(n=null==r?void 0:r.appId)&&void 0!==n?n:this.appId});this.eventQueue.add(o),this.log(o)}else console.error("Event Report: init is not called")},e.prototype.log=function(e){try{if(this.config.debug){var t=e.payload,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["payload"]);console.log("%c Event Report: ".concat(this.config.biz," "),"background: #8A97FC; color: #fff"),console.table(r),t&&(console.info("payload:"),console.table(t))}}catch(e){console.error(e)}},e}()),N=function(){return N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},N.apply(this,arguments)},M={requestName:"",subrequestid:"1",requestMethod:"GET",requestUrl:"",requestElapse:0,code:0,codeDesc:"",isLastApi:0,isSuccess:1},w=function(){function e(e){this.platform=s.Wp.getEnvInfo(),this.isReportDt=e.isReport||!1,this.isCollectDt=!0,T(this.platform)&&!this.isReportDt&&(this.isCollectDt=!1),this.eventQueue=[],this.accessChannel=y.lM,this.options=function(e,t){t.platform||(t=s.Wp.getEnvInfo());var r=e.org,n=e.appkey,o=e.deviceId,i=e.sdkVersion,a=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||"".concat(t.platform,"_mini_program");return{org:r,appkey:n,deviceId:o,sdkServiceId:"sid_".concat(s.Wp.getUniqueId(),"_").concat(R()),did:a,sdkVersion:i,os:y.Jz,sdkProduct:g.Wz.web}}(e,this.platform),this.sid=this.options.sdkServiceId,this.init(e)}return e.getInstance=function(){return e.instance},e.prototype.getServiceId=function(){return this.sid||"sid_0"},e.prototype.setIsReportDt=function(e){this.isReportDt=e,e&&this.rptEventQueue()},e.prototype.setIsCollectDt=function(e){this.isCollectDt=e,e||(this.eventQueue=[])},e.prototype.rptEventQueue=function(){var e=this;this.eventQueue.length&&this.eventQueue.forEach((function(t,r){b.send(t.eventId,t.dt),r>=e.eventQueue.length-1&&(e.eventQueue=[])}))},e.prototype.init=function(t){e.instance||(e.instance=this,b.init({biz:y.KU,token:y.ey,appId:t.appkey,debug:!1}),this.reportInit())},e.prototype.reportInit=function(){if(this.isCollectDt){var e=this.options,t=e.did,r=e.os,n=e.sdkVersion,o=e.deviceId;this.reportData(y.uN.INIT,{did:t,os:r,sdkVersion:n,deviceId:o})}},e.prototype.geOperateFun=function(e){var t=this;if(!this.isCollectDt)return function(){};var r=1,n=0,o="",i=E(),a=e.uid,c=e.operationName;a&&(this.uid=a);var u={uid:this.uid,operationId:"opr_".concat(s.Wp.getUniqueId(),"_").concat(R()),requestid:"req_".concat(s.Wp.getUniqueId(),"_").concat(R()),operationName:c};return function(e){var a,l,p,d;if(e.data.isSuccess?(n=0,o=""):(0===e.data.code&&(e.data.code=y.XI),n=null!==(a=e.data.code)&&void 0!==a?a:n,o=null!==(l=e.data.codeDesc)&&void 0!==l?l:o),(null===(p=e.data)||void 0===p?void 0:p.accessChannel)&&(t.accessChannel=null===(d=e.data)||void 0===d?void 0:d.accessChannel),e.isRetry?(r++,e.data.subrequestid="".concat(r)):(u.requestid="req_".concat(s.Wp.getUniqueId(),"_").concat(R()),r=1),e.data.isLastApi){var h=E();e.data.requestElapse=h-i,e.data.requestMethod="",e.data.subrequestid="0",e.data.code=200===n?0:n,e.data.codeDesc=o}else e.data.requestName||(e.data.requestName=c);e.data.requestElapse||(e.data.requestElapse=E()-i),t.reportData.call(t,y.uN.API,N(N(N(N({},M),u),e.data),{accessChannel:t.accessChannel,operationType:_(c)})),e.isEndApi&&t.reportData.call(t,y.uN.API,N(N(N({},u),M),{isSuccess:e.data.isSuccess,isLastApi:1,subrequestid:"0",requestMethod:"",code:200===n?0:n,codeDesc:o,requestElapse:e.data.requestElapse,accessChannel:t.accessChannel,operationType:_(c)}))}},e.prototype.reportData=function(e,t){return r=this,n=void 0,i=function(){var r,n,o,i,a,c,u,l;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(p){switch(p.label){case 0:return p.trys.push([0,3,,4]),r=E(),n=0,e!==y.uN.API?[3,2]:[4,(d=this.platform,new Promise((function(e){var t;d.platform||(d=s.Wp.getEnvInfo());var r="";if(d.platform===s.i9.WEB){var n=navigator.connection;(null==n?void 0:n.type)?(null==n||n.type,r=g.z1.WIFI):(null==n?void 0:n.effectiveType)&&(r=g.z1[n.effectiveType.toLocaleUpperCase()]),e(r)}else d.platform===s.i9.NODE?(r=g.z1.UNKNOWN,e(r)):null===(t=d.global)||void 0===t||t.getNetworkType({success:function(t){r=g.z1[t.networkType.toLocaleUpperCase()],e(r)}})})))];case 1:n=p.sent(),p.label=2;case 2:return o=this.options,i=o.appkey,a=o.sdkServiceId,c=o.sdkProduct,u=N({lts:r,net:n,appkey:i,sdkServiceId:a,sdkProduct:c},t),this.isReportDt?b.send(e,u):this.isCollectDt&&this.eventQueue.push({eventId:e,dt:u}),[3,4];case 3:return l=p.sent(),console.warn(l),[3,4];case 4:return[2]}var d}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}c((i=i.apply(r,n||[])).next())}));var r,n,o,i},e}(),U=__webpack_require__(8232),k=__webpack_require__(9359),P=__webpack_require__(846),x=__webpack_require__(308),L=__webpack_require__(8868),D=__webpack_require__(8277),j=__webpack_require__(4667),G=__webpack_require__(6676),B=__webpack_require__(8801),F=function(){return F=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},F.apply(this,arguments)},H=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},W=s.Wp.getEnvInfo(),z="web"===W.platform,q=function(){},K={CLOSED:3,CLOSING:2,CONNECTING:0,OPEN:1},V=function(){function e(t){var r;if(this.name="connection",this.max_cache_length=100,this.unSyncQueue=[],this.lastHeartbeat=Date.now(),this.isDebug=t.isDebug||!1,this.isReport=!1,this.uploadPartEnable=!0,this.isHttpDNS=void 0===t.isHttpDNS?z:t.isHttpDNS,this.heartBeatWait=t.heartBeatWait||3e4,this.autoReconnectNumMax=t.autoReconnectNumMax||5,this.refreshDNSIntervals=this.autoReconnectNumMax<5?this.autoReconnectNumMax:5,this.delivery=t.delivery||!1,this.dnsArr=["https://rs.easemob.com","https://rs.chat.agora.io","http://59.110.89.59","http://39.97.193.190","http://39.97.193.187"],this.dnsIndex=0,this.dnsTotal=this.dnsArr.length,this.restHosts=[],this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.socketHost=[],this.hostTotal=0,this.times=1,this.autoReconnectNumTotal=0,this.domain="easemob.com",this.appKey=t.appKey,this.appName="",this.orgName="",this.token="",this.grantType="",this.apiUrl=t.apiUrl||"",this.url=t.url||"",this.https=t.https||"undefined"!=typeof window&&"https:"===(null===(r=window.location)||void 0===r?void 0:r.protocol),this.version="4.6.0",this.deviceId=t.deviceId||"webim",this.osType=16,this.useOwnUploadFun=t.useOwnUploadFun||!1,this.compressType=[0],this.encryptType=[0],this.clientResource="",this.expiresIn=0,this.expirationTime=0,this.useReplacedMessageContents=t.useReplacedMessageContents||!1,this.logOut=!0,this.context={jid:{appKey:"",clientResource:"",domain:"easemob.com",name:""},userId:"",appKey:"",status:0,restTokenData:"",appName:"",orgName:"",root:{},accessToken:""},this._msgHash={},this._msgPromiseHash={},this._queues=[],this._load_msg_cache=[],this.unMSyncSendMsgMap=new Map,this.mr_cache={},this.closeInfo=null,this.reconnecting=!1,"string"!=typeof this.appKey||2!==this.appKey.split("#").length)throw Error("Illegal appKey: ".concat(this.appKey));this.devInfos=this.appKey.split("#"),this.orgName=this.devInfos[0],this.appName=this.devInfos[1],this.listen=h.bind(this),this.mSync=this.usePlugin(u.A),this.eventHandler=this.usePlugin(p),Object.assign(e.prototype,k),Object.assign(e.prototype,P),Object.assign(e.prototype,x),Object.assign(e.prototype,L),Object.assign(e.prototype,D),Object.assign(e.prototype,j),Object.assign(e.prototype,G),this.dataReport=new w({appkey:this.appKey,org:this.orgName,sdkVersion:this.version,deviceId:this.deviceId,isReport:this.isReport});var n=0,o=this;Object.defineProperty(s.Wp,"ajaxUnconventionalErrorTimes",{set:function(e){0!==e&&(l.vF.debug("rest api request fail times: ".concat(e)),(n=e)%5==0&&this.isHttpDNS&&(l.vF.debug("refresh dns config when rest request fail."),te.call(o,"refresh",{},{})))},get:function(){return n}})}return e.prototype.usePlugin=function(e,t){if(!t)return new e(this);this[t]=new e(this)},e.prototype.listen=function(e){},e.prototype.addEventHandler=function(e,t){},e.prototype.removeEventHandler=function(e){},e.prototype.registerUser=function(e){var t=this;return new Promise((function(r,n){var o=t.dataReport.geOperateFun({uid:e.username,operationName:g.jz.REGISTER});if(t.isHttpDNS){t.dnsIndex=0;var i=F(F({},e),{user:e.username,pwd:e.password,promise:{resolve:r,reject:n}});te.call(t,"signup",i,{rpt:o})}else i=F(F({},e),{promise:{resolve:r,reject:n}}),J.call(t,i,{rpt:o})}))},e.prototype.open=function(e){var t=this;return l.vF.debug("open",e.user),new Promise((function(r,n){if(Z.call(t,e)){e.accessToken&&(t.token=e.accessToken);var o=F(F({},e),{promise:{resolve:r,reject:n}}),i=t.dataReport.geOperateFun({uid:e.user,operationName:g.jz.LOGIN});t.isHttpDNS?te.call(t,"login",o,{rpt:i}):X.call(t,o,{rpt:i})}}))},e.prototype.isOpened=function(){return this.sock&&this.sock.readyState===K.OPEN||!1},e.prototype.close=function(){var e,t,r;this.logOut=!0,this.reconnecting=!1,this.context.status=c.C.STATUS_CLOSING,this.sock&&this.sock.close(),null===(e=this.unMSyncSendMsgMap)||void 0===e||e.clear(),this.stopHeartBeat(),this.rejectMessage(),this.context.status=c.C.STATUS_CLOSED,this._load_msg_cache=[],this._queues=[],this.unSyncQueue=[],this._msgHash={},this.mr_cache={},this.token="",this.context.accessToken="",this.clearTokenTimeout(),null===(r=null===(t=null==this?void 0:this._localCache)||void 0===t?void 0:t.getInstance())||void 0===r||r.close()},e.prototype.downloadAndParseCombineMessage=function(e){var t=this,r=e.url,n=e.secret;return new Promise((function(e,o){var i,a,u=s.Wp.getEnvInfo(),p="web"!==u.platform&&"node"!==u.platform&&"quick_app"!==u.platform&&(null===(a=null===(i=u.global)||void 0===i?void 0:i.canIUse)||void 0===a?void 0:a.call(i,"getFileSystemManager")),d=function(r){var n=function(e){o({type:c.C.PARSE_FILE_ERROR,message:"Read file failed",data:e})},i=function(r){return n=t,i=void 0,u=function(){var t,n,i,a,u,d,h,f,m,v,y,g,_;return H(this,(function(E){switch(E.label){case 0:for(t=p?new Uint8Array(r.data):new Uint8Array(r.target.result),n=0,i=0,a=2,u=t.subarray(n,n+a),d=s.Wp.Uint8ArrayToString(u),l.vF.debug("file header:",d),i+=a,h=0,f=2;f<t.length-1;f++)f%2==1&&(h^=t[f]);if(m=t.subarray(t.length-1,t.length),l.vF.debug("checkResult:",h,m[0]===h),m[0]!==h)return[2,o({type:c.C.PARSE_FILE_ERROR,message:"File verification failed"})];if("cm"!==d)return[3,7];E.label=1;case 1:E.trys.push([1,5,,6]),v=[],y=function(){var e,r,o,s;return H(this,(function(c){switch(c.label){case 0:return n+=a,i+=a=4,e=t.subarray(n,n+a),n+=a,a=e.reduce((function(t,r,n){return t+(r<<8*(e.length-n-1))}),0),i+=a,r=t.subarray(n,n+a),o=(o=g.root.lookup("easemob.pb.Meta")).decode(r),[4,B.A.call(g,o,0,!0,!0)];case 1:return s=c.sent(),v.push(s),[2]}}))},g=this,E.label=2;case 2:return i<t.length-1?[5,y()]:[3,4];case 3:return E.sent(),[3,2];case 4:return[2,e(v)];case 5:return _=E.sent(),o({type:c.C.PARSE_FILE_ERROR,message:"Parse file failed",data:_}),[3,6];case 6:return[3,8];case 7:return[2,o({type:c.C.PARSE_FILE_ERROR,message:"File verification failed"})];case 8:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function r(e){try{s(u.next(e))}catch(e){t(e)}}function o(e){try{s(u.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(r,o)}s((u=u.apply(n,i||[])).next())}));var n,i,a,u};if(p){var a=u.global.getFileSystemManager(),d=r.tempFilePath;a.readFile({filePath:d,success:i,fail:n})}else if(r instanceof Blob){var h=new FileReader;h.readAsArrayBuffer(r),h.onerror=n,h.onload=i}},h=function(e){o({type:c.C.WEBIM_DOWNLOADFILE_ERROR,message:"Download failed, please try again",data:e})};p?u.global.downloadFile({url:r,success:d,fail:h}):s.Wp.download.call(t,{url:r,headers:{Accept:"application/json"},onFileDownloadComplete:d,onFileDownloadError:h,secret:n,accessToken:t.context.accessToken})}))},e.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},e.prototype.clear=function(){this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.hostTotal=0},e.prototype.heartBeat=function(){},e.prototype.renewToken=function(e){var t=this;return this.isOpened()?this.getTokenExpireTimestamp(e).then((function(r){var n=r.expire_timestamp,o=Date.now();return t.expirationTime=n,t.expiresIn=n-o,t.token=e,t.context.accessToken=e,t.clearTokenTimeout(),t.tokenExpireTimeCountDown(t.expiresIn),{status:!0,token:e,expire:n}})):Promise.reject({status:!1})},e.prototype.clearTokenTimeout=function(){l.vF.info("clearTokenTimeout"),this.tokenWillExpireTimer&&clearTimeout(this.tokenWillExpireTimer),this.tokenExpiredTimer&&clearTimeout(this.tokenExpiredTimer),this.tokenWillExpireTimer=null,this.tokenExpiredTimer=null},e.prototype.tokenExpireTimeCountDown=function(e){var t=this;l.vF.info("tokenExpireTimeCountDown",e),e>Math.pow(2,31)-1&&(e=Math.pow(2,31)-1),this.tokenWillExpireTimer=setTimeout((function(){var r;t.onTokenWillExpire&&t.onTokenWillExpire(),null===(r=t.eventHandler)||void 0===r||r.dispatch("onTokenWillExpire"),l.vF.info("onTokenWillExpire",Math.floor(e/2))}),e/2),this.tokenExpiredTimer=setTimeout((function(){var e;l.vF.info("onTokenExpired",0),t.onTokenExpired&&t.onTokenExpired(),null===(e=t.eventHandler)||void 0===e||e.dispatch("onTokenExpired"),t.close()}),e)},e.prototype.compareTokenExpireTime=function(e,t){var r,n=Number(t)-Number(e);l.vF.debug("compareTokenExpireTime",n),n<=this.expiresIn/2&&n>0?(this.onTokenWillExpire&&this.onTokenWillExpire(),null===(r=this.eventHandler)||void 0===r||r.dispatch("onTokenWillExpire"),l.vF.info("onTokenWillExpire",n)):n<=0&&(this.closeByTokenExpired(),l.vF.info("closeByTokenExpired",n))},e.prototype.closeByTokenExpired=function(){var e;l.vF.info("closed By TokenExpired"),this.onTokenExpired&&this.onTokenExpired(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onTokenExpired"),this.close()},e.prototype.rejectMessage=function(){var e=this,t=Object.keys(this._msgHash);if(t.length>0){var r=a.A.create({type:c.C.MESSAGE_WEBSOCKET_DISCONNECTED,message:"websocket disconnected"});t.forEach((function(t){var n,o,i;(null===(n=e.unMSyncSendMsgMap)||void 0===n?void 0:n.has(t))||(e._msgHash[t].reject instanceof Function&&e._msgHash[t].reject(r),null===(i=null===(o=e._localCache)||void 0===o?void 0:o.getInstance())||void 0===i||i.updateLocalMessage(t,{serverMsgId:t,status:U.q.FAIL}),e._msgHash[t].fail instanceof Function&&e._msgHash[t].fail(r),delete e._msgHash[t])}))}},e.prototype.resetConnState=function(){this.mSync.stopHeartBeat(),this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0},e.prototype.reconnect=function(){var e,t=this;this.sock.readyState!==K.CONNECTING&&this.sock.readyState!==K.OPEN&&(l.vF.info("reconnect: time",this.times),l.vF.info("reconnect sock.readyState: ",this.sock.readyState),!1===this.reconnecting&&(this.reconnecting=!0),null===(e=this.eventHandler)||void 0===e||e.dispatch("onReconnecting"),this.rejectMessage(),this.isHttpDNS&&(this.hostIndex<this.socketHost.length-1?this.hostIndex++:this.hostIndex=this.socketHost.length-1),setTimeout((function(){t.sock.readyState!==K.OPEN&&(l.vF.info("login sock.readyState: ",t.sock.readyState),t.sock.close(),$.call(t,{access_token:t.context.accessToken}),t.times++)}),500*this.times),this.autoReconnectNumTotal++)},e.prototype.send=function(e){return Promise.resolve(null)},e._getSock=function(){},e}();function J(e,t){var r=this,n=t.rpt,o=t.isRetry,i=e.promise,u=this.apiUrl+"/"+this.orgName+"/"+this.appName+"/users",l={requestName:g.TT.RESISTER,requestUrl:u},p=e.error||q;if(!this.orgName&&!this.appName){var d=a.A.create({type:c.C.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"signup error"});p(d)}var h={headers:{"Content-type":"application/json"},url:u,dataType:"json",data:JSON.stringify({username:e.username,password:e.password,nickname:e.nickname||""}),success:function(t){e.success&&e.success(t);var r=F(F({},t),{type:c.C.REQUEST_SUCCESS});i.resolve&&i.resolve(r);var a=t.extraInfo,s=a.httpCode,u=a.elapse;n({isEndApi:!0,isRetry:o,data:F(F({},{requestElapse:u,isSuccess:1,code:s}),l)})},error:function(t){var a=t.extraInfo,s=a.elapse,c=a.httpCode,u=a.errDesc;return n({isRetry:o,data:F(F({},{requestElapse:s,isSuccess:0,code:c,codeDesc:u}),l)}),r.isHttpDNS&&r.restIndex+1<r.restTotal?(r.restIndex++,re.call(r),J.call(r,e,{rpt:n,isRetry:o}),Promise.reject(t)):(n({data:{isLastApi:1,isSuccess:0}}),r.clear(),i.reject&&i.reject(t),p(t))}};return s.Wp.ajax(h).catch((function(e){i.reject&&i.reject(e)}))}function X(e,t){var r=this;if(Z.call(this,e)&&!this.isOpened()){var n=t.rpt,o=t.isRetry;ee.call(this,e),this.user=e.user;var i=e.promise,u=this.context.appName,l=this.context.orgName,p=this.apiUrl+"/"+l+"/"+u+"/token";if(e.accessToken)this.grantType="accessToken",this.token=e.accessToken,this.context.accessToken=e.accessToken,this.context.restTokenData=e.accessToken,i.resolve({accessToken:e.accessToken}),$.call(this,e,n);else if(e.agoraToken)this.grantType="agoraToken",this.token=e.agoraToken,this.context.accessToken=e.agoraToken,this.context.restTokenData=e.agoraToken,i.resolve({accessToken:e.agoraToken}),$.call(this,e,n);else{this.grantType="password";var d={grant_type:"password",username:e.user,password:e.pwd,timestamp:+new Date},h=JSON.stringify(d),f={headers:{"Content-type":"application/json"},url:p,dataType:"json",data:h,success:function(t){"function"==typeof e.success&&e.success(t),r.token=t.access_token,r.context.restTokenData=t.access_token,r.context.accessToken=t.access_token,r.expiresIn=t.expires_in,i.resolve({accessToken:t.access_token,duration:t.expires_in});var a=t.extraInfo,s=a.httpCode,c=a.elapse,u={requestName:g.TT.LOGIN_BY_PWD,requestElapse:c,requestUrl:p,isSuccess:1,code:s};n({isRetry:o,data:u}),$.call(r,t,n)}||q,error:function(t){var s,u=t.extraInfo,l=u.elapse,d=u.httpCode,h=u.errDesc,f={requestName:g.TT.LOGIN_BY_PWD,requestElapse:l,requestUrl:p,isSuccess:0,code:d,codeDesc:h};if(n({isRetry:o,data:f}),r.isHttpDNS&&r.restIndex+1<r.restTotal)return r.restIndex++,re.call(r),void X.call(r,e,{rpt:n,isRetry:!0});n({data:{isLastApi:1,isSuccess:0}}),r.clear(),t.error&&t.error_description?(s=a.A.create({type:c.C.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,message:t.error_description,data:t}),r.onError&&r.onError(s)):(s=a.A.create({type:c.C.WEBIM_CONNCTION_OPEN_ERROR,message:t.error_description,data:t}),r.onError&&r.onError(s)),"function"==typeof e.error&&e.error(s),i.reject(s)}||q,version:"4.3.0"};s.Wp.ajax(f).catch((function(e){console.warn(e)}))}s.Wp.listenNetwork(Y.bind(this),Q.bind(this))}}function Y(){var e;l.vF.debug("online"),this.onOnline&&this.onOnline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOnline"),this.sock&&1!==this.sock.readyState&&(l.vF.debug("sock.readyState:",this.sock.readyState),this.logOut||this.reconnecting||this.reconnect())}function Q(){var e,t;l.vF.debug("offline"),null===(e=this.sock)||void 0===e||e.close(),this.onOffline&&this.onOffline(),null===(t=this.eventHandler)||void 0===t||t.dispatch("onOffline")}function $(e,t){var r=this,n=this._getSock();this.sock=n;var o=function(){var e;l.vF.debug("websocket onOpen"),t&&t({data:{isLastApi:1,isSuccess:1,accessChannel:null===(e=r.socketHost[r.hostIndex])||void 0===e?void 0:e.channel}});var o=s.Wp.flow([r.mSync.generateProvision,r.mSync.base64transform])();try{n.send(o)}catch(e){var i=a.A.create({type:c.C.SDK_RUNTIME_ERROR,message:"send message error",data:e});r.onError&&r.onError(i)}},i=function(e){setTimeout((function(){var t,n,o,i,a,s,u,p,d,h,f,m;l.vF.debug("websocket onClose"),"zfb"!==W.platform&&"dd"!==W.platform||(r.sock.readyState=K.CLOSED);var v=401===(null==e?void 0:e.code)||401===(null===(t=r.closeInfo)||void 0===t?void 0:t.code);if(r.logOut)r.clear(),r.resetConnState(),v&&(l.vF.debug("websocket provision error"),r.closeInfo=null),null===(o=null===(n=null==r?void 0:r._localCache)||void 0===n?void 0:n.getInstance())||void 0===o||o.close(),r.onClosed&&r.onClosed(),null===(i=r.eventHandler)||void 0===i||i.dispatch("onDisconnected");else if(v){l.vF.debug("websocket provision error");var y={type:c.C.WEBIM_CONNECTION_ERROR,message:"provision error",data:e};r.closeInfo=null,r.onError&&r.onError(y),null===(a=r.eventHandler)||void 0===a||a.dispatch("onError",y),null===(u=null===(s=null==r?void 0:r._localCache)||void 0===s?void 0:s.getInstance())||void 0===u||u.close(),r.onClosed&&r.onClosed(),null===(p=r.eventHandler)||void 0===p||p.dispatch("onDisconnected"),r.resetConnState()}else if(r.autoReconnectNumTotal<r.autoReconnectNumMax){r.reconnect();var g={type:c.C.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};r.onError&&r.onError(g),r.autoReconnectNumTotal%r.refreshDNSIntervals==0&&"web"===W.platform&&r.isHttpDNS&&(l.vF.debug("refresh dns config when websocket close"),te.call(r,"refresh",{},{}))}else null===(d=r.unMSyncSendMsgMap)||void 0===d||d.clear(),r.rejectMessage(),g={type:c.C.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"},r.onError&&r.onError(g),null===(f=null===(h=null==r?void 0:r._localCache)||void 0===h?void 0:h.getInstance())||void 0===f||f.close(),r.onClosed&&r.onClosed(),null===(m=r.eventHandler)||void 0===m||m.dispatch("onDisconnected"),r.resetConnState(),r.reconnecting=!1,l.vF.debug("reconnect fail")}),0)},u=function(e){var t=r.mSync,n=t.decodeMSync,o=t.distributeMSync;s.Wp.flow([n,o])(e)};"web"===W.platform?(n.onopen=o,n.onclose=i,n.onmessage=u):(n.onOpen(o),n.onMessage(u),n.onClose(i),"undefined"!=typeof window&&window.WebSocket||n.onError((function(e){var n,o,i,a,s;if(l.vF.debug("mini program sock on error",e),r.sock.readyState!==K.CLOSED&&(r.sock=F(F({},r.sock),{readyState:K.CLOSED})),r.onError&&r.onError({type:c.C.WEBIM_CONNECTION_ERROR,message:"on socket error",data:e}),!r.logOut)if(r.autoReconnectNumTotal<r.autoReconnectNumMax)l.vF.debug("sock.onError reconnect",r.autoReconnectNumTotal,r.autoReconnectNumMax),r.reconnect(),r.autoReconnectNumTotal%r.refreshDNSIntervals==0&&"web"===W.platform&&r.isHttpDNS&&(l.vF.debug("refresh dns config when websocket error"),te.call(r,"refresh",{},{}));else{var u={type:c.C.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};null===(n=r.unMSyncSendMsgMap)||void 0===n||n.clear(),r.rejectMessage(),r.onError&&r.onError(u),null===(i=null===(o=null==r?void 0:r._localCache)||void 0===o?void 0:o.getInstance())||void 0===i||i.close(),r.onClosed&&r.onClosed(),null===(a=r.eventHandler)||void 0===a||a.dispatch("onDisconnected"),r.resetConnState(),r.reconnecting=!1,l.vF.debug("reconnect fail")}t&&t({data:{isLastApi:1,isSuccess:0,accessChannel:null===(s=r.socketHost[r.hostIndex])||void 0===s?void 0:s.channel}})})))}function Z(e){if(!e.user||"string"!=typeof e.user){var t=a.A.create({type:c.C.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR,message:"the user cannot be empty"});return l.vF.debug("open params error",t),this.onError&&this.onError(t),!1}return!(2!==this.devInfos.length||!this.orgName||!this.appName)||(t=a.A.create({type:c.C.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"the appKey is illegal"}),l.vF.debug("open params error",t),this.onError&&this.onError(t),!1)}function ee(e){this.context.jid={appKey:this.appKey,name:e.user,domain:this.domain,clientResource:this.clientResource},this.context.root=this.root,this.context.userId=e.user,this.context.appKey=this.appKey,this.context.appName=this.appName,this.context.orgName=this.orgName}function te(e,t,r){var n=this,o=r.rpt,i=r.isRetry,a=this.dnsArr[this.dnsIndex]+"/easemob/server.json",c={url:a,dataType:"json",type:"GET",data:{app_key:encodeURIComponent(this.appKey)},success:function(r){var s=r.extraInfo,c=s.elapse,u=s.httpCode,p={requestUrl:a,requestName:g.TT.GET_DNS,requestElapse:c,isSuccess:1,code:u};"true"===(null==r?void 0:r.enableDataReport)?(n.dataReport.setIsCollectDt(!0),n.dataReport.setIsReportDt(!0)):(n.dataReport.setIsReportDt(!1),n.dataReport.setIsCollectDt(!1)),"false"===(null==r?void 0:r.uploadinparts_enable)&&(n.uploadPartEnable=!1),o&&o({isRetry:i,data:p});var d=r.rest.hosts,h=n.https?"https":"http";if(l.vF.info("httpType: "+h),!d)return Promise.reject(!1);for(var f=d.filter((function(e){if(e.protocol===h)return e})),m=0;m<f.length;m++)if(f[m].protocol===h){var v=f[m];f.splice(m,1),f.unshift(v)}n.restHosts=f,n.restTotal=f.length;var y=r["msync-ws"].hosts;if(!y)return Promise.reject(!1);var _=y.filter((function(e){return e.protocol===h&&e}));n.socketHost=_,n.hostTotal=_.length,re.call(n),"refresh"!==e&&("login"===e?X.call(n,t,{rpt:o}):J.call(n,t,{rpt:o}))}||q,error:function(r){var s=r.extraInfo,c=s.elapse,u=s.httpCode,p=s.errDesc,d={requestUrl:a,requestName:g.TT.GET_DNS,isSuccess:0,code:u,codeDesc:p,requestElapse:c};o&&o({isRetry:i,data:d}),l.vF.debug("getHttpDNS fail: "+n.dnsIndex),n.dnsIndex++,n.dnsIndex<n.dnsTotal&&te.call(n,e,t,{rpt:o,isRetry:!0})}||q};return s.Wp.ajax(c).catch((function(e){console.warn(e)}))}function re(){var e,t;if(this.restIndex>this.restTotal)return l.vF.debug("restIndex > restTotal"),"";var r="",n=this.restHosts[this.restIndex],o=n.domain,i=n.ip,a=n.port,s=this.https?"https:":"http:";return i&&"undefined"!=typeof window&&"http:"===(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.protocol)?r=s+"//"+i+":"+a:(r=s+"//"+o,a&&"80"!==a&&"443"!==a&&(r+=":".concat(a)),"undefined"==typeof window||window.location||(r="https://"+o),"undefined"!=typeof window&&window.location&&"file:"===(null===(t=window.location)||void 0===t?void 0:t.protocol)&&(r="https://"+o)),"undefined"==typeof window&&(r=s+"//"+o),this.apiUrl=r,r}var ne=__webpack_require__(7517);n().util.Long=i(),n().configure();var oe=n().Root.fromJSON({nested:{easemob:{nested:{pb:{nested:{MessageBody:{fields:{type:{type:"Type",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},contents:{rule:"repeated",type:"Content",id:4},ext:{rule:"repeated",type:"KeyValue",id:5},ackMessageId:{type:"uint64",id:6},msgConfig:{type:"MessageConfig",id:7},ackContent:{type:"string",id:8},meta:{type:"string",id:9},editMessageId:{type:"uint64",id:11}},nested:{Content:{fields:{type:{type:"Type",id:1},text:{type:"string",id:2},latitude:{type:"double",id:3},longitude:{type:"double",id:4},address:{type:"string",id:5},displayName:{type:"string",id:6},remotePath:{type:"string",id:7},secretKey:{type:"string",id:8},fileLength:{type:"int32",id:9},action:{type:"string",id:10},params:{rule:"repeated",type:"KeyValue",id:11},duration:{type:"int32",id:12},size:{type:"Size",id:13},thumbnailRemotePath:{type:"string",id:14},thumbnailSecretKey:{type:"string",id:15},thumbnailDisplayName:{type:"string",id:16},thumbnailFileLength:{type:"int32",id:17},thumbnailSize:{type:"Size",id:18},customEvent:{type:"string",id:19},customExts:{rule:"repeated",type:"KeyValue",id:20},buildingName:{type:"string",id:21},subType:{type:"SubType",id:22},title:{type:"string",id:23},summary:{type:"string",id:24},combineLevel:{type:"int32",id:25}},nested:{Type:{values:{TEXT:0,IMAGE:1,VIDEO:2,LOCATION:3,VOICE:4,FILE:5,COMMAND:6,CUSTOM:7,COMBINE:8}},Size:{fields:{width:{type:"double",id:1},height:{type:"double",id:2}}},SubType:{values:{COMBINE:0}}}},Type:{values:{NORMAL:0,CHAT:1,GROUPCHAT:2,CHATROOM:3,READ_ACK:4,DELIVER_ACK:5,RECALL:6,CHANNEL_ACK:7,EDIT:8}},MessageConfig:{fields:{allowGroupAck:{type:"bool",id:1}}}}},KeyValue:{oneofs:{value:{oneof:["varintValue","floatValue","doubleValue","stringValue"]}},fields:{key:{type:"string",id:1},type:{type:"ValueType",id:2},varintValue:{type:"int64",id:3},floatValue:{type:"float",id:4},doubleValue:{type:"double",id:5},stringValue:{type:"string",id:6}},nested:{ValueType:{values:{BOOL:1,INT:2,UINT:3,LLINT:4,FLOAT:5,DOUBLE:6,STRING:7,JSON_STRING:8}}}},JID:{fields:{appKey:{type:"string",id:1},name:{type:"string",id:2},domain:{type:"string",id:3},clientResource:{type:"string",id:4}}},ConferenceBody:{fields:{sessionId:{type:"string",id:1},operation:{type:"Operation",id:2},conferenceId:{type:"string",id:3},type:{type:"Type",id:4},content:{type:"string",id:5},network:{type:"string",id:6},version:{type:"string",id:7},identity:{type:"Identity",id:8},duration:{type:"string",id:9},peerName:{type:"string",id:10},endReason:{type:"EndReason",id:11},status:{type:"Status",id:12},isDirect:{type:"bool",id:13},controlType:{type:"StreamControlType",id:14},routeFlag:{type:"int32",id:15},routeKey:{type:"string",id:16}},nested:{Status:{fields:{errorCode:{type:"int32",id:1}}},Operation:{values:{JOIN:0,INITIATE:1,ACCEPT_INITIATE:2,ANSWER:3,TERMINATE:4,REMOVE:5,STREAM_CONTROL:6,MEDIA_REQUEST:7}},Type:{values:{VOICE:0,VIDEO:1}},Identity:{values:{CALLER:0,CALLEE:1}},EndReason:{values:{HANGUP:0,NORESPONSE:1,REJECT:2,BUSY:3,FAIL:4,UNSUPPORTED:5,OFFLINE:6}},StreamControlType:{values:{PAUSE_VOICE:0,RESUME_VOICE:1,PAUSE_VIDEO:2,RESUME_VIDEO:3}}}},MSync:{fields:{version:{type:"Version",id:1,options:{default:"MSYNC_V1"}},guid:{type:"JID",id:2},auth:{type:"string",id:3},compressAlgorimth:{type:"uint32",id:4},crypto:{type:"uint32",id:5},userAgent:{type:"string",id:6},pov:{type:"uint64",id:7},command:{type:"Command",id:8},deviceId:{type:"uint32",id:10},encryptType:{rule:"repeated",type:"EncryptType",id:11,options:{packed:!1}},encryptKey:{type:"string",id:12},payload:{type:"bytes",id:9}},nested:{Version:{values:{MSYNC_V1:0,MSYNC_V2:1}},Command:{values:{SYNC:0,UNREAD:1,NOTICE:2,PROVISION:3}}}},EncryptType:{values:{ENCRYPT_NONE:0,ENCRYPT_AES_128_CBC:1,ENCRYPT_AES_256_CBC:2}},CommSyncUL:{fields:{meta:{type:"Meta",id:1},key:{type:"uint64",id:2},queue:{type:"JID",id:3},isRoam:{type:"bool",id:4},lastFullRoamKey:{type:"uint64",id:5}}},CommSyncDL:{fields:{status:{type:"Status",id:1},metaId:{type:"uint64",id:2},serverId:{type:"uint64",id:3},metas:{rule:"repeated",type:"Meta",id:4},nextKey:{type:"uint64",id:5},queue:{type:"JID",id:6},isLast:{type:"bool",id:7},timestamp:{type:"uint64",id:8},isRoam:{type:"bool",id:9}}},CommNotice:{fields:{queue:{type:"JID",id:1}}},CommUnreadUL:{fields:{}},CommUnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"MetaQueue",id:2},timestamp:{type:"uint64",id:3}}},MetaQueue:{fields:{queue:{type:"JID",id:1},n:{type:"uint32",id:2}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6},routetype:{type:"RouteType",id:7},ext:{rule:"repeated",type:"KeyValue",id:8},meta:{type:"bytes",id:9},directedUsers:{rule:"repeated",type:"string",id:10}},nested:{NameSpace:{values:{STATISTIC:0,CHAT:1,MUC:2,ROSTER:3,CONFERENCE:4,NOTIFY:5,QUERY:6}},RouteType:{values:{ROUTE_ALL:0,ROUTE_ONLINE:1,ROUTE_DIRECT:2}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},reason:{type:"string",id:2},redirectInfo:{rule:"repeated",type:"RedirectInfo",id:3}},nested:{ErrorCode:{values:{OK:0,FAIL:1,UNAUTHORIZED:2,MISSING_PARAMETER:3,WRONG_PARAMETER:4,REDIRECT:5,TOKEN_EXPIRED:6,PERMISSION_DENIED:7,NO_ROUTE:8,UNKNOWN_COMMAND:9,PB_PARSER_ERROR:10,BIND_ANOTHER_DEVICE:11,IM_FORBIDDEN:12,TOO_MANY_DEVICES:13,PLATFORM_LIMIT:14,USER_MUTED:15,ENCRYPT_DISABLE:16,ENCRYPT_ENABLE:17,DECRYPT_FAILURE:18,PERMISSION_DENIED_EXTERNAL:19}}}},RedirectInfo:{fields:{host:{type:"string",id:1},port:{type:"uint32",id:2}}},Provision:{fields:{osType:{type:"OsType",id:1},version:{type:"string",id:2},networkType:{type:"NetworkType",id:3},appSign:{type:"string",id:4},compressType:{rule:"repeated",type:"CompressType",id:5,options:{packed:!1}},encryptType:{rule:"repeated",type:"EncryptType",id:6,options:{packed:!1}},encryptKey:{type:"string",id:7},status:{type:"Status",id:8},deviceUuid:{type:"string",id:9},isManualLogin:{type:"bool",id:10},password:{type:"string",id:11},deviceName:{type:"string",id:12},resource:{type:"string",id:13},auth:{type:"string",id:14},serviceId:{type:"string",id:16},actionVersion:{type:"string",id:17},authToken:{type:"string",id:18}},nested:{OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}},CompressType:{values:{COMPRESS_NONE:0,COMPRESS_ZLIB:1}}}},MUCBody:{fields:{mucId:{type:"JID",id:1},operation:{type:"Operation",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},setting:{type:"Setting",id:5},reason:{type:"string",id:6},isChatroom:{type:"bool",id:7},status:{type:"Status",id:8},isThread:{type:"bool",id:9},mucParentId:{type:"JID",id:10},mucName:{type:"string",id:11},eventInfo:{type:"EventInfo",id:12},mucMemberCount:{type:"int32",id:13}},nested:{Operation:{values:{CREATE:0,DESTROY:1,JOIN:2,LEAVE:3,APPLY:4,APPLY_ACCEPT:5,APPLY_DECLINE:6,INVITE:7,INVITE_ACCEPT:8,INVITE_DECLINE:9,KICK:10,GET_BLACKLIST:11,BAN:12,ALLOW:13,UPDATE:14,BLOCK:15,UNBLOCK:16,PRESENCE:17,ABSENCE:18,DIRECT_JOINED:19,ASSIGN_OWNER:20,ADD_ADMIN:21,REMOVE_ADMIN:22,ADD_MUTE:23,REMOVE_MUTE:24,UPDATE_ANNOUNCEMENT:25,DELETE_ANNOUNCEMENT:26,UPLOAD_FILE:27,DELETE_FILE:28,ADD_USER_WHITE_LIST:29,REMOVE_USER_WHITE_LIST:30,BAN_GROUP:31,REMOVE_BAN_GROUP:32,THREAD_CREATE:33,THREAD_DESTROY:34,THREAD_JOIN:35,THREAD_LEAVE:36,THREAD_KICK:37,THREAD_UPDATE:38,THREAD_PRESENCE:39,THREAD_ABSENCE:40,DISABLE_GROUP:41,ABLE_GROUP:42,SET_METADATA:43,DELETE_METADATA:44,GROUP_MEMBER_METADATA_UPDATE:45}},Setting:{fields:{name:{type:"string",id:1},desc:{type:"string",id:2},type:{type:"Type",id:3},maxUsers:{type:"int32",id:4},owner:{type:"string",id:5}},nested:{Type:{values:{PRIVATE_OWNER_INVITE:0,PRIVATE_MEMBER_INVITE:1,PUBLIC_JOIN_APPROVAL:2,PUBLIC_JOIN_OPEN:3,PUBLIC_ANONYMOUS:4}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,PERMISSION_DENIED:1,WRONG_PARAMETER:2,MUC_NOT_EXIST:3,USER_NOT_EXIST:4,UNKNOWN:5}}}},EventInfo:{fields:{eventType:{type:"EventType",id:1,options:{default:"EVENT_NONE"}},ext:{type:"string",id:2}},nested:{EventType:{values:{EVENT_NONE:0,CIRCLE_CHANNEL:1}}}}}},RosterBody:{fields:{operation:{type:"Operation",id:1},status:{type:"Status",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},reason:{type:"string",id:5},rosterVer:{type:"string",id:6},biDirection:{type:"bool",id:7}},nested:{Operation:{values:{GET_ROSTER:0,GET_BLACKLIST:1,ADD:2,REMOVE:3,ACCEPT:4,DECLINE:5,BAN:6,ALLOW:7,REMOTE_ACCEPT:8,REMOTE_DECLINE:9}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,USER_NOT_EXIST:1,USER_ALREADY_FRIEND:2,USER_ALREADY_BLACKLIST:3}}}}}},StatisticsBody:{fields:{operation:{type:"Operation",id:1},os:{type:"OsType",id:2},version:{type:"string",id:3},network:{type:"NetworkType",id:4},imTime:{type:"uint32",id:5},chatTime:{type:"uint32",id:6},location:{type:"string",id:7}},nested:{Operation:{values:{INFORMATION:0,USER_REMOVED:1,USER_LOGIN_ANOTHER_DEVICE:2,USER_KICKED_BY_CHANGE_PASSWORD:3,USER_KICKED_BY_OTHER_DEVICE:4}},OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}}}}}}}}}});V.prototype.root=oe;var ie=l.vF.getLogger("defaultLogger");ie.setConfig({useCache:!1,maxCache:3145728,color:"",background:""}),ie.enableAll(),V.prototype._getSock=function(){if(this.isHttpDNS){var e=this.socketHost[this.hostIndex];if(!e)throw this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0,this.onClosed&&this.onClosed(),new Error("No connected domain name when get websocket.");var r=e.domain,n=e.ip,o="",i=e.port;o=r||n,i&&"80"!==i&&"443"!==i&&(o+=":"+i),o&&(this.url="//"+o+"/ws");var a=this.https?"https:":"http:";this.url=a+this.url}return new(t())(this.url,null,{timeout:3e4})},V.prototype.getUniqueId=s.Wp.getUniqueId;var ae={connection:V,message:ne.Message,utils:s.Wp,logger:ie,statusCode:c.C};"undefined"!=typeof window&&(window.WebIM=ae);var se=ae}(),__webpack_exports__}()}));